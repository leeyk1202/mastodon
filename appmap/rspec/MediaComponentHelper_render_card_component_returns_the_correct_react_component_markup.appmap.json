{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"MediaComponentHelper render_card_component returns the correct react component markup","source_location":"spec/helpers/media_component_helper_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"helpers","type":"package","children":[{"name":"MediaComponentHelper","type":"class","children":[{"name":"render_card_component","type":"function","location":"app/helpers/media_component_helper.rb:60","static":false}]},{"name":"RoutingHelper","type":"class","children":[{"name":"full_asset_url","type":"function","location":"app/helpers/routing_helper.rb:17","static":false},{"name":"use_storage?","type":"function","location":"app/helpers/routing_helper.rb:31","static":false},{"name":"asset_host","type":"function","location":"app/helpers/routing_helper.rb:23","static":false}]},{"name":"REST","type":"class","children":[{"name":"PreviewCardSerializer","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]},{"name":"ReactComponentHelper","type":"class","children":[{"name":"react_component","type":"function","location":"app/helpers/react_component_helper.rb:4","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Status","type":"class","children":[{"name":"preview_card","type":"function","location":"app/models/status.rb:228","static":false}]},{"name":"PreviewCard","type":"class","children":[{"name":"local?","type":"function","location":"app/models/preview_card.rb:101","static":false}]}]},{"name":"serializers/rest","type":"package","children":[{"name":"REST","type":"class","children":[{"name":"PreviewCardSerializer","type":"class","children":[{"name":"html","type":"function","location":"app/serializers/rest/preview_card_serializer.rb:15","static":false},{"name":"image","type":"function","location":"app/serializers/rest/preview_card_serializer.rb:11","static":false}]}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"lib/paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false}]}]}]}],"events":[{"id":1095560,"event":"call","thread_id":9160,"defined_class":"MediaComponentHelper","method_id":"render_card_component","path":"app/helpers/media_component_helper.rb","lineno":60,"static":false,"parameters":[{"name":"status","class":"Status","object_id":6370340,"value":"#<Status:0x00007fc931b9f738>","kind":"req"},{"name":"options","class":"Hash","object_id":6370460,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"ActionView::Base","object_id":6370440,"value":"#<#<Class:0x00007fc919b551f0>:0x00007fc930da3ad0>"}},{"id":1095561,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"preview_card","path":"app/models/status.rb","lineno":228,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":6370340,"value":"#<Status:0x00007fc931b9f738>"}},{"id":1095562,"event":"return","thread_id":9160,"parent_id":1095561,"elapsed":0.0001729519572108984,"elapsed_instrumentation":0.00017345399828627706,"return_value":{"class":"PreviewCard","value":"#<PreviewCard:0x00007fc930da3990>","object_id":6370320}},{"id":1095563,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6370520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f070>"}},{"id":1095564,"event":"return","thread_id":9160,"parent_id":1095563,"elapsed":6.841961294412613e-06,"elapsed_instrumentation":0.00024690100690349936,"return_value":{"class":"Array","value":"[]","object_id":326200,"size":0}},{"id":1095565,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6370520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f0c0>"}},{"id":1095566,"event":"return","thread_id":9160,"parent_id":1095565,"elapsed":5.23001654073596e-06,"elapsed_instrumentation":0.00016385398339480162,"return_value":{"class":"Array","value":"[]","object_id":326240,"size":0}},{"id":1095567,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"html","path":"app/serializers/rest/preview_card_serializer.rb","lineno":15,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095568,"event":"return","thread_id":9160,"parent_id":1095567,"elapsed":0.0002665779902599752,"elapsed_instrumentation":0.00019079295452684164,"return_value":{"class":"String","value":"","object_id":6370560}},{"id":1095569,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"image","path":"app/serializers/rest/preview_card_serializer.rb","lineno":11,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095570,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6370280,"value":"/system/cache/preview_cards/images/000/000/169/original/attachment.jpg"}},{"id":1095571,"event":"return","thread_id":9160,"parent_id":1095570,"elapsed":3.0491966754198074e-05,"elapsed_instrumentation":0.0005528129986487329,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1095572,"event":"call","thread_id":9160,"defined_class":"PreviewCard","method_id":"local?","path":"app/models/preview_card.rb","lineno":101,"static":false,"parameters":[],"receiver":{"class":"PreviewCard","object_id":6370320,"value":"#<PreviewCard:0x00007fc930da3990>"}},{"id":1095573,"event":"return","thread_id":9160,"parent_id":1095572,"elapsed":4.362023901194334e-06,"elapsed_instrumentation":0.00017124396981671453},{"id":1095574,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"full_asset_url","path":"app/helpers/routing_helper.rb","lineno":17,"static":false,"parameters":[{"name":"source","class":"String","object_id":6370580,"value":"/system/cache/preview_cards/images/000/000/169/original/attachment.jpg","kind":"req"},{"name":"options","class":"Hash","object_id":6370600,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095575,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"use_storage?","path":"app/helpers/routing_helper.rb","lineno":31,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095576,"event":"return","thread_id":9160,"parent_id":1095575,"elapsed":2.1576008293777704e-05,"elapsed_instrumentation":0.0002893269993364811},{"id":1095577,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"asset_host","path":"app/helpers/routing_helper.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095578,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095579,"event":"return","thread_id":9160,"parent_id":1095578,"elapsed":5.826994311064482e-06,"elapsed_instrumentation":0.00023033097386360168,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":1095580,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":6370540,"value":"#<REST::PreviewCardSerializer:0x00007fc931567910>"}},{"id":1095581,"event":"return","thread_id":9160,"parent_id":1095580,"elapsed":5.204987246543169e-06,"elapsed_instrumentation":0.0001539510558359325,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":1095582,"event":"return","thread_id":9160,"parent_id":1095577,"elapsed":0.0006393489893525839,"elapsed_instrumentation":0.0001177270314656198,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/","object_id":6370620}},{"id":1095583,"event":"return","thread_id":9160,"parent_id":1095574,"elapsed":0.0015754210180602968,"elapsed_instrumentation":0.0002856800565496087,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/system/cache/preview_cards/images/000/000/169/original/attachment.jpg","object_id":6370640}},{"id":1095584,"event":"return","thread_id":9160,"parent_id":1095569,"elapsed":0.0034575769677758217,"elapsed_instrumentation":0.00010348903015255928,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/system/cache/preview_cards/images/000/000/169/original/attachment.jpg","object_id":6370640}},{"id":1095585,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6370520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f0c0>"}},{"id":1095586,"event":"return","thread_id":9160,"parent_id":1095585,"elapsed":5.379959475249052e-06,"elapsed_instrumentation":0.0001467530382797122,"return_value":{"class":"Array","value":"[]","object_id":328060,"size":0}},{"id":1095587,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6370520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f070>"}},{"id":1095588,"event":"return","thread_id":9160,"parent_id":1095587,"elapsed":3.163993824273348e-06,"elapsed_instrumentation":0.00010656204540282488,"return_value":{"class":"Array","value":"[]","object_id":328080,"size":0}},{"id":1095589,"event":"call","thread_id":9160,"defined_class":"ReactComponentHelper","method_id":"react_component","path":"app/helpers/react_component_helper.rb","lineno":4,"static":false,"parameters":[{"name":"name","class":"Symbol","object_id":19331228,"value":":card","kind":"req"},{"name":"props","class":"Hash","object_id":6370660,"value":"{:sensitive=>false, :card=>{:url=>http://von.test/berry.lebsack, :title=>Qui sequi velit error., :description=>Est error ad. Corrupti et omnis. Reiciendis provident consequatur., :language=>, :type=>link, :author_name=>, :author_url=>, :provider_name=>, :provider_url=>, :html=> (...7 more entries)}}","kind":"opt","size":2},{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"ActionView::Base","object_id":6370440,"value":"#<#<Class:0x00007fc919b551f0>:0x00007fc930da3ad0>"}},{"id":1095590,"event":"return","thread_id":9160,"parent_id":1095589,"elapsed":0.00016022002091631293,"elapsed_instrumentation":0.0004896799218840897,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<div data-component=\"Card\" data-props=\"{&quot;sensitive&quot;:false,&quot;card&quot;:{&quot;url&quot (...754 more characters)","object_id":6370680}},{"id":1095591,"event":"return","thread_id":9160,"parent_id":1095560,"elapsed":0.007400083995889872,"elapsed_instrumentation":0.0004562700050882995,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<div data-component=\"Card\" data-props=\"{&quot;sensitive&quot;:false,&quot;card&quot;:{&quot;url&quot (...754 more characters)","object_id":6370680}}]}