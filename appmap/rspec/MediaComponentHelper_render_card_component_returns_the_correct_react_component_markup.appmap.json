{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"MediaComponentHelper render_card_component returns the correct react component markup","source_location":"spec/helpers/media_component_helper_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"helpers","type":"package","children":[{"name":"MediaComponentHelper","type":"class","children":[{"name":"render_card_component","type":"function","location":"app/helpers/media_component_helper.rb:60","static":false}]},{"name":"RoutingHelper","type":"class","children":[{"name":"full_asset_url","type":"function","location":"app/helpers/routing_helper.rb:17","static":false},{"name":"use_storage?","type":"function","location":"app/helpers/routing_helper.rb:31","static":false},{"name":"asset_host","type":"function","location":"app/helpers/routing_helper.rb:23","static":false}]},{"name":"REST","type":"class","children":[{"name":"PreviewCardSerializer","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]},{"name":"ReactComponentHelper","type":"class","children":[{"name":"react_component","type":"function","location":"app/helpers/react_component_helper.rb:4","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Status","type":"class","children":[{"name":"preview_card","type":"function","location":"app/models/status.rb:228","static":false}]},{"name":"PreviewCard","type":"class","children":[{"name":"local?","type":"function","location":"app/models/preview_card.rb:101","static":false}]}]},{"name":"serializers/rest","type":"package","children":[{"name":"REST","type":"class","children":[{"name":"PreviewCardSerializer","type":"class","children":[{"name":"html","type":"function","location":"app/serializers/rest/preview_card_serializer.rb:15","static":false},{"name":"image","type":"function","location":"app/serializers/rest/preview_card_serializer.rb:11","static":false}]}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"lib/paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false}]}]}]}],"events":[{"id":1625105,"event":"call","thread_id":9160,"defined_class":"MediaComponentHelper","method_id":"render_card_component","path":"app/helpers/media_component_helper.rb","lineno":60,"static":false,"parameters":[{"name":"status","class":"Status","object_id":8763060,"value":"#<Status:0x00007fdc06d997b8>","kind":"req"},{"name":"options","class":"Hash","object_id":8763180,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"ActionView::Base","object_id":8763160,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdc06deba40>"}},{"id":1625106,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"preview_card","path":"app/models/status.rb","lineno":228,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8763060,"value":"#<Status:0x00007fdc06d997b8>"}},{"id":1625107,"event":"return","thread_id":9160,"parent_id":1625106,"elapsed":0.00017631499213166535,"elapsed_instrumentation":0.0004187630256637931,"return_value":{"class":"PreviewCard","value":"#<PreviewCard:0x00007fdc06deb900>","object_id":8763040}},{"id":1625108,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":8763240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":211280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0dc73f30>"}},{"id":1625109,"event":"return","thread_id":9160,"parent_id":1625108,"elapsed":4.806992365047336e-06,"elapsed_instrumentation":0.00023152498761191964,"return_value":{"class":"Array","value":"[]","object_id":211300,"size":0}},{"id":1625110,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":8763240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":211320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0dc73f80>"}},{"id":1625111,"event":"return","thread_id":9160,"parent_id":1625110,"elapsed":3.289023879915476e-06,"elapsed_instrumentation":0.00013185697025619447,"return_value":{"class":"Array","value":"[]","object_id":211340,"size":0}},{"id":1625112,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"html","path":"app/serializers/rest/preview_card_serializer.rb","lineno":15,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625113,"event":"return","thread_id":9160,"parent_id":1625112,"elapsed":0.0006285599956754595,"elapsed_instrumentation":0.00022011203691363335,"return_value":{"class":"String","value":"","object_id":8763280}},{"id":1625114,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"image","path":"app/serializers/rest/preview_card_serializer.rb","lineno":11,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625115,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":8763000,"value":"/system/cache/preview_cards/images/000/000/010/original/attachment.jpg"}},{"id":1625116,"event":"return","thread_id":9160,"parent_id":1625115,"elapsed":2.4427019525319338e-05,"elapsed_instrumentation":0.0006690519803669304,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1625117,"event":"call","thread_id":9160,"defined_class":"PreviewCard","method_id":"local?","path":"app/models/preview_card.rb","lineno":101,"static":false,"parameters":[],"receiver":{"class":"PreviewCard","object_id":8763040,"value":"#<PreviewCard:0x00007fdc06deb900>"}},{"id":1625118,"event":"return","thread_id":9160,"parent_id":1625117,"elapsed":4.564004484564066e-06,"elapsed_instrumentation":0.00021372598712332547},{"id":1625119,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"full_asset_url","path":"app/helpers/routing_helper.rb","lineno":17,"static":false,"parameters":[{"name":"source","class":"String","object_id":8763300,"value":"/system/cache/preview_cards/images/000/000/010/original/attachment.jpg","kind":"req"},{"name":"options","class":"Hash","object_id":8763320,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625120,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"use_storage?","path":"app/helpers/routing_helper.rb","lineno":31,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625121,"event":"return","thread_id":9160,"parent_id":1625120,"elapsed":2.8692011255770922e-05,"elapsed_instrumentation":0.0001198760000988841},{"id":1625122,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"asset_host","path":"app/helpers/routing_helper.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625123,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625124,"event":"return","thread_id":9160,"parent_id":1625123,"elapsed":9.670999133959413e-06,"elapsed_instrumentation":0.00047423000796698034,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1625125,"event":"call","thread_id":9160,"defined_class":"REST::PreviewCardSerializer","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"REST::PreviewCardSerializer","object_id":8763260,"value":"#<REST::PreviewCardSerializer:0x00007fdc09101ea8>"}},{"id":1625126,"event":"return","thread_id":9160,"parent_id":1625125,"elapsed":5.432986654341221e-06,"elapsed_instrumentation":0.00018759298836812377,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1625127,"event":"return","thread_id":9160,"parent_id":1625122,"elapsed":0.0010745989857241511,"elapsed_instrumentation":0.00016718899132683873,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/","object_id":8763340}},{"id":1625128,"event":"return","thread_id":9160,"parent_id":1625119,"elapsed":0.002108332992065698,"elapsed_instrumentation":0.00026751900441013277,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/system/cache/preview_cards/images/000/000/010/original/attachment.jpg","object_id":8763360}},{"id":1625129,"event":"return","thread_id":9160,"parent_id":1625114,"elapsed":0.003750316012883559,"elapsed_instrumentation":0.00018899398855865002,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/system/cache/preview_cards/images/000/000/010/original/attachment.jpg","object_id":8763360}},{"id":1625130,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":8763240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":211320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0dc73f80>"}},{"id":1625131,"event":"return","thread_id":9160,"parent_id":1625130,"elapsed":0.00016659099492244422,"elapsed_instrumentation":0.00034220301313325763,"return_value":{"class":"Array","value":"[]","object_id":215680,"size":0}},{"id":1625132,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":8763240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":211280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0dc73f30>"}},{"id":1625133,"event":"return","thread_id":9160,"parent_id":1625132,"elapsed":4.709989298135042e-06,"elapsed_instrumentation":0.00018001400167122483,"return_value":{"class":"Array","value":"[]","object_id":215700,"size":0}},{"id":1625134,"event":"call","thread_id":9160,"defined_class":"ReactComponentHelper","method_id":"react_component","path":"app/helpers/react_component_helper.rb","lineno":4,"static":false,"parameters":[{"name":"name","class":"Symbol","object_id":19331228,"value":":card","kind":"req"},{"name":"props","class":"Hash","object_id":8763380,"value":"{:sensitive=>false, :card=>{:url=>http://fay.example/cherri.gorczany, :title=>Quam et consequatur voluptatibus., :description=>Voluptatem et illum. Dolor culpa porro. Impedit sed fugit., :language=>, :type=>link, :author_name=>, :author_url=>, :provider_name=>, :provider_url=>, :html=> (...7 more entries)}}","kind":"opt","size":2},{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"ActionView::Base","object_id":8763160,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdc06deba40>"}},{"id":1625135,"event":"return","thread_id":9160,"parent_id":1625134,"elapsed":0.00019908699323423207,"elapsed_instrumentation":0.0006892560049891472,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<div data-component=\"Card\" data-props=\"{&quot;sensitive&quot;:false,&quot;card&quot;:{&quot;url&quot (...762 more characters)","object_id":8763400}},{"id":1625136,"event":"return","thread_id":9160,"parent_id":1625105,"elapsed":0.009820306993788108,"elapsed_instrumentation":0.00080152801820077,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<div data-component=\"Card\" data-props=\"{&quot;sensitive&quot;:false,&quot;card&quot;:{&quot;url&quot (...762 more characters)","object_id":8763400}}]}