{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::IpBlocks #export when --format option is set to \"nginx\" exports blocked IPs with \"no_access\" severity in plain format","source_location":"spec/lib/mastodon/cli/ip_blocks_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"IpBlocks","type":"class","children":[{"name":"export","type":"function","location":"lib/mastodon/cli/ip_blocks.rb:113","static":false}]}]}]}]}],"events":[{"id":836185,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":836186,"event":"return","thread_id":9160,"parent_id":836185,"elapsed":3.2359006581828e-05,"elapsed_instrumentation":0.000736736023100093,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":836187,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":836188,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":836189,"event":"return","thread_id":9160,"parent_id":836188,"elapsed":0.00111147,"elapsed_instrumentation":0.00014747597742825747},{"id":836190,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":836191,"event":"return","thread_id":9160,"parent_id":836190,"elapsed":0.002930144,"elapsed_instrumentation":0.000122299010399729},{"id":836192,"event":"return","thread_id":9160,"parent_id":836187,"elapsed":0.004623793007340282,"elapsed_instrumentation":0.0006035920232534409,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":836193,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":836194,"event":"return","thread_id":9160,"parent_id":836193,"elapsed":7.171009201556444e-06,"elapsed_instrumentation":0.0003052889951504767,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":836195,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":836196,"event":"return","thread_id":9160,"parent_id":836195,"elapsed":4.96100983582437e-06,"elapsed_instrumentation":0.00018000099225901067,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":836197,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":836198,"event":"return","thread_id":9160,"parent_id":836197,"elapsed":0.001076243,"elapsed_instrumentation":0.00011654000263661146},{"id":836199,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":836200,"event":"return","thread_id":9160,"parent_id":836199,"elapsed":0.000531593,"elapsed_instrumentation":9.310099994763732e-05},{"id":836201,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110120,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":836202,"event":"return","thread_id":9160,"parent_id":836201,"elapsed":3.564986400306225e-06,"elapsed_instrumentation":0.0001574039924889803,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":836203,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110120,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":836204,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5110140,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":836205,"event":"return","thread_id":9160,"parent_id":836204,"elapsed":0.0007924730016384274,"elapsed_instrumentation":0.00014326802920550108,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":836206,"event":"return","thread_id":9160,"parent_id":836203,"elapsed":0.001104663999285549,"elapsed_instrumentation":0.0001237250107806176,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":836207,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":836208,"event":"return","thread_id":9160,"parent_id":836207,"elapsed":1.9321974832564592e-05,"elapsed_instrumentation":0.00016616101493127644,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":836209,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":836210,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":836211,"event":"return","thread_id":9160,"parent_id":836210,"elapsed":0.000583843,"elapsed_instrumentation":9.719599620439112e-05},{"id":836212,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":836213,"event":"return","thread_id":9160,"parent_id":836212,"elapsed":0.001772088,"elapsed_instrumentation":7.64639989938587e-05},{"id":836214,"event":"return","thread_id":9160,"parent_id":836209,"elapsed":0.002808446006383747,"elapsed_instrumentation":0.00015845999587327242,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":836215,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":836216,"event":"return","thread_id":9160,"parent_id":836215,"elapsed":3.803987056016922e-06,"elapsed_instrumentation":0.00011192899546585977,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":836217,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":836218,"event":"return","thread_id":9160,"parent_id":836217,"elapsed":3.14900535158813e-06,"elapsed_instrumentation":0.0001139189989771694,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":836219,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":836220,"event":"return","thread_id":9160,"parent_id":836219,"elapsed":0.000668028,"elapsed_instrumentation":8.123498992063105e-05},{"id":836221,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":836222,"event":"return","thread_id":9160,"parent_id":836221,"elapsed":0.000529097,"elapsed_instrumentation":7.161599933169782e-05},{"id":836223,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110220,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":836224,"event":"return","thread_id":9160,"parent_id":836223,"elapsed":3.1539821065962315e-06,"elapsed_instrumentation":0.00011721000191755593,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":836225,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5110220,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":836226,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5110240,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":836227,"event":"return","thread_id":9160,"parent_id":836226,"elapsed":0.0009929649822879583,"elapsed_instrumentation":0.00013606599532067776,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":836228,"event":"return","thread_id":9160,"parent_id":836225,"elapsed":0.0012895239924546331,"elapsed_instrumentation":0.00011502299457788467,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":836229,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::IpBlocks","method_id":"export","path":"lib/mastodon/cli/ip_blocks.rb","lineno":113,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::IpBlocks","object_id":5110260,"value":"#<Mastodon::CLI::IpBlocks:0x00007fdc0959de30>"}},{"id":836230,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"severity\" = $1 ORDER BY \"ip_blocks\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":836231,"event":"return","thread_id":9160,"parent_id":836230,"elapsed":0.000879188,"elapsed_instrumentation":0.0001834339927881956},{"id":836232,"event":"return","thread_id":9160,"parent_id":836229,"elapsed":0.00474627802032046,"elapsed_instrumentation":0.00011656599235720932}]}