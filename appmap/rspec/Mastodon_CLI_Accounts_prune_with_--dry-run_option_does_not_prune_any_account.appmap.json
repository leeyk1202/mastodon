{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::Accounts #prune with --dry-run option does not prune any account","source_location":"spec/lib/mastodon/cli/accounts_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"Accounts","type":"class","children":[{"name":"prune","type":"function","location":"lib/mastodon/cli/accounts.rb:556","static":false}]}]}]}]},{"name":"app/models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"bot?","type":"function","location":"app/models/account.rb:171","static":false},{"name":"group?","type":"function","location":"app/models/account.rb:185","static":false},{"name":"suspended?","type":"function","location":"app/models/account.rb:237","static":false},{"name":"silenced?","type":"function","location":"app/models/account.rb:225","static":false}]}]}],"events":[{"id":1481791,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::Accounts","method_id":"prune","path":"lib/mastodon/cli/accounts.rb","lineno":556,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::Accounts","object_id":8057120,"value":"#<Mastodon::CLI::Accounts:0x00007fdc09305290>"}},{"id":1481792,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"domain\" IS NOT NULL AND \"accounts\".\"actor_type\" NOT IN ($1, $2) AND (NOT EXISTS (SELECT 1 FROM mentions WHERE account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM favourites WHERE account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM statuses WHERE account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM follows WHERE account_id = accounts.id OR target_account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM blocks WHERE account_id = accounts.id OR target_account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM mutes WHERE target_account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM reports WHERE target_account_id = accounts.id)) AND (NOT EXISTS (SELECT 1 FROM follow_requests WHERE account_id = accounts.id OR target_account_id = accounts.id)) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":1481793,"event":"return","thread_id":9160,"parent_id":1481792,"elapsed":0.006832175,"elapsed_instrumentation":0.0001418069878127426},{"id":1481794,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"bot","path":"app/models/account.rb","lineno":171,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057160,"value":"#<Account:0x00007fdc06fe67c8>"}},{"id":1481795,"event":"return","thread_id":9160,"parent_id":1481794,"elapsed":2.083898289129138e-05,"elapsed_instrumentation":0.000139225012389943},{"id":1481796,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"group","path":"app/models/account.rb","lineno":185,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057160,"value":"#<Account:0x00007fdc06fe67c8>"}},{"id":1481797,"event":"return","thread_id":9160,"parent_id":1481796,"elapsed":5.754001904278994e-06,"elapsed_instrumentation":8.022598922252655e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1481798,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"bot","path":"app/models/account.rb","lineno":171,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057180,"value":"#<Account:0x00007fdc06fe6688>"}},{"id":1481799,"event":"return","thread_id":9160,"parent_id":1481798,"elapsed":9.768002200871706e-06,"elapsed_instrumentation":5.9138983488082886e-05},{"id":1481800,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"group","path":"app/models/account.rb","lineno":185,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057180,"value":"#<Account:0x00007fdc06fe6688>"}},{"id":1481801,"event":"return","thread_id":9160,"parent_id":1481800,"elapsed":3.947003278881311e-06,"elapsed_instrumentation":5.31190016772598e-05},{"id":1481802,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"suspended?","path":"app/models/account.rb","lineno":237,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057180,"value":"#<Account:0x00007fdc06fe6688>"}},{"id":1481803,"event":"return","thread_id":9160,"parent_id":1481802,"elapsed":3.3864984288811684e-05,"elapsed_instrumentation":6.110899266786873e-05},{"id":1481804,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057180,"value":"#<Account:0x00007fdc06fe6688>"}},{"id":1481805,"event":"return","thread_id":9160,"parent_id":1481804,"elapsed":0.00021026801550760865,"elapsed_instrumentation":8.58349958434701e-05},{"id":1481806,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"bot","path":"app/models/account.rb","lineno":171,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057200,"value":"#<Account:0x00007fdc06fe6548>"}},{"id":1481807,"event":"return","thread_id":9160,"parent_id":1481806,"elapsed":1.9534985767677426e-05,"elapsed_instrumentation":0.00011258700396865606},{"id":1481808,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"group","path":"app/models/account.rb","lineno":185,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057200,"value":"#<Account:0x00007fdc06fe6548>"}},{"id":1481809,"event":"return","thread_id":9160,"parent_id":1481808,"elapsed":5.277019226923585e-06,"elapsed_instrumentation":6.781099364161491e-05},{"id":1481810,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"suspended?","path":"app/models/account.rb","lineno":237,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057200,"value":"#<Account:0x00007fdc06fe6548>"}},{"id":1481811,"event":"return","thread_id":9160,"parent_id":1481810,"elapsed":1.7256010323762894e-05,"elapsed_instrumentation":5.6446995586156845e-05},{"id":1481812,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057200,"value":"#<Account:0x00007fdc06fe6548>"}},{"id":1481813,"event":"return","thread_id":9160,"parent_id":1481812,"elapsed":1.230099587701261e-05,"elapsed_instrumentation":5.634999251924455e-05},{"id":1481814,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"bot","path":"app/models/account.rb","lineno":171,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057220,"value":"#<Account:0x00007fdc06fe6408>"}},{"id":1481815,"event":"return","thread_id":9160,"parent_id":1481814,"elapsed":1.0496994946151972e-05,"elapsed_instrumentation":5.525999586097896e-05},{"id":1481816,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"group","path":"app/models/account.rb","lineno":185,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057220,"value":"#<Account:0x00007fdc06fe6408>"}},{"id":1481817,"event":"return","thread_id":9160,"parent_id":1481816,"elapsed":4.669011104851961e-06,"elapsed_instrumentation":5.324199446476996e-05},{"id":1481818,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"suspended?","path":"app/models/account.rb","lineno":237,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057220,"value":"#<Account:0x00007fdc06fe6408>"}},{"id":1481819,"event":"return","thread_id":9160,"parent_id":1481818,"elapsed":1.1546013411134481e-05,"elapsed_instrumentation":5.253299605101347e-05},{"id":1481820,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8057220,"value":"#<Account:0x00007fdc06fe6408>"}},{"id":1481821,"event":"return","thread_id":9160,"parent_id":1481820,"elapsed":1.0357995051890612e-05,"elapsed_instrumentation":5.281899939291179e-05},{"id":1481822,"event":"return","thread_id":9160,"parent_id":1481791,"elapsed":0.014190807996783406,"elapsed_instrumentation":0.00016999998479150236,"return_value":{"class":"IO","value":"#<IO:0x00007fdc21298f60>","object_id":4113040}},{"id":1481823,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"accounts\" WHERE \"accounts\".\"id\" IN ($1, $2, $3)","database_type":"postgres"}},{"id":1481824,"event":"return","thread_id":9160,"parent_id":1481823,"elapsed":0.001178237,"elapsed_instrumentation":9.797399980016053e-05}]}