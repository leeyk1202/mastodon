{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Measure::InstanceStatusesMeasure total with include_subdomains returns the expected number of accounts","source_location":"spec/lib/admin/metrics/measure/instance_statuses_measure_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/measure","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Measure","type":"class","children":[{"name":"BaseMeasure","type":"class","children":[{"name":"total","type":"function","location":"app/lib/admin/metrics/measure/base_measure.rb:37","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/measure/base_measure.rb:59","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/measure/base_measure.rb:21","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/measure/base_measure.rb:104","static":false},{"name":"perform_queries","type":"function","location":"app/lib/admin/metrics/measure/base_measure.rb:68","static":false}]},{"name":"InstanceStatusesMeasure","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:10","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:69","static":false},{"name":"perform_total_query","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:20","static":false},{"name":"perform_previous_total_query","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:26","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:30","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:34","static":false},{"name":"earliest_status_id","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:53","static":false},{"name":"latest_status_id","type":"function","location":"app/lib/admin/metrics/measure/instance_statuses_measure.rb:57","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"perform_data_query","type":"function","location":"app/lib/admin/metrics/measure/query_helper.rb:6","static":false},{"name":"measurement_data_rows","type":"function","location":"app/lib/admin/metrics/measure/query_helper.rb:10","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/measure/query_helper.rb:14","static":false},{"name":"account_domain_sql","type":"function","location":"app/lib/admin/metrics/measure/query_helper.rb:18","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"Snowflake","type":"class","children":[{"name":"id_at","type":"function","location":"lib/mastodon/snowflake.rb:99","static":true}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":2000629,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::BaseMeasure","method_id":"total","path":"app/lib/admin/metrics/measure/base_measure.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000630,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::BaseMeasure","method_id":"load","path":"app/lib/admin/metrics/measure/base_measure.rb","lineno":59,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000631,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::BaseMeasure","method_id":"cache_key","path":"app/lib/admin/metrics/measure/base_measure.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000632,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"key","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000633,"event":"return","thread_id":9160,"parent_id":2000632,"elapsed":3.100023604929447e-06,"elapsed_instrumentation":7.628899766132236e-05,"return_value":{"class":"String","value":"instance_statuses","object_id":10531460}},{"id":2000634,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::BaseMeasure","method_id":"canonicalized_params","path":"app/lib/admin/metrics/measure/base_measure.rb","lineno":104,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000635,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"params","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":69,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000636,"event":"return","thread_id":9160,"parent_id":2000635,"elapsed":8.846604032441974e-05,"elapsed_instrumentation":8.355302270501852e-05,"return_value":{"class":"ActionController::Parameters","value":"{\"domain\"=>\"example.com\", \"include_subdomains\"=>\"true\"}","object_id":10532980}},{"id":2000637,"event":"return","thread_id":9160,"parent_id":2000634,"elapsed":0.00024242699146270752,"elapsed_instrumentation":7.811898831278086e-05,"return_value":{"class":"String","value":"domain=example.com;include_subdomains=true","object_id":10533000}},{"id":2000638,"event":"return","thread_id":9160,"parent_id":2000631,"elapsed":0.0004509900463744998,"elapsed_instrumentation":6.743601989001036e-05,"return_value":{"class":"String","value":"metrics/measure/instance_statuses;2023-11-04T03:09:56+00:00;2023-11-06T03:09:56+00:00;domain=example (...28 more characters)","object_id":10533020}},{"id":2000639,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10533040,"value":"Cache read: metrics/measure/instance_statuses;2023-11-04T03:09:56+00:00;2023-11-06T03:09:56+00:00;do (...113 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2000640,"event":"return","thread_id":9160,"parent_id":2000639,"elapsed":0.002644547028467059,"elapsed_instrumentation":0.00045816198689863086,"return_value":{"class":"Integer","value":"213","object_id":427}},{"id":2000641,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10533060,"value":"Cache generate: metrics/measure/instance_statuses;2023-11-04T03:09:56+00:00;2023-11-06T03:09:56+00:0 (...117 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2000642,"event":"return","thread_id":9160,"parent_id":2000641,"elapsed":0.002093454997520894,"elapsed_instrumentation":0.00014706503134220839,"return_value":{"class":"Integer","value":"217","object_id":435}},{"id":2000643,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::BaseMeasure","method_id":"perform_queries","path":"app/lib/admin/metrics/measure/base_measure.rb","lineno":68,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000644,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"perform_total_query","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":20,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000645,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"params","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":69,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000646,"event":"return","thread_id":9160,"parent_id":2000645,"elapsed":8.0712023191154e-05,"elapsed_instrumentation":8.651294047012925e-05,"return_value":{"class":"ActionController::Parameters","value":"{\"domain\"=>\"example.com\", \"include_subdomains\"=>\"true\"}","object_id":10533080}},{"id":2000647,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"params","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":69,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000648,"event":"return","thread_id":9160,"parent_id":2000647,"elapsed":0.00010739202843979001,"elapsed_instrumentation":9.293900802731514e-05,"return_value":{"class":"ActionController::Parameters","value":"{\"domain\"=>\"example.com\", \"include_subdomains\"=>\"true\"}","object_id":10533100}},{"id":2000649,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"params","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":69,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000650,"event":"return","thread_id":9160,"parent_id":2000649,"elapsed":4.324602195993066e-05,"elapsed_instrumentation":8.647498907521367e-05,"return_value":{"class":"ActionController::Parameters","value":"{\"domain\"=>\"example.com\", \"include_subdomains\"=>\"true\"}","object_id":10533120}},{"id":2000651,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"statuses\" INNER JOIN \"accounts\" ON \"accounts\".\"id\" = \"statuses\".\"account_id\" WHERE \"statuses\".\"deleted_at\" IS NULL AND \"accounts\".\"domain\" IN (SELECT \"instances\".\"domain\" FROM \"instances\" WHERE (reverse('.' || domain) LIKE reverse('%.example.com')))","database_type":"postgres"}},{"id":2000652,"event":"return","thread_id":9160,"parent_id":2000651,"elapsed":0.001739239,"elapsed_instrumentation":0.00011254503624513745},{"id":2000653,"event":"return","thread_id":9160,"parent_id":2000644,"elapsed":0.005039529001805931,"elapsed_instrumentation":9.8978984169662e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":2000654,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"perform_previous_total_query","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000655,"event":"return","thread_id":9160,"parent_id":2000654,"elapsed":2.829008735716343e-06,"elapsed_instrumentation":8.167803753167391e-05},{"id":2000656,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::QueryHelper","method_id":"perform_data_query","path":"app/lib/admin/metrics/measure/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000657,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::QueryHelper","method_id":"measurement_data_rows","path":"app/lib/admin/metrics/measure/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000658,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/measure/query_helper.rb","lineno":14,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000659,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"sql_array","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000660,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"sql_query_string","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":34,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000661,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"params","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":69,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000662,"event":"return","thread_id":9160,"parent_id":2000661,"elapsed":7.064896635711193e-05,"elapsed_instrumentation":8.151499787345529e-05,"return_value":{"class":"ActionController::Parameters","value":"{\"domain\"=>\"example.com\", \"include_subdomains\"=>\"true\"}","object_id":10533140}},{"id":2000663,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::QueryHelper","method_id":"account_domain_sql","path":"app/lib/admin/metrics/measure/query_helper.rb","lineno":18,"static":false,"parameters":[{"name":"include_subdomains","class":"String","object_id":3035860,"value":"true","kind":"req"}],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000664,"event":"return","thread_id":9160,"parent_id":2000663,"elapsed":3.2100360840559006e-06,"elapsed_instrumentation":9.205698734149337e-05,"return_value":{"class":"String","value":"accounts.domain IN (SELECT domain FROM instances WHERE reverse('.' || domain) LIKE reverse('.' || :d (...13 more characters)","object_id":3035880}},{"id":2000665,"event":"return","thread_id":9160,"parent_id":2000660,"elapsed":0.0003869219799526036,"elapsed_instrumentation":6.006704643368721e-05,"return_value":{"class":"String","value":"SELECT axis.*, ( WITH new_statuses AS ( SELECT statuses.id FROM statuses INNER JOIN accounts ON acco (...485 more characters)","object_id":10533160}},{"id":2000666,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"params","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":69,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000667,"event":"return","thread_id":9160,"parent_id":2000666,"elapsed":5.26710064150393e-05,"elapsed_instrumentation":8.312799036502838e-05,"return_value":{"class":"ActionController::Parameters","value":"{\"domain\"=>\"example.com\", \"include_subdomains\"=>\"true\"}","object_id":10533180}},{"id":2000668,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"earliest_status_id","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":53,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000669,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":10533200,"value":"2023-11-04T03:09:56+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":2000670,"event":"return","thread_id":9160,"parent_id":2000669,"elapsed":1.7712998669594526e-05,"elapsed_instrumentation":0.00036249897675588727,"return_value":{"class":"Integer","value":"111350080864256000","object_id":222700161728512001}},{"id":2000671,"event":"return","thread_id":9160,"parent_id":2000668,"elapsed":0.0004153969930484891,"elapsed_instrumentation":8.754100417718291e-05,"return_value":{"class":"Integer","value":"111350080864256000","object_id":222700161728512001}},{"id":2000672,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Measure::InstanceStatusesMeasure","method_id":"latest_status_id","path":"app/lib/admin/metrics/measure/instance_statuses_measure.rb","lineno":57,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Measure::InstanceStatusesMeasure","object_id":10532960,"value":"#<Admin::Metrics::Measure::InstanceStatusesMeasure:0x00007fc930bbb5b0>"}},{"id":2000673,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":10533220,"value":"2023-11-06T03:09:56+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":2000674,"event":"return","thread_id":9160,"parent_id":2000673,"elapsed":8.772010914981365e-06,"elapsed_instrumentation":9.776902152225375e-05,"return_value":{"class":"Integer","value":"111361405485056000","object_id":222722810970112001}},{"id":2000675,"event":"return","thread_id":9160,"parent_id":2000672,"elapsed":0.00012631301069632173,"elapsed_instrumentation":6.893003592267632e-05,"return_value":{"class":"Integer","value":"111361405485056000","object_id":222722810970112001}},{"id":2000676,"event":"return","thread_id":9160,"parent_id":2000659,"elapsed":0.0013540629879571497,"elapsed_instrumentation":0.00015021400758996606,"return_value":{"class":"Array","value":"[SELECT axis.*, ( WITH new_statuses AS ( SELECT statuses.id FROM statuses INNER JOIN accounts ON acco (...485 more characters), {:start_at=>2023-11-04T03:09:56+00:00, :end_at=>2023-11-06T03:09:56+00:00, :domain=>example.com, :earliest_status_id=>111350080864256000, :latest_status_id=>111361405485056000}]","object_id":10533240,"size":2}},{"id":2000677,"event":"return","thread_id":9160,"parent_id":2000658,"elapsed":0.0017406960250809789,"elapsed_instrumentation":0.000282405992038548,"return_value":{"class":"String","value":"SELECT axis.*, ( WITH new_statuses AS ( SELECT statuses.id FROM statuses INNER JOIN accounts ON acco (...531 more characters)","object_id":10533260}},{"id":2000678,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT axis.*, ( WITH new_statuses AS ( SELECT statuses.id FROM statuses INNER JOIN accounts ON accounts.id = statuses.account_id WHERE statuses.id BETWEEN 111350080864256000 AND 111361405485056000 AND accounts.domain IN (SELECT domain FROM instances WHERE reverse('.' || domain) LIKE reverse('.' || 'example.com'::text)) AND date_trunc('day', statuses.created_at)::date = axis.period ) SELECT count(*) FROM new_statuses ) AS value FROM ( SELECT generate_series(date_trunc('day', '2023-11-04 03:09:56.927642'::timestamp)::date, date_trunc('day', '2023-11-06 03:09:56.927826'::timestamp)::date, interval '1 day') AS period ) AS axis","database_type":"postgres"}},{"id":2000679,"event":"return","thread_id":9160,"parent_id":2000678,"elapsed":0.002516266,"elapsed_instrumentation":0.00011965096928179264},{"id":2000680,"event":"return","thread_id":9160,"parent_id":2000657,"elapsed":0.0052596559980884194,"elapsed_instrumentation":0.00011902902042493224,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc930bb7e60>","object_id":10533280}},{"id":2000681,"event":"return","thread_id":9160,"parent_id":2000656,"elapsed":0.005555984971579164,"elapsed_instrumentation":0.00019283097935840487,"return_value":{"class":"Array","value":"[{:date=>2023-11-04 00:00:00 +0000, :value=>0}, {:date=>2023-11-05 00:00:00 +0000, :value=>0}, {:date=>2023-11-06 00:00:00 +0000, :value=>0}]","object_id":10533300,"size":3}},{"id":2000682,"event":"return","thread_id":9160,"parent_id":2000643,"elapsed":0.011031801986973733,"elapsed_instrumentation":0.0002041549887508154,"return_value":{"class":"Hash","value":"{:total=>5, :previous_total=>, :data=>[{:date=>2023-11-04 00:00:00 +0000, :value=>0}, {:date=>2023-11-05 00:00:00 +0000, :value=>0}, {:date=>2023-11-06 00:00:00 +0000, :value=>0}]}","object_id":10533320,"size":3}},{"id":2000683,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10533340,"value":"Cache write: metrics/measure/instance_statuses;2023-11-04T03:09:56+00:00;2023-11-06T03:09:56+00:00;d (...114 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2000684,"event":"return","thread_id":9160,"parent_id":2000683,"elapsed":0.001818900986108929,"elapsed_instrumentation":0.0003051519743166864,"return_value":{"class":"Integer","value":"214","object_id":429}},{"id":2000685,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":10533360,"value":"[{:total=>5, :previous_total=>, :data=>[{:date=>2023-11-04 00:00:00 +0000, :value=>0}, {:date=>2023-11-05 00:00:00 +0000, :value=>0}, {:date=>2023-11-06 00:00:00 +0000, :value=>0}]}]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":2000686,"event":"return","thread_id":9160,"parent_id":2000685,"elapsed":3.7021993193775415e-05,"elapsed_instrumentation":0.0002833849866874516,"return_value":{"class":"String","value":"\u0004\b{\b:\ntotali\n:\u0013previous_total0:\tdata[\b{\u0007:\tdateIu:\tTime\r__\u001e_\u0000\u0000\u0000\u0000\u0007:\u000boffseti\u0000:\tzone0:\nvalueI\"\u00060\u0006:\u0006EF{\u0007; (...67 more characters)","object_id":10533380}},{"id":2000687,"event":"return","thread_id":9160,"parent_id":2000630,"elapsed":0.020370898011606187,"elapsed_instrumentation":0.0003981689806096256,"return_value":{"class":"ActiveSupport::HashWithIndifferentAccess","value":"{total=>5, previous_total=>, data=>[{date=>2023-11-04 00:00:00 +0000, value=>0}, {date=>2023-11-05 00:00:00 +0000, value=>0}, {date=>2023-11-06 00:00:00 +0000, value=>0}]}","object_id":10533400,"size":3}},{"id":2000688,"event":"return","thread_id":9160,"parent_id":2000629,"elapsed":0.020799474033992738,"elapsed_instrumentation":0.00028827396454289556,"return_value":{"class":"Integer","value":"5","object_id":11}}]}