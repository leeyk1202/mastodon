{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"AccountInteractions #local_followers_hash invalidates cache as needed when removing or adding followers","source_location":"spec/models/concerns/account_interactions_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"concerns","type":"package","children":[{"name":"AccountInteractions","type":"class","children":[{"name":"local_followers_hash","type":"function","location":"app/models/concerns/account_interactions.rb:292","static":false},{"name":"unfollow!","type":"function","location":"app/models/concerns/account_interactions.rb:173","static":false},{"name":"follow!","type":"function","location":"app/models/concerns/account_interactions.rb:115","static":false}]},{"name":"AccountCounters","type":"class","children":[{"name":"decrement_count!","type":"function","location":"app/models/concerns/account_counters.rb:28","static":false},{"name":"update_count!","type":"function","location":"app/models/concerns/account_counters.rb:34","static":false},{"name":"account_stat","type":"function","location":"app/models/concerns/account_counters.rb:76","static":false},{"name":"following_count","type":"function","location":"app/models/concerns/account_counters.rb:13","static":false},{"name":"increment_count!","type":"function","location":"app/models/concerns/account_counters.rb:23","static":false}]},{"name":"RateLimitable","type":"class","children":[{"name":"rate_limit=","type":"function","location":"app/models/concerns/rate_limitable.rb:6","static":false},{"name":"rate_limit?","type":"function","location":"app/models/concerns/rate_limitable.rb:10","static":false}]},{"name":"FollowLimitable","type":"class","children":[{"name":"bypass_follow_limit=","type":"function","location":"app/models/concerns/follow_limitable.rb:10","static":false},{"name":"bypass_follow_limit?","type":"function","location":"app/models/concerns/follow_limitable.rb:14","static":false}]},{"name":"Redisable","type":"class","children":[{"name":"redis","type":"function","location":"app/models/concerns/redisable.rb:4","static":false}]}]},{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"object_type","type":"function","location":"app/models/account.rb:385","static":false},{"name":"instance_actor?","type":"function","location":"app/models/account.rb:175","static":false},{"name":"to_param","type":"function","location":"app/models/account.rb:389","static":false},{"name":"synchronization_uri_prefix","type":"function","location":"app/models/account.rb:409","static":false}]},{"name":"AccountStat","type":"class","children":[{"name":"following_count","type":"function","location":"app/models/account_stat.rb:25","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"activitypub","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"uri_for_username","type":"function","location":"app/lib/activitypub/tag_manager.rb:57","static":false},{"name":"uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:36","static":false},{"name":"generate_uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:61","static":false}]}]}]},{"name":"PotentialFriendshipTracker","type":"class","children":[{"name":"remove","type":"function","location":"app/lib/potential_friendship_tracker.rb:27","static":true}]}]},{"name":"helpers","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]}]},{"name":"validators","type":"package","children":[{"name":"FollowLimitValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/follow_limit_validator.rb:7","static":false},{"name":"limit_for_account","type":"function","location":"app/validators/follow_limit_validator.rb:14","static":true}]},{"name":"LanguageValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/language_validator.rb:6","static":false}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/active_record","type":"package","children":[{"name":"ActiveRecord","type":"class","children":[{"name":"Batches","type":"class","children":[{"name":"pluck_each","type":"function","location":"lib/active_record/batches.rb:5","static":false}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]},{"name":"unpack","type":"function","location":"<internal:pack>:19","static":false,"labels":["string.unpack"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":577737,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"local_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":292,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>"}},{"id":577738,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3839960,"value":"Cache read: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577739,"event":"return","thread_id":9160,"parent_id":577738,"elapsed":0.0008778790361247957,"elapsed_instrumentation":0.0001552239409647882,"return_value":{"class":"Integer","value":"100","object_id":201}},{"id":577740,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3839980,"value":"Cache generate: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>102 (...4 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577741,"event":"return","thread_id":9160,"parent_id":577740,"elapsed":0.0009294970077462494,"elapsed_instrumentation":0.00030077697010710835,"return_value":{"class":"Integer","value":"104","object_id":209}},{"id":577742,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3840000,"value":"[:username]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3840020,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc919a95648>"}},{"id":577743,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"domain\" IS NULL ORDER BY \"accounts\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":577744,"event":"return","thread_id":9160,"parent_id":577743,"elapsed":0.001217902,"elapsed_instrumentation":9.799998952075839e-05},{"id":577745,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for_username","path":"app/lib/activitypub/tag_manager.rb","lineno":57,"static":false,"parameters":[{"name":"username","class":"String","object_id":3840040,"value":"Me","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577746,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577747,"event":"return","thread_id":9160,"parent_id":577746,"elapsed":6.303016562014818e-06,"elapsed_instrumentation":0.0002222820185124874,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577748,"event":"return","thread_id":9160,"parent_id":577745,"elapsed":0.0004324209876358509,"elapsed_instrumentation":0.00015351304318755865,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":3840060}},{"id":577749,"event":"return","thread_id":9160,"parent_id":577742,"elapsed":0.0031902940245345235,"elapsed_instrumentation":0.00027479795971885324},{"id":577750,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3840080,"value":"i__\u0010`\u001b_\u0003_]4____d_E\u001fy__\u0013\u001d\u0010$___L"}},{"id":577751,"event":"return","thread_id":9160,"parent_id":577750,"elapsed":4.69299266114831e-06,"elapsed_instrumentation":0.00010489503620192409,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":3840100}},{"id":577752,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840120,"value":"Cache write: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>1024}) (...1 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577753,"event":"return","thread_id":9160,"parent_id":577752,"elapsed":0.0007055660244077444,"elapsed_instrumentation":0.000123975973110646,"return_value":{"class":"Integer","value":"101","object_id":203}},{"id":577754,"event":"return","thread_id":9160,"parent_id":577737,"elapsed":0.009566493972670287,"elapsed_instrumentation":0.0003763519925996661,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":3840100}},{"id":577755,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":36,"static":false,"parameters":[{"name":"target","class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577756,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577757,"event":"return","thread_id":9160,"parent_id":577756,"elapsed":1.241202699020505e-05,"elapsed_instrumentation":7.925298996269703e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577758,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"object_type","path":"app/models/account.rb","lineno":385,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577759,"event":"return","thread_id":9160,"parent_id":577758,"elapsed":3.0489754863083363e-06,"elapsed_instrumentation":9.54529969021678e-05,"return_value":{"class":"Symbol","value":":person","object_id":20438108}},{"id":577760,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"instance_actor?","path":"app/models/account.rb","lineno":175,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577761,"event":"return","thread_id":9160,"parent_id":577760,"elapsed":8.516013622283936e-06,"elapsed_instrumentation":5.308701656758785e-05},{"id":577762,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577763,"event":"return","thread_id":9160,"parent_id":577762,"elapsed":4.697008989751339e-06,"elapsed_instrumentation":0.0002701570629142225,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577764,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577765,"event":"return","thread_id":9160,"parent_id":577764,"elapsed":4.152010660618544e-06,"elapsed_instrumentation":0.00015709397848695517,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577766,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"to_param","path":"app/models/account.rb","lineno":389,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577767,"event":"return","thread_id":9160,"parent_id":577766,"elapsed":2.2247026208788157e-05,"elapsed_instrumentation":0.00010498001938685775,"return_value":{"class":"String","value":"Me","object_id":3840140}},{"id":577768,"event":"return","thread_id":9160,"parent_id":577755,"elapsed":0.0011303949868306518,"elapsed_instrumentation":0.00014347099931910634,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":3840160}},{"id":577769,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"unfollow!","path":"app/models/concerns/account_interactions.rb","lineno":173,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>","kind":"req"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577770,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":577771,"event":"return","thread_id":9160,"parent_id":577770,"elapsed":0.0012551,"elapsed_instrumentation":0.00031044200295582414},{"id":577772,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1462400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932731830>"}},{"id":577773,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":577774,"event":"return","thread_id":9160,"parent_id":577773,"elapsed":0.000457532,"elapsed_instrumentation":0.00011891999747604132},{"id":577775,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":577776,"event":"return","thread_id":9160,"parent_id":577775,"elapsed":0.000795757,"elapsed_instrumentation":8.281198097392917e-05},{"id":577777,"event":"return","thread_id":9160,"parent_id":577772,"elapsed":0.0031836539856158197,"elapsed_instrumentation":0.0002506960299797356,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933a9e5d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1462440,"size":1}},{"id":577778,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follows\" WHERE \"follows\".\"id\" = $1","database_type":"postgres"}},{"id":577779,"event":"return","thread_id":9160,"parent_id":577778,"elapsed":0.000625345,"elapsed_instrumentation":0.00020145700545981526},{"id":577780,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1462400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932731830>"}},{"id":577781,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"account_pins\" WHERE \"account_pins\".\"target_account_id\" = $1 AND \"account_pins\".\"account_id\" = $2","database_type":"postgres"}},{"id":577782,"event":"return","thread_id":9160,"parent_id":577781,"elapsed":0.000611972,"elapsed_instrumentation":8.060899563133717e-05},{"id":577783,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577784,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577785,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577786,"event":"return","thread_id":9160,"parent_id":577785,"elapsed":3.0310009606182575e-05,"elapsed_instrumentation":0.0003985429648309946,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577787,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111361347215267846, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":577788,"event":"return","thread_id":9160,"parent_id":577787,"elapsed":0.001014459,"elapsed_instrumentation":8.630100637674332e-05},{"id":577789,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577790,"event":"return","thread_id":9160,"parent_id":577789,"elapsed":1.6229983884841204e-05,"elapsed_instrumentation":0.0001247790060006082,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577791,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577792,"event":"return","thread_id":9160,"parent_id":577791,"elapsed":7.062975782901049e-06,"elapsed_instrumentation":7.2598981205374e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577793,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":577794,"event":"return","thread_id":9160,"parent_id":577793,"elapsed":0.000674399,"elapsed_instrumentation":0.00024914200184866786},{"id":577795,"event":"return","thread_id":9160,"parent_id":577784,"elapsed":0.005647464015055448,"elapsed_instrumentation":0.00016496097669005394,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577796,"event":"return","thread_id":9160,"parent_id":577783,"elapsed":0.005847707041539252,"elapsed_instrumentation":0.0003067149664275348,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577797,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":577798,"event":"return","thread_id":9160,"parent_id":577797,"elapsed":0.000918079,"elapsed_instrumentation":7.418799214065075e-05},{"id":577799,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":3840220,"value":"#<Account:0x00007fc919a92a88>"}},{"id":577800,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":3840220,"value":"#<Account:0x00007fc919a92a88>"}},{"id":577801,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111361347215267847, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":577802,"event":"return","thread_id":9160,"parent_id":577801,"elapsed":0.000977352,"elapsed_instrumentation":7.84800504334271e-05},{"id":577803,"event":"return","thread_id":9160,"parent_id":577800,"elapsed":0.0017027910216711462,"elapsed_instrumentation":9.333499474450946e-05},{"id":577804,"event":"return","thread_id":9160,"parent_id":577799,"elapsed":0.001823195954784751,"elapsed_instrumentation":0.00011549907503649592},{"id":577805,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577806,"event":"return","thread_id":9160,"parent_id":577805,"elapsed":1.8185004591941833e-05,"elapsed_instrumentation":0.00014007306890562177,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577807,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3840220,"value":"#<Account:0x00007fc919a92a88>"}},{"id":577808,"event":"return","thread_id":9160,"parent_id":577807,"elapsed":2.4649023544043303e-05,"elapsed_instrumentation":0.00010875298175960779},{"id":577809,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577810,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577811,"event":"return","thread_id":9160,"parent_id":577810,"elapsed":7.398019079118967e-06,"elapsed_instrumentation":6.639998173341155e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577812,"event":"return","thread_id":9160,"parent_id":577809,"elapsed":9.305501589551568e-05,"elapsed_instrumentation":8.182594319805503e-05,"return_value":{"class":"String","value":"local","object_id":1381860}},{"id":577813,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840240,"value":"Cache delete: followers_hash:111361347215267847:local\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577814,"event":"return","thread_id":9160,"parent_id":577813,"elapsed":0.0008229939849115908,"elapsed_instrumentation":0.00013897899771109223,"return_value":{"class":"Integer","value":"54","object_id":109}},{"id":577815,"event":"return","thread_id":9160,"parent_id":577780,"elapsed":0.01486541802296415,"elapsed_instrumentation":0.00018127402290701866,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933a9e3c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933a9e210 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933a9e008 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1462520,"size":3}},{"id":577816,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":577817,"event":"return","thread_id":9160,"parent_id":577816,"elapsed":0.000547724,"elapsed_instrumentation":9.911099914461374e-05},{"id":577818,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":577819,"event":"return","thread_id":9160,"parent_id":577818,"elapsed":4.078960046172142e-06,"elapsed_instrumentation":0.00012197397882118821,"return_value":{"class":"Array","value":"[]","object_id":1342560,"size":0}},{"id":577820,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":577821,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840300,"value":"Cache delete: relationship:111361347215267846:111361347215267847\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577822,"event":"return","thread_id":9160,"parent_id":577821,"elapsed":0.0005973480292595923,"elapsed_instrumentation":0.00011620897566899657,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":577823,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840320,"value":"Cache delete: relationship:111361347215267847:111361347215267846\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577824,"event":"return","thread_id":9160,"parent_id":577823,"elapsed":0.0006950360257178545,"elapsed_instrumentation":0.00014213798567652702,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":577825,"event":"return","thread_id":9160,"parent_id":577820,"elapsed":0.0018133719568140805,"elapsed_instrumentation":0.00011338002514094114,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93252f690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342620,"size":1}},{"id":577826,"event":"return","thread_id":9160,"parent_id":577769,"elapsed":0.02759661799063906,"elapsed_instrumentation":0.00011108606122434139,"return_value":{"class":"Follow","value":"#<Follow:0x00007fc919a94748>","object_id":3840260}},{"id":577827,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"local_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":292,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>"}},{"id":577828,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840340,"value":"Cache read: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577829,"event":"return","thread_id":9160,"parent_id":577828,"elapsed":0.0007191949989646673,"elapsed_instrumentation":0.00011582899605855346,"return_value":{"class":"Integer","value":"100","object_id":201}},{"id":577830,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840360,"value":"Cache generate: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>102 (...4 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577831,"event":"return","thread_id":9160,"parent_id":577830,"elapsed":0.0006339340470731258,"elapsed_instrumentation":0.00013659201795235276,"return_value":{"class":"Integer","value":"104","object_id":209}},{"id":577832,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3840380,"value":"[:username]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3840400,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc919a917c8>"}},{"id":577833,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"domain\" IS NULL ORDER BY \"accounts\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":577834,"event":"return","thread_id":9160,"parent_id":577833,"elapsed":0.001028146,"elapsed_instrumentation":9.527604561299086e-05},{"id":577835,"event":"return","thread_id":9160,"parent_id":577832,"elapsed":0.0023886190028861165,"elapsed_instrumentation":0.00013779901200905442},{"id":577836,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3840420,"value":"\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000"}},{"id":577837,"event":"return","thread_id":9160,"parent_id":577836,"elapsed":4.968023858964443e-06,"elapsed_instrumentation":0.0001237679971382022,"return_value":{"class":"String","value":"0000000000000000000000000000000000000000000000000000000000000000","object_id":3840440}},{"id":577838,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840460,"value":"Cache write: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>1024}) (...1 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577839,"event":"return","thread_id":9160,"parent_id":577838,"elapsed":0.0013256249949336052,"elapsed_instrumentation":0.00015820696717128158,"return_value":{"class":"Integer","value":"101","object_id":203}},{"id":577840,"event":"return","thread_id":9160,"parent_id":577827,"elapsed":0.0072944979765452445,"elapsed_instrumentation":0.00012665701797232032,"return_value":{"class":"String","value":"0000000000000000000000000000000000000000000000000000000000000000","object_id":3840440}},{"id":577841,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"follow!","path":"app/models/concerns/account_interactions.rb","lineno":115,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>","kind":"req"},{"name":"reblogs","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"notify","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"languages","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"uri","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"rate_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"bypass_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577842,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":577843,"event":"return","thread_id":9160,"parent_id":577842,"elapsed":0.000671595,"elapsed_instrumentation":9.97409806586802e-05},{"id":577844,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>"}},{"id":577845,"event":"return","thread_id":9160,"parent_id":577844,"elapsed":6.076006684452295e-06,"elapsed_instrumentation":0.00011159805580973625},{"id":577846,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>"}},{"id":577847,"event":"return","thread_id":9160,"parent_id":577846,"elapsed":3.531982656568289e-06,"elapsed_instrumentation":6.656598998233676e-05},{"id":577848,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>"}},{"id":577849,"event":"return","thread_id":9160,"parent_id":577848,"elapsed":3.87697946280241e-06,"elapsed_instrumentation":9.624997619539499e-05},{"id":577850,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>"}},{"id":577851,"event":"return","thread_id":9160,"parent_id":577850,"elapsed":2.9319780878722668e-06,"elapsed_instrumentation":6.520701572299004e-05},{"id":577852,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931ff0>"}},{"id":577853,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"generate_uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":61,"static":false,"parameters":[{"name":"_target","class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577854,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577855,"event":"return","thread_id":9160,"parent_id":577854,"elapsed":5.216978024691343e-06,"elapsed_instrumentation":0.00011516502127051353,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577856,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577857,"event":"return","thread_id":9160,"parent_id":577856,"elapsed":2.794025931507349e-06,"elapsed_instrumentation":9.69229731708765e-05,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577858,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack","path":"<internal:pack>","lineno":19,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":344180,"value":"NnnnnN","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3840520,"value":"\u0005Qvm____cn\u000b___\u0001\u0010"}},{"id":577859,"event":"return","thread_id":9160,"parent_id":577858,"elapsed":7.1150134317576885e-06,"elapsed_instrumentation":0.0002572159864939749,"return_value":{"class":"Array","value":"[89224813, 35833, 24571, 25454, 3054, 3231973648]","object_id":3840540,"size":6}},{"id":577860,"event":"return","thread_id":9160,"parent_id":577853,"elapsed":0.00102227897150442,"elapsed_instrumentation":0.00013019697507843375,"return_value":{"class":"URI::HTTPS","value":"https://cb6e6126.ngrok.io/0551766d-8bf9-4ffb-a36e-0beec0a40110","object_id":3840560}},{"id":577861,"event":"return","thread_id":9160,"parent_id":577852,"elapsed":0.0012164409854449332,"elapsed_instrumentation":0.00021468696650117636,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324c9278 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c93b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342160,"size":2}},{"id":577862,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840580,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931d70>"}},{"id":577863,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit?","path":"app/models/concerns/follow_limitable.rb","lineno":14,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>"}},{"id":577864,"event":"return","thread_id":9160,"parent_id":577863,"elapsed":3.8100406527519226e-06,"elapsed_instrumentation":8.15859530121088e-05},{"id":577865,"event":"call","thread_id":9160,"defined_class":"FollowLimitValidator","method_id":"validate","path":"app/validators/follow_limit_validator.rb","lineno":7,"static":false,"parameters":[{"name":"follow","class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>","kind":"req"}],"receiver":{"class":"FollowLimitValidator","object_id":1342220,"value":"#<FollowLimitValidator:0x00007fc93955dc50>"}},{"id":577866,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577867,"event":"return","thread_id":9160,"parent_id":577866,"elapsed":5.592301022261381e-05,"elapsed_instrumentation":0.0003442869638092816,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577868,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"following_count","path":"app/models/concerns/account_counters.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":3840600,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":3840620,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577869,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577870,"event":"return","thread_id":9160,"parent_id":577869,"elapsed":2.4856009986251593e-05,"elapsed_instrumentation":0.00010322290472686291,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577871,"event":"call","thread_id":9160,"defined_class":"AccountStat","method_id":"following_count","path":"app/models/account_stat.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"AccountStat","object_id":3840200,"value":"#<AccountStat:0x00007fc919a97d08>"}},{"id":577872,"event":"return","thread_id":9160,"parent_id":577871,"elapsed":0.0001279950374737382,"elapsed_instrumentation":6.95700291544199e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":577873,"event":"return","thread_id":9160,"parent_id":577868,"elapsed":0.0003697750507853925,"elapsed_instrumentation":0.00020598096307367086,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":577874,"event":"call","thread_id":9160,"defined_class":"FollowLimitValidator","method_id":"limit_for_account","path":"app/validators/follow_limit_validator.rb","lineno":14,"static":true,"parameters":[{"name":"account","class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>","kind":"req"}],"receiver":{"class":"Class","object_id":58400,"value":"FollowLimitValidator"}},{"id":577875,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"following_count","path":"app/models/concerns/account_counters.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":3840640,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":3840660,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577876,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577877,"event":"return","thread_id":9160,"parent_id":577876,"elapsed":1.4724035281687975e-05,"elapsed_instrumentation":8.301192428916693e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577878,"event":"call","thread_id":9160,"defined_class":"AccountStat","method_id":"following_count","path":"app/models/account_stat.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"AccountStat","object_id":3840200,"value":"#<AccountStat:0x00007fc919a97d08>"}},{"id":577879,"event":"return","thread_id":9160,"parent_id":577878,"elapsed":3.0378985684365034e-05,"elapsed_instrumentation":6.746704457327724e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":577880,"event":"return","thread_id":9160,"parent_id":577875,"elapsed":0.00023295904975384474,"elapsed_instrumentation":0.00012048002099618316,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":577881,"event":"return","thread_id":9160,"parent_id":577874,"elapsed":0.00037697097286581993,"elapsed_instrumentation":0.0002842679969035089,"return_value":{"class":"Integer","value":"7500","object_id":15001}},{"id":577882,"event":"return","thread_id":9160,"parent_id":577865,"elapsed":0.0018485410255379975,"elapsed_instrumentation":0.00011872698087245226},{"id":577883,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":577884,"event":"return","thread_id":9160,"parent_id":577883,"elapsed":0.00065871,"elapsed_instrumentation":0.000104102015029639},{"id":577885,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":577886,"event":"return","thread_id":9160,"parent_id":577885,"elapsed":0.001830562,"elapsed_instrumentation":9.127502562478185e-05},{"id":577887,"event":"call","thread_id":9160,"defined_class":"LanguageValidator","method_id":"validate_each","path":"app/validators/language_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":9806428,"value":":languages","kind":"req"},{"name":"value","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"LanguageValidator","object_id":1342240,"value":"#<LanguageValidator:0x00007fc939554bc8>"}},{"id":577888,"event":"return","thread_id":9160,"parent_id":577887,"elapsed":7.660011760890484e-06,"elapsed_instrumentation":0.00042684999061748385},{"id":577889,"event":"return","thread_id":9160,"parent_id":577862,"elapsed":0.0058818329707719386,"elapsed_instrumentation":0.00017902400577440858,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324c6320 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c64d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c67a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c6988 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c6b68 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c6d48 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342260,"size":6}},{"id":577890,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840580,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931d70>"}},{"id":577891,"event":"return","thread_id":9160,"parent_id":577890,"elapsed":6.403017323464155e-06,"elapsed_instrumentation":0.00015269702998921275,"return_value":{"class":"Array","value":"[]","object_id":1342280,"size":0}},{"id":577892,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931ff0>"}},{"id":577893,"event":"return","thread_id":9160,"parent_id":577892,"elapsed":2.4929759092628956e-06,"elapsed_instrumentation":9.224202949553728e-05,"return_value":{"class":"Array","value":"[]","object_id":1342300,"size":0}},{"id":577894,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342340,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930ec0>"}},{"id":577895,"event":"return","thread_id":9160,"parent_id":577894,"elapsed":0.0001029639970511198,"elapsed_instrumentation":0.0001724259927868843,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324fc1c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fc308 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342360,"size":2}},{"id":577896,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930c40>"}},{"id":577897,"event":"return","thread_id":9160,"parent_id":577896,"elapsed":3.290013410151005e-06,"elapsed_instrumentation":9.36489668674767e-05,"return_value":{"class":"Array","value":"[]","object_id":1342420,"size":0}},{"id":577898,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"follows\" (\"created_at\", \"updated_at\", \"account_id\", \"target_account_id\", \"show_reblogs\", \"uri\", \"notify\", \"languages\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING \"id\"","database_type":"postgres"}},{"id":577899,"event":"return","thread_id":9160,"parent_id":577898,"elapsed":0.001154976,"elapsed_instrumentation":9.877199772745371e-05},{"id":577900,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930c40>"}},{"id":577901,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit?","path":"app/models/concerns/rate_limitable.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":3840480,"value":"#<Follow:0x00007fc919a90c88>"}},{"id":577902,"event":"return","thread_id":9160,"parent_id":577901,"elapsed":5.187001079320908e-06,"elapsed_instrumentation":6.847601616755128e-05},{"id":577903,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577904,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577905,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577906,"event":"return","thread_id":9160,"parent_id":577905,"elapsed":1.774798147380352e-05,"elapsed_instrumentation":8.08490440249443e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577907,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111361347215267846, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":577908,"event":"return","thread_id":9160,"parent_id":577907,"elapsed":0.000883163,"elapsed_instrumentation":7.683300646021962e-05},{"id":577909,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577910,"event":"return","thread_id":9160,"parent_id":577909,"elapsed":1.1400028597563505e-05,"elapsed_instrumentation":0.00010679202387109399,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577911,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577912,"event":"return","thread_id":9160,"parent_id":577911,"elapsed":6.81303208693862e-06,"elapsed_instrumentation":7.267598994076252e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577913,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":577914,"event":"return","thread_id":9160,"parent_id":577913,"elapsed":0.000343371,"elapsed_instrumentation":0.00017723999917507172},{"id":577915,"event":"return","thread_id":9160,"parent_id":577904,"elapsed":0.0036462279967963696,"elapsed_instrumentation":0.00011835701297968626,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577916,"event":"return","thread_id":9160,"parent_id":577903,"elapsed":0.0037881570169702172,"elapsed_instrumentation":9.821896674111485e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc919a97d08>","object_id":3840200}},{"id":577917,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>"}},{"id":577918,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>"}},{"id":577919,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111361347215267847, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":577920,"event":"return","thread_id":9160,"parent_id":577919,"elapsed":0.001212042,"elapsed_instrumentation":0.00010287901386618614},{"id":577921,"event":"return","thread_id":9160,"parent_id":577918,"elapsed":0.0018506619962863624,"elapsed_instrumentation":8.90259980224073e-05},{"id":577922,"event":"return","thread_id":9160,"parent_id":577917,"elapsed":0.001963699993211776,"elapsed_instrumentation":9.296106873080134e-05},{"id":577923,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577924,"event":"return","thread_id":9160,"parent_id":577923,"elapsed":1.0859977919608355e-05,"elapsed_instrumentation":0.00012397702084854245,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577925,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>"}},{"id":577926,"event":"return","thread_id":9160,"parent_id":577925,"elapsed":6.64399703964591e-06,"elapsed_instrumentation":7.539096986874938e-05},{"id":577927,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577928,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577929,"event":"return","thread_id":9160,"parent_id":577928,"elapsed":9.884999599307775e-06,"elapsed_instrumentation":0.00011601101141422987,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577930,"event":"return","thread_id":9160,"parent_id":577927,"elapsed":0.0001530559966340661,"elapsed_instrumentation":0.0003529450041241944,"return_value":{"class":"String","value":"local","object_id":1381860}},{"id":577931,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840720,"value":"Cache delete: followers_hash:111361347215267847:local\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577932,"event":"return","thread_id":9160,"parent_id":577931,"elapsed":0.0008669919916428626,"elapsed_instrumentation":0.00015571701806038618,"return_value":{"class":"Integer","value":"54","object_id":109}},{"id":577933,"event":"return","thread_id":9160,"parent_id":577900,"elapsed":0.008234168984927237,"elapsed_instrumentation":0.00023174099624156952,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324fb390 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fb1d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fb020 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fae68 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342480,"size":4}},{"id":577934,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342340,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930ec0>"}},{"id":577935,"event":"return","thread_id":9160,"parent_id":577934,"elapsed":7.970025762915611e-06,"elapsed_instrumentation":0.0006137450109235942,"return_value":{"class":"Array","value":"[]","object_id":1342500,"size":0}},{"id":577936,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":577937,"event":"return","thread_id":9160,"parent_id":577936,"elapsed":0.000757615,"elapsed_instrumentation":0.00010943599045276642},{"id":577938,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":577939,"event":"return","thread_id":9160,"parent_id":577938,"elapsed":4.212954081594944e-06,"elapsed_instrumentation":0.00033371499739587307,"return_value":{"class":"Array","value":"[]","object_id":1342560,"size":0}},{"id":577940,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3840740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":577941,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840760,"value":"Cache delete: relationship:111361347215267846:111361347215267847\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577942,"event":"return","thread_id":9160,"parent_id":577941,"elapsed":0.0008561729919165373,"elapsed_instrumentation":0.00013053696602582932,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":577943,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840780,"value":"Cache delete: relationship:111361347215267847:111361347215267846\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577944,"event":"return","thread_id":9160,"parent_id":577943,"elapsed":0.000676355033647269,"elapsed_instrumentation":0.00017859699437394738,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":577945,"event":"return","thread_id":9160,"parent_id":577940,"elapsed":0.002171322994399816,"elapsed_instrumentation":0.00015636696480214596,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93252f690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342620,"size":1}},{"id":577946,"event":"call","thread_id":9160,"defined_class":"PotentialFriendshipTracker","method_id":"remove","path":"app/lib/potential_friendship_tracker.rb","lineno":27,"static":true,"parameters":[{"name":"account_id","class":"Integer","object_id":222722694430535693,"value":"111361347215267846","kind":"req"},{"name":"target_account_id","class":"Integer","object_id":222722694430535695,"value":"111361347215267847","kind":"req"}],"receiver":{"class":"Class","object_id":319780,"value":"PotentialFriendshipTracker"}},{"id":577947,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"redis","path":"app/models/concerns/redisable.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Class","object_id":319780,"value":"PotentialFriendshipTracker"}},{"id":577948,"event":"return","thread_id":9160,"parent_id":577947,"elapsed":5.176989361643791e-06,"elapsed_instrumentation":8.59750434756279e-05,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fc934c37e90>","object_id":319760}},{"id":577949,"event":"return","thread_id":9160,"parent_id":577946,"elapsed":0.0007151009631343186,"elapsed_instrumentation":0.00011163105955347419},{"id":577950,"event":"return","thread_id":9160,"parent_id":577841,"elapsed":0.030189514975063503,"elapsed_instrumentation":0.00041021202923730016,"return_value":{"class":"Follow","value":"#<Follow:0x00007fc919a90c88>","object_id":3840480}},{"id":577951,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"local_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":292,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839920,"value":"#<Account:0x00007fc919a98d48>"}},{"id":577952,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840800,"value":"Cache read: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577953,"event":"return","thread_id":9160,"parent_id":577952,"elapsed":0.0006673840107396245,"elapsed_instrumentation":0.00016248301835730672,"return_value":{"class":"Integer","value":"100","object_id":201}},{"id":577954,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840820,"value":"Cache generate: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>102 (...4 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577955,"event":"return","thread_id":9160,"parent_id":577954,"elapsed":0.0009887419873848557,"elapsed_instrumentation":0.0001575540518388152,"return_value":{"class":"Integer","value":"104","object_id":209}},{"id":577956,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3840840,"value":"[:username]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3840860,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc919acdac0>"}},{"id":577957,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"domain\" IS NULL ORDER BY \"accounts\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":577958,"event":"return","thread_id":9160,"parent_id":577957,"elapsed":0.001085066,"elapsed_instrumentation":9.426905307918787e-05},{"id":577959,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for_username","path":"app/lib/activitypub/tag_manager.rb","lineno":57,"static":false,"parameters":[{"name":"username","class":"String","object_id":3840880,"value":"Me","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577960,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577961,"event":"return","thread_id":9160,"parent_id":577960,"elapsed":5.564012099057436e-06,"elapsed_instrumentation":0.00012203899677842855,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577962,"event":"return","thread_id":9160,"parent_id":577959,"elapsed":0.00032271299278363585,"elapsed_instrumentation":0.0001415950246155262,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":3840900}},{"id":577963,"event":"return","thread_id":9160,"parent_id":577956,"elapsed":0.002998564043082297,"elapsed_instrumentation":0.00014979997649788857},{"id":577964,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3840920,"value":"i__\u0010`\u001b_\u0003_]4____d_E\u001fy__\u0013\u001d\u0010$___L"}},{"id":577965,"event":"return","thread_id":9160,"parent_id":577964,"elapsed":4.6309432946145535e-06,"elapsed_instrumentation":0.00010380800813436508,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":3840940}},{"id":577966,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3840960,"value":"Cache write: followers_hash:111361347215267847:local ({:compress=>false, :compress_threshold=>1024}) (...1 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":577967,"event":"return","thread_id":9160,"parent_id":577966,"elapsed":0.0006081400206312537,"elapsed_instrumentation":0.00011513003846630454,"return_value":{"class":"Integer","value":"101","object_id":203}},{"id":577968,"event":"return","thread_id":9160,"parent_id":577951,"elapsed":0.007739761029370129,"elapsed_instrumentation":0.00010975997429341078,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":3840940}},{"id":577969,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":36,"static":false,"parameters":[{"name":"target","class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577970,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577971,"event":"return","thread_id":9160,"parent_id":577970,"elapsed":1.2803997378796339e-05,"elapsed_instrumentation":0.0001842979690991342,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":577972,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"object_type","path":"app/models/account.rb","lineno":385,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577973,"event":"return","thread_id":9160,"parent_id":577972,"elapsed":3.100023604929447e-06,"elapsed_instrumentation":8.085597073659301e-05,"return_value":{"class":"Symbol","value":":person","object_id":20438108}},{"id":577974,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"instance_actor?","path":"app/models/account.rb","lineno":175,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577975,"event":"return","thread_id":9160,"parent_id":577974,"elapsed":8.194998372346163e-06,"elapsed_instrumentation":5.3729978390038013e-05},{"id":577976,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577977,"event":"return","thread_id":9160,"parent_id":577976,"elapsed":3.3450196497142315e-06,"elapsed_instrumentation":0.00010640302207320929,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577978,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":577979,"event":"return","thread_id":9160,"parent_id":577978,"elapsed":2.8249924071133137e-06,"elapsed_instrumentation":9.846396278589964e-05,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":577980,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"to_param","path":"app/models/account.rb","lineno":389,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3839880,"value":"#<Account:0x00007fc919a9e388>"}},{"id":577981,"event":"return","thread_id":9160,"parent_id":577980,"elapsed":6.509013473987579e-06,"elapsed_instrumentation":7.45789147913456e-05,"return_value":{"class":"String","value":"Me","object_id":3840140}},{"id":577982,"event":"return","thread_id":9160,"parent_id":577969,"elapsed":0.0008859230438247323,"elapsed_instrumentation":0.00012783997226506472,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":3840980}}]}