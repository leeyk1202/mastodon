{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"AccountInteractions #local_followers_hash invalidates cache as needed when removing or adding followers","source_location":"spec/models/concerns/account_interactions_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"concerns","type":"package","children":[{"name":"AccountInteractions","type":"class","children":[{"name":"local_followers_hash","type":"function","location":"app/models/concerns/account_interactions.rb:292","static":false},{"name":"unfollow!","type":"function","location":"app/models/concerns/account_interactions.rb:173","static":false},{"name":"follow!","type":"function","location":"app/models/concerns/account_interactions.rb:115","static":false}]},{"name":"AccountCounters","type":"class","children":[{"name":"decrement_count!","type":"function","location":"app/models/concerns/account_counters.rb:28","static":false},{"name":"update_count!","type":"function","location":"app/models/concerns/account_counters.rb:34","static":false},{"name":"account_stat","type":"function","location":"app/models/concerns/account_counters.rb:76","static":false},{"name":"following_count","type":"function","location":"app/models/concerns/account_counters.rb:13","static":false},{"name":"increment_count!","type":"function","location":"app/models/concerns/account_counters.rb:23","static":false}]},{"name":"RateLimitable","type":"class","children":[{"name":"rate_limit=","type":"function","location":"app/models/concerns/rate_limitable.rb:6","static":false},{"name":"rate_limit?","type":"function","location":"app/models/concerns/rate_limitable.rb:10","static":false}]},{"name":"FollowLimitable","type":"class","children":[{"name":"bypass_follow_limit=","type":"function","location":"app/models/concerns/follow_limitable.rb:10","static":false},{"name":"bypass_follow_limit?","type":"function","location":"app/models/concerns/follow_limitable.rb:14","static":false}]},{"name":"Redisable","type":"class","children":[{"name":"redis","type":"function","location":"app/models/concerns/redisable.rb:4","static":false}]}]},{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"object_type","type":"function","location":"app/models/account.rb:385","static":false},{"name":"instance_actor?","type":"function","location":"app/models/account.rb:175","static":false},{"name":"to_param","type":"function","location":"app/models/account.rb:389","static":false},{"name":"synchronization_uri_prefix","type":"function","location":"app/models/account.rb:409","static":false}]},{"name":"AccountStat","type":"class","children":[{"name":"following_count","type":"function","location":"app/models/account_stat.rb:25","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"activitypub","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"uri_for_username","type":"function","location":"app/lib/activitypub/tag_manager.rb:57","static":false},{"name":"uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:36","static":false},{"name":"generate_uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:61","static":false}]}]}]},{"name":"PotentialFriendshipTracker","type":"class","children":[{"name":"remove","type":"function","location":"app/lib/potential_friendship_tracker.rb:27","static":true}]}]},{"name":"helpers","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]}]},{"name":"validators","type":"package","children":[{"name":"FollowLimitValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/follow_limit_validator.rb:7","static":false},{"name":"limit_for_account","type":"function","location":"app/validators/follow_limit_validator.rb:14","static":true}]},{"name":"LanguageValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/language_validator.rb:6","static":false}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/active_record","type":"package","children":[{"name":"ActiveRecord","type":"class","children":[{"name":"Batches","type":"class","children":[{"name":"pluck_each","type":"function","location":"lib/active_record/batches.rb:5","static":false}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]},{"name":"unpack","type":"function","location":"<internal:pack>:19","static":false,"labels":["string.unpack"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":1032723,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"local_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":292,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>"}},{"id":1032724,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888240,"value":"Cache read: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032725,"event":"return","thread_id":9160,"parent_id":1032724,"elapsed":0.0013020879996474832,"elapsed_instrumentation":0.00025598399224691093,"return_value":{"class":"Integer","value":"100","object_id":201}},{"id":1032726,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888260,"value":"Cache generate: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>102 (...4 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032727,"event":"return","thread_id":9160,"parent_id":1032726,"elapsed":0.0012364049907773733,"elapsed_instrumentation":0.0002494220098014921,"return_value":{"class":"Integer","value":"104","object_id":209}},{"id":1032728,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5888280,"value":"[:username]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5888300,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06fed848>"}},{"id":1032729,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"domain\" IS NULL ORDER BY \"accounts\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1032730,"event":"return","thread_id":9160,"parent_id":1032729,"elapsed":0.001551409,"elapsed_instrumentation":0.0001098400098271668},{"id":1032731,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for_username","path":"app/lib/activitypub/tag_manager.rb","lineno":57,"static":false,"parameters":[{"name":"username","class":"String","object_id":5888320,"value":"Me","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032732,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032733,"event":"return","thread_id":9160,"parent_id":1032732,"elapsed":5.2549876272678375e-06,"elapsed_instrumentation":0.0001310190127696842,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032734,"event":"return","thread_id":9160,"parent_id":1032731,"elapsed":0.00033280099160037935,"elapsed_instrumentation":0.0001607599842827767,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":5888340}},{"id":1032735,"event":"return","thread_id":9160,"parent_id":1032728,"elapsed":0.00395297899376601,"elapsed_instrumentation":0.00021770401508547366},{"id":1032736,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5888360,"value":"i__\u0010`\u001b_\u0003_]4____d_E\u001fy__\u0013\u001d\u0010$___L"}},{"id":1032737,"event":"return","thread_id":9160,"parent_id":1032736,"elapsed":5.1460228860378265e-06,"elapsed_instrumentation":0.0002585019974503666,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":5888380}},{"id":1032738,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888400,"value":"Cache write: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>1024}) (...1 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032739,"event":"return","thread_id":9160,"parent_id":1032738,"elapsed":0.0018219519988633692,"elapsed_instrumentation":0.0001946970005519688,"return_value":{"class":"Integer","value":"101","object_id":203}},{"id":1032740,"event":"return","thread_id":9160,"parent_id":1032723,"elapsed":0.01370179100194946,"elapsed_instrumentation":0.00037809601053595543,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":5888380}},{"id":1032741,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":36,"static":false,"parameters":[{"name":"target","class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032742,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032743,"event":"return","thread_id":9160,"parent_id":1032742,"elapsed":1.5853001968935132e-05,"elapsed_instrumentation":0.00013780200970359147,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032744,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"object_type","path":"app/models/account.rb","lineno":385,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032745,"event":"return","thread_id":9160,"parent_id":1032744,"elapsed":5.629990482702851e-06,"elapsed_instrumentation":0.00017652902170084417,"return_value":{"class":"Symbol","value":":person","object_id":20438108}},{"id":1032746,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"instance_actor?","path":"app/models/account.rb","lineno":175,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032747,"event":"return","thread_id":9160,"parent_id":1032746,"elapsed":1.7143989680334926e-05,"elapsed_instrumentation":0.00010591201134957373},{"id":1032748,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032749,"event":"return","thread_id":9160,"parent_id":1032748,"elapsed":5.3219846449792385e-06,"elapsed_instrumentation":0.0001494040188845247,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032750,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032751,"event":"return","thread_id":9160,"parent_id":1032750,"elapsed":3.910012310370803e-06,"elapsed_instrumentation":0.00016092698206193745,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032752,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"to_param","path":"app/models/account.rb","lineno":389,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032753,"event":"return","thread_id":9160,"parent_id":1032752,"elapsed":2.7888017939403653e-05,"elapsed_instrumentation":0.00013699097326025367,"return_value":{"class":"String","value":"Me","object_id":5888420}},{"id":1032754,"event":"return","thread_id":9160,"parent_id":1032741,"elapsed":0.0018624039948917925,"elapsed_instrumentation":0.00018863900913856924,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":5888440}},{"id":1032755,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"unfollow!","path":"app/models/concerns/account_interactions.rb","lineno":173,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>","kind":"req"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032756,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1032757,"event":"return","thread_id":9160,"parent_id":1032756,"elapsed":0.00089116,"elapsed_instrumentation":0.00017168399062938988},{"id":1032758,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1035920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09657f88>"}},{"id":1032759,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1032760,"event":"return","thread_id":9160,"parent_id":1032759,"elapsed":0.00088914,"elapsed_instrumentation":0.00013204797869548202},{"id":1032761,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1032762,"event":"return","thread_id":9160,"parent_id":1032761,"elapsed":0.001173505,"elapsed_instrumentation":0.0001229439803864807},{"id":1032763,"event":"return","thread_id":9160,"parent_id":1032758,"elapsed":0.004983763006748632,"elapsed_instrumentation":0.0004110309819225222,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc069ed128 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1035940,"size":1}},{"id":1032764,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follows\" WHERE \"follows\".\"id\" = $1","database_type":"postgres"}},{"id":1032765,"event":"return","thread_id":9160,"parent_id":1032764,"elapsed":0.001450927,"elapsed_instrumentation":0.00011297597666271031},{"id":1032766,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1035920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09657f88>"}},{"id":1032767,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"account_pins\" WHERE \"account_pins\".\"target_account_id\" = $1 AND \"account_pins\".\"account_id\" = $2","database_type":"postgres"}},{"id":1032768,"event":"return","thread_id":9160,"parent_id":1032767,"elapsed":0.001441062,"elapsed_instrumentation":0.00010262700379826128},{"id":1032769,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032770,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032771,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032772,"event":"return","thread_id":9160,"parent_id":1032771,"elapsed":2.8600014047697186e-05,"elapsed_instrumentation":0.0004118220240343362,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032773,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111360495699412477, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1032774,"event":"return","thread_id":9160,"parent_id":1032773,"elapsed":0.00181014,"elapsed_instrumentation":0.00012257799971848726},{"id":1032775,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032776,"event":"return","thread_id":9160,"parent_id":1032775,"elapsed":2.7280999347567558e-05,"elapsed_instrumentation":0.0001942899834830314,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032777,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032778,"event":"return","thread_id":9160,"parent_id":1032777,"elapsed":1.610899926163256e-05,"elapsed_instrumentation":0.0002569340285845101,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032779,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1032780,"event":"return","thread_id":9160,"parent_id":1032779,"elapsed":0.000876303,"elapsed_instrumentation":0.00014768200344406068},{"id":1032781,"event":"return","thread_id":9160,"parent_id":1032770,"elapsed":0.0077620570082217455,"elapsed_instrumentation":0.00019823299953714013,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032782,"event":"return","thread_id":9160,"parent_id":1032769,"elapsed":0.00800230199820362,"elapsed_instrumentation":0.00021765800192952156,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032783,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1032784,"event":"return","thread_id":9160,"parent_id":1032783,"elapsed":0.002046932,"elapsed_instrumentation":0.0003015860274899751},{"id":1032785,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":5888500,"value":"#<Account:0x00007fdc06feb548>"}},{"id":1032786,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":5888500,"value":"#<Account:0x00007fdc06feb548>"}},{"id":1032787,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111360495699412478, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1032788,"event":"return","thread_id":9160,"parent_id":1032787,"elapsed":0.001635706,"elapsed_instrumentation":0.0001752880052663386},{"id":1032789,"event":"return","thread_id":9160,"parent_id":1032786,"elapsed":0.0027968290087301284,"elapsed_instrumentation":0.0001713479869067669},{"id":1032790,"event":"return","thread_id":9160,"parent_id":1032785,"elapsed":0.003013137000380084,"elapsed_instrumentation":0.00022626601275987923},{"id":1032791,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032792,"event":"return","thread_id":9160,"parent_id":1032791,"elapsed":2.2594002075493336e-05,"elapsed_instrumentation":0.0005875520000699908,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032793,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888500,"value":"#<Account:0x00007fdc06feb548>"}},{"id":1032794,"event":"return","thread_id":9160,"parent_id":1032793,"elapsed":2.9853021260350943e-05,"elapsed_instrumentation":0.0001310909865424037},{"id":1032795,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032796,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032797,"event":"return","thread_id":9160,"parent_id":1032796,"elapsed":7.906026439741254e-06,"elapsed_instrumentation":6.665996625088155e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032798,"event":"return","thread_id":9160,"parent_id":1032795,"elapsed":9.280900121666491e-05,"elapsed_instrumentation":8.480201358906925e-05,"return_value":{"class":"String","value":"local","object_id":1036000}},{"id":1032799,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888520,"value":"Cache delete: followers_hash:111360495699412478:local\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032800,"event":"return","thread_id":9160,"parent_id":1032799,"elapsed":0.0015842909924685955,"elapsed_instrumentation":0.00036218101740814745,"return_value":{"class":"Integer","value":"54","object_id":109}},{"id":1032801,"event":"return","thread_id":9160,"parent_id":1032766,"elapsed":0.025106433022301644,"elapsed_instrumentation":0.0005813179595861584,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc069ecf70 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc069ecdb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc069ecb60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1036040,"size":3}},{"id":1032802,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1032803,"event":"return","thread_id":9160,"parent_id":1032802,"elapsed":0.000821913,"elapsed_instrumentation":0.0001478100020904094},{"id":1032804,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1032805,"event":"return","thread_id":9160,"parent_id":1032804,"elapsed":4.5869965106248856e-06,"elapsed_instrumentation":0.0005479849642142653,"return_value":{"class":"Array","value":"[]","object_id":824800,"size":0}},{"id":1032806,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1032807,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888580,"value":"Cache delete: relationship:111360495699412477:111360495699412478\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032808,"event":"return","thread_id":9160,"parent_id":1032807,"elapsed":0.0017701440083328635,"elapsed_instrumentation":0.00022091600112617016,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1032809,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888600,"value":"Cache delete: relationship:111360495699412478:111360495699412477\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032810,"event":"return","thread_id":9160,"parent_id":1032809,"elapsed":0.0020049710001330823,"elapsed_instrumentation":0.00019929202971979976,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1032811,"event":"return","thread_id":9160,"parent_id":1032806,"elapsed":0.004963794985087588,"elapsed_instrumentation":0.00019408599473536015,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc09940f60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824860,"size":1}},{"id":1032812,"event":"return","thread_id":9160,"parent_id":1032755,"elapsed":0.0453858420078177,"elapsed_instrumentation":0.0005709390097763389,"return_value":{"class":"Follow","value":"#<Follow:0x00007fdc06fecbc8>","object_id":5888540}},{"id":1032813,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"local_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":292,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>"}},{"id":1032814,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888620,"value":"Cache read: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032815,"event":"return","thread_id":9160,"parent_id":1032814,"elapsed":0.0015605129883624613,"elapsed_instrumentation":0.00016625603893771768,"return_value":{"class":"Integer","value":"100","object_id":201}},{"id":1032816,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888640,"value":"Cache generate: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>102 (...4 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032817,"event":"return","thread_id":9160,"parent_id":1032816,"elapsed":0.0011588089982979,"elapsed_instrumentation":0.00017096701776608825,"return_value":{"class":"Integer","value":"104","object_id":209}},{"id":1032818,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5888660,"value":"[:username]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5888680,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06fea648>"}},{"id":1032819,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"domain\" IS NULL ORDER BY \"accounts\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1032820,"event":"return","thread_id":9160,"parent_id":1032819,"elapsed":0.001592478,"elapsed_instrumentation":0.00031618299544788897},{"id":1032821,"event":"return","thread_id":9160,"parent_id":1032818,"elapsed":0.004614051984390244,"elapsed_instrumentation":0.0002511939965188503},{"id":1032822,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5888700,"value":"\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000"}},{"id":1032823,"event":"return","thread_id":9160,"parent_id":1032822,"elapsed":6.304006092250347e-06,"elapsed_instrumentation":0.0001694869715720415,"return_value":{"class":"String","value":"0000000000000000000000000000000000000000000000000000000000000000","object_id":5888720}},{"id":1032824,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5888740,"value":"Cache write: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>1024}) (...1 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032825,"event":"return","thread_id":9160,"parent_id":1032824,"elapsed":0.001357442990411073,"elapsed_instrumentation":0.00046559699694626033,"return_value":{"class":"Integer","value":"101","object_id":203}},{"id":1032826,"event":"return","thread_id":9160,"parent_id":1032813,"elapsed":0.012482750986237079,"elapsed_instrumentation":0.0004993059847038239,"return_value":{"class":"String","value":"0000000000000000000000000000000000000000000000000000000000000000","object_id":5888720}},{"id":1032827,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"follow!","path":"app/models/concerns/account_interactions.rb","lineno":115,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>","kind":"req"},{"name":"reblogs","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"notify","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"languages","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"uri","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"rate_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"bypass_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032828,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1032829,"event":"return","thread_id":9160,"parent_id":1032828,"elapsed":0.000789446,"elapsed_instrumentation":0.00012959097512066364},{"id":1032830,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>"}},{"id":1032831,"event":"return","thread_id":9160,"parent_id":1032830,"elapsed":9.604002116248012e-06,"elapsed_instrumentation":0.00018253401503898203},{"id":1032832,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>"}},{"id":1032833,"event":"return","thread_id":9160,"parent_id":1032832,"elapsed":5.069014150649309e-06,"elapsed_instrumentation":9.845799650065601e-05},{"id":1032834,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>"}},{"id":1032835,"event":"return","thread_id":9160,"parent_id":1032834,"elapsed":5.20399771630764e-06,"elapsed_instrumentation":0.00014452898176386952},{"id":1032836,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>"}},{"id":1032837,"event":"return","thread_id":9160,"parent_id":1032836,"elapsed":3.3259857445955276e-06,"elapsed_instrumentation":7.743900641798973e-05},{"id":1032838,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e899c8>"}},{"id":1032839,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"generate_uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":61,"static":false,"parameters":[{"name":"_target","class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032840,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032841,"event":"return","thread_id":9160,"parent_id":1032840,"elapsed":7.727998308837414e-06,"elapsed_instrumentation":0.0003563969803508371,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032842,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032843,"event":"return","thread_id":9160,"parent_id":1032842,"elapsed":8.445989806205034e-06,"elapsed_instrumentation":0.00030305300606414676,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032844,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack","path":"<internal:pack>","lineno":19,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":403680,"value":"NnnnnN","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5888800,"value":"_h__\u000eo__\u0004r__=\u0007_W"}},{"id":1032845,"event":"return","thread_id":9160,"parent_id":1032844,"elapsed":8.715986041352153e-06,"elapsed_instrumentation":0.0009009029890876263,"return_value":{"class":"Array","value":"[3966285004, 3695, 50888, 1138, 40619, 1023933271]","object_id":5888820,"size":6}},{"id":1032846,"event":"return","thread_id":9160,"parent_id":1032839,"elapsed":0.002187291975133121,"elapsed_instrumentation":0.0004511279985308647,"return_value":{"class":"URI::HTTPS","value":"https://cb6e6126.ngrok.io/ec68b4cc-0e6f-46c8-8472-9eab3d07fb57","object_id":5888840}},{"id":1032847,"event":"return","thread_id":9160,"parent_id":1032838,"elapsed":0.0027508229832164943,"elapsed_instrumentation":0.0002155439869966358,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc099b50e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099b5450 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824440,"size":2}},{"id":1032848,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824480,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e89748>"}},{"id":1032849,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit?","path":"app/models/concerns/follow_limitable.rb","lineno":14,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>"}},{"id":1032850,"event":"return","thread_id":9160,"parent_id":1032849,"elapsed":7.622991688549519e-06,"elapsed_instrumentation":0.0001442030188627541},{"id":1032851,"event":"call","thread_id":9160,"defined_class":"FollowLimitValidator","method_id":"validate","path":"app/validators/follow_limit_validator.rb","lineno":7,"static":false,"parameters":[{"name":"follow","class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>","kind":"req"}],"receiver":{"class":"FollowLimitValidator","object_id":1621500,"value":"#<FollowLimitValidator:0x00007fdc0f75b820>"}},{"id":1032852,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032853,"event":"return","thread_id":9160,"parent_id":1032852,"elapsed":1.3837008737027645e-05,"elapsed_instrumentation":0.0002875820209737867,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032854,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"following_count","path":"app/models/concerns/account_counters.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":5888880,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":5888900,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032855,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032856,"event":"return","thread_id":9160,"parent_id":1032855,"elapsed":2.8473004931584e-05,"elapsed_instrumentation":0.0001490339927840978,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032857,"event":"call","thread_id":9160,"defined_class":"AccountStat","method_id":"following_count","path":"app/models/account_stat.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"AccountStat","object_id":5888480,"value":"#<AccountStat:0x00007fdc06fefa08>"}},{"id":1032858,"event":"return","thread_id":9160,"parent_id":1032857,"elapsed":0.0001519699872005731,"elapsed_instrumentation":0.00011469403398223221,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1032859,"event":"return","thread_id":9160,"parent_id":1032854,"elapsed":0.0005066540034022182,"elapsed_instrumentation":0.0005534249939955771,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1032860,"event":"call","thread_id":9160,"defined_class":"FollowLimitValidator","method_id":"limit_for_account","path":"app/validators/follow_limit_validator.rb","lineno":14,"static":true,"parameters":[{"name":"account","class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>","kind":"req"}],"receiver":{"class":"Class","object_id":58400,"value":"FollowLimitValidator"}},{"id":1032861,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"following_count","path":"app/models/concerns/account_counters.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":5888920,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":5888940,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032862,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032863,"event":"return","thread_id":9160,"parent_id":1032862,"elapsed":1.5150988474488258e-05,"elapsed_instrumentation":0.00013288401532918215,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032864,"event":"call","thread_id":9160,"defined_class":"AccountStat","method_id":"following_count","path":"app/models/account_stat.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"AccountStat","object_id":5888480,"value":"#<AccountStat:0x00007fdc06fefa08>"}},{"id":1032865,"event":"return","thread_id":9160,"parent_id":1032864,"elapsed":4.5380002120509744e-05,"elapsed_instrumentation":0.00015580002218484879,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1032866,"event":"return","thread_id":9160,"parent_id":1032861,"elapsed":0.0004217089735902846,"elapsed_instrumentation":0.00018240301869809628,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1032867,"event":"return","thread_id":9160,"parent_id":1032860,"elapsed":0.0006343059940263629,"elapsed_instrumentation":0.00035316700814291835,"return_value":{"class":"Integer","value":"7500","object_id":15001}},{"id":1032868,"event":"return","thread_id":9160,"parent_id":1032851,"elapsed":0.002571588003775105,"elapsed_instrumentation":0.000418604991864413},{"id":1032869,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1032870,"event":"return","thread_id":9160,"parent_id":1032869,"elapsed":0.000662105,"elapsed_instrumentation":0.00018949800869449973},{"id":1032871,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1032872,"event":"return","thread_id":9160,"parent_id":1032871,"elapsed":0.002562659,"elapsed_instrumentation":0.00011428399011492729},{"id":1032873,"event":"call","thread_id":9160,"defined_class":"LanguageValidator","method_id":"validate_each","path":"app/validators/language_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":9806428,"value":":languages","kind":"req"},{"name":"value","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"LanguageValidator","object_id":824520,"value":"#<LanguageValidator:0x00007fdc0f69ebf8>"}},{"id":1032874,"event":"return","thread_id":9160,"parent_id":1032873,"elapsed":9.565992513671517e-06,"elapsed_instrumentation":0.0002433859626762569},{"id":1032875,"event":"return","thread_id":9160,"parent_id":1032848,"elapsed":0.009657904010964558,"elapsed_instrumentation":0.0003333819913677871,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc099ce5e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099ce900 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cebd0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cedb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cef90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cf170 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824540,"size":6}},{"id":1032876,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824480,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e89748>"}},{"id":1032877,"event":"return","thread_id":9160,"parent_id":1032876,"elapsed":3.983004717156291e-06,"elapsed_instrumentation":0.0001477590121794492,"return_value":{"class":"Array","value":"[]","object_id":824560,"size":0}},{"id":1032878,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e899c8>"}},{"id":1032879,"event":"return","thread_id":9160,"parent_id":1032878,"elapsed":2.7279893402010202e-06,"elapsed_instrumentation":8.393399184569716e-05,"return_value":{"class":"Array","value":"[]","object_id":824580,"size":0}},{"id":1032880,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e88708>"}},{"id":1032881,"event":"return","thread_id":9160,"parent_id":1032880,"elapsed":0.00030278999474830925,"elapsed_instrumentation":0.0001373109989799559,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0996c700 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0996c840 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824640,"size":2}},{"id":1032882,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1621660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e84b58>"}},{"id":1032883,"event":"return","thread_id":9160,"parent_id":1032882,"elapsed":2.922985004261136e-06,"elapsed_instrumentation":0.00013211800251156092,"return_value":{"class":"Array","value":"[]","object_id":1621680,"size":0}},{"id":1032884,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"follows\" (\"created_at\", \"updated_at\", \"account_id\", \"target_account_id\", \"show_reblogs\", \"uri\", \"notify\", \"languages\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING \"id\"","database_type":"postgres"}},{"id":1032885,"event":"return","thread_id":9160,"parent_id":1032884,"elapsed":0.001503965,"elapsed_instrumentation":0.00013267400208860636},{"id":1032886,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1621660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e84b58>"}},{"id":1032887,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit?","path":"app/models/concerns/rate_limitable.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":5888760,"value":"#<Follow:0x00007fdc06fe9888>"}},{"id":1032888,"event":"return","thread_id":9160,"parent_id":1032887,"elapsed":7.265975000336766e-06,"elapsed_instrumentation":0.00010990299051627517},{"id":1032889,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032890,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032891,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032892,"event":"return","thread_id":9160,"parent_id":1032891,"elapsed":2.9866991098970175e-05,"elapsed_instrumentation":0.00018152399570681155,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032893,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111360495699412477, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1032894,"event":"return","thread_id":9160,"parent_id":1032893,"elapsed":0.001814742,"elapsed_instrumentation":0.00017787300748750567},{"id":1032895,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032896,"event":"return","thread_id":9160,"parent_id":1032895,"elapsed":2.6887020794674754e-05,"elapsed_instrumentation":0.0002045119763351977,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032897,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032898,"event":"return","thread_id":9160,"parent_id":1032897,"elapsed":8.659000741317868e-06,"elapsed_instrumentation":8.874299237504601e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032899,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1032900,"event":"return","thread_id":9160,"parent_id":1032899,"elapsed":0.000868216,"elapsed_instrumentation":0.00011300700134597719},{"id":1032901,"event":"return","thread_id":9160,"parent_id":1032890,"elapsed":0.007099254988133907,"elapsed_instrumentation":0.00021091703092679381,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032902,"event":"return","thread_id":9160,"parent_id":1032889,"elapsed":0.0073512579838279635,"elapsed_instrumentation":0.0005326899990905076,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06fefa08>","object_id":5888480}},{"id":1032903,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>"}},{"id":1032904,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>"}},{"id":1032905,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111360495699412478, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1032906,"event":"return","thread_id":9160,"parent_id":1032905,"elapsed":0.001334377,"elapsed_instrumentation":0.00013444697833620012},{"id":1032907,"event":"return","thread_id":9160,"parent_id":1032904,"elapsed":0.00208398699760437,"elapsed_instrumentation":0.00020211300579831004},{"id":1032908,"event":"return","thread_id":9160,"parent_id":1032903,"elapsed":0.002587124996352941,"elapsed_instrumentation":0.0001163849956355989},{"id":1032909,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032910,"event":"return","thread_id":9160,"parent_id":1032909,"elapsed":1.103198155760765e-05,"elapsed_instrumentation":0.00011800503125414252,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032911,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>"}},{"id":1032912,"event":"return","thread_id":9160,"parent_id":1032911,"elapsed":6.026006303727627e-06,"elapsed_instrumentation":6.233798922039568e-05},{"id":1032913,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032914,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032915,"event":"return","thread_id":9160,"parent_id":1032914,"elapsed":6.287009455263615e-06,"elapsed_instrumentation":0.00023179396521300077,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032916,"event":"return","thread_id":9160,"parent_id":1032913,"elapsed":0.0002739730116445571,"elapsed_instrumentation":0.0001294909743592143,"return_value":{"class":"String","value":"local","object_id":1036000}},{"id":1032917,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5889000,"value":"Cache delete: followers_hash:111360495699412478:local\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032918,"event":"return","thread_id":9160,"parent_id":1032917,"elapsed":0.0020589659980032593,"elapsed_instrumentation":0.00021862098947167397,"return_value":{"class":"Integer","value":"54","object_id":109}},{"id":1032919,"event":"return","thread_id":9160,"parent_id":1032886,"elapsed":0.014192119997460395,"elapsed_instrumentation":0.0008138190023601055,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0994dcd8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0994db20 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0994d968 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0994d7b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1621700,"size":4}},{"id":1032920,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5888960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e88708>"}},{"id":1032921,"event":"return","thread_id":9160,"parent_id":1032920,"elapsed":7.400987669825554e-06,"elapsed_instrumentation":0.00020677200518548489,"return_value":{"class":"Array","value":"[]","object_id":824740,"size":0}},{"id":1032922,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1032923,"event":"return","thread_id":9160,"parent_id":1032922,"elapsed":0.000745199,"elapsed_instrumentation":0.0010889370169024915},{"id":1032924,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5889020,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1032925,"event":"return","thread_id":9160,"parent_id":1032924,"elapsed":4.183995770290494e-06,"elapsed_instrumentation":0.0001722710148897022,"return_value":{"class":"Array","value":"[]","object_id":824800,"size":0}},{"id":1032926,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5889020,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1032927,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5889040,"value":"Cache delete: relationship:111360495699412477:111360495699412478\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032928,"event":"return","thread_id":9160,"parent_id":1032927,"elapsed":0.0023909310111775994,"elapsed_instrumentation":0.00019740697462111712,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1032929,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5889060,"value":"Cache delete: relationship:111360495699412478:111360495699412477\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032930,"event":"return","thread_id":9160,"parent_id":1032929,"elapsed":0.0017765650118235499,"elapsed_instrumentation":0.00022099597845226526,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1032931,"event":"return","thread_id":9160,"parent_id":1032926,"elapsed":0.005097654997371137,"elapsed_instrumentation":0.00018365902360528708,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc09940f60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824860,"size":1}},{"id":1032932,"event":"call","thread_id":9160,"defined_class":"PotentialFriendshipTracker","method_id":"remove","path":"app/lib/potential_friendship_tracker.rb","lineno":27,"static":true,"parameters":[{"name":"account_id","class":"Integer","object_id":222720991398824955,"value":"111360495699412477","kind":"req"},{"name":"target_account_id","class":"Integer","object_id":222720991398824957,"value":"111360495699412478","kind":"req"}],"receiver":{"class":"Class","object_id":824880,"value":"PotentialFriendshipTracker"}},{"id":1032933,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"redis","path":"app/models/concerns/redisable.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Class","object_id":824880,"value":"PotentialFriendshipTracker"}},{"id":1032934,"event":"return","thread_id":9160,"parent_id":1032933,"elapsed":9.665993275120854e-06,"elapsed_instrumentation":0.0003295410133432597,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fdc0a6c7d00>","object_id":365840}},{"id":1032935,"event":"return","thread_id":9160,"parent_id":1032932,"elapsed":0.0016928599798120558,"elapsed_instrumentation":0.00021846903837285936},{"id":1032936,"event":"return","thread_id":9160,"parent_id":1032827,"elapsed":0.04936330200871453,"elapsed_instrumentation":0.00044903901289217174,"return_value":{"class":"Follow","value":"#<Follow:0x00007fdc06fe9888>","object_id":5888760}},{"id":1032937,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"local_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":292,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888200,"value":"#<Account:0x00007fdc06f40788>"}},{"id":1032938,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5889080,"value":"Cache read: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032939,"event":"return","thread_id":9160,"parent_id":1032938,"elapsed":0.0025910869881045073,"elapsed_instrumentation":0.00019403098849579692,"return_value":{"class":"Integer","value":"100","object_id":201}},{"id":1032940,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5889100,"value":"Cache generate: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>102 (...4 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032941,"event":"return","thread_id":9160,"parent_id":1032940,"elapsed":0.0018715750193223357,"elapsed_instrumentation":0.0001642339921090752,"return_value":{"class":"Integer","value":"104","object_id":209}},{"id":1032942,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5889120,"value":"[:username]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5889140,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06fe6cc8>"}},{"id":1032943,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"domain\" IS NULL ORDER BY \"accounts\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1032944,"event":"return","thread_id":9160,"parent_id":1032943,"elapsed":0.001727902,"elapsed_instrumentation":0.00018294798792339861},{"id":1032945,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for_username","path":"app/lib/activitypub/tag_manager.rb","lineno":57,"static":false,"parameters":[{"name":"username","class":"String","object_id":5889160,"value":"Me","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032946,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032947,"event":"return","thread_id":9160,"parent_id":1032946,"elapsed":6.5820058807730675e-06,"elapsed_instrumentation":0.00024168199161067605,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032948,"event":"return","thread_id":9160,"parent_id":1032945,"elapsed":0.000547812000149861,"elapsed_instrumentation":0.00046558299800381064,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":5889180}},{"id":1032949,"event":"return","thread_id":9160,"parent_id":1032942,"elapsed":0.0051206559874117374,"elapsed_instrumentation":0.00017081003170460463},{"id":1032950,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5889200,"value":"i__\u0010`\u001b_\u0003_]4____d_E\u001fy__\u0013\u001d\u0010$___L"}},{"id":1032951,"event":"return","thread_id":9160,"parent_id":1032950,"elapsed":8.475995855405927e-06,"elapsed_instrumentation":0.00021607501548714936,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":5889220}},{"id":1032952,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5889240,"value":"Cache write: followers_hash:111360495699412478:local ({:compress=>false, :compress_threshold=>1024}) (...1 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1032953,"event":"return","thread_id":9160,"parent_id":1032952,"elapsed":0.0016722009750083089,"elapsed_instrumentation":0.0002321020292583853,"return_value":{"class":"Integer","value":"101","object_id":203}},{"id":1032954,"event":"return","thread_id":9160,"parent_id":1032937,"elapsed":0.014265342993894592,"elapsed_instrumentation":0.0002001750108320266,"return_value":{"class":"String","value":"698b9a10601b8303cc5d34e0dee2df64c37f451f79ed84e3131d1024f0d4cd4c","object_id":5889220}},{"id":1032955,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":36,"static":false,"parameters":[{"name":"target","class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032956,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032957,"event":"return","thread_id":9160,"parent_id":1032956,"elapsed":2.1446001483127475e-05,"elapsed_instrumentation":0.00019649797468446195,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1032958,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"object_type","path":"app/models/account.rb","lineno":385,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032959,"event":"return","thread_id":9160,"parent_id":1032958,"elapsed":9.3039998319e-06,"elapsed_instrumentation":0.00016081499052233994,"return_value":{"class":"Symbol","value":":person","object_id":20438108}},{"id":1032960,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"instance_actor?","path":"app/models/account.rb","lineno":175,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032961,"event":"return","thread_id":9160,"parent_id":1032960,"elapsed":1.782798790372908e-05,"elapsed_instrumentation":0.00011949200415983796},{"id":1032962,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032963,"event":"return","thread_id":9160,"parent_id":1032962,"elapsed":6.510003004223108e-06,"elapsed_instrumentation":0.00036483901203610003,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032964,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1032965,"event":"return","thread_id":9160,"parent_id":1032964,"elapsed":3.663008101284504e-06,"elapsed_instrumentation":0.00011481097317300737,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1032966,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"to_param","path":"app/models/account.rb","lineno":389,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5888160,"value":"#<Account:0x00007fdc06f46548>"}},{"id":1032967,"event":"return","thread_id":9160,"parent_id":1032966,"elapsed":1.1682015610858798e-05,"elapsed_instrumentation":8.748698746785522e-05,"return_value":{"class":"String","value":"Me","object_id":5888420}},{"id":1032968,"event":"return","thread_id":9160,"parent_id":1032955,"elapsed":0.0015330260212067515,"elapsed_instrumentation":0.0005104989977553487,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/Me","object_id":5889260}}]}