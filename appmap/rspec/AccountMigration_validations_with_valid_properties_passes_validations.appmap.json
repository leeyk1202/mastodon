{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"AccountMigration validations with valid properties passes validations","source_location":"spec/models/account_migration_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"concerns","type":"package","children":[{"name":"AccountCounters","type":"class","children":[{"name":"followers_count","type":"function","location":"app/models/concerns/account_counters.rb:13","static":false},{"name":"account_stat","type":"function","location":"app/models/concerns/account_counters.rb:76","static":false}]}]},{"name":"AccountStat","type":"class","children":[{"name":"followers_count","type":"function","location":"app/models/account_stat.rb:29","static":false}]},{"name":"Account","type":"class","children":[{"name":"also_known_as","type":"function","location":"app/models/account.rb:315","static":false},{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"object_type","type":"function","location":"app/models/account.rb:385","static":false},{"name":"instance_actor?","type":"function","location":"app/models/account.rb:175","static":false},{"name":"to_param","type":"function","location":"app/models/account.rb:389","static":false}]}]},{"name":"validators","type":"package","children":[{"name":"DomainValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/domain_validator.rb:4","static":false}]}]},{"name":"lib/activitypub","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:36","static":false}]}]}]},{"name":"helpers","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]}]}]}],"events":[{"id":2018120,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":10834180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3781940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09075a70>"}},{"id":2018121,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"followers_count","path":"app/models/concerns/account_counters.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":10834200,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":10834220,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>"}},{"id":2018122,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>"}},{"id":2018123,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"account_id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2018124,"event":"return","thread_id":9160,"parent_id":2018123,"elapsed":0.000889721,"elapsed_instrumentation":9.08130023162812e-05},{"id":2018125,"event":"return","thread_id":9160,"parent_id":2018122,"elapsed":0.002629122987855226,"elapsed_instrumentation":0.00023739601601846516,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdbf40a6cc0>","object_id":10834240}},{"id":2018126,"event":"call","thread_id":9160,"defined_class":"AccountStat","method_id":"followers_count","path":"app/models/account_stat.rb","lineno":29,"static":false,"parameters":[],"receiver":{"class":"AccountStat","object_id":10834240,"value":"#<AccountStat:0x00007fdbf40a6cc0>"}},{"id":2018127,"event":"return","thread_id":9160,"parent_id":2018126,"elapsed":5.883700214326382e-05,"elapsed_instrumentation":0.00011330196866765618,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":2018128,"event":"return","thread_id":9160,"parent_id":2018121,"elapsed":0.0030910549976397306,"elapsed_instrumentation":0.0001446989772375673,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":2018129,"event":"return","thread_id":9160,"parent_id":2018120,"elapsed":0.003718613996170461,"elapsed_instrumentation":0.0001889709965325892,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc08280708 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc08280870 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc082809d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":3782080,"size":3}},{"id":2018130,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":10834260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3782120,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09072aa0>"}},{"id":2018131,"event":"call","thread_id":9160,"defined_class":"DomainValidator","method_id":"validate_each","path":"app/validators/domain_validator.rb","lineno":4,"static":false,"parameters":[{"name":"record","class":"AccountMigration","object_id":10834280,"value":"#<AccountMigration:0x00007fdbf40a7080>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":19190748,"value":":acct","kind":"req"},{"name":"value","class":"String","object_id":10834300,"value":"target@remote.org","kind":"req"}],"receiver":{"class":"DomainValidator","object_id":3782160,"value":"#<DomainValidator:0x00007fdc0f061a88>"}},{"id":2018132,"event":"return","thread_id":9160,"parent_id":2018131,"elapsed":4.975101910531521e-05,"elapsed_instrumentation":0.00011534898658283055},{"id":2018133,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"account_migrations\" WHERE \"account_migrations\".\"account_id\" = $1 AND \"account_migrations\".\"created_at\" >= '2023-10-06 23:32:33.033668' LIMIT $2","database_type":"postgres"}},{"id":2018134,"event":"return","thread_id":9160,"parent_id":2018133,"elapsed":0.000806892,"elapsed_instrumentation":9.500098531134427e-05},{"id":2018135,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"also_known_as","path":"app/models/account.rb","lineno":315,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":10834060,"value":"#<Account:0x00007fdbf40ae9c0>"}},{"id":2018136,"event":"return","thread_id":9160,"parent_id":2018135,"elapsed":2.948800101876259e-05,"elapsed_instrumentation":0.00011513099889270961,"return_value":{"class":"Array","value":"[https://cb6e6126.ngrok.io/users/lauralee4437]","object_id":10834320,"size":1}},{"id":2018137,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":36,"static":false,"parameters":[{"name":"target","class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":2018138,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>"}},{"id":2018139,"event":"return","thread_id":9160,"parent_id":2018138,"elapsed":6.9699890445917845e-06,"elapsed_instrumentation":6.331503391265869e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":2018140,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"object_type","path":"app/models/account.rb","lineno":385,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>"}},{"id":2018141,"event":"return","thread_id":9160,"parent_id":2018140,"elapsed":2.66998540610075e-06,"elapsed_instrumentation":8.677798905409873e-05,"return_value":{"class":"Symbol","value":":person","object_id":20438108}},{"id":2018142,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"instance_actor?","path":"app/models/account.rb","lineno":175,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>"}},{"id":2018143,"event":"return","thread_id":9160,"parent_id":2018142,"elapsed":6.9350062403827906e-06,"elapsed_instrumentation":5.015800707042217e-05},{"id":2018144,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":2018145,"event":"return","thread_id":9160,"parent_id":2018144,"elapsed":5.156995030120015e-06,"elapsed_instrumentation":0.000289726973278448,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":2018146,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":2018147,"event":"return","thread_id":9160,"parent_id":2018146,"elapsed":3.4529948607087135e-06,"elapsed_instrumentation":0.00013178400695323944,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":2018148,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"to_param","path":"app/models/account.rb","lineno":389,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":10834080,"value":"#<Account:0x00007fdbf40add40>"}},{"id":2018149,"event":"return","thread_id":9160,"parent_id":2018148,"elapsed":8.286006050184369e-06,"elapsed_instrumentation":7.40380201023072e-05,"return_value":{"class":"String","value":"lauralee4437","object_id":10834340}},{"id":2018150,"event":"return","thread_id":9160,"parent_id":2018137,"elapsed":0.0010125150147359818,"elapsed_instrumentation":9.881300502456725e-05,"return_value":{"class":"String","value":"https://cb6e6126.ngrok.io/users/lauralee4437","object_id":10834360}},{"id":2018151,"event":"return","thread_id":9160,"parent_id":2018130,"elapsed":0.004152039997279644,"elapsed_instrumentation":0.00016590801533311605,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0823a078 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0823a3e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0823a6b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0823a988 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0823ac58 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0823afa0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0823b180 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":3782240,"size":7}},{"id":2018152,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":10834260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3782120,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09072aa0>"}},{"id":2018153,"event":"return","thread_id":9160,"parent_id":2018152,"elapsed":2.9650109354406595e-06,"elapsed_instrumentation":8.22249858174473e-05,"return_value":{"class":"Array","value":"[]","object_id":3782260,"size":0}},{"id":2018154,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":10834180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3781940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09075a70>"}},{"id":2018155,"event":"return","thread_id":9160,"parent_id":2018154,"elapsed":2.8939975891262293e-06,"elapsed_instrumentation":0.0002542409929446876,"return_value":{"class":"Array","value":"[]","object_id":3782280,"size":0}}]}