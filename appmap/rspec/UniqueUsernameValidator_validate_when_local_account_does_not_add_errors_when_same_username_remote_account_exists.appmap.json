{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"UniqueUsernameValidator #validate when local account does not add errors when same username remote account exists","source_location":"spec/validators/unique_username_validator_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false}]},{"name":"concerns","type":"package","children":[{"name":"DomainMaterializable","type":"class","children":[{"name":"refresh_instances_view","type":"function","location":"app/models/concerns/domain_materializable.rb:12","static":false},{"name":"count_unique_subdomains!","type":"function","location":"app/models/concerns/domain_materializable.rb:19","static":false}]},{"name":"Redisable","type":"class","children":[{"name":"with_redis","type":"function","location":"app/models/concerns/redisable.rb:8","static":false}]}]},{"name":"Instance","type":"class","children":[{"name":"refresh","type":"function","location":"app/models/instance.rb:28","static":true}]}]},{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]},{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true}]}]},{"name":"validators","type":"package","children":[{"name":"UniqueUsernameValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/unique_username_validator.rb:6","static":false}]}]}]},{"name":"lib/paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false}]}]}]}],"events":[{"id":441280,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59d48>"}},{"id":441281,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441282,"event":"return","thread_id":9160,"parent_id":441281,"elapsed":1.6043020877987146e-05,"elapsed_instrumentation":7.146899588406086e-05},{"id":441283,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":2856200,"value":"example.com","kind":"req"}],"receiver":{"class":"TagManager","object_id":831360,"value":"#<TagManager:0x00007fdc08786ea0>"}},{"id":441284,"event":"return","thread_id":9160,"parent_id":441283,"elapsed":0.00010040399502031505,"elapsed_instrumentation":0.00011361198266968131,"return_value":{"class":"String","value":"example.com","object_id":2856220}},{"id":441285,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441286,"event":"return","thread_id":9160,"parent_id":441285,"elapsed":1.2438977137207985e-05,"elapsed_instrumentation":7.219600956887007e-05},{"id":441287,"event":"return","thread_id":9160,"parent_id":441280,"elapsed":0.0005278540193103254,"elapsed_instrumentation":0.0004064330132678151,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa3ac30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b040 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b1f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b4c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":208720,"size":4}},{"id":441288,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208760,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59898>"}},{"id":441289,"event":"call","thread_id":9160,"defined_class":"UniqueUsernameValidator","method_id":"validate","path":"app/validators/unique_username_validator.rb","lineno":6,"static":false,"parameters":[{"name":"account","class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>","kind":"req"}],"receiver":{"class":"UniqueUsernameValidator","object_id":208780,"value":"#<UniqueUsernameValidator:0x00007fdc16b80188>"}},{"id":441290,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":441291,"event":"return","thread_id":9160,"parent_id":441290,"elapsed":0.000808008,"elapsed_instrumentation":8.434601477347314e-05},{"id":441292,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"accounts\" WHERE LOWER(\"accounts\".\"username\") = 'abcdef' AND LOWER(\"accounts\".\"domain\") = 'example.com' LIMIT $1","database_type":"postgres"}},{"id":441293,"event":"return","thread_id":9160,"parent_id":441292,"elapsed":0.002981637,"elapsed_instrumentation":8.907599840313196e-05},{"id":441294,"event":"return","thread_id":9160,"parent_id":441289,"elapsed":0.004365661006886512,"elapsed_instrumentation":0.0006488169892691076},{"id":441295,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441296,"event":"return","thread_id":9160,"parent_id":441295,"elapsed":1.267300103791058e-05,"elapsed_instrumentation":0.00011959800031036139},{"id":441297,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441298,"event":"return","thread_id":9160,"parent_id":441297,"elapsed":9.265000699087977e-06,"elapsed_instrumentation":0.00010339196887798607},{"id":441299,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441300,"event":"return","thread_id":9160,"parent_id":441299,"elapsed":6.320013199001551e-06,"elapsed_instrumentation":7.4022012995556e-05},{"id":441301,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441302,"event":"return","thread_id":9160,"parent_id":441301,"elapsed":7.08398874849081e-06,"elapsed_instrumentation":7.634999928995967e-05},{"id":441303,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441304,"event":"return","thread_id":9160,"parent_id":441303,"elapsed":8.083006832748652e-06,"elapsed_instrumentation":8.131502545438707e-05},{"id":441305,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441306,"event":"return","thread_id":9160,"parent_id":441305,"elapsed":1.862601493485272e-05,"elapsed_instrumentation":0.00014920099056325853},{"id":441307,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441308,"event":"return","thread_id":9160,"parent_id":441307,"elapsed":5.855021299794316e-06,"elapsed_instrumentation":9.370897896587849e-05},{"id":441309,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441310,"event":"return","thread_id":9160,"parent_id":441309,"elapsed":6.8150111474096775e-06,"elapsed_instrumentation":8.157396223396063e-05},{"id":441311,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441312,"event":"return","thread_id":9160,"parent_id":441311,"elapsed":8.022994734346867e-06,"elapsed_instrumentation":8.988898480311036e-05},{"id":441313,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441314,"event":"return","thread_id":9160,"parent_id":441313,"elapsed":4.544999683275819e-06,"elapsed_instrumentation":6.618400220759213e-05},{"id":441315,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441316,"event":"return","thread_id":9160,"parent_id":441315,"elapsed":6.931019015610218e-06,"elapsed_instrumentation":7.165700662881136e-05},{"id":441317,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441318,"event":"return","thread_id":9160,"parent_id":441317,"elapsed":0.00027351800235919654,"elapsed_instrumentation":9.456797852180898e-05},{"id":441319,"event":"return","thread_id":9160,"parent_id":441288,"elapsed":0.008351508993655443,"elapsed_instrumentation":0.0003251029993407428,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa57768 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57920 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57ab0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57cb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58050 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58370 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58960 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58e10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa590e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa59360 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...61 more items)]","object_id":209280,"size":71}},{"id":441320,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208760,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59898>"}},{"id":441321,"event":"return","thread_id":9160,"parent_id":441320,"elapsed":2.7939968276768923e-06,"elapsed_instrumentation":0.00010509297135286033,"return_value":{"class":"Array","value":"[]","object_id":209300,"size":0}},{"id":441322,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59d48>"}},{"id":441323,"event":"return","thread_id":9160,"parent_id":441322,"elapsed":1.0555988410487771e-05,"elapsed_instrumentation":8.537800749763846e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa3a730 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209320,"size":1}},{"id":441324,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209360,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db532b8>"}},{"id":441325,"event":"return","thread_id":9160,"parent_id":441324,"elapsed":3.440197906456888e-05,"elapsed_instrumentation":0.0002009000163525343,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a933440 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209380,"size":1}},{"id":441326,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db533f8>"}},{"id":441327,"event":"return","thread_id":9160,"parent_id":441326,"elapsed":2.6799971237778664e-06,"elapsed_instrumentation":9.986601071432233e-05,"return_value":{"class":"Array","value":"[]","object_id":209420,"size":0}},{"id":441328,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209460,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db52f48>"}},{"id":441329,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441330,"event":"return","thread_id":9160,"parent_id":441329,"elapsed":6.11998257227242e-06,"elapsed_instrumentation":5.335701280273497e-05},{"id":441331,"event":"return","thread_id":9160,"parent_id":441328,"elapsed":8.725500083528459e-05,"elapsed_instrumentation":0.00011105200974270701,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a89dcb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209480,"size":1}},{"id":441332,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"accounts\" (\"username\", \"domain\", \"private_key\", \"public_key\", \"created_at\", \"updated_at\", \"note\", \"display_name\", \"uri\", \"url\", \"avatar_file_name\", \"avatar_content_type\", \"avatar_file_size\", \"avatar_updated_at\", \"header_file_name\", \"header_content_type\", \"header_file_size\", \"header_updated_at\", \"avatar_remote_url\", \"locked\", \"header_remote_url\", \"last_webfingered_at\", \"inbox_url\", \"outbox_url\", \"shared_inbox_url\", \"followers_url\", \"protocol\", \"memorial\", \"moved_to_account_id\", \"featured_collection_url\", \"fields\", \"actor_type\", \"discoverable\", \"also_known_as\", \"silenced_at\", \"suspended_at\", \"hide_collections\", \"avatar_storage_schema_version\", \"header_storage_schema_version\", \"devices_url\", \"suspension_origin\", \"sensitized_at\", \"trendable\", \"reviewed_at\", \"requested_review_at\", \"indexable\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46) RETURNING \"id\"","database_type":"postgres"}},{"id":441333,"event":"return","thread_id":9160,"parent_id":441332,"elapsed":0.001699895,"elapsed_instrumentation":0.00010072198347188532},{"id":441334,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209460,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db52f48>"}},{"id":441335,"event":"return","thread_id":9160,"parent_id":441334,"elapsed":0.00038201300776563585,"elapsed_instrumentation":0.00035992401535622776,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a89daf8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d940 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d788 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d5d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d418 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d1e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89cf68 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89cdb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89cbd0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89c798 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...43 more items)]","object_id":210380,"size":53}},{"id":441336,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db533f8>"}},{"id":441337,"event":"return","thread_id":9160,"parent_id":441336,"elapsed":2.707995008677244e-06,"elapsed_instrumentation":8.688101661391556e-05,"return_value":{"class":"Array","value":"[]","object_id":210400,"size":0}},{"id":441338,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209360,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db532b8>"}},{"id":441339,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2856300,"value":"/avatars/original/missing.png"}},{"id":441340,"event":"return","thread_id":9160,"parent_id":441339,"elapsed":2.9319024179130793e-05,"elapsed_instrumentation":0.0003732049954123795,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":441341,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2856320,"value":"/headers/original/missing.png"}},{"id":441342,"event":"return","thread_id":9160,"parent_id":441341,"elapsed":0.0003283949918113649,"elapsed_instrumentation":0.00023900999804027379,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":441343,"event":"return","thread_id":9160,"parent_id":441338,"elapsed":0.0015533389814663678,"elapsed_instrumentation":0.0001262409787159413,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a932f90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a932cc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a932a18 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a932798 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":210580,"size":4}},{"id":441344,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":441345,"event":"return","thread_id":9160,"parent_id":441344,"elapsed":0.000678952,"elapsed_instrumentation":7.186600123532116e-05},{"id":441346,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":210620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db933e0>"}},{"id":441347,"event":"return","thread_id":9160,"parent_id":441346,"elapsed":2.9389921110123396e-06,"elapsed_instrumentation":0.00011666404316201806,"return_value":{"class":"Array","value":"[]","object_id":210640,"size":0}},{"id":441348,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2856340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":210620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db933e0>"}},{"id":441349,"event":"call","thread_id":9160,"defined_class":"DomainMaterializable","method_id":"refresh_instances_view","path":"app/models/concerns/domain_materializable.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441350,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"instances\" WHERE \"instances\".\"domain\" = $1 LIMIT $2","database_type":"postgres"}},{"id":441351,"event":"return","thread_id":9160,"parent_id":441350,"elapsed":0.001564882,"elapsed_instrumentation":7.04420090187341e-05},{"id":441352,"event":"call","thread_id":9160,"defined_class":"Instance","method_id":"refresh","path":"app/models/instance.rb","lineno":28,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":52400,"value":"Instance"}},{"id":441353,"event":"call","thread_id":9160,"sql_query":{"sql":"REFRESH MATERIALIZED VIEW CONCURRENTLY \"instances\";","database_type":"postgres"}},{"id":441354,"event":"return","thread_id":9160,"parent_id":441353,"elapsed":0.019525929,"elapsed_instrumentation":0.00023262901231646538},{"id":441355,"event":"return","thread_id":9160,"parent_id":441352,"elapsed":0.02014761298778467,"elapsed_instrumentation":0.00018782902043312788,"return_value":{"class":"PG::Result","value":"#<PG::Result:0x00007fdc069e6120>","object_id":2856360}},{"id":441356,"event":"call","thread_id":9160,"defined_class":"DomainMaterializable","method_id":"count_unique_subdomains!","path":"app/models/concerns/domain_materializable.rb","lineno":19,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441357,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"with_redis","path":"app/models/concerns/redisable.rb","lineno":8,"static":false,"parameters":[{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":2856180,"value":"#<Account:0x00007fdc07276e20>"}},{"id":441358,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":2856380,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2856400,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":441359,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":441360,"event":"return","thread_id":9160,"parent_id":441359,"elapsed":2.749002305790782e-06,"elapsed_instrumentation":6.821699207648635e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fdc0a6c8020>","object_id":404600}},{"id":441361,"event":"return","thread_id":9160,"parent_id":441358,"elapsed":0.0012879589921794832,"elapsed_instrumentation":0.00013989501167088747,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":441362,"event":"return","thread_id":9160,"parent_id":441357,"elapsed":0.001457845006370917,"elapsed_instrumentation":0.00039450699114240706,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":441363,"event":"return","thread_id":9160,"parent_id":441356,"elapsed":0.002088979003019631,"elapsed_instrumentation":0.0003442590241320431,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":441364,"event":"return","thread_id":9160,"parent_id":441349,"elapsed":0.025447074993280694,"elapsed_instrumentation":7.253699004650116e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":441365,"event":"return","thread_id":9160,"parent_id":441348,"elapsed":0.025577992026228458,"elapsed_instrumentation":0.00015528697986155748,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a5b4850 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b44e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b40f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b39c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b2e88 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b2618 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":210660,"size":6}},{"id":441366,"event":"call","thread_id":9160,"defined_class":"UniqueUsernameValidator","method_id":"validate","path":"app/validators/unique_username_validator.rb","lineno":6,"static":false,"parameters":[{"name":"account","class":"RSpec::Mocks::InstanceVerifyingDouble","object_id":2856440,"value":"#[InstanceDouble(Account) (anonymous)]","kind":"req"}],"receiver":{"class":"UniqueUsernameValidator","object_id":2856460,"value":"#<UniqueUsernameValidator:0x00007fdc06a0bbf0>"}},{"id":441367,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"accounts\" WHERE LOWER(\"accounts\".\"username\") = 'abcdef' AND LOWER(\"accounts\".\"domain\") IS NULL LIMIT $1","database_type":"postgres"}},{"id":441368,"event":"return","thread_id":9160,"parent_id":441367,"elapsed":0.001345197,"elapsed_instrumentation":9.557799785397947e-05},{"id":441369,"event":"return","thread_id":9160,"parent_id":441366,"elapsed":0.002996671013534069,"elapsed_instrumentation":0.00042855896754190326}]}