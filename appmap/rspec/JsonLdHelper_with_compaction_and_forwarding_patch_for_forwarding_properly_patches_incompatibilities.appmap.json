{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"JsonLdHelper with compaction and forwarding patch_for_forwarding! properly patches incompatibilities","source_location":"spec/helpers/jsonld_helper_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/helpers","type":"package","children":[{"name":"JsonLdHelper","type":"class","children":[{"name":"compact","type":"function","location":"app/helpers/jsonld_helper.rb:80","static":false},{"name":"patch_for_forwarding!","type":"function","location":"app/helpers/jsonld_helper.rb:105","static":false},{"name":"safe_for_forwarding?","type":"function","location":"app/helpers/jsonld_helper.rb:141","static":false}]},{"name":"ContextHelper","type":"class","children":[{"name":"full_context","type":"function","location":"app/helpers/context_helper.rb:37","static":false},{"name":"serialized_context","type":"function","location":"app/helpers/context_helper.rb:41","static":false}]}]}],"events":[{"id":414524,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"compact","path":"app/helpers/jsonld_helper.rb","lineno":80,"static":false,"parameters":[{"name":"json","class":"Hash","object_id":2951100,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414525,"event":"call","thread_id":9160,"defined_class":"ContextHelper","method_id":"full_context","path":"app/helpers/context_helper.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414526,"event":"call","thread_id":9160,"defined_class":"ContextHelper","method_id":"serialized_context","path":"app/helpers/context_helper.rb","lineno":41,"static":false,"parameters":[{"name":"named_contexts_map","class":"Hash","object_id":2949940,"value":"{:activitystreams=>https://www.w3.org/ns/activitystreams, :security=>https://w3id.org/security/v1}","kind":"req","size":2},{"name":"context_extensions_map","class":"Hash","object_id":2949960,"value":"{:manually_approves_followers=>{manuallyApprovesFollowers=>as:manuallyApprovesFollowers}, :sensitive=>{sensitive=>as:sensitive}, :hashtag=>{Hashtag=>as:Hashtag}, :moved_to=>{movedTo=>{@id=>as:movedTo, @type=>@id}}, :also_known_as=>{alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}}, :emoji=>{toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji}, :featured=>{toot=>http://joinmastodon.org/ns#, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}}, :property_value=>{schema=>http://schema.org#, PropertyValue=>schema:PropertyValue, value=>schema:value}, :atom_uri=>{ostatus=>http://ostatus.org#, atomUri=>ostatus:atomUri}, :conversation=>{ostatus=>http://ostatus.org#, inReplyToAtomUri=>ostatus:inReplyToAtomUri, conversation=>ostatus:conversation} (...8 more entries)}","kind":"req","size":18}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414527,"event":"return","thread_id":9160,"parent_id":414526,"elapsed":2.9332994017750025e-05,"elapsed_instrumentation":0.0008035679929889739,"return_value":{"class":"Array","value":"[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}]","object_id":2951140,"size":3}},{"id":414528,"event":"return","thread_id":9160,"parent_id":414525,"elapsed":0.000856564030982554,"elapsed_instrumentation":0.00026723300106823444,"return_value":{"class":"Array","value":"[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}]","object_id":2951140,"size":3}},{"id":414529,"event":"return","thread_id":9160,"parent_id":414524,"elapsed":0.009956238965969533,"elapsed_instrumentation":0.0010755410185083747,"return_value":{"class":"Hash","value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>as:Public, object=>{id=>https://example.com/status, type=>Note, tag=>{type=>Mention, href=>foo}}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","object_id":2951200,"size":5}},{"id":414530,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2951100,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2951200,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>as:Public, object=>{id=>https://example.com/status, type=>Note, tag=>{type=>Mention, href=>foo}}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414531,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2951220,"value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":4},{"name":"compacted","class":"Hash","object_id":2951240,"value":"{id=>https://example.com/status, type=>Note, tag=>{type=>Mention, href=>foo}}","kind":"req","size":3}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414532,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2951260,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2},{"name":"compacted","class":"Hash","object_id":2951280,"value":"{type=>Mention, href=>foo}","kind":"req","size":2}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414533,"event":"return","thread_id":9160,"parent_id":414532,"elapsed":1.0320974979549646e-05,"elapsed_instrumentation":0.0001613129861652851,"return_value":{"class":"Hash","value":"{type=>Mention, href=>[foo]}","object_id":2951300,"size":2}},{"id":414534,"event":"return","thread_id":9160,"parent_id":414531,"elapsed":0.0002014359924942255,"elapsed_instrumentation":0.0006931429961696267,"return_value":{"class":"Hash","value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}","object_id":2951320,"size":4}},{"id":414535,"event":"return","thread_id":9160,"parent_id":414530,"elapsed":0.000989205960649997,"elapsed_instrumentation":0.0008878529770299792,"return_value":{"class":"Hash","value":"{type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}}","object_id":2951340,"size":3}},{"id":414536,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2951100,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2951200,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414537,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2951220,"value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":4},{"name":"compacted","class":"Hash","object_id":2951240,"value":"{id=>https://example.com/status, type=>Note, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":3}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414538,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2951260,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2},{"name":"compacted","class":"Hash","object_id":2951280,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding","object_id":2951120,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::PatchForForwarding:0x00007fc931ca"}},{"id":414539,"event":"return","thread_id":9160,"parent_id":414538,"elapsed":1.0180985555052757e-05,"elapsed_instrumentation":0.00013761897571384907,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":414540,"event":"return","thread_id":9160,"parent_id":414537,"elapsed":0.0001787350047379732,"elapsed_instrumentation":0.0002136079710908234,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":414541,"event":"return","thread_id":9160,"parent_id":414536,"elapsed":0.0004284069873392582,"elapsed_instrumentation":0.0007898879703134298,"return_value":{"class":"TrueClass","value":"true","object_id":20}}]}