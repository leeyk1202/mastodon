{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::Media #remove with a relevant media attachment without options removes account avatars","source_location":"spec/lib/mastodon/cli/media_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib","type":"package","children":[{"name":"mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"Media","type":"class","children":[{"name":"remove","type":"function","location":"lib/mastodon/cli/media.rb:33","static":false}]},{"name":"ProgressHelper","type":"class","children":[{"name":"parallelize_with_progress","type":"function","location":"lib/mastodon/cli/progress_helper.rb:27","static":false},{"name":"create_progress_bar","type":"function","location":"lib/mastodon/cli/progress_helper.rb:18","static":false}]}]}]}]},{"name":"paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false},{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false}]}]}]},{"name":"chewy/strategy","type":"package","children":[{"name":"Chewy","type":"class","children":[{"name":"Strategy","type":"class","children":[{"name":"Mastodon","type":"class","children":[{"name":"leave","type":"function","location":"lib/chewy/strategy/mastodon.rb:16","static":false}]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"MediaAttachment","type":"class","children":[{"name":"local?","type":"function","location":"app/models/media_attachment.rb:217","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]}]}]}],"events":[{"id":396668,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::Media","method_id":"remove","path":"lib/mastodon/cli/media.rb","lineno":33,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::Media","object_id":2821520,"value":"#<Mastodon::CLI::Media:0x00007fc930ba9fb8>"}},{"id":396669,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"parallelize_with_progress","path":"lib/mastodon/cli/progress_helper.rb","lineno":27,"static":false,"parameters":[{"name":"scope","class":"ActiveRecord::Relation","object_id":2821540,"value":"#<MediaAttachment::ActiveRecord_Relation:0x00007fc919bac310>","kind":"req"}],"receiver":{"class":"Mastodon::CLI::Media","object_id":2821520,"value":"#<Mastodon::CLI::Media:0x00007fc930ba9fb8>"}},{"id":396670,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"media_attachments\" WHERE \"media_attachments\".\"remote_url\" != $1 AND \"media_attachments\".\"file_file_name\" IS NOT NULL AND \"media_attachments\".\"remote_url\" != $2 AND \"media_attachments\".\"created_at\" <= $3","database_type":"postgres"}},{"id":396671,"event":"return","thread_id":9160,"parent_id":396670,"elapsed":0.001055319,"elapsed_instrumentation":0.00014758703764528036},{"id":396672,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":3,"value":"1","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::Media","object_id":2821520,"value":"#<Mastodon::CLI::Media:0x00007fc930ba9fb8>"}},{"id":396673,"event":"return","thread_id":9160,"parent_id":396672,"elapsed":0.00015925802290439606,"elapsed_instrumentation":0.0007350110099650919,"return_value":{"class":"ProgressBar::Base","value":"","object_id":2821560}},{"id":396674,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"remote_url\" != $1 AND \"media_attachments\".\"file_file_name\" IS NOT NULL AND \"media_attachments\".\"remote_url\" != $2 AND \"media_attachments\".\"created_at\" <= $3 ORDER BY \"media_attachments\".\"id\" ASC LIMIT $4","database_type":"postgres"}},{"id":396675,"event":"return","thread_id":9160,"parent_id":396674,"elapsed":0.001105954,"elapsed_instrumentation":0.00010539597133174539},{"id":396676,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821600,"value":"/system/cache/media_attachments/files/111/361/339/899/758/080/original/attachment.jpg"}},{"id":396677,"event":"return","thread_id":2821580,"parent_id":396676,"elapsed":1.2289965525269508e-05,"elapsed_instrumentation":0.0004099700599908829,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396678,"event":"call","thread_id":2821580,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":2821620,"value":"#<MediaAttachment:0x00007fc919acf500>"}},{"id":396679,"event":"return","thread_id":2821580,"parent_id":396678,"elapsed":8.432019967585802e-06,"elapsed_instrumentation":0.00022540398640558124},{"id":396680,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821600,"value":"/system/cache/media_attachments/files/111/361/339/899/758/080/original/attachment.jpg"}},{"id":396681,"event":"return","thread_id":2821580,"parent_id":396680,"elapsed":1.0417017620056868e-05,"elapsed_instrumentation":0.00020387402037158608,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396682,"event":"call","thread_id":2821580,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":2821620,"value":"#<MediaAttachment:0x00007fc919acf500>"}},{"id":396683,"event":"return","thread_id":2821580,"parent_id":396682,"elapsed":4.3549807742238045e-06,"elapsed_instrumentation":6.0214020777493715e-05},{"id":396684,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821600,"value":"/system/cache/media_attachments/files/111/361/339/899/758/080/original/attachment.jpg"}},{"id":396685,"event":"return","thread_id":2821580,"parent_id":396684,"elapsed":1.0096002370119095e-05,"elapsed_instrumentation":0.00016663008136674762,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396686,"event":"call","thread_id":2821580,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":2821620,"value":"#<MediaAttachment:0x00007fc919acf500>"}},{"id":396687,"event":"return","thread_id":2821580,"parent_id":396686,"elapsed":4.057015758007765e-06,"elapsed_instrumentation":5.5003969464451075e-05},{"id":396688,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821600,"value":"/files/original/missing.png"}},{"id":396689,"event":"return","thread_id":2821580,"parent_id":396688,"elapsed":0.016478194040246308,"elapsed_instrumentation":0.0005513950018212199,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396690,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821640,"value":"/thumbnails/original/missing.png"}},{"id":396691,"event":"return","thread_id":2821580,"parent_id":396690,"elapsed":4.36109839938581e-05,"elapsed_instrumentation":0.0003915170091204345,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396692,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821660,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":396693,"event":"return","thread_id":2821580,"parent_id":396692,"elapsed":2.421200042590499e-05,"elapsed_instrumentation":0.00018419302068650723,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":396694,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2518220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc933170148>"}},{"id":396695,"event":"call","thread_id":2821580,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":396696,"event":"return","thread_id":2821580,"parent_id":396695,"elapsed":0.001071443,"elapsed_instrumentation":0.00019516103202477098},{"id":396697,"event":"call","thread_id":2821580,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":319240,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":2821700,"value":"_#_\u0003_O____"}},{"id":396698,"event":"return","thread_id":2821580,"parent_id":396697,"elapsed":8.649018127471209e-06,"elapsed_instrumentation":0.0007909359992481768,"return_value":{"class":"String","value":"9b239003bd4f95928c94","object_id":2821720}},{"id":396699,"event":"call","thread_id":2821580,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":396700,"event":"return","thread_id":2821580,"parent_id":396699,"elapsed":0.001083515,"elapsed_instrumentation":0.0003637239569798112},{"id":396701,"event":"call","thread_id":2821580,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":2821620,"value":"#<MediaAttachment:0x00007fc919acf500>"}},{"id":396702,"event":"return","thread_id":2821580,"parent_id":396701,"elapsed":9.872019290924072e-06,"elapsed_instrumentation":0.00013282900908961892},{"id":396703,"event":"call","thread_id":2821580,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":2821620,"value":"#<MediaAttachment:0x00007fc919acf500>"}},{"id":396704,"event":"return","thread_id":2821580,"parent_id":396703,"elapsed":1.4204997569322586e-05,"elapsed_instrumentation":0.0002122810110449791},{"id":396705,"event":"return","thread_id":2821580,"parent_id":396694,"elapsed":0.009461451030801982,"elapsed_instrumentation":0.00023309397511184216,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93199e8d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199ea88 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199ec90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199eee8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199f280 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199f488 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199f668 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199f8c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199faa0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93199fca8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...3 more items)]","object_id":2518360,"size":13}},{"id":396706,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2518220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc933170148>"}},{"id":396707,"event":"return","thread_id":2821580,"parent_id":396706,"elapsed":6.584974471479654e-06,"elapsed_instrumentation":0.00017574598314240575,"return_value":{"class":"Array","value":"[]","object_id":2518380,"size":0}},{"id":396708,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821660,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":396709,"event":"return","thread_id":2821580,"parent_id":396708,"elapsed":4.2470055632293224e-06,"elapsed_instrumentation":0.00010540103539824486,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":396710,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2518420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc933ceea10>"}},{"id":396711,"event":"return","thread_id":2821580,"parent_id":396710,"elapsed":0.00032906298292800784,"elapsed_instrumentation":0.00018714903853833675,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931993bd8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931993d18 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931993e58 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2519580,"size":3}},{"id":396712,"event":"call","thread_id":2821580,"sql_query":{"sql":"UPDATE \"media_attachments\" SET \"file_file_name\" = $1, \"file_content_type\" = $2, \"file_file_size\" = $3, \"file_updated_at\" = $4, \"updated_at\" = $5 WHERE \"media_attachments\".\"id\" = $6","database_type":"postgres"}},{"id":396713,"event":"return","thread_id":2821580,"parent_id":396712,"elapsed":0.001401755,"elapsed_instrumentation":0.00011273403652012348},{"id":396714,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2518420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc933ceea10>"}},{"id":396715,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821600,"value":"/files/original/missing.png"}},{"id":396716,"event":"return","thread_id":2821580,"parent_id":396715,"elapsed":2.6017019990831614e-05,"elapsed_instrumentation":0.00020399701315909624,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396717,"event":"call","thread_id":2821580,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821640,"value":"/thumbnails/original/missing.png"}},{"id":396718,"event":"return","thread_id":2821580,"parent_id":396717,"elapsed":1.4373974408954382e-05,"elapsed_instrumentation":0.00015859398990869522,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396719,"event":"return","thread_id":2821580,"parent_id":396714,"elapsed":0.0006977629964239895,"elapsed_instrumentation":0.00018287502462044358,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9319939f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931993840 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2519700,"size":2}},{"id":396720,"event":"call","thread_id":2821580,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":396721,"event":"return","thread_id":2821580,"parent_id":396720,"elapsed":0.000667388,"elapsed_instrumentation":9.947101352736354e-05},{"id":396722,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2519780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc933ce52d0>"}},{"id":396723,"event":"return","thread_id":2821580,"parent_id":396722,"elapsed":4.5460183173418045e-06,"elapsed_instrumentation":0.00012606295058503747,"return_value":{"class":"Array","value":"[]","object_id":2519800,"size":0}},{"id":396724,"event":"call","thread_id":2821580,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2519780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc933ce52d0>"}},{"id":396725,"event":"return","thread_id":2821580,"parent_id":396724,"elapsed":5.071802297607064e-05,"elapsed_instrumentation":0.00013411400141194463,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9318efb50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9318ef998 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9318ef7e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9318ef628 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2519820,"size":4}},{"id":396726,"event":"call","thread_id":2821580,"defined_class":"Chewy::Strategy::Mastodon","method_id":"leave","path":"lib/chewy/strategy/mastodon.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":2821780,"value":"#<Chewy::Strategy::Mastodon:0x00007fc9334606a0>"}},{"id":396727,"event":"call","thread_id":2821580,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":2821800,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2821820,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":396728,"event":"call","thread_id":2821580,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":396729,"event":"return","thread_id":2821580,"parent_id":396728,"elapsed":3.193039447069168e-06,"elapsed_instrumentation":7.536594057455659e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":396730,"event":"return","thread_id":2821580,"parent_id":396727,"elapsed":0.0002074990188702941,"elapsed_instrumentation":0.00015744997654110193,"return_value":{"class":"Array","value":"[]","object_id":2821840,"size":0}},{"id":396731,"event":"return","thread_id":2821580,"parent_id":396726,"elapsed":0.00039011798799037933,"elapsed_instrumentation":0.00012308399891480803,"return_value":{"class":"Array","value":"[]","object_id":2821840,"size":0}},{"id":396732,"event":"return","thread_id":9160,"parent_id":396669,"elapsed":0.05165765999117866,"elapsed_instrumentation":0.0006914319819770753,"return_value":{"class":"Array","value":"[1, 61022]","object_id":2821860,"size":2}},{"id":396733,"event":"return","thread_id":9160,"parent_id":396668,"elapsed":0.055906430003233254,"elapsed_instrumentation":0.0002297989558428526,"return_value":{"class":"StringIO","value":"#<StringIO:0x00007fc933451d30>","object_id":2821880}},{"id":396734,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":396735,"event":"return","thread_id":9160,"parent_id":396734,"elapsed":0.001613342,"elapsed_instrumentation":0.0001702039735391736},{"id":396736,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":396737,"event":"return","thread_id":9160,"parent_id":396736,"elapsed":0.000536836,"elapsed_instrumentation":9.322899859398603e-05}]}