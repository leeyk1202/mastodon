{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Trends::Statuses #refresh decays scores","source_location":"spec/models/trends/statuses_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"trends","type":"package","children":[{"name":"Trends","type":"class","children":[{"name":"Statuses","type":"class","children":[{"name":"refresh","type":"function","location":"app/models/trends/statuses.rb:62","static":false},{"name":"key_prefix","type":"function","location":"app/models/trends/statuses.rb:98","static":false}]},{"name":"Base","type":"class","children":[{"name":"recently_used_ids","type":"function","location":"app/models/trends/base.rb:58","static":false}]}]}]},{"name":"concerns","type":"package","children":[{"name":"Redisable","type":"class","children":[{"name":"redis","type":"function","location":"app/models/concerns/redisable.rb:4","static":false}]}]},{"name":"Status","type":"class","children":[{"name":"reblogs_count","type":"function","location":"app/models/status.rb:284","static":false},{"name":"status_stat","type":"function","location":"app/models/status.rb:388","static":false},{"name":"favourites_count","type":"function","location":"app/models/status.rb:288","static":false},{"name":"reply?","type":"function","location":"app/models/status.rb:184","static":false},{"name":"trendable?","type":"function","location":"app/models/status.rb:300","static":false}]},{"name":"StatusStat","type":"class","children":[{"name":"reblogs_count","type":"function","location":"app/models/status_stat.rb:23","static":false},{"name":"favourites_count","type":"function","location":"app/models/status_stat.rb:27","static":false}]},{"name":"Account","type":"class","children":[{"name":"silenced?","type":"function","location":"app/models/account.rb:225","static":false},{"name":"sensitized?","type":"function","location":"app/models/account.rb:265","static":false}]}]},{"name":"helpers","type":"package","children":[{"name":"LanguagesHelper","type":"class","children":[{"name":"valid_locale?","type":"function","location":"app/helpers/languages_helper.rb:293","static":false}]}]}]}],"events":[{"id":239643,"event":"call","thread_id":9160,"defined_class":"Trends::Statuses","method_id":"refresh","path":"app/models/trends/statuses.rb","lineno":62,"static":false,"parameters":[{"name":"at_time","class":"DateTime","object_id":1862900,"value":"2021-11-14T10:15:00+00:00","kind":"opt"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239644,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"statuses\".* FROM \"statuses\" WHERE \"statuses\".\"deleted_at\" IS NULL AND \"statuses\".\"id\" IN (SELECT \"status_trends\".\"status_id\" FROM \"status_trends\") ORDER BY \"statuses\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":239645,"event":"return","thread_id":9160,"parent_id":239644,"elapsed":0.001033921,"elapsed_instrumentation":9.214202873408794e-05},{"id":239646,"event":"call","thread_id":9160,"defined_class":"Trends::Base","method_id":"recently_used_ids","path":"app/models/trends/base.rb","lineno":58,"static":false,"parameters":[{"name":"at_time","class":"DateTime","object_id":1862900,"value":"2021-11-14T10:15:00+00:00","kind":"opt"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239647,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"redis","path":"app/models/concerns/redisable.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239648,"event":"return","thread_id":9160,"parent_id":239647,"elapsed":4.607019945979118e-06,"elapsed_instrumentation":8.556002285331488e-05,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fc934c37e90>","object_id":319760}},{"id":239649,"event":"call","thread_id":9160,"defined_class":"Trends::Statuses","method_id":"key_prefix","path":"app/models/trends/statuses.rb","lineno":98,"static":false,"parameters":[],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239650,"event":"return","thread_id":9160,"parent_id":239649,"elapsed":2.674991264939308e-06,"elapsed_instrumentation":6.720406236127019e-05,"return_value":{"class":"String","value":"trending_statuses","object_id":1843360}},{"id":239651,"event":"return","thread_id":9160,"parent_id":239646,"elapsed":0.0006470860098488629,"elapsed_instrumentation":0.00016953196609392762,"return_value":{"class":"Array","value":"[107269226527912639, 107274888812046160, 107274888812103537]","object_id":1862940,"size":3}},{"id":239652,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"statuses\".* FROM \"statuses\" WHERE \"statuses\".\"deleted_at\" IS NULL AND \"statuses\".\"id\" IN ($1, $2, $3) ORDER BY \"statuses\".\"id\" ASC LIMIT $4","database_type":"postgres"}},{"id":239653,"event":"return","thread_id":9160,"parent_id":239652,"elapsed":0.00073054,"elapsed_instrumentation":7.897702744230628e-05},{"id":239654,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"status_stats\".* FROM \"status_stats\" WHERE \"status_stats\".\"status_id\" IN ($1, $2, $3)","database_type":"postgres"}},{"id":239655,"event":"return","thread_id":9160,"parent_id":239654,"elapsed":0.00047826,"elapsed_instrumentation":7.475499296560884e-05},{"id":239656,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" IN ($1, $2, $3)","database_type":"postgres"}},{"id":239657,"event":"return","thread_id":9160,"parent_id":239656,"elapsed":0.001213076,"elapsed_instrumentation":9.925902122631669e-05},{"id":239658,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862960,"value":"#<Status:0x00007fc9335a4cf0>"}},{"id":239659,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862960,"value":"#<Status:0x00007fc9335a4cf0>"}},{"id":239660,"event":"return","thread_id":9160,"parent_id":239659,"elapsed":1.7212005332112312e-05,"elapsed_instrumentation":0.00011380505748093128,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b902f98>","object_id":1863020}},{"id":239661,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1863020,"value":"#<StatusStat:0x00007fc93b902f98>"}},{"id":239662,"event":"return","thread_id":9160,"parent_id":239661,"elapsed":0.0001239950070157647,"elapsed_instrumentation":0.00015417201211676002,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239663,"event":"return","thread_id":9160,"parent_id":239658,"elapsed":0.0004591420292854309,"elapsed_instrumentation":0.00012858601985499263,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239664,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862960,"value":"#<Status:0x00007fc9335a4cf0>"}},{"id":239665,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862960,"value":"#<Status:0x00007fc9335a4cf0>"}},{"id":239666,"event":"return","thread_id":9160,"parent_id":239665,"elapsed":9.401002898812294e-06,"elapsed_instrumentation":0.00010533299064263701,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b902f98>","object_id":1863020}},{"id":239667,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1863020,"value":"#<StatusStat:0x00007fc93b902f98>"}},{"id":239668,"event":"return","thread_id":9160,"parent_id":239667,"elapsed":2.4173001293092966e-05,"elapsed_instrumentation":0.00011017202632501721,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239669,"event":"return","thread_id":9160,"parent_id":239664,"elapsed":0.00029154500225558877,"elapsed_instrumentation":8.885905845090747e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239670,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1863040,"value":"#<Account:0x00007fc93b9021d8>"}},{"id":239671,"event":"return","thread_id":9160,"parent_id":239670,"elapsed":2.060196129605174e-05,"elapsed_instrumentation":0.0001382410409860313},{"id":239672,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"sensitized?","path":"app/models/account.rb","lineno":265,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1863040,"value":"#<Account:0x00007fc93b9021d8>"}},{"id":239673,"event":"return","thread_id":9160,"parent_id":239672,"elapsed":1.3977987691760063e-05,"elapsed_instrumentation":7.37460795789957e-05},{"id":239674,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862960,"value":"#<Status:0x00007fc9335a4cf0>"}},{"id":239675,"event":"return","thread_id":9160,"parent_id":239674,"elapsed":0.00021857197862118483,"elapsed_instrumentation":7.780001033097506e-05},{"id":239676,"event":"call","thread_id":9160,"defined_class":"LanguagesHelper","method_id":"valid_locale?","path":"app/helpers/languages_helper.rb","lineno":293,"static":false,"parameters":[{"name":"locale","class":"String","object_id":1863060,"value":"en","kind":"req"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239677,"event":"return","thread_id":9160,"parent_id":239676,"elapsed":1.0649964679032564e-05,"elapsed_instrumentation":0.00012866401812061667,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239678,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862980,"value":"#<Status:0x00007fc9335a4c50>"}},{"id":239679,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862980,"value":"#<Status:0x00007fc9335a4c50>"}},{"id":239680,"event":"return","thread_id":9160,"parent_id":239679,"elapsed":1.700496068224311e-05,"elapsed_instrumentation":0.00010010803816840053,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b902318>","object_id":1863080}},{"id":239681,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1863080,"value":"#<StatusStat:0x00007fc93b902318>"}},{"id":239682,"event":"return","thread_id":9160,"parent_id":239681,"elapsed":9.18760197237134e-05,"elapsed_instrumentation":9.489903459325433e-05,"return_value":{"class":"Integer","value":"4","object_id":9}},{"id":239683,"event":"return","thread_id":9160,"parent_id":239678,"elapsed":0.0004000609624199569,"elapsed_instrumentation":8.208502549678087e-05,"return_value":{"class":"Integer","value":"4","object_id":9}},{"id":239684,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862980,"value":"#<Status:0x00007fc9335a4c50>"}},{"id":239685,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862980,"value":"#<Status:0x00007fc9335a4c50>"}},{"id":239686,"event":"return","thread_id":9160,"parent_id":239685,"elapsed":9.6210278570652e-06,"elapsed_instrumentation":9.761698311194777e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b902318>","object_id":1863080}},{"id":239687,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1863080,"value":"#<StatusStat:0x00007fc93b902318>"}},{"id":239688,"event":"return","thread_id":9160,"parent_id":239687,"elapsed":2.1633983124047518e-05,"elapsed_instrumentation":8.538196561858058e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239689,"event":"return","thread_id":9160,"parent_id":239684,"elapsed":0.0002546139876358211,"elapsed_instrumentation":8.923700079321861e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239690,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1863000,"value":"#<Status:0x00007fc9335a4bb0>"}},{"id":239691,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1863000,"value":"#<Status:0x00007fc9335a4bb0>"}},{"id":239692,"event":"return","thread_id":9160,"parent_id":239691,"elapsed":8.124043233692646e-06,"elapsed_instrumentation":9.139097528532147e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b902d18>","object_id":1863100}},{"id":239693,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1863100,"value":"#<StatusStat:0x00007fc93b902d18>"}},{"id":239694,"event":"return","thread_id":9160,"parent_id":239693,"elapsed":0.00013295398093760014,"elapsed_instrumentation":9.987701196223497e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239695,"event":"return","thread_id":9160,"parent_id":239690,"elapsed":0.00037948304088786244,"elapsed_instrumentation":7.05619459040463e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239696,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1863000,"value":"#<Status:0x00007fc9335a4bb0>"}},{"id":239697,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1863000,"value":"#<Status:0x00007fc9335a4bb0>"}},{"id":239698,"event":"return","thread_id":9160,"parent_id":239697,"elapsed":8.910021279007196e-06,"elapsed_instrumentation":8.373195305466652e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b902d18>","object_id":1863100}},{"id":239699,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1863100,"value":"#<StatusStat:0x00007fc93b902d18>"}},{"id":239700,"event":"return","thread_id":9160,"parent_id":239699,"elapsed":2.1737010683864355e-05,"elapsed_instrumentation":8.616404375061393e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239701,"event":"return","thread_id":9160,"parent_id":239696,"elapsed":0.00023505400167778134,"elapsed_instrumentation":8.703296771273017e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239702,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1863120,"value":"#<Account:0x00007fc93b902098>"}},{"id":239703,"event":"return","thread_id":9160,"parent_id":239702,"elapsed":2.8079026378691196e-05,"elapsed_instrumentation":8.38589621707797e-05},{"id":239704,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"sensitized?","path":"app/models/account.rb","lineno":265,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1863120,"value":"#<Account:0x00007fc93b902098>"}},{"id":239705,"event":"return","thread_id":9160,"parent_id":239704,"elapsed":2.465501893311739e-05,"elapsed_instrumentation":7.0922018494457e-05},{"id":239706,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1863000,"value":"#<Status:0x00007fc9335a4bb0>"}},{"id":239707,"event":"return","thread_id":9160,"parent_id":239706,"elapsed":0.0001957740169018507,"elapsed_instrumentation":7.196597289294004e-05},{"id":239708,"event":"call","thread_id":9160,"defined_class":"LanguagesHelper","method_id":"valid_locale?","path":"app/helpers/languages_helper.rb","lineno":293,"static":false,"parameters":[{"name":"locale","class":"String","object_id":1863140,"value":"en","kind":"req"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239709,"event":"return","thread_id":9160,"parent_id":239708,"elapsed":9.350944310426712e-06,"elapsed_instrumentation":0.00018621300114318728,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239710,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"trendable?","path":"app/models/status.rb","lineno":300,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1862960,"value":"#<Status:0x00007fc9335a4cf0>"}},{"id":239711,"event":"return","thread_id":9160,"parent_id":239710,"elapsed":0.00011187297059223056,"elapsed_instrumentation":0.00014027801807969809,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239712,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"trendable?","path":"app/models/status.rb","lineno":300,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1863000,"value":"#<Status:0x00007fc9335a4bb0>"}},{"id":239713,"event":"return","thread_id":9160,"parent_id":239712,"elapsed":0.00010564597323536873,"elapsed_instrumentation":9.949901141226292e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239714,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"status_trends\" (\"status_id\",\"account_id\",\"score\",\"language\",\"allowed\") VALUES (107269226527912639, 111361333195896513, 2.0, 'en', TRUE), (107274888812103537, 111361333195896514, 16.0, 'en', TRUE) ON CONFLICT (\"status_id\") DO UPDATE SET \"account_id\"=excluded.\"account_id\",\"score\"=excluded.\"score\",\"language\"=excluded.\"language\",\"allowed\"=excluded.\"allowed\" RETURNING \"id\"","database_type":"postgres"}},{"id":239715,"event":"return","thread_id":9160,"parent_id":239714,"elapsed":0.00118598,"elapsed_instrumentation":0.00011430500308051705},{"id":239716,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"status_trends\" WHERE \"status_trends\".\"status_id\" = $1","database_type":"postgres"}},{"id":239717,"event":"return","thread_id":9160,"parent_id":239716,"elapsed":0.000603241,"elapsed_instrumentation":9.564001811668277e-05},{"id":239718,"event":"call","thread_id":9160,"sql_query":{"sql":"UPDATE status_trends SET rank = t0.calculated_rank FROM (SELECT id, row_number() OVER w AS calculated_rank FROM status_trends WINDOW w AS (PARTITION BY language ORDER BY score DESC)) t0 WHERE status_trends.id = t0.id","database_type":"postgres"}},{"id":239719,"event":"return","thread_id":9160,"parent_id":239718,"elapsed":0.000933901,"elapsed_instrumentation":7.187895243987441e-05},{"id":239720,"event":"return","thread_id":9160,"parent_id":239643,"elapsed":0.02359152998542413,"elapsed_instrumentation":0.00021103699691593647,"return_value":{"class":"Integer","value":"2","object_id":5}},{"id":239721,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"status_trends\".* FROM \"status_trends\" WHERE \"status_trends\".\"status_id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":239722,"event":"return","thread_id":9160,"parent_id":239721,"elapsed":0.000468593,"elapsed_instrumentation":7.602403638884425e-05},{"id":239723,"event":"call","thread_id":9160,"defined_class":"Trends::Statuses","method_id":"refresh","path":"app/models/trends/statuses.rb","lineno":62,"static":false,"parameters":[{"name":"at_time","class":"DateTime","object_id":1864320,"value":"2021-11-14T18:15:00+00:00","kind":"opt"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239724,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"statuses\".* FROM \"statuses\" WHERE \"statuses\".\"deleted_at\" IS NULL AND \"statuses\".\"id\" IN (SELECT \"status_trends\".\"status_id\" FROM \"status_trends\") ORDER BY \"statuses\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":239725,"event":"return","thread_id":9160,"parent_id":239724,"elapsed":0.001105125,"elapsed_instrumentation":8.825300028547645e-05},{"id":239726,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"status_stats\".* FROM \"status_stats\" WHERE \"status_stats\".\"status_id\" IN ($1, $2)","database_type":"postgres"}},{"id":239727,"event":"return","thread_id":9160,"parent_id":239726,"elapsed":0.000661656,"elapsed_instrumentation":8.21879948489368e-05},{"id":239728,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" IN ($1, $2)","database_type":"postgres"}},{"id":239729,"event":"return","thread_id":9160,"parent_id":239728,"elapsed":0.000986194,"elapsed_instrumentation":8.545198943465948e-05},{"id":239730,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864340,"value":"#<Status:0x00007fc933701a80>"}},{"id":239731,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864340,"value":"#<Status:0x00007fc933701a80>"}},{"id":239732,"event":"return","thread_id":9160,"parent_id":239731,"elapsed":1.67780090123415e-05,"elapsed_instrumentation":8.621701272204518e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b910008>","object_id":1864380}},{"id":239733,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864380,"value":"#<StatusStat:0x00007fc93b910008>"}},{"id":239734,"event":"return","thread_id":9160,"parent_id":239733,"elapsed":9.933701949194074e-05,"elapsed_instrumentation":7.0437032263726e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239735,"event":"return","thread_id":9160,"parent_id":239730,"elapsed":0.00031067500822246075,"elapsed_instrumentation":0.00020744698122143745,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239736,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864340,"value":"#<Status:0x00007fc933701a80>"}},{"id":239737,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864340,"value":"#<Status:0x00007fc933701a80>"}},{"id":239738,"event":"return","thread_id":9160,"parent_id":239737,"elapsed":9.073002729564905e-06,"elapsed_instrumentation":7.095601176843047e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b910008>","object_id":1864380}},{"id":239739,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864380,"value":"#<StatusStat:0x00007fc93b910008>"}},{"id":239740,"event":"return","thread_id":9160,"parent_id":239739,"elapsed":2.2271997295320034e-05,"elapsed_instrumentation":5.9255980886518955e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239741,"event":"return","thread_id":9160,"parent_id":239736,"elapsed":0.00019333697855472565,"elapsed_instrumentation":8.181895827874541e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239742,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864400,"value":"#<Account:0x00007fc93b92f660>"}},{"id":239743,"event":"return","thread_id":9160,"parent_id":239742,"elapsed":1.6527948901057243e-05,"elapsed_instrumentation":6.574700819328427e-05},{"id":239744,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"sensitized?","path":"app/models/account.rb","lineno":265,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864400,"value":"#<Account:0x00007fc93b92f660>"}},{"id":239745,"event":"return","thread_id":9160,"parent_id":239744,"elapsed":1.101300586014986e-05,"elapsed_instrumentation":5.2205054089426994e-05},{"id":239746,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864340,"value":"#<Status:0x00007fc933701a80>"}},{"id":239747,"event":"return","thread_id":9160,"parent_id":239746,"elapsed":0.0001965680276043713,"elapsed_instrumentation":5.809596041217446e-05},{"id":239748,"event":"call","thread_id":9160,"defined_class":"LanguagesHelper","method_id":"valid_locale?","path":"app/helpers/languages_helper.rb","lineno":293,"static":false,"parameters":[{"name":"locale","class":"String","object_id":1864420,"value":"en","kind":"req"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239749,"event":"return","thread_id":9160,"parent_id":239748,"elapsed":1.2620992492884398e-05,"elapsed_instrumentation":0.00011415203334763646,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239750,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864360,"value":"#<Status:0x00007fc9337019e0>"}},{"id":239751,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864360,"value":"#<Status:0x00007fc9337019e0>"}},{"id":239752,"event":"return","thread_id":9160,"parent_id":239751,"elapsed":1.4165998436510563e-05,"elapsed_instrumentation":7.183791603893042e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b92fa20>","object_id":1864440}},{"id":239753,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864440,"value":"#<StatusStat:0x00007fc93b92fa20>"}},{"id":239754,"event":"return","thread_id":9160,"parent_id":239753,"elapsed":7.204205030575395e-05,"elapsed_instrumentation":6.112497067078948e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239755,"event":"return","thread_id":9160,"parent_id":239750,"elapsed":0.00024973199469968677,"elapsed_instrumentation":7.229100447148085e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239756,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864360,"value":"#<Status:0x00007fc9337019e0>"}},{"id":239757,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864360,"value":"#<Status:0x00007fc9337019e0>"}},{"id":239758,"event":"return","thread_id":9160,"parent_id":239757,"elapsed":7.620023097842932e-06,"elapsed_instrumentation":6.534100975841284e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b92fa20>","object_id":1864440}},{"id":239759,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864440,"value":"#<StatusStat:0x00007fc93b92fa20>"}},{"id":239760,"event":"return","thread_id":9160,"parent_id":239759,"elapsed":2.0032981410622597e-05,"elapsed_instrumentation":5.6913995649665594e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239761,"event":"return","thread_id":9160,"parent_id":239756,"elapsed":0.00017931900219991803,"elapsed_instrumentation":5.988706834614277e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239762,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864460,"value":"#<Account:0x00007fc93b92f520>"}},{"id":239763,"event":"return","thread_id":9160,"parent_id":239762,"elapsed":1.345097552984953e-05,"elapsed_instrumentation":6.123102502897382e-05},{"id":239764,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"sensitized?","path":"app/models/account.rb","lineno":265,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864460,"value":"#<Account:0x00007fc93b92f520>"}},{"id":239765,"event":"return","thread_id":9160,"parent_id":239764,"elapsed":1.064100069925189e-05,"elapsed_instrumentation":5.135097308084369e-05},{"id":239766,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864360,"value":"#<Status:0x00007fc9337019e0>"}},{"id":239767,"event":"return","thread_id":9160,"parent_id":239766,"elapsed":0.0001655109808780253,"elapsed_instrumentation":7.841800106689334e-05},{"id":239768,"event":"call","thread_id":9160,"defined_class":"LanguagesHelper","method_id":"valid_locale?","path":"app/helpers/languages_helper.rb","lineno":293,"static":false,"parameters":[{"name":"locale","class":"String","object_id":1864480,"value":"en","kind":"req"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239769,"event":"return","thread_id":9160,"parent_id":239768,"elapsed":7.144000846892595e-06,"elapsed_instrumentation":8.834898471832275e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239770,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"trendable?","path":"app/models/status.rb","lineno":300,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864340,"value":"#<Status:0x00007fc933701a80>"}},{"id":239771,"event":"return","thread_id":9160,"parent_id":239770,"elapsed":9.482598397880793e-05,"elapsed_instrumentation":6.83330581523478e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239772,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"trendable?","path":"app/models/status.rb","lineno":300,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864360,"value":"#<Status:0x00007fc9337019e0>"}},{"id":239773,"event":"return","thread_id":9160,"parent_id":239772,"elapsed":8.88319918885827e-05,"elapsed_instrumentation":6.185803795233369e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239774,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"status_trends\" (\"status_id\",\"account_id\",\"score\",\"language\",\"allowed\") VALUES (107269226527912639, 111361333195896513, 1.0, 'en', TRUE), (107274888812103537, 111361333195896514, 8.0, 'en', TRUE) ON CONFLICT (\"status_id\") DO UPDATE SET \"account_id\"=excluded.\"account_id\",\"score\"=excluded.\"score\",\"language\"=excluded.\"language\",\"allowed\"=excluded.\"allowed\" RETURNING \"id\"","database_type":"postgres"}},{"id":239775,"event":"return","thread_id":9160,"parent_id":239774,"elapsed":0.000955912,"elapsed_instrumentation":7.411499973386526e-05},{"id":239776,"event":"call","thread_id":9160,"defined_class":"Trends::Base","method_id":"recently_used_ids","path":"app/models/trends/base.rb","lineno":58,"static":false,"parameters":[{"name":"at_time","class":"DateTime","object_id":1864320,"value":"2021-11-14T18:15:00+00:00","kind":"opt"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239777,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"redis","path":"app/models/concerns/redisable.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239778,"event":"return","thread_id":9160,"parent_id":239777,"elapsed":5.357025656849146e-06,"elapsed_instrumentation":8.048600284382701e-05,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fc934c37e90>","object_id":319760}},{"id":239779,"event":"call","thread_id":9160,"defined_class":"Trends::Statuses","method_id":"key_prefix","path":"app/models/trends/statuses.rb","lineno":98,"static":false,"parameters":[],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239780,"event":"return","thread_id":9160,"parent_id":239779,"elapsed":2.8319773264229298e-06,"elapsed_instrumentation":6.514502456411719e-05,"return_value":{"class":"String","value":"trending_statuses","object_id":1843360}},{"id":239781,"event":"return","thread_id":9160,"parent_id":239776,"elapsed":0.0007644779980182648,"elapsed_instrumentation":0.0001581120304763317,"return_value":{"class":"Array","value":"[107269226527912639, 107274888812046160, 107274888812103537]","object_id":1864500,"size":3}},{"id":239782,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"statuses\".* FROM \"statuses\" WHERE \"statuses\".\"deleted_at\" IS NULL AND \"statuses\".\"id\" IN ($1, $2, $3) ORDER BY \"statuses\".\"id\" ASC LIMIT $4","database_type":"postgres"}},{"id":239783,"event":"return","thread_id":9160,"parent_id":239782,"elapsed":0.000790033,"elapsed_instrumentation":6.912398384884e-05},{"id":239784,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"status_stats\".* FROM \"status_stats\" WHERE \"status_stats\".\"status_id\" IN ($1, $2, $3)","database_type":"postgres"}},{"id":239785,"event":"return","thread_id":9160,"parent_id":239784,"elapsed":0.000590155,"elapsed_instrumentation":7.001199992373586e-05},{"id":239786,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" IN ($1, $2, $3)","database_type":"postgres"}},{"id":239787,"event":"return","thread_id":9160,"parent_id":239786,"elapsed":0.001018122,"elapsed_instrumentation":7.17220245860517e-05},{"id":239788,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864520,"value":"#<Status:0x00007fc9337d23b0>"}},{"id":239789,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864520,"value":"#<Status:0x00007fc9337d23b0>"}},{"id":239790,"event":"return","thread_id":9160,"parent_id":239789,"elapsed":1.6157981008291245e-05,"elapsed_instrumentation":8.171098306775093e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b927be0>","object_id":1864580}},{"id":239791,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864580,"value":"#<StatusStat:0x00007fc93b927be0>"}},{"id":239792,"event":"return","thread_id":9160,"parent_id":239791,"elapsed":0.00014633400132879615,"elapsed_instrumentation":7.190002361312509e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239793,"event":"return","thread_id":9160,"parent_id":239788,"elapsed":0.00035093497717753053,"elapsed_instrumentation":9.876402327790856e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239794,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864520,"value":"#<Status:0x00007fc9337d23b0>"}},{"id":239795,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864520,"value":"#<Status:0x00007fc9337d23b0>"}},{"id":239796,"event":"return","thread_id":9160,"parent_id":239795,"elapsed":9.072013199329376e-06,"elapsed_instrumentation":7.020402699708939e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b927be0>","object_id":1864580}},{"id":239797,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864580,"value":"#<StatusStat:0x00007fc93b927be0>"}},{"id":239798,"event":"return","thread_id":9160,"parent_id":239797,"elapsed":2.131302608177066e-05,"elapsed_instrumentation":5.9493992011994123e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239799,"event":"return","thread_id":9160,"parent_id":239794,"elapsed":0.00019126199185848236,"elapsed_instrumentation":7.092999294400215e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239800,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864600,"value":"#<Account:0x00007fc93b926f60>"}},{"id":239801,"event":"return","thread_id":9160,"parent_id":239800,"elapsed":1.5368976164609194e-05,"elapsed_instrumentation":6.451603258028626e-05},{"id":239802,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"sensitized?","path":"app/models/account.rb","lineno":265,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864600,"value":"#<Account:0x00007fc93b926f60>"}},{"id":239803,"event":"return","thread_id":9160,"parent_id":239802,"elapsed":1.0730000212788582e-05,"elapsed_instrumentation":5.1641021855175495e-05},{"id":239804,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864520,"value":"#<Status:0x00007fc9337d23b0>"}},{"id":239805,"event":"return","thread_id":9160,"parent_id":239804,"elapsed":0.00016430497635155916,"elapsed_instrumentation":5.858403164893389e-05},{"id":239806,"event":"call","thread_id":9160,"defined_class":"LanguagesHelper","method_id":"valid_locale?","path":"app/helpers/languages_helper.rb","lineno":293,"static":false,"parameters":[{"name":"locale","class":"String","object_id":1864620,"value":"en","kind":"req"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239807,"event":"return","thread_id":9160,"parent_id":239806,"elapsed":7.755006663501263e-06,"elapsed_instrumentation":9.247398702427745e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239808,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864540,"value":"#<Status:0x00007fc9337d2310>"}},{"id":239809,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864540,"value":"#<Status:0x00007fc9337d2310>"}},{"id":239810,"event":"return","thread_id":9160,"parent_id":239809,"elapsed":1.3049982953816652e-05,"elapsed_instrumentation":0.0001391080440953374,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b9271e0>","object_id":1864640}},{"id":239811,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864640,"value":"#<StatusStat:0x00007fc93b9271e0>"}},{"id":239812,"event":"return","thread_id":9160,"parent_id":239811,"elapsed":7.123197428882122e-05,"elapsed_instrumentation":6.509909871965647e-05,"return_value":{"class":"Integer","value":"4","object_id":9}},{"id":239813,"event":"return","thread_id":9160,"parent_id":239808,"elapsed":0.00032240297878161073,"elapsed_instrumentation":6.35009491816163e-05,"return_value":{"class":"Integer","value":"4","object_id":9}},{"id":239814,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864540,"value":"#<Status:0x00007fc9337d2310>"}},{"id":239815,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864540,"value":"#<Status:0x00007fc9337d2310>"}},{"id":239816,"event":"return","thread_id":9160,"parent_id":239815,"elapsed":7.251976057887077e-06,"elapsed_instrumentation":6.500998279079795e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b9271e0>","object_id":1864640}},{"id":239817,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864640,"value":"#<StatusStat:0x00007fc93b9271e0>"}},{"id":239818,"event":"return","thread_id":9160,"parent_id":239817,"elapsed":2.0036008208990097e-05,"elapsed_instrumentation":5.701801273971796e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239819,"event":"return","thread_id":9160,"parent_id":239814,"elapsed":0.00017844903049990535,"elapsed_instrumentation":6.067001959308982e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239820,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblogs_count","path":"app/models/status.rb","lineno":284,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864560,"value":"#<Status:0x00007fc9337d2270>"}},{"id":239821,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864560,"value":"#<Status:0x00007fc9337d2270>"}},{"id":239822,"event":"return","thread_id":9160,"parent_id":239821,"elapsed":6.899004802107811e-06,"elapsed_instrumentation":6.49699941277504e-05,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b927820>","object_id":1864660}},{"id":239823,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"reblogs_count","path":"app/models/status_stat.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864660,"value":"#<StatusStat:0x00007fc93b927820>"}},{"id":239824,"event":"return","thread_id":9160,"parent_id":239823,"elapsed":6.036501144990325e-05,"elapsed_instrumentation":5.9077050536870956e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239825,"event":"return","thread_id":9160,"parent_id":239820,"elapsed":0.00021962396567687392,"elapsed_instrumentation":5.5366079322993755e-05,"return_value":{"class":"Integer","value":"5","object_id":11}},{"id":239826,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"favourites_count","path":"app/models/status.rb","lineno":288,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864560,"value":"#<Status:0x00007fc9337d2270>"}},{"id":239827,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"status_stat","path":"app/models/status.rb","lineno":388,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864560,"value":"#<Status:0x00007fc9337d2270>"}},{"id":239828,"event":"return","thread_id":9160,"parent_id":239827,"elapsed":8.80297739058733e-06,"elapsed_instrumentation":0.0001036809990182519,"return_value":{"class":"StatusStat","value":"#<StatusStat:0x00007fc93b927820>","object_id":1864660}},{"id":239829,"event":"call","thread_id":9160,"defined_class":"StatusStat","method_id":"favourites_count","path":"app/models/status_stat.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"StatusStat","object_id":1864660,"value":"#<StatusStat:0x00007fc93b927820>"}},{"id":239830,"event":"return","thread_id":9160,"parent_id":239829,"elapsed":2.1015992388129234e-05,"elapsed_instrumentation":7.348100189119577e-05,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239831,"event":"return","thread_id":9160,"parent_id":239826,"elapsed":0.0002469790051691234,"elapsed_instrumentation":0.00010733597446233034,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":239832,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"silenced?","path":"app/models/account.rb","lineno":225,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864680,"value":"#<Account:0x00007fc93b926e20>"}},{"id":239833,"event":"return","thread_id":9160,"parent_id":239832,"elapsed":1.5604018699377775e-05,"elapsed_instrumentation":9.027897613123059e-05},{"id":239834,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"sensitized?","path":"app/models/account.rb","lineno":265,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":1864680,"value":"#<Account:0x00007fc93b926e20>"}},{"id":239835,"event":"return","thread_id":9160,"parent_id":239834,"elapsed":1.289299689233303e-05,"elapsed_instrumentation":7.880001794546843e-05},{"id":239836,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864560,"value":"#<Status:0x00007fc9337d2270>"}},{"id":239837,"event":"return","thread_id":9160,"parent_id":239836,"elapsed":0.0001823910279199481,"elapsed_instrumentation":8.787401020526886e-05},{"id":239838,"event":"call","thread_id":9160,"defined_class":"LanguagesHelper","method_id":"valid_locale?","path":"app/helpers/languages_helper.rb","lineno":293,"static":false,"parameters":[{"name":"locale","class":"String","object_id":1864700,"value":"en","kind":"req"}],"receiver":{"class":"Trends::Statuses","object_id":1862920,"value":"#<Trends::Statuses:0x00007fc933fe2028>"}},{"id":239839,"event":"return","thread_id":9160,"parent_id":239838,"elapsed":7.638009265065193e-06,"elapsed_instrumentation":0.00011791993165388703,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239840,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"trendable?","path":"app/models/status.rb","lineno":300,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864520,"value":"#<Status:0x00007fc9337d23b0>"}},{"id":239841,"event":"return","thread_id":9160,"parent_id":239840,"elapsed":0.00011117104440927505,"elapsed_instrumentation":0.00010483799269422889,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239842,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"trendable?","path":"app/models/status.rb","lineno":300,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":1864560,"value":"#<Status:0x00007fc9337d2270>"}},{"id":239843,"event":"return","thread_id":9160,"parent_id":239842,"elapsed":0.00010538700735196471,"elapsed_instrumentation":0.00010758201824501157,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":239844,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"status_trends\" (\"status_id\",\"account_id\",\"score\",\"language\",\"allowed\") VALUES (107269226527912639, 111361333195896513, 1.0, 'en', TRUE), (107274888812103537, 111361333195896514, 8.0, 'en', TRUE) ON CONFLICT (\"status_id\") DO UPDATE SET \"account_id\"=excluded.\"account_id\",\"score\"=excluded.\"score\",\"language\"=excluded.\"language\",\"allowed\"=excluded.\"allowed\" RETURNING \"id\"","database_type":"postgres"}},{"id":239845,"event":"return","thread_id":9160,"parent_id":239844,"elapsed":0.000998561,"elapsed_instrumentation":7.779698353260756e-05},{"id":239846,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"status_trends\" WHERE \"status_trends\".\"status_id\" = $1","database_type":"postgres"}},{"id":239847,"event":"return","thread_id":9160,"parent_id":239846,"elapsed":0.00053282,"elapsed_instrumentation":8.727004751563072e-05},{"id":239848,"event":"call","thread_id":9160,"sql_query":{"sql":"UPDATE status_trends SET rank = t0.calculated_rank FROM (SELECT id, row_number() OVER w AS calculated_rank FROM status_trends WINDOW w AS (PARTITION BY language ORDER BY score DESC)) t0 WHERE status_trends.id = t0.id","database_type":"postgres"}},{"id":239849,"event":"return","thread_id":9160,"parent_id":239848,"elapsed":0.001004241,"elapsed_instrumentation":8.246296783909202e-05},{"id":239850,"event":"return","thread_id":9160,"parent_id":239723,"elapsed":0.031899893016088754,"elapsed_instrumentation":0.00017501605907455087,"return_value":{"class":"Integer","value":"2","object_id":5}},{"id":239851,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"status_trends\".* FROM \"status_trends\" WHERE \"status_trends\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":239852,"event":"return","thread_id":9160,"parent_id":239851,"elapsed":0.000570806,"elapsed_instrumentation":7.822900079190731e-05}]}