{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::InstanceAccountsDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/instance_accounts_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib","type":"package","children":[{"name":"admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false}]},{"name":"InstanceAccountsDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb:11","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb:37","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb:17","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb:21","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb:25","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"RequestPool","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/request_pool.rb:114","static":false}]},{"name":"connection_pool","type":"package","children":[{"name":"ConnectionPool","type":"class","children":[{"name":"SharedConnectionPool","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/connection_pool/shared_connection_pool.rb:13","static":false}]},{"name":"SharedTimedStack","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/connection_pool/shared_timed_stack.rb:51","static":false}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":3175623,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175624,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175625,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175626,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceAccountsDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb","lineno":11,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175627,"event":"return","thread_id":9160,"parent_id":3175626,"elapsed":4.161032848060131e-06,"elapsed_instrumentation":0.0019314959645271301,"return_value":{"class":"String","value":"instance_accounts","object_id":14765120}},{"id":3175628,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175629,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceAccountsDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175630,"event":"return","thread_id":9160,"parent_id":3175629,"elapsed":4.832400009036064e-05,"elapsed_instrumentation":0.00010748201748356223,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":15562940}},{"id":3175631,"event":"return","thread_id":9160,"parent_id":3175628,"elapsed":0.0002061099512502551,"elapsed_instrumentation":0.00013180403038859367,"return_value":{"class":"String","value":"","object_id":15562960}},{"id":3175632,"event":"return","thread_id":9160,"parent_id":3175625,"elapsed":0.0023442270467057824,"elapsed_instrumentation":5.884899292141199e-05,"return_value":{"class":"String","value":"metrics/dimension/instance_accounts;2023-11-04T03:21:42+00:00;2023-11-06T03:21:42+00:00;10;","object_id":15562980}},{"id":3175633,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15563000,"value":"Cache read: metrics/dimension/instance_accounts;2023-11-04T03:21:42+00:00;2023-11-06T03:21:42+00:00; (...76 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3175634,"event":"call","thread_id":13276700,"defined_class":"RequestPool","method_id":"flush","path":"app/lib/request_pool.rb","lineno":114,"static":false,"parameters":[{"name":"*","class":"Array","object_id":15563020,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":15563040,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"RequestPool","object_id":13276720,"value":"#<RequestPool:0x00007fc937dbdb90>"}},{"id":3175635,"event":"call","thread_id":13276700,"defined_class":"ConnectionPool::SharedConnectionPool","method_id":"flush","path":"app/lib/connection_pool/shared_connection_pool.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":15563060,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":15563080,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"ConnectionPool::SharedConnectionPool","object_id":13276740,"value":"#<ConnectionPool::SharedConnectionPool:0x00007fc93772a698>"}},{"id":3175636,"event":"call","thread_id":13276700,"defined_class":"ConnectionPool::SharedTimedStack","method_id":"flush","path":"app/lib/connection_pool/shared_timed_stack.rb","lineno":51,"static":false,"parameters":[],"receiver":{"class":"ConnectionPool::SharedTimedStack","object_id":13276780,"value":"#<ConnectionPool::SharedTimedStack:0x00007fc93772a5a8>"}},{"id":3175637,"event":"return","thread_id":13276700,"parent_id":3175636,"elapsed":6.7829969339072704e-06,"elapsed_instrumentation":0.00017661298625171185,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":3175638,"event":"return","thread_id":13276700,"parent_id":3175635,"elapsed":0.0002077509998343885,"elapsed_instrumentation":0.00012286700075492263,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":3175639,"event":"return","thread_id":13276700,"parent_id":3175634,"elapsed":0.0003499140148051083,"elapsed_instrumentation":0.00015419197734445333,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":3175640,"event":"return","thread_id":9160,"parent_id":3175633,"elapsed":0.0014040710520930588,"elapsed_instrumentation":0.0001598879462108016,"return_value":{"class":"Integer","value":"176","object_id":353}},{"id":3175641,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15563100,"value":"Cache generate: metrics/dimension/instance_accounts;2023-11-04T03:21:42+00:00;2023-11-06T03:21:42+00 (...80 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3175642,"event":"return","thread_id":9160,"parent_id":3175641,"elapsed":0.0006208199774846435,"elapsed_instrumentation":0.00014597101835533977,"return_value":{"class":"Integer","value":"180","object_id":361}},{"id":3175643,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceAccountsDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb","lineno":17,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175644,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175645,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175646,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceAccountsDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175647,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceAccountsDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175648,"event":"return","thread_id":9160,"parent_id":3175647,"elapsed":6.646203109994531e-05,"elapsed_instrumentation":8.256296860054135e-05,"return_value":{"class":"String","value":"SELECT accounts.username, count(follows.*) AS value FROM accounts LEFT JOIN follows ON follows.targe (...139 more characters)","object_id":15563120}},{"id":3175649,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceAccountsDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/instance_accounts_dimension.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceAccountsDimension","object_id":15562920,"value":"#<Admin::Metrics::Dimension::InstanceAccountsDimension:0x00007fc930b0d9d8>"}},{"id":3175650,"event":"return","thread_id":9160,"parent_id":3175649,"elapsed":4.294200334697962e-05,"elapsed_instrumentation":7.770198862999678e-05,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":15563140}},{"id":3175651,"event":"return","thread_id":9160,"parent_id":3175646,"elapsed":0.000313826953060925,"elapsed_instrumentation":0.00012274400796741247,"return_value":{"class":"Array","value":"[SELECT accounts.username, count(follows.*) AS value FROM accounts LEFT JOIN follows ON follows.targe (...139 more characters), {:domain=>, :limit=>10}]","object_id":15563160,"size":2}},{"id":3175652,"event":"return","thread_id":9160,"parent_id":3175645,"elapsed":0.0005428770091384649,"elapsed_instrumentation":7.089396240189672e-05,"return_value":{"class":"String","value":"SELECT accounts.username, count(follows.*) AS value FROM accounts LEFT JOIN follows ON follows.targe (...132 more characters)","object_id":15563180}},{"id":3175653,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT accounts.username, count(follows.*) AS value FROM accounts LEFT JOIN follows ON follows.target_account_id = accounts.id WHERE accounts.domain = NULL GROUP BY accounts.id, follows.target_account_id ORDER BY value DESC LIMIT 10","database_type":"postgres"}},{"id":3175654,"event":"return","thread_id":9160,"parent_id":3175653,"elapsed":0.001312737,"elapsed_instrumentation":9.973300620913506e-05},{"id":3175655,"event":"return","thread_id":9160,"parent_id":3175644,"elapsed":0.002550978970248252,"elapsed_instrumentation":9.872100781649351e-05,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc930b0b9a8>","object_id":15563200}},{"id":3175656,"event":"return","thread_id":9160,"parent_id":3175643,"elapsed":0.0026875429903157055,"elapsed_instrumentation":0.00013434892753139138,"return_value":{"class":"Array","value":"[]","object_id":15563220,"size":0}},{"id":3175657,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15563240,"value":"Cache write: metrics/dimension/instance_accounts;2023-11-04T03:21:42+00:00;2023-11-06T03:21:42+00:00 (...77 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3175658,"event":"return","thread_id":9160,"parent_id":3175657,"elapsed":0.0005989570054225624,"elapsed_instrumentation":0.00015222799265757203,"return_value":{"class":"Integer","value":"177","object_id":355}},{"id":3175659,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":15563260,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":3175660,"event":"return","thread_id":9160,"parent_id":3175659,"elapsed":9.590003173798323e-06,"elapsed_instrumentation":0.0001367079676128924,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":15563280}},{"id":3175661,"event":"return","thread_id":9160,"parent_id":3175624,"elapsed":0.009888217959087342,"elapsed_instrumentation":7.529696449637413e-05,"return_value":{"class":"Array","value":"[]","object_id":15563220,"size":0}},{"id":3175662,"event":"return","thread_id":9160,"parent_id":3175623,"elapsed":0.009991241036914289,"elapsed_instrumentation":0.0003740689717233181,"return_value":{"class":"Array","value":"[]","object_id":15563220,"size":0}}]}