{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Importer::TagsIndexImporter import! indexes relevant tags","source_location":"spec/lib/importer/tags_index_importer_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"importer","type":"package","children":[{"name":"Importer","type":"class","children":[{"name":"TagsIndexImporter","type":"class","children":[{"name":"import!","type":"function","location":"app/lib/importer/tags_index_importer.rb:4","static":false}]},{"name":"BaseImporter","type":"class","children":[{"name":"in_work_unit","type":"function","location":"app/lib/importer/base_importer.rb:81","static":false},{"name":"wait!","type":"function","location":"app/lib/importer/base_importer.rb:93","static":false},{"name":"build_bulk_body","type":"function","location":"app/lib/importer/base_importer.rb:73","static":false}]}]}]},{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true}]}]},{"name":"models","type":"package","children":[{"name":"Tag","type":"class","children":[{"name":"display_name","type":"function","location":"app/models/tag.rb:67","static":false},{"name":"reviewed?","type":"function","location":"app/models/tag.rb:93","static":false},{"name":"history","type":"function","location":"app/models/tag.rb:109","static":false}]},{"name":"trends","type":"package","children":[{"name":"Trends","type":"class","children":[{"name":"History","type":"class","children":[{"name":"aggregate","type":"function","location":"app/models/trends/history.rb:85","static":false},{"name":"Aggregate","type":"class","children":[{"name":"accounts","type":"function","location":"app/models/trends/history.rb:17","static":false}]},{"name":"Day","type":"class","children":[{"name":"key_for","type":"function","location":"app/models/trends/history.rb:58","static":false},{"name":"key_prefix","type":"function","location":"app/models/trends/history.rb:67","static":false}]}]}]}]},{"name":"concerns","type":"package","children":[{"name":"Redisable","type":"class","children":[{"name":"with_redis","type":"function","location":"app/models/concerns/redisable.rb:8","static":false}]}]}]}]}],"events":[{"id":1169738,"event":"call","thread_id":9160,"defined_class":"Importer::TagsIndexImporter","method_id":"import!","path":"app/lib/importer/tags_index_importer.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Importer::TagsIndexImporter","object_id":6771360,"value":"#<Importer::TagsIndexImporter:0x00007fc9332763a8>"}},{"id":1169739,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE (\"tags\".\"listable\" = $1 OR \"tags\".\"listable\" IS NULL) ORDER BY \"tags\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1169740,"event":"return","thread_id":9160,"parent_id":1169739,"elapsed":0.000779454,"elapsed_instrumentation":0.00010738603305071592},{"id":1169741,"event":"call","thread_id":9160,"defined_class":"Importer::BaseImporter","method_id":"in_work_unit","path":"app/lib/importer/base_importer.rb","lineno":81,"static":false,"parameters":[{"name":"*","class":"Array","object_id":6771380,"value":"[[#<Tag:0x00007fc919acb040>]]","kind":"rest","size":1},{"name":"**","class":"Hash","object_id":6771400,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Importer::TagsIndexImporter","object_id":6771360,"value":"#<Importer::TagsIndexImporter:0x00007fc9332763a8>"}},{"id":1169742,"event":"return","thread_id":9160,"parent_id":1169741,"elapsed":0.000433290028013289,"elapsed_instrumentation":0.00027935096295550466,"return_value":{"class":"Concurrent::Set","value":"#<Concurrent::Set: {#<Concurrent::Promises::Future:0x00007fc930b61ba0 pending>}>","object_id":6771440}},{"id":1169743,"event":"call","thread_id":9160,"defined_class":"Importer::BaseImporter","method_id":"wait!","path":"app/lib/importer/base_importer.rb","lineno":93,"static":false,"parameters":[],"receiver":{"class":"Importer::TagsIndexImporter","object_id":6771360,"value":"#<Importer::TagsIndexImporter:0x00007fc9332763a8>"}},{"id":1169744,"event":"call","thread_id":6771480,"defined_class":"Importer::BaseImporter","method_id":"build_bulk_body","path":"app/lib/importer/base_importer.rb","lineno":73,"static":false,"parameters":[{"name":"to_import","class":"Array","object_id":6771460,"value":"[#<Tag:0x00007fc919acb040>]","kind":"req","size":1}],"receiver":{"class":"Importer::TagsIndexImporter","object_id":6771360,"value":"#<Importer::TagsIndexImporter:0x00007fc9332763a8>"}},{"id":1169745,"event":"call","thread_id":6771480,"defined_class":"Tag","method_id":"display_name","path":"app/models/tag.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Tag","object_id":6771500,"value":"#<Tag:0x00007fc919acb040>"}},{"id":1169746,"event":"return","thread_id":6771480,"parent_id":1169745,"elapsed":0.00018225901294499636,"elapsed_instrumentation":9.725097334012389e-05,"return_value":{"class":"String","value":"quos38","object_id":6771520}},{"id":1169747,"event":"call","thread_id":6771480,"defined_class":"Tag","method_id":"reviewed?","path":"app/models/tag.rb","lineno":93,"static":false,"parameters":[],"receiver":{"class":"Tag","object_id":6771500,"value":"#<Tag:0x00007fc919acb040>"}},{"id":1169748,"event":"return","thread_id":6771480,"parent_id":1169747,"elapsed":1.3681012205779552e-05,"elapsed_instrumentation":0.0002873959601856768},{"id":1169749,"event":"call","thread_id":6771480,"defined_class":"Tag","method_id":"history","path":"app/models/tag.rb","lineno":109,"static":false,"parameters":[],"receiver":{"class":"Tag","object_id":6771500,"value":"#<Tag:0x00007fc919acb040>"}},{"id":1169750,"event":"return","thread_id":6771480,"parent_id":1169749,"elapsed":3.917602589353919e-05,"elapsed_instrumentation":9.218900231644511e-05,"return_value":{"class":"Trends::History","value":"#<Trends::History:0x00007fc93329e358>","object_id":6771540}},{"id":1169751,"event":"call","thread_id":6771480,"defined_class":"Trends::History","method_id":"aggregate","path":"app/models/trends/history.rb","lineno":85,"static":false,"parameters":[{"name":"date_range","class":"Range","object_id":6771560,"value":"2023-10-30..2023-11-06","kind":"req"}],"receiver":{"class":"Trends::History","object_id":6771540,"value":"#<Trends::History:0x00007fc93329e358>"}},{"id":1169752,"event":"return","thread_id":6771480,"parent_id":1169751,"elapsed":0.00010632997145876288,"elapsed_instrumentation":0.00013044499792158604,"return_value":{"class":"Trends::History::Aggregate","value":"#<Trends::History::Aggregate:0x00007fc93329bd38>","object_id":6771580}},{"id":1169753,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Aggregate","method_id":"accounts","path":"app/models/trends/history.rb","lineno":17,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Aggregate","object_id":6771580,"value":"#<Trends::History::Aggregate:0x00007fc93329bd38>"}},{"id":1169754,"event":"call","thread_id":6771480,"defined_class":"Redisable","method_id":"with_redis","path":"app/models/concerns/redisable.rb","lineno":8,"static":false,"parameters":[{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Trends::History::Aggregate","object_id":6771580,"value":"#<Trends::History::Aggregate:0x00007fc93329bd38>"}},{"id":1169755,"event":"call","thread_id":6771480,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":6771600,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":6771620,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":1169756,"event":"call","thread_id":6771480,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":1169757,"event":"return","thread_id":6771480,"parent_id":1169756,"elapsed":2.863002009689808e-06,"elapsed_instrumentation":7.013295544311404e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":1169758,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6771640,"value":"#<Trends::History::Day:0x00007fc93329bc70>"}},{"id":1169759,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6771640,"value":"#<Trends::History::Day:0x00007fc93329bc70>"}},{"id":1169760,"event":"return","thread_id":6771480,"parent_id":1169759,"elapsed":8.410017471760511e-06,"elapsed_instrumentation":7.095799082890153e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698624000","object_id":6771660}},{"id":1169761,"event":"return","thread_id":6771480,"parent_id":1169758,"elapsed":0.00010078999912366271,"elapsed_instrumentation":9.048799984157085e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698624000:accounts","object_id":6771680}},{"id":1169762,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6771700,"value":"#<Trends::History::Day:0x00007fc93329bae0>"}},{"id":1169763,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6771700,"value":"#<Trends::History::Day:0x00007fc93329bae0>"}},{"id":1169764,"event":"return","thread_id":6771480,"parent_id":1169763,"elapsed":4.170986358076334e-06,"elapsed_instrumentation":6.0932012274861336e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698710400","object_id":6771720}},{"id":1169765,"event":"return","thread_id":6771480,"parent_id":1169762,"elapsed":8.20319983176887e-05,"elapsed_instrumentation":7.346301572397351e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698710400:accounts","object_id":6771740}},{"id":1169766,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6771760,"value":"#<Trends::History::Day:0x00007fc93329b900>"}},{"id":1169767,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6771760,"value":"#<Trends::History::Day:0x00007fc93329b900>"}},{"id":1169768,"event":"return","thread_id":6771480,"parent_id":1169767,"elapsed":5.050038453191519e-06,"elapsed_instrumentation":7.332698442041874e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698796800","object_id":6771780}},{"id":1169769,"event":"return","thread_id":6771480,"parent_id":1169766,"elapsed":9.861198486760259e-05,"elapsed_instrumentation":0.00016612897161394358,"return_value":{"class":"String","value":"activity:tags:1290:1698796800:accounts","object_id":6771800}},{"id":1169770,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6771820,"value":"#<Trends::History::Day:0x00007fc93329b6a8>"}},{"id":1169771,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6771820,"value":"#<Trends::History::Day:0x00007fc93329b6a8>"}},{"id":1169772,"event":"return","thread_id":6771480,"parent_id":1169771,"elapsed":4.781992174685001e-06,"elapsed_instrumentation":7.384299533441663e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698883200","object_id":6771840}},{"id":1169773,"event":"return","thread_id":6771480,"parent_id":1169770,"elapsed":0.00036161899333819747,"elapsed_instrumentation":7.193797500804067e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698883200:accounts","object_id":6771860}},{"id":1169774,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6771880,"value":"#<Trends::History::Day:0x00007fc93329b4a0>"}},{"id":1169775,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6771880,"value":"#<Trends::History::Day:0x00007fc93329b4a0>"}},{"id":1169776,"event":"return","thread_id":6771480,"parent_id":1169775,"elapsed":3.8529979065060616e-06,"elapsed_instrumentation":6.0399994254112244e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698969600","object_id":6771900}},{"id":1169777,"event":"return","thread_id":6771480,"parent_id":1169774,"elapsed":8.117494871839881e-05,"elapsed_instrumentation":7.467204704880714e-05,"return_value":{"class":"String","value":"activity:tags:1290:1698969600:accounts","object_id":6771920}},{"id":1169778,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6771940,"value":"#<Trends::History::Day:0x00007fc93329b310>"}},{"id":1169779,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6771940,"value":"#<Trends::History::Day:0x00007fc93329b310>"}},{"id":1169780,"event":"return","thread_id":6771480,"parent_id":1169779,"elapsed":3.875000402331352e-06,"elapsed_instrumentation":5.94389857724309e-05,"return_value":{"class":"String","value":"activity:tags:1290:1699056000","object_id":6771960}},{"id":1169781,"event":"return","thread_id":6771480,"parent_id":1169778,"elapsed":8.028995944187045e-05,"elapsed_instrumentation":6.939697777852416e-05,"return_value":{"class":"String","value":"activity:tags:1290:1699056000:accounts","object_id":6771980}},{"id":1169782,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6772000,"value":"#<Trends::History::Day:0x00007fc93329b158>"}},{"id":1169783,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6772000,"value":"#<Trends::History::Day:0x00007fc93329b158>"}},{"id":1169784,"event":"return","thread_id":6771480,"parent_id":1169783,"elapsed":4.803994670510292e-06,"elapsed_instrumentation":6.74980110488832e-05,"return_value":{"class":"String","value":"activity:tags:1290:1699142400","object_id":6772020}},{"id":1169785,"event":"return","thread_id":6771480,"parent_id":1169782,"elapsed":9.243300883099437e-05,"elapsed_instrumentation":0.00011332501890137792,"return_value":{"class":"String","value":"activity:tags:1290:1699142400:accounts","object_id":6772040}},{"id":1169786,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_for","path":"app/models/trends/history.rb","lineno":58,"static":false,"parameters":[{"name":"suffix","class":"Symbol","object_id":19379228,"value":":accounts","kind":"req"}],"receiver":{"class":"Trends::History::Day","object_id":6772060,"value":"#<Trends::History::Day:0x00007fc93329afc8>"}},{"id":1169787,"event":"call","thread_id":6771480,"defined_class":"Trends::History::Day","method_id":"key_prefix","path":"app/models/trends/history.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Trends::History::Day","object_id":6772060,"value":"#<Trends::History::Day:0x00007fc93329afc8>"}},{"id":1169788,"event":"return","thread_id":6771480,"parent_id":1169787,"elapsed":5.036999937146902e-06,"elapsed_instrumentation":9.058398427441716e-05,"return_value":{"class":"String","value":"activity:tags:1290:1699228800","object_id":6772080}},{"id":1169789,"event":"return","thread_id":6771480,"parent_id":1169786,"elapsed":0.00011589500354602933,"elapsed_instrumentation":7.316900882869959e-05,"return_value":{"class":"String","value":"activity:tags:1290:1699228800:accounts","object_id":6772100}},{"id":1169790,"event":"return","thread_id":6771480,"parent_id":1169755,"elapsed":0.003010999003890902,"elapsed_instrumentation":0.0001323790056630969,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1169791,"event":"return","thread_id":6771480,"parent_id":1169754,"elapsed":0.003169465984683484,"elapsed_instrumentation":0.00010571902384981513,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1169792,"event":"return","thread_id":6771480,"parent_id":1169753,"elapsed":0.0033028559992089868,"elapsed_instrumentation":0.0003013719688169658,"return_value":{"class":"Integer","value":"0","object_id":1}},{"id":1169793,"event":"return","thread_id":6771480,"parent_id":1169744,"elapsed":0.005178897001314908,"elapsed_instrumentation":0.00027873407816514373,"return_value":{"class":"Array","value":"[{:index=>{:_id=>1290, :data=>{name=>quos38, reviewed=>false, usage=>0, last_status_at=>2023-11-06T03:01:34.109Z}}}]","object_id":6772120,"size":1}},{"id":1169794,"event":"return","thread_id":9160,"parent_id":1169743,"elapsed":0.0068722349824383855,"elapsed_instrumentation":0.000156040012370795,"return_value":{"class":"Concurrent::Promises::Future","value":"#<Concurrent::Promises::Future:0x00007fc930b618d0 fulfilled with [[1, 0]]>","object_id":6772140}},{"id":1169795,"event":"return","thread_id":9160,"parent_id":1169738,"elapsed":0.012225524988025427,"elapsed_instrumentation":0.0002683959901332855,"return_value":{"class":"Concurrent::Promises::Future","value":"#<Concurrent::Promises::Future:0x00007fc930b618d0 fulfilled with [[1, 0]]>","object_id":6772140}}]}