{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::TagServersDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/tag_servers_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false}]},{"name":"TagServersDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:10","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:50","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:16","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:20","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:24","static":false},{"name":"tag_id","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:38","static":false},{"name":"earliest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:42","static":false},{"name":"latest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb:46","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"Snowflake","type":"class","children":[{"name":"id_at","type":"function","location":"lib/mastodon/snowflake.rb:99","static":true}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":2688773,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688774,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688775,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688776,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688777,"event":"return","thread_id":9160,"parent_id":2688776,"elapsed":2.9570073820650578e-06,"elapsed_instrumentation":0.0001409829710610211,"return_value":{"class":"String","value":"tag_servers","object_id":11045380}},{"id":2688778,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688779,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688780,"event":"return","thread_id":9160,"parent_id":2688779,"elapsed":4.5481021516025066e-05,"elapsed_instrumentation":0.00010326801566407084,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":13227660}},{"id":2688781,"event":"return","thread_id":9160,"parent_id":2688778,"elapsed":0.00019851303659379482,"elapsed_instrumentation":9.534298442304134e-05,"return_value":{"class":"String","value":"","object_id":13227680}},{"id":2688782,"event":"return","thread_id":9160,"parent_id":2688775,"elapsed":0.0005053749773651361,"elapsed_instrumentation":0.00033715006429702044,"return_value":{"class":"String","value":"metrics/dimension/tag_servers;2023-11-04T03:16:06+00:00;2023-11-06T03:16:06+00:00;10;","object_id":13227700}},{"id":2688783,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13227720,"value":"Cache read: metrics/dimension/tag_servers;2023-11-04T03:16:06+00:00;2023-11-06T03:16:06+00:00;10; ({ (...70 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2688784,"event":"return","thread_id":9160,"parent_id":2688783,"elapsed":0.0008989880443550646,"elapsed_instrumentation":0.00015638896729797125,"return_value":{"class":"Integer","value":"170","object_id":341}},{"id":2688785,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13227740,"value":"Cache generate: metrics/dimension/tag_servers;2023-11-04T03:16:06+00:00;2023-11-06T03:16:06+00:00;10 (...74 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2688786,"event":"return","thread_id":9160,"parent_id":2688785,"elapsed":0.0012646029936149716,"elapsed_instrumentation":0.00015603197971358895,"return_value":{"class":"Integer","value":"174","object_id":349}},{"id":2688787,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688788,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688789,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688790,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":20,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688791,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":24,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688792,"event":"return","thread_id":9160,"parent_id":2688791,"elapsed":0.00043557799654081464,"elapsed_instrumentation":0.00015718198847025633,"return_value":{"class":"String","value":"SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuse (...242 more characters)","object_id":13227760}},{"id":2688793,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"tag_id","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":38,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688794,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688795,"event":"return","thread_id":9160,"parent_id":2688794,"elapsed":4.6974048018455505e-05,"elapsed_instrumentation":0.00012427096953615546,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":13227780}},{"id":2688796,"event":"return","thread_id":9160,"parent_id":2688793,"elapsed":0.00020584597950801253,"elapsed_instrumentation":0.00012452597729861736},{"id":2688797,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"earliest_status_id","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":42,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688798,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":13227800,"value":"2023-11-04T03:16:06+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":2688799,"event":"return","thread_id":9160,"parent_id":2688798,"elapsed":3.0422001145780087e-05,"elapsed_instrumentation":0.0005397420027293265,"return_value":{"class":"Integer","value":"111350105112576000","object_id":222700210225152001}},{"id":2688800,"event":"return","thread_id":9160,"parent_id":2688797,"elapsed":0.0006338109960779548,"elapsed_instrumentation":0.00016096595209091902,"return_value":{"class":"Integer","value":"111350105112576000","object_id":222700210225152001}},{"id":2688801,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagServersDimension","method_id":"latest_status_id","path":"app/lib/admin/metrics/dimension/tag_servers_dimension.rb","lineno":46,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagServersDimension","object_id":13227640,"value":"#<Admin::Metrics::Dimension::TagServersDimension:0x00007fc8e153f550>"}},{"id":2688802,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":13227820,"value":"2023-11-06T03:16:06+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":2688803,"event":"return","thread_id":9160,"parent_id":2688802,"elapsed":2.2310996428132057e-05,"elapsed_instrumentation":0.00028770294738933444,"return_value":{"class":"Integer","value":"111361429733376000","object_id":222722859466752001}},{"id":2688804,"event":"return","thread_id":9160,"parent_id":2688801,"elapsed":0.0003675619955174625,"elapsed_instrumentation":0.0001718139974400401,"return_value":{"class":"Integer","value":"111361429733376000","object_id":222722859466752001}},{"id":2688805,"event":"return","thread_id":9160,"parent_id":2688790,"elapsed":0.0023726389626972377,"elapsed_instrumentation":0.0002694569993764162,"return_value":{"class":"Array","value":"[SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuse (...242 more characters), {:tag_id=>, :earliest_status_id=>111350105112576000, :latest_status_id=>111361429733376000, :limit=>10}]","object_id":13227840,"size":2}},{"id":2688806,"event":"return","thread_id":9160,"parent_id":2688789,"elapsed":0.002970464003738016,"elapsed_instrumentation":0.00015018804697319865,"return_value":{"class":"String","value":"SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuse (...235 more characters)","object_id":13227860}},{"id":2688807,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuses.account_id INNER JOIN statuses_tags ON statuses_tags.status_id = statuses.id WHERE statuses_tags.tag_id = NULL AND statuses.id BETWEEN 111350105112576000 AND 111361429733376000 GROUP BY accounts.domain ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":2688808,"event":"return","thread_id":9160,"parent_id":2688807,"elapsed":0.002101112,"elapsed_instrumentation":0.00017805001698434353},{"id":2688809,"event":"return","thread_id":9160,"parent_id":2688788,"elapsed":0.006210782041307539,"elapsed_instrumentation":0.0002242809860035777,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc8e1539290>","object_id":13227880}},{"id":2688810,"event":"return","thread_id":9160,"parent_id":2688787,"elapsed":0.006826226017437875,"elapsed_instrumentation":0.0001614339998923242,"return_value":{"class":"Array","value":"[]","object_id":13227900,"size":0}},{"id":2688811,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13227920,"value":"Cache write: metrics/dimension/tag_servers;2023-11-04T03:16:06+00:00;2023-11-06T03:16:06+00:00;10; ( (...71 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2688812,"event":"return","thread_id":9160,"parent_id":2688811,"elapsed":0.0010342570021748543,"elapsed_instrumentation":0.00021563697373494506,"return_value":{"class":"Integer","value":"171","object_id":343}},{"id":2688813,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":13227940,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":2688814,"event":"return","thread_id":9160,"parent_id":2688813,"elapsed":9.422015864402056e-06,"elapsed_instrumentation":0.00015066703781485558,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":13227960}},{"id":2688815,"event":"return","thread_id":9160,"parent_id":2688774,"elapsed":0.01296625001123175,"elapsed_instrumentation":7.135298801586032e-05,"return_value":{"class":"Array","value":"[]","object_id":13227900,"size":0}},{"id":2688816,"event":"return","thread_id":9160,"parent_id":2688773,"elapsed":0.013057361007668078,"elapsed_instrumentation":0.0001354169799014926,"return_value":{"class":"Array","value":"[]","object_id":13227900,"size":0}}]}