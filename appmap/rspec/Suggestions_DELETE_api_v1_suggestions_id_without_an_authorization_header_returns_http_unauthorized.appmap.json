{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Suggestions DELETE /api/v1/suggestions/:id without an authorization header returns http unauthorized","source_location":"spec/requests/api/v1/suggestions_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack","type":"function","location":"<internal:pack>:19","static":false,"labels":["string.unpack"]}]},{"name":"Array","type":"class","children":[{"name":"pack","type":"function","location":"<internal:pack>:7","static":false,"labels":["array.pack"]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"app","type":"package","children":[{"name":"controllers","type":"package","children":[{"name":"concerns","type":"package","children":[{"name":"Localized","type":"class","children":[{"name":"set_locale","type":"function","location":"app/controllers/concerns/localized.rb:10","static":false}]}]},{"name":"api","type":"package","children":[{"name":"Api","type":"class","children":[{"name":"BaseController","type":"class","children":[{"name":"current_user","type":"function","location":"app/controllers/api/base_controller.rb:116","static":false},{"name":"current_resource_owner","type":"function","location":"app/controllers/api/base_controller.rb:112","static":false},{"name":"disallow_unauthenticated_api_access?","type":"function","location":"app/controllers/api/base_controller.rb:152","static":false},{"name":"require_not_suspended!","type":"function","location":"app/controllers/api/base_controller.rb:126","static":false},{"name":"doorkeeper_unauthorized_render_options","type":"function","location":"app/controllers/api/base_controller.rb:85","static":false}]}]}]},{"name":"ApplicationController","type":"class","children":[{"name":"current_session","type":"function","location":"app/controllers/application_controller.rb:153","static":false},{"name":"check_self_destruct!","type":"function","location":"app/controllers/application_controller.rb:176","static":false},{"name":"set_cache_control_defaults","type":"function","location":"app/controllers/application_controller.rb:185","static":false}]}]},{"name":"helpers","type":"package","children":[{"name":"SelfDestructHelper","type":"class","children":[{"name":"self_destruct?","type":"function","location":"app/helpers/self_destruct_helper.rb:11","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"RedisConfiguration","type":"class","children":[{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true},{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true}]}]}]},{"name":"actionpack","type":"package","children":[{"name":"ActionDispatch","type":"class","children":[{"name":"Request","type":"class","children":[{"name":"Session","type":"class","children":[{"name":"[]","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/request/session.rb:112","static":false,"labels":["http.session.read"]}]}]},{"name":"Cookies","type":"class","children":[{"name":"CookieJar","type":"class","children":[{"name":"update","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb:344","static":false,"labels":["http.session.write"]},{"name":"[]","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb:328","static":false,"labels":["http.session.read"]}]}]}]},{"name":"ActionController","type":"class","children":[{"name":"Renderers","type":"class","children":[{"name":"render_to_body","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_controller/metal/renderers.rb:140","static":false,"labels":["mvc.render"]}]}]}]},{"name":"json","type":"package","children":[{"name":"JSON","type":"class","children":[{"name":"Ext","type":"class","children":[{"name":"Generator","type":"class","children":[{"name":"State","type":"class","children":[{"name":"generate","type":"function","location":"JSON::Ext::Generator::State#generate","static":false,"labels":["format.json.generate","serialize"]}]}]}]}]}]},{"name":"lib/chewy/strategy","type":"package","children":[{"name":"Chewy","type":"class","children":[{"name":"Strategy","type":"class","children":[{"name":"Mastodon","type":"class","children":[{"name":"leave","type":"function","location":"lib/chewy/strategy/mastodon.rb:16","static":false}]}]}]}]}],"events":[{"id":3671601,"event":"call","thread_id":9160,"http_server_request":{"request_method":"DELETE","path_info":"/api/v1/suggestions/111361470521446369","normalized_path_info":"/api/v1/suggestions/{id}","headers":{"Version":"HTTP/1.0","Host":"www.example.com","Accept":"text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5","Content-Type":"application/x-www-form-urlencoded","Content-Length":"0"}}},{"id":3671602,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17909980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":222040,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93803c8a8>"}},{"id":3671603,"event":"return","thread_id":9160,"parent_id":3671602,"elapsed":0.000276467006187886,"elapsed_instrumentation":0.0002604959881864488,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc934226eb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc934226ff0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc934227158 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc934227310 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":222060,"size":4}},{"id":3671604,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17909980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":222040,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93803c8a8>"}},{"id":3671605,"event":"return","thread_id":9160,"parent_id":3671604,"elapsed":4.342000465840101e-06,"elapsed_instrumentation":0.0001042009680531919,"return_value":{"class":"Array","value":"[]","object_id":222080,"size":0}},{"id":3671606,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack","path":"<internal:pack>","lineno":19,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":344180,"value":"NnnnnN","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":17910000,"value":"G\u001e_N_\u0010_\u0001\u0001{b!_\u0001xO"}},{"id":3671607,"event":"return","thread_id":9160,"parent_id":3671606,"elapsed":6.325019057840109e-06,"elapsed_instrumentation":0.00013979995856061578,"return_value":{"class":"Array","value":"[1193189454, 34832, 44545, 379, 25121, 2583787599]","object_id":17910020,"size":6}},{"id":3671608,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17910060,"value":"Processing by Api::V1::SuggestionsController#destroy as HTML\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3671609,"event":"return","thread_id":9160,"parent_id":3671608,"elapsed":0.0007857090095058084,"elapsed_instrumentation":0.00016012298874557018,"return_value":{"class":"Integer","value":"61","object_id":123}},{"id":3671610,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17910080,"value":"  Parameters: {\"id\"=>\"111361470521446369\"}\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3671611,"event":"return","thread_id":9160,"parent_id":3671610,"elapsed":0.0007838979945518076,"elapsed_instrumentation":0.00016058096662163734,"return_value":{"class":"Integer","value":"43","object_id":87}},{"id":3671612,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":17907000,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc8e0d12350>"}},{"id":3671613,"event":"return","thread_id":9160,"parent_id":3671612,"elapsed":3.4440308809280396e-06,"elapsed_instrumentation":0.00011317699681967497,"return_value":{"class":"Array","value":"[]","object_id":17907020,"size":0}},{"id":3671614,"event":"call","thread_id":9160,"defined_class":"Localized","method_id":"set_locale","path":"app/controllers/concerns/localized.rb","lineno":10,"static":false,"parameters":[{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671615,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_user","path":"app/controllers/api/base_controller.rb","lineno":116,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671616,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_resource_owner","path":"app/controllers/api/base_controller.rb","lineno":112,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671617,"event":"return","thread_id":9160,"parent_id":3671616,"elapsed":5.715497536584735e-05,"elapsed_instrumentation":5.289202090352774e-05},{"id":3671618,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Request::Session","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/request/session.rb","lineno":112,"static":false,"parameters":[{"name":"key","class":"String","object_id":17910140,"value":"warden.user.user.key","kind":"req"}],"receiver":{"class":"ActionDispatch::Request::Session","object_id":17910160,"value":"#<ActionDispatch::Request::Session:0x00007fc8e112ea10>"}},{"id":3671619,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"update","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":344,"static":false,"parameters":[{"name":"other_hash","class":"Hash","object_id":17910180,"value":"{}","kind":"req","size":0}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671620,"event":"return","thread_id":9160,"parent_id":3671619,"elapsed":5.949987098574638e-06,"elapsed_instrumentation":0.00012177205644547939,"return_value":{"class":"ActionDispatch::Cookies::CookieJar","value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>","object_id":17910200}},{"id":3671621,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":386580,"value":"_mastodon_session","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671622,"event":"return","thread_id":9160,"parent_id":3671621,"elapsed":3.936002030968666e-06,"elapsed_instrumentation":9.972503175958991e-05},{"id":3671623,"event":"return","thread_id":9160,"parent_id":3671618,"elapsed":0.0005404300172813237,"elapsed_instrumentation":8.076895028352737e-05},{"id":3671624,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":317160,"value":"_session_id","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671625,"event":"return","thread_id":9160,"parent_id":3671624,"elapsed":3.105960786342621e-06,"elapsed_instrumentation":8.336600149050355e-05},{"id":3671626,"event":"return","thread_id":9160,"parent_id":3671615,"elapsed":0.0012230099528096616,"elapsed_instrumentation":6.551999831572175e-05},{"id":3671627,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":17907080,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc8e0d123a0>"}},{"id":3671628,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_user","path":"app/controllers/api/base_controller.rb","lineno":116,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671629,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_resource_owner","path":"app/controllers/api/base_controller.rb","lineno":112,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671630,"event":"return","thread_id":9160,"parent_id":3671629,"elapsed":4.047999391332269e-05,"elapsed_instrumentation":4.9979949835687876e-05},{"id":3671631,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":317160,"value":"_session_id","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671632,"event":"return","thread_id":9160,"parent_id":3671631,"elapsed":3.3770338632166386e-06,"elapsed_instrumentation":0.0001668659970164299},{"id":3671633,"event":"return","thread_id":9160,"parent_id":3671628,"elapsed":0.00042056303936988115,"elapsed_instrumentation":5.8578967582434416e-05},{"id":3671634,"event":"call","thread_id":9160,"defined_class":"ApplicationController","method_id":"current_session","path":"app/controllers/application_controller.rb","lineno":153,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671635,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":317160,"value":"_session_id","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671636,"event":"return","thread_id":9160,"parent_id":3671635,"elapsed":2.759043127298355e-06,"elapsed_instrumentation":7.842894410714507e-05},{"id":3671637,"event":"return","thread_id":9160,"parent_id":3671634,"elapsed":0.000356729025952518,"elapsed_instrumentation":5.541299469769001e-05},{"id":3671638,"event":"call","thread_id":9160,"defined_class":"ApplicationController","method_id":"check_self_destruct!","path":"app/controllers/application_controller.rb","lineno":176,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671639,"event":"call","thread_id":9160,"defined_class":"SelfDestructHelper","method_id":"self_destruct?","path":"app/helpers/self_destruct_helper.rb","lineno":11,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671640,"event":"return","thread_id":9160,"parent_id":3671639,"elapsed":8.022005204111338e-06,"elapsed_instrumentation":4.62569878436625e-05},{"id":3671641,"event":"return","thread_id":9160,"parent_id":3671638,"elapsed":6.990798283368349e-05,"elapsed_instrumentation":5.246303044259548e-05},{"id":3671642,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_user","path":"app/controllers/api/base_controller.rb","lineno":116,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671643,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_resource_owner","path":"app/controllers/api/base_controller.rb","lineno":112,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671644,"event":"return","thread_id":9160,"parent_id":3671643,"elapsed":0.0001393510028719902,"elapsed_instrumentation":5.251995753496885e-05},{"id":3671645,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":317160,"value":"_session_id","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671646,"event":"return","thread_id":9160,"parent_id":3671645,"elapsed":3.2840180210769176e-06,"elapsed_instrumentation":8.695496944710612e-05},{"id":3671647,"event":"return","thread_id":9160,"parent_id":3671642,"elapsed":0.0004386880318634212,"elapsed_instrumentation":5.009101005271077e-05},{"id":3671648,"event":"call","thread_id":9160,"defined_class":"ApplicationController","method_id":"set_cache_control_defaults","path":"app/controllers/application_controller.rb","lineno":185,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671649,"event":"return","thread_id":9160,"parent_id":3671648,"elapsed":3.882043529301882e-06,"elapsed_instrumentation":0.00010081002255901694,"return_value":{"class":"Hash","value":"{:private=>true, :no_store=>true}","object_id":17910220,"size":2}},{"id":3671650,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"disallow_unauthenticated_api_access?","path":"app/controllers/api/base_controller.rb","lineno":152,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671651,"event":"return","thread_id":9160,"parent_id":3671650,"elapsed":1.5855999663472176e-05,"elapsed_instrumentation":5.762604996562004e-05},{"id":3671652,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"require_not_suspended!","path":"app/controllers/api/base_controller.rb","lineno":126,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671653,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_user","path":"app/controllers/api/base_controller.rb","lineno":116,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671654,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_resource_owner","path":"app/controllers/api/base_controller.rb","lineno":112,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671655,"event":"return","thread_id":9160,"parent_id":3671654,"elapsed":2.744904486462474e-05,"elapsed_instrumentation":4.669098416343331e-05},{"id":3671656,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":317160,"value":"_session_id","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671657,"event":"return","thread_id":9160,"parent_id":3671656,"elapsed":3.801018465310335e-06,"elapsed_instrumentation":0.0002166579943150282},{"id":3671658,"event":"return","thread_id":9160,"parent_id":3671653,"elapsed":0.00045096600661054254,"elapsed_instrumentation":4.771794192492962e-05},{"id":3671659,"event":"return","thread_id":9160,"parent_id":3671652,"elapsed":0.0005145230097696185,"elapsed_instrumentation":4.617695230990648e-05},{"id":3671660,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"doorkeeper_unauthorized_render_options","path":"app/controllers/api/base_controller.rb","lineno":85,"static":false,"parameters":[{"name":"error","class":"Doorkeeper::OAuth::InvalidTokenResponse","object_id":17910240,"value":"#<Doorkeeper::OAuth::InvalidTokenResponse:0x00007fc8e1120c30>","kind":"key"}],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671661,"event":"return","thread_id":9160,"parent_id":3671660,"elapsed":1.0035000741481781e-05,"elapsed_instrumentation":0.00015008996706455946,"return_value":{"class":"Hash","value":"{:json=>{:error=>The access token is invalid}}","object_id":17910260,"size":1}},{"id":3671662,"event":"call","thread_id":9160,"defined_class":"ActionController::Renderers","method_id":"render_to_body","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_controller/metal/renderers.rb","lineno":140,"static":false,"parameters":[{"name":"options","class":"Hash","object_id":17910260,"value":"{:json=>{:error=>The access token is invalid}, :status=>401, :prefixes=>[api/v1/suggestions, api/base, application], :template=>destroy, :layout=>}","kind":"req","size":5}],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671663,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_user","path":"app/controllers/api/base_controller.rb","lineno":116,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671664,"event":"call","thread_id":9160,"defined_class":"Api::BaseController","method_id":"current_resource_owner","path":"app/controllers/api/base_controller.rb","lineno":112,"static":false,"parameters":[],"receiver":{"class":"Api::V1::SuggestionsController","object_id":17910120,"value":"#<Api::V1::SuggestionsController:0x00007fc8e174eda0>"}},{"id":3671665,"event":"return","thread_id":9160,"parent_id":3671664,"elapsed":4.3477979488670826e-05,"elapsed_instrumentation":5.371100269258022e-05},{"id":3671666,"event":"call","thread_id":9160,"defined_class":"ActionDispatch::Cookies::CookieJar","method_id":"[]","path":"vendor/bundle/ruby/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/cookies.rb","lineno":328,"static":false,"parameters":[{"name":"name","class":"String","object_id":317160,"value":"_session_id","kind":"req"}],"receiver":{"class":"ActionDispatch::Cookies::CookieJar","object_id":17910200,"value":"#<ActionDispatch::Cookies::CookieJar:0x00007fc8e112a910>"}},{"id":3671667,"event":"return","thread_id":9160,"parent_id":3671666,"elapsed":3.6549754440784454e-06,"elapsed_instrumentation":7.82920396886766e-05},{"id":3671668,"event":"return","thread_id":9160,"parent_id":3671663,"elapsed":0.0003499609883874655,"elapsed_instrumentation":7.095601176843047e-05},{"id":3671669,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f070>"}},{"id":3671670,"event":"return","thread_id":9160,"parent_id":3671669,"elapsed":3.0599767342209816e-06,"elapsed_instrumentation":0.00019126897677779198,"return_value":{"class":"Array","value":"[]","object_id":326200,"size":0}},{"id":3671671,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f0c0>"}},{"id":3671672,"event":"return","thread_id":9160,"parent_id":3671671,"elapsed":2.6970519684255123e-06,"elapsed_instrumentation":8.549995254725218e-05,"return_value":{"class":"Array","value":"[]","object_id":326240,"size":0}},{"id":3671673,"event":"call","thread_id":9160,"defined_class":"JSON::Ext::Generator::State","method_id":"generate","path":"JSON::Ext::Generator::State#generate","static":false,"parameters":[{"name":"arg","class":"Hash","object_id":17910300,"value":"{error=>The access token is invalid}","kind":"req","size":1}],"receiver":{"class":"JSON::Ext::Generator::State","object_id":17910320,"value":"#<JSON::Ext::Generator::State:0x00007fc918df2d50>"}},{"id":3671674,"event":"return","thread_id":9160,"parent_id":3671673,"elapsed":7.206981536000967e-06,"elapsed_instrumentation":0.00011927803279832006,"return_value":{"class":"String","value":"{\"error\":\"The access token is invalid\"}","object_id":17910340}},{"id":3671675,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f0c0>"}},{"id":3671676,"event":"return","thread_id":9160,"parent_id":3671675,"elapsed":3.7159770727157593e-06,"elapsed_instrumentation":8.924497524276376e-05,"return_value":{"class":"Array","value":"[]","object_id":328060,"size":0}},{"id":3671677,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":326180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934e9f070>"}},{"id":3671678,"event":"return","thread_id":9160,"parent_id":3671677,"elapsed":2.1900050342082977e-06,"elapsed_instrumentation":7.181504042819142e-05,"return_value":{"class":"Array","value":"[]","object_id":328080,"size":0}},{"id":3671679,"event":"return","thread_id":9160,"parent_id":3671662,"elapsed":0.0015171810518950224,"elapsed_instrumentation":0.0003706549759954214,"return_value":{"class":"String","value":"{\"error\":\"The access token is invalid\"}","object_id":17910340}},{"id":3671680,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17910360,"value":"Filter chain halted as #<Proc:0x00007fc93256bf50 /workspaces/mastodon/app/controllers/api/v1/suggest (...54 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3671681,"event":"return","thread_id":9160,"parent_id":3671680,"elapsed":0.0005710539990104735,"elapsed_instrumentation":0.0001238479744642973,"return_value":{"class":"Integer","value":"154","object_id":309}},{"id":3671682,"event":"return","thread_id":9160,"parent_id":3671627,"elapsed":0.006002238020300865,"elapsed_instrumentation":0.0002888239687308669,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324bd7c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324bd9c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324bdd38 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324bdea0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324be148 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324be3a0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324be4e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324be7d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324bea08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324bec60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...5 more items)]","object_id":17907300,"size":15}},{"id":3671683,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":17907080,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc8e0d123a0>"}},{"id":3671684,"event":"return","thread_id":9160,"parent_id":3671683,"elapsed":6.243004463613033e-06,"elapsed_instrumentation":0.0001882760552689433,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324bf160 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324bdba8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":17907460,"size":2}},{"id":3671685,"event":"return","thread_id":9160,"parent_id":3671614,"elapsed":0.008003608032595366,"elapsed_instrumentation":0.000299445993732661},{"id":3671686,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":17907000,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc8e0d12350>"}},{"id":3671687,"event":"return","thread_id":9160,"parent_id":3671686,"elapsed":2.5170156732201576e-06,"elapsed_instrumentation":8.667097426950932e-05,"return_value":{"class":"Array","value":"[]","object_id":17907480,"size":0}},{"id":3671688,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17910380,"value":"Completed 401 Unauthorized in 11ms (Views: 2.0ms | ActiveRecord: 0.0ms | Allocations: 3851)\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3671689,"event":"return","thread_id":9160,"parent_id":3671688,"elapsed":0.0007762760506011546,"elapsed_instrumentation":0.0001378239830955863,"return_value":{"class":"Integer","value":"92","object_id":185}},{"id":3671690,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":3671691,"event":"return","thread_id":9160,"parent_id":3671690,"elapsed":3.496010322123766e-06,"elapsed_instrumentation":0.00014055799692869186,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":3671692,"event":"call","thread_id":9160,"defined_class":"Array","method_id":"pack","path":"<internal:pack>","lineno":7,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":343760,"value":"m0","kind":"req"},{"name":"buffer","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Array","object_id":17910400,"value":"[___X_QCz_\u001b0_i8N]"}},{"id":3671693,"event":"return","thread_id":9160,"parent_id":3671692,"elapsed":6.2150065787136555e-06,"elapsed_instrumentation":0.00028644094709306955,"return_value":{"class":"String","value":"zeXeWKFRQ3p/7xswxGk4Tg==","object_id":17910420}},{"id":3671694,"event":"call","thread_id":9160,"defined_class":"Chewy::Strategy::Mastodon","method_id":"leave","path":"lib/chewy/strategy/mastodon.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":17910440,"value":"#<Chewy::Strategy::Mastodon:0x00007fc918e36438>"}},{"id":3671695,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":17910460,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":17910480,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":3671696,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":3671697,"event":"return","thread_id":9160,"parent_id":3671696,"elapsed":2.3899483494460583e-06,"elapsed_instrumentation":6.457598647102714e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":3671698,"event":"return","thread_id":9160,"parent_id":3671695,"elapsed":0.00015784904826432467,"elapsed_instrumentation":0.00010502897202968597,"return_value":{"class":"Array","value":"[]","object_id":17910500,"size":0}},{"id":3671699,"event":"return","thread_id":9160,"parent_id":3671694,"elapsed":0.0002815190237015486,"elapsed_instrumentation":7.695099338889122e-05,"return_value":{"class":"Array","value":"[]","object_id":17910500,"size":0}},{"id":3671700,"event":"return","thread_id":9160,"parent_id":3671601,"elapsed":0.019375749048776925,"elapsed_instrumentation":0.0007418309687636793,"return_value":{"class":"Hash","value":"{error=>The access token is invalid}","object_id":17910540,"size":1,"properties":[{"name":"error","class":"String"}]},"http_server_response":{"status_code":401,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"0","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Vary":"Authorization","Cache-Control":"private, no-store","WWW-Authenticate":"Bearer realm=\"Doorkeeper\", error=\"invalid_token\", error_description=\"The access token is invalid\"","Content-Type":"application/json; charset=utf-8","Content-Security-Policy":"default-src 'none'; frame-ancestors 'none'; form-action 'none'","X-Request-Id":"471ea04e-8810-4e01-817b-62219a01784f","X-Runtime":"0.018624"}}},{"id":3671701,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934c37c10>"}},{"id":3671702,"event":"return","thread_id":9160,"parent_id":3671701,"elapsed":0.00011780799832195044,"elapsed_instrumentation":0.00015270395670086145,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933f1f4d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933f1f618 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933f1f758 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933f1f910 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318440,"size":4}},{"id":3671703,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":17910560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934c37c10>"}},{"id":3671704,"event":"return","thread_id":9160,"parent_id":3671703,"elapsed":3.3829710446298122e-06,"elapsed_instrumentation":8.100300328806043e-05,"return_value":{"class":"Array","value":"[]","object_id":318460,"size":0}}]}