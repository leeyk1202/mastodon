{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::IpBlocks #export when --format option is set to \"plain\" exports blocked IPs with \"no_access\" severity in plain format","source_location":"spec/lib/mastodon/cli/ip_blocks_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"IpBlocks","type":"class","children":[{"name":"export","type":"function","location":"lib/mastodon/cli/ip_blocks.rb:113","static":false}]}]}]}]}],"events":[{"id":2188509,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133140,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2188510,"event":"return","thread_id":9160,"parent_id":2188509,"elapsed":2.8053007554262877e-05,"elapsed_instrumentation":0.00025001296307891607,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2188511,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2188512,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2188513,"event":"return","thread_id":9160,"parent_id":2188512,"elapsed":0.000406427,"elapsed_instrumentation":0.00010559498332440853},{"id":2188514,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2188515,"event":"return","thread_id":9160,"parent_id":2188514,"elapsed":0.001408511,"elapsed_instrumentation":9.817100362852216e-05},{"id":2188516,"event":"return","thread_id":9160,"parent_id":2188511,"elapsed":0.003025394049473107,"elapsed_instrumentation":0.00036404695129022,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2188517,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2188518,"event":"return","thread_id":9160,"parent_id":2188517,"elapsed":4.442990757524967e-06,"elapsed_instrumentation":0.00014957995153963566,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2188519,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133140,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2188520,"event":"return","thread_id":9160,"parent_id":2188519,"elapsed":2.7579953894019127e-06,"elapsed_instrumentation":9.419996058568358e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2188521,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2188522,"event":"return","thread_id":9160,"parent_id":2188521,"elapsed":0.000734737,"elapsed_instrumentation":8.644198533147573e-05},{"id":2188523,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2188524,"event":"return","thread_id":9160,"parent_id":2188523,"elapsed":0.00038615,"elapsed_instrumentation":8.886097930371761e-05},{"id":2188525,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2188526,"event":"return","thread_id":9160,"parent_id":2188525,"elapsed":3.7740101106464863e-06,"elapsed_instrumentation":0.00012367399176582694,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2188527,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2188528,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11133220,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2188529,"event":"return","thread_id":9160,"parent_id":2188528,"elapsed":0.0005958889960311353,"elapsed_instrumentation":0.0001231399946846068,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2188530,"event":"return","thread_id":9160,"parent_id":2188527,"elapsed":0.000889737973921001,"elapsed_instrumentation":0.00012024602619931102,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2188531,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2188532,"event":"return","thread_id":9160,"parent_id":2188531,"elapsed":2.410996239632368e-05,"elapsed_instrumentation":0.0002821350353769958,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2188533,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2188534,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2188535,"event":"return","thread_id":9160,"parent_id":2188534,"elapsed":0.000431151,"elapsed_instrumentation":9.595497976988554e-05},{"id":2188536,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2188537,"event":"return","thread_id":9160,"parent_id":2188536,"elapsed":0.001278874,"elapsed_instrumentation":8.578697452321649e-05},{"id":2188538,"event":"return","thread_id":9160,"parent_id":2188533,"elapsed":0.002484971017111093,"elapsed_instrumentation":0.00019061798229813576,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2188539,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2188540,"event":"return","thread_id":9160,"parent_id":2188539,"elapsed":4.211964551359415e-06,"elapsed_instrumentation":0.00010607898002490401,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2188541,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2188542,"event":"return","thread_id":9160,"parent_id":2188541,"elapsed":2.837972715497017e-06,"elapsed_instrumentation":7.378100417554379e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2188543,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2188544,"event":"return","thread_id":9160,"parent_id":2188543,"elapsed":0.000564166,"elapsed_instrumentation":7.393199484795332e-05},{"id":2188545,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2188546,"event":"return","thread_id":9160,"parent_id":2188545,"elapsed":0.000311046,"elapsed_instrumentation":6.256101187318563e-05},{"id":2188547,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2188548,"event":"return","thread_id":9160,"parent_id":2188547,"elapsed":3.363995347172022e-06,"elapsed_instrumentation":0.00011524400906637311,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2188549,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11133300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2188550,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11133320,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2188551,"event":"return","thread_id":9160,"parent_id":2188550,"elapsed":0.0005410179728642106,"elapsed_instrumentation":0.00011863099643960595,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2188552,"event":"return","thread_id":9160,"parent_id":2188549,"elapsed":0.0008136460091918707,"elapsed_instrumentation":0.00010887597454711795,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2188553,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::IpBlocks","method_id":"export","path":"lib/mastodon/cli/ip_blocks.rb","lineno":113,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::IpBlocks","object_id":11133340,"value":"#<Mastodon::CLI::IpBlocks:0x00007fc930cd53d8>"}},{"id":2188554,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"severity\" = $1 ORDER BY \"ip_blocks\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":2188555,"event":"return","thread_id":9160,"parent_id":2188554,"elapsed":0.000492592,"elapsed_instrumentation":0.00011944200377911329},{"id":2188556,"event":"return","thread_id":9160,"parent_id":2188553,"elapsed":0.00277359300525859,"elapsed_instrumentation":8.812197484076023e-05}]}