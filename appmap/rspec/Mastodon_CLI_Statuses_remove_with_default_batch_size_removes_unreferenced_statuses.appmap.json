{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::Statuses #remove with default batch size removes unreferenced statuses","source_location":"spec/lib/mastodon/cli/statuses_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib/mastodon","type":"package","children":[{"name":"cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"Statuses","type":"class","children":[{"name":"remove","type":"function","location":"lib/mastodon/cli/statuses.rb:28","static":false}]},{"name":"ProgressHelper","type":"class","children":[{"name":"create_progress_bar","type":"function","location":"lib/mastodon/cli/progress_helper.rb:18","static":false}]}]}]}]},{"name":"Mastodon","type":"class","children":[{"name":"Snowflake","type":"class","children":[{"name":"id_at","type":"function","location":"lib/mastodon/snowflake.rb:99","static":true}]}]}]}],"events":[{"id":418692,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::Statuses","method_id":"remove","path":"lib/mastodon/cli/statuses.rb","lineno":28,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::Statuses","object_id":2972700,"value":"#<Mastodon::CLI::Statuses:0x00007fc931441f90>"}},{"id":418693,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas(false)) AND c.relname = 'media_attachments' AND c.relkind IN ('r','p')","database_type":"postgres"}},{"id":418694,"event":"return","thread_id":9160,"parent_id":418693,"elapsed":0.001306138,"elapsed_instrumentation":0.0001938039786182344},{"id":418695,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n       pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n       c.collname, col_description(a.attrelid, a.attnum) AS comment,\n       a.attidentity AS identity,\n       attgenerated as attgenerated\n  FROM pg_attribute a\n  LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n  LEFT JOIN pg_type t ON a.atttypid = t.oid\n  LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation <> t.typcollation\n WHERE a.attrelid = '\"media_attachments\"'::regclass\n   AND a.attnum > 0 AND NOT a.attisdropped\n ORDER BY a.attnum\n","database_type":"postgres"}},{"id":418696,"event":"return","thread_id":9160,"parent_id":418695,"elapsed":0.005388528,"elapsed_instrumentation":0.0001378969755023718},{"id":418697,"event":"call","thread_id":9160,"sql_query":{"sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS \"index_media_attachments_remote_url\" ON \"media_attachments\" (\"remote_url\") WHERE remote_url is not null","database_type":"postgres"}},{"id":418698,"event":"return","thread_id":9160,"parent_id":418697,"elapsed":0.008978615,"elapsed_instrumentation":0.00012955500278621912},{"id":418699,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"ActiveSupport::TimeWithZone","object_id":2972740,"value":"2023-08-08 02:53:34 UTC","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":418700,"event":"return","thread_id":9160,"parent_id":418699,"elapsed":1.7052050679922104e-05,"elapsed_instrumentation":0.0003929379745386541,"return_value":{"class":"Integer","value":"110851733192704000","object_id":221703466385408001}},{"id":418701,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas(false)) AND c.relname = 'accounts' AND c.relkind IN ('r','p')","database_type":"postgres"}},{"id":418702,"event":"return","thread_id":9160,"parent_id":418701,"elapsed":0.001173786,"elapsed_instrumentation":0.0001122059766203165},{"id":418703,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n       pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n       c.collname, col_description(a.attrelid, a.attnum) AS comment,\n       a.attidentity AS identity,\n       attgenerated as attgenerated\n  FROM pg_attribute a\n  LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n  LEFT JOIN pg_type t ON a.atttypid = t.oid\n  LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation <> t.typcollation\n WHERE a.attrelid = '\"accounts\"'::regclass\n   AND a.attnum > 0 AND NOT a.attisdropped\n ORDER BY a.attnum\n","database_type":"postgres"}},{"id":418704,"event":"return","thread_id":9160,"parent_id":418703,"elapsed":0.005575308,"elapsed_instrumentation":0.00027141300961375237},{"id":418705,"event":"call","thread_id":9160,"sql_query":{"sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS \"index_accounts_local\" ON \"accounts\" (\"id\") WHERE domain is null","database_type":"postgres"}},{"id":418706,"event":"return","thread_id":9160,"parent_id":418705,"elapsed":0.01086992,"elapsed_instrumentation":0.00013575400225818157},{"id":418707,"event":"call","thread_id":9160,"sql_query":{"sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS \"index_status_pins_status_id\" ON \"status_pins\" (\"status_id\")","database_type":"postgres"}},{"id":418708,"event":"return","thread_id":9160,"parent_id":418707,"elapsed":0.006816287,"elapsed_instrumentation":0.00011053599882870913},{"id":418709,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP TABLE IF EXISTS \"statuses_to_be_deleted\"","database_type":"postgres"}},{"id":418710,"event":"return","thread_id":9160,"parent_id":418709,"elapsed":0.000580092,"elapsed_instrumentation":9.293801849707961e-05},{"id":418711,"event":"call","thread_id":9160,"sql_query":{"sql":"CREATE TABLE \"statuses_to_be_deleted\" (\"id\" bigserial primary key)","database_type":"postgres"}},{"id":418712,"event":"return","thread_id":9160,"parent_id":418711,"elapsed":0.007977168,"elapsed_instrumentation":0.00012385303853079677},{"id":418713,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname\n  FROM (\n         SELECT indrelid, indkey, generate_subscripts(indkey, 1) idx\n           FROM pg_index\n          WHERE indrelid = '\"statuses_to_be_deleted\"'::regclass\n            AND indisprimary\n       ) i\n  JOIN pg_attribute a\n    ON a.attrelid = i.indrelid\n   AND a.attnum = i.indkey[i.idx]\n ORDER BY i.idx\n","database_type":"postgres"}},{"id":418714,"event":"return","thread_id":9160,"parent_id":418713,"elapsed":0.004859157,"elapsed_instrumentation":9.775004582479596e-05},{"id":418715,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO statuses_to_be_deleted (id) SELECT statuses.id FROM statuses WHERE deleted_at IS NULL AND NOT local AND uri IS NOT NULL AND (id < $1) AND NOT EXISTS (SELECT 1 FROM statuses AS statuses1 WHERE statuses.id = statuses1.in_reply_to_id) AND NOT EXISTS (SELECT 1 FROM statuses AS statuses1 WHERE statuses1.id = statuses.reblog_of_id AND (statuses1.uri IS NULL OR statuses1.local)) AND NOT EXISTS (SELECT 1 FROM statuses AS statuses1 WHERE statuses.id = statuses1.reblog_of_id AND (statuses1.uri IS NULL OR statuses1.local OR statuses1.id >= $1)) AND NOT EXISTS (SELECT 1 FROM status_pins WHERE statuses.id = status_id) AND NOT EXISTS (SELECT 1 FROM mentions WHERE statuses.id = mentions.status_id AND mentions.account_id IN (SELECT accounts.id FROM accounts WHERE domain IS NULL)) AND NOT EXISTS (SELECT 1 FROM favourites WHERE statuses.id = favourites.status_id AND favourites.account_id IN (SELECT accounts.id FROM accounts WHERE domain IS NULL)) AND NOT EXISTS (SELECT 1 FROM bookmarks WHERE statuses.id = bookmarks.status_id AND bookmarks.account_id IN (SELECT accounts.id FROM accounts WHERE domain IS NULL)) AND NOT EXISTS (SELECT 1 FROM follows WHERE statuses.account_id = follows.target_account_id) RETURNING \"id\"","database_type":"postgres"}},{"id":418716,"event":"return","thread_id":9160,"parent_id":418715,"elapsed":0.004601067,"elapsed_instrumentation":8.822197560220957e-05},{"id":418717,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'accounts'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418718,"event":"return","thread_id":9160,"parent_id":418717,"elapsed":0.005320924,"elapsed_instrumentation":0.00012005300959572196},{"id":418719,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (1)\n","database_type":"postgres"}},{"id":418720,"event":"return","thread_id":9160,"parent_id":418719,"elapsed":0.000513573,"elapsed_instrumentation":0.00022578699281439185},{"id":418721,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (3, 1)\n","database_type":"postgres"}},{"id":418722,"event":"return","thread_id":9160,"parent_id":418721,"elapsed":0.000488842,"elapsed_instrumentation":6.749003659933805e-05},{"id":418723,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (30)\n","database_type":"postgres"}},{"id":418724,"event":"return","thread_id":9160,"parent_id":418723,"elapsed":0.000598093,"elapsed_instrumentation":7.218495011329651e-05},{"id":418725,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (10)\n","database_type":"postgres"}},{"id":418726,"event":"return","thread_id":9160,"parent_id":418725,"elapsed":0.000462654,"elapsed_instrumentation":6.667501293122768e-05},{"id":418727,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (11)\n","database_type":"postgres"}},{"id":418728,"event":"return","thread_id":9160,"parent_id":418727,"elapsed":0.000390851,"elapsed_instrumentation":5.9924961533397436e-05},{"id":418729,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'accounts'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418730,"event":"return","thread_id":9160,"parent_id":418729,"elapsed":0.004093935,"elapsed_instrumentation":0.00016452098498120904},{"id":418731,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (1)\n","database_type":"postgres"}},{"id":418732,"event":"return","thread_id":9160,"parent_id":418731,"elapsed":0.001141403,"elapsed_instrumentation":0.0001122120302170515},{"id":418733,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (3, 1)\n","database_type":"postgres"}},{"id":418734,"event":"return","thread_id":9160,"parent_id":418733,"elapsed":0.000577557,"elapsed_instrumentation":0.0002855019993148744},{"id":418735,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (30)\n","database_type":"postgres"}},{"id":418736,"event":"return","thread_id":9160,"parent_id":418735,"elapsed":0.00051457,"elapsed_instrumentation":8.73749959282577e-05},{"id":418737,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (10)\n","database_type":"postgres"}},{"id":418738,"event":"return","thread_id":9160,"parent_id":418737,"elapsed":0.000725181,"elapsed_instrumentation":0.0003024830366484821},{"id":418739,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (11)\n","database_type":"postgres"}},{"id":418740,"event":"return","thread_id":9160,"parent_id":418739,"elapsed":0.001363015,"elapsed_instrumentation":0.0003634470049291849},{"id":418741,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP INDEX  \"index_accounts_local\"","database_type":"postgres"}},{"id":418742,"event":"return","thread_id":9160,"parent_id":418741,"elapsed":0.002363796,"elapsed_instrumentation":0.0001399470493197441},{"id":418743,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'status_pins'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418744,"event":"return","thread_id":9160,"parent_id":418743,"elapsed":0.003583258,"elapsed_instrumentation":0.00010489200940355659},{"id":418745,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (2, 3)\n","database_type":"postgres"}},{"id":418746,"event":"return","thread_id":9160,"parent_id":418745,"elapsed":0.000564595,"elapsed_instrumentation":0.00026921700919047},{"id":418747,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (3)\n","database_type":"postgres"}},{"id":418748,"event":"return","thread_id":9160,"parent_id":418747,"elapsed":0.0005919,"elapsed_instrumentation":0.00013323698658496141},{"id":418749,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (3)\n","database_type":"postgres"}},{"id":418750,"event":"return","thread_id":9160,"parent_id":418749,"elapsed":0.000464118,"elapsed_instrumentation":7.237104000523686e-05},{"id":418751,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'status_pins'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418752,"event":"return","thread_id":9160,"parent_id":418751,"elapsed":0.0037184,"elapsed_instrumentation":0.00012462498852983117},{"id":418753,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (2, 3)\n","database_type":"postgres"}},{"id":418754,"event":"return","thread_id":9160,"parent_id":418753,"elapsed":0.000728869,"elapsed_instrumentation":9.55199939198792e-05},{"id":418755,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (3)\n","database_type":"postgres"}},{"id":418756,"event":"return","thread_id":9160,"parent_id":418755,"elapsed":0.000568003,"elapsed_instrumentation":7.590098539367318e-05},{"id":418757,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (3)\n","database_type":"postgres"}},{"id":418758,"event":"return","thread_id":9160,"parent_id":418757,"elapsed":0.000694894,"elapsed_instrumentation":7.142400136217475e-05},{"id":418759,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP INDEX  \"index_status_pins_status_id\"","database_type":"postgres"}},{"id":418760,"event":"return","thread_id":9160,"parent_id":418759,"elapsed":0.001757375,"elapsed_instrumentation":7.208000170066953e-05},{"id":418761,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n       pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n       c.collname, col_description(a.attrelid, a.attnum) AS comment,\n       a.attidentity AS identity,\n       attgenerated as attgenerated\n  FROM pg_attribute a\n  LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n  LEFT JOIN pg_type t ON a.atttypid = t.oid\n  LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation <> t.typcollation\n WHERE a.attrelid = '\"statuses_to_be_deleted\"'::regclass\n   AND a.attnum > 0 AND NOT a.attisdropped\n ORDER BY a.attnum\n","database_type":"postgres"}},{"id":418762,"event":"return","thread_id":9160,"parent_id":418761,"elapsed":0.001753613,"elapsed_instrumentation":7.080601062625647e-05},{"id":418763,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"statuses_to_be_deleted\"","database_type":"postgres"}},{"id":418764,"event":"return","thread_id":9160,"parent_id":418763,"elapsed":0.000946581,"elapsed_instrumentation":7.031101267784834e-05},{"id":418765,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":1,"value":"0","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::Statuses","object_id":2972700,"value":"#<Mastodon::CLI::Statuses:0x00007fc931441f90>"}},{"id":418766,"event":"return","thread_id":9160,"parent_id":418765,"elapsed":0.00011965201701968908,"elapsed_instrumentation":0.000318915001116693,"return_value":{"class":"ProgressBar::Base","value":"","object_id":2972800}},{"id":418767,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas(false)) AND c.relname = 'statuses_to_be_deleted' AND c.relkind IN ('r','v','m','p','f')","database_type":"postgres"}},{"id":418768,"event":"return","thread_id":9160,"parent_id":418767,"elapsed":0.000834915,"elapsed_instrumentation":6.733299233019352e-05},{"id":418769,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname\n  FROM (\n         SELECT indrelid, indkey, generate_subscripts(indkey, 1) idx\n           FROM pg_index\n          WHERE indrelid = '\"statuses_to_be_deleted\"'::regclass\n            AND indisprimary\n       ) i\n  JOIN pg_attribute a\n    ON a.attrelid = i.indrelid\n   AND a.attnum = i.indkey[i.idx]\n ORDER BY i.idx\n","database_type":"postgres"}},{"id":418770,"event":"return","thread_id":9160,"parent_id":418769,"elapsed":0.004003308,"elapsed_instrumentation":6.799300899729133e-05},{"id":418771,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"statuses_to_be_deleted\".\"id\" FROM \"statuses_to_be_deleted\" ORDER BY \"statuses_to_be_deleted\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":418772,"event":"return","thread_id":9160,"parent_id":418771,"elapsed":0.000605486,"elapsed_instrumentation":9.519699960947037e-05},{"id":418773,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP TABLE \"statuses_to_be_deleted\"","database_type":"postgres"}},{"id":418774,"event":"return","thread_id":9160,"parent_id":418773,"elapsed":0.004085504,"elapsed_instrumentation":9.46400105021894e-05},{"id":418775,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'accounts'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418776,"event":"return","thread_id":9160,"parent_id":418775,"elapsed":0.004082418,"elapsed_instrumentation":0.00012103101471439004},{"id":418777,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (3, 1)\n","database_type":"postgres"}},{"id":418778,"event":"return","thread_id":9160,"parent_id":418777,"elapsed":0.00068793,"elapsed_instrumentation":9.182101348415017e-05},{"id":418779,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (30)\n","database_type":"postgres"}},{"id":418780,"event":"return","thread_id":9160,"parent_id":418779,"elapsed":0.00048154,"elapsed_instrumentation":0.00027414399664849043},{"id":418781,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (10)\n","database_type":"postgres"}},{"id":418782,"event":"return","thread_id":9160,"parent_id":418781,"elapsed":0.00048536,"elapsed_instrumentation":7.756997365504503e-05},{"id":418783,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 278835\nAND a.attnum IN (11)\n","database_type":"postgres"}},{"id":418784,"event":"return","thread_id":9160,"parent_id":418783,"elapsed":0.000495876,"elapsed_instrumentation":7.91850034147501e-05},{"id":418785,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'status_pins'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418786,"event":"return","thread_id":9160,"parent_id":418785,"elapsed":0.003722776,"elapsed_instrumentation":0.00013635901268571615},{"id":418787,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (2, 3)\n","database_type":"postgres"}},{"id":418788,"event":"return","thread_id":9160,"parent_id":418787,"elapsed":0.000588403,"elapsed_instrumentation":7.7230972237885e-05},{"id":418789,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279603\nAND a.attnum IN (3)\n","database_type":"postgres"}},{"id":418790,"event":"return","thread_id":9160,"parent_id":418789,"elapsed":0.000477606,"elapsed_instrumentation":6.521400064229965e-05},{"id":418791,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'media_attachments'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418792,"event":"return","thread_id":9160,"parent_id":418791,"elapsed":0.003680125,"elapsed_instrumentation":7.962901145219803e-05},{"id":418793,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (13, 2)\n","database_type":"postgres"}},{"id":418794,"event":"return","thread_id":9160,"parent_id":418793,"elapsed":0.000534632,"elapsed_instrumentation":6.426399340853095e-05},{"id":418795,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (15)\n","database_type":"postgres"}},{"id":418796,"event":"return","thread_id":9160,"parent_id":418795,"elapsed":0.000467395,"elapsed_instrumentation":5.8796023949980736e-05},{"id":418797,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (10)\n","database_type":"postgres"}},{"id":418798,"event":"return","thread_id":9160,"parent_id":418797,"elapsed":0.000438915,"elapsed_instrumentation":5.874602356925607e-05},{"id":418799,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":418800,"event":"return","thread_id":9160,"parent_id":418799,"elapsed":0.000427912,"elapsed_instrumentation":5.8628967963159084e-05},{"id":418801,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (7)\n","database_type":"postgres"}},{"id":418802,"event":"return","thread_id":9160,"parent_id":418801,"elapsed":0.000397717,"elapsed_instrumentation":5.817599594593048e-05},{"id":418803,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'media_attachments'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418804,"event":"return","thread_id":9160,"parent_id":418803,"elapsed":0.002872307,"elapsed_instrumentation":6.1201979406178e-05},{"id":418805,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (13, 2)\n","database_type":"postgres"}},{"id":418806,"event":"return","thread_id":9160,"parent_id":418805,"elapsed":0.000517987,"elapsed_instrumentation":7.200299296528101e-05},{"id":418807,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (15)\n","database_type":"postgres"}},{"id":418808,"event":"return","thread_id":9160,"parent_id":418807,"elapsed":0.000497908,"elapsed_instrumentation":6.932904943823814e-05},{"id":418809,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (10)\n","database_type":"postgres"}},{"id":418810,"event":"return","thread_id":9160,"parent_id":418809,"elapsed":0.00050178,"elapsed_instrumentation":6.943597691133618e-05},{"id":418811,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":418812,"event":"return","thread_id":9160,"parent_id":418811,"elapsed":0.000499453,"elapsed_instrumentation":7.109000580385327e-05},{"id":418813,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279293\nAND a.attnum IN (7)\n","database_type":"postgres"}},{"id":418814,"event":"return","thread_id":9160,"parent_id":418813,"elapsed":0.000628435,"elapsed_instrumentation":7.24109704606235e-05},{"id":418815,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP INDEX  \"index_media_attachments_remote_url\"","database_type":"postgres"}},{"id":418816,"event":"return","thread_id":9160,"parent_id":418815,"elapsed":0.001891635,"elapsed_instrumentation":9.322096593677998e-05},{"id":418817,"event":"call","thread_id":9160,"sql_query":{"sql":"ANALYZE statuses","database_type":"postgres"}},{"id":418818,"event":"return","thread_id":9160,"parent_id":418817,"elapsed":0.000772819,"elapsed_instrumentation":6.311503238976002e-05},{"id":418819,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"media_attachments\" WHERE \"media_attachments\".\"status_id\" IS NULL AND \"media_attachments\".\"scheduled_status_id\" IS NULL AND (created_at < '2023-08-09 02:53:34.452837')","database_type":"postgres"}},{"id":418820,"event":"return","thread_id":9160,"parent_id":418819,"elapsed":0.000995806,"elapsed_instrumentation":7.03129917383194e-05},{"id":418821,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":1,"value":"0","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::Statuses","object_id":2972700,"value":"#<Mastodon::CLI::Statuses:0x00007fc931441f90>"}},{"id":418822,"event":"return","thread_id":9160,"parent_id":418821,"elapsed":0.00010329403448849916,"elapsed_instrumentation":0.0002833210164681077,"return_value":{"class":"ProgressBar::Base","value":"","object_id":2972820}},{"id":418823,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"status_id\" IS NULL AND \"media_attachments\".\"scheduled_status_id\" IS NULL AND (created_at < '2023-08-09 02:53:34.452837') ORDER BY \"media_attachments\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":418824,"event":"return","thread_id":9160,"parent_id":418823,"elapsed":0.000626518,"elapsed_instrumentation":6.925396155565977e-05},{"id":418825,"event":"call","thread_id":9160,"sql_query":{"sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS \"index_statuses_conversation_id\" ON \"statuses\" (\"conversation_id\")","database_type":"postgres"}},{"id":418826,"event":"return","thread_id":9160,"parent_id":418825,"elapsed":0.006759965,"elapsed_instrumentation":8.766097016632557e-05},{"id":418827,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP TABLE IF EXISTS \"conversations_to_be_deleted\"","database_type":"postgres"}},{"id":418828,"event":"return","thread_id":9160,"parent_id":418827,"elapsed":0.000735532,"elapsed_instrumentation":0.00011043896665796638},{"id":418829,"event":"call","thread_id":9160,"sql_query":{"sql":"CREATE TABLE \"conversations_to_be_deleted\" (\"id\" bigserial primary key)","database_type":"postgres"}},{"id":418830,"event":"return","thread_id":9160,"parent_id":418829,"elapsed":0.010399298,"elapsed_instrumentation":0.00013895297888666391},{"id":418831,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname\n  FROM (\n         SELECT indrelid, indkey, generate_subscripts(indkey, 1) idx\n           FROM pg_index\n          WHERE indrelid = '\"conversations_to_be_deleted\"'::regclass\n            AND indisprimary\n       ) i\n  JOIN pg_attribute a\n    ON a.attrelid = i.indrelid\n   AND a.attnum = i.indkey[i.idx]\n ORDER BY i.idx\n","database_type":"postgres"}},{"id":418832,"event":"return","thread_id":9160,"parent_id":418831,"elapsed":0.007147443,"elapsed_instrumentation":0.00014987599570304155},{"id":418833,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO conversations_to_be_deleted (id) SELECT id FROM conversations WHERE NOT EXISTS (SELECT 1 FROM statuses WHERE statuses.conversation_id = conversations.id) RETURNING \"id\"","database_type":"postgres"}},{"id":418834,"event":"return","thread_id":9160,"parent_id":418833,"elapsed":0.002112189,"elapsed_instrumentation":0.00011725496733561158},{"id":418835,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'statuses'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418836,"event":"return","thread_id":9160,"parent_id":418835,"elapsed":0.004974293,"elapsed_instrumentation":0.00011608301429077983},{"id":418837,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (16, 1, 10, 5)\n","database_type":"postgres"}},{"id":418838,"event":"return","thread_id":9160,"parent_id":418837,"elapsed":0.001259947,"elapsed_instrumentation":8.993002120405436e-05},{"id":418839,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (14)\n","database_type":"postgres"}},{"id":418840,"event":"return","thread_id":9160,"parent_id":418839,"elapsed":0.000624601,"elapsed_instrumentation":7.575302151963115e-05},{"id":418841,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (1, 16)\n","database_type":"postgres"}},{"id":418842,"event":"return","thread_id":9160,"parent_id":418841,"elapsed":0.000925969,"elapsed_instrumentation":8.830300066620111e-05},{"id":418843,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (16)\n","database_type":"postgres"}},{"id":418844,"event":"return","thread_id":9160,"parent_id":418843,"elapsed":0.000792316,"elapsed_instrumentation":0.0001045769895426929},{"id":418845,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (20)\n","database_type":"postgres"}},{"id":418846,"event":"return","thread_id":9160,"parent_id":418845,"elapsed":0.000621881,"elapsed_instrumentation":7.373496191576123e-05},{"id":418847,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (18)\n","database_type":"postgres"}},{"id":418848,"event":"return","thread_id":9160,"parent_id":418847,"elapsed":0.000590094,"elapsed_instrumentation":0.0002946029999293387},{"id":418849,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (6)\n","database_type":"postgres"}},{"id":418850,"event":"return","thread_id":9160,"parent_id":418849,"elapsed":0.000857157,"elapsed_instrumentation":8.052302291616797e-05},{"id":418851,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (7, 16)\n","database_type":"postgres"}},{"id":418852,"event":"return","thread_id":9160,"parent_id":418851,"elapsed":0.000722328,"elapsed_instrumentation":9.443197632208467e-05},{"id":418853,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":418854,"event":"return","thread_id":9160,"parent_id":418853,"elapsed":0.000826588,"elapsed_instrumentation":0.00014570698840543628},{"id":418855,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (1, 16)\n","database_type":"postgres"}},{"id":418856,"event":"return","thread_id":9160,"parent_id":418855,"elapsed":0.000885719,"elapsed_instrumentation":0.0001117879874072969},{"id":418857,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'statuses'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418858,"event":"return","thread_id":9160,"parent_id":418857,"elapsed":0.006049841,"elapsed_instrumentation":0.00011991499923169613},{"id":418859,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (16, 1, 10, 5)\n","database_type":"postgres"}},{"id":418860,"event":"return","thread_id":9160,"parent_id":418859,"elapsed":0.000664289,"elapsed_instrumentation":8.695304859429598e-05},{"id":418861,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (14)\n","database_type":"postgres"}},{"id":418862,"event":"return","thread_id":9160,"parent_id":418861,"elapsed":0.000558199,"elapsed_instrumentation":0.00017612800002098083},{"id":418863,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (1, 16)\n","database_type":"postgres"}},{"id":418864,"event":"return","thread_id":9160,"parent_id":418863,"elapsed":0.00055743,"elapsed_instrumentation":7.215799996629357e-05},{"id":418865,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (16)\n","database_type":"postgres"}},{"id":418866,"event":"return","thread_id":9160,"parent_id":418865,"elapsed":0.000678623,"elapsed_instrumentation":0.00027025199960917234},{"id":418867,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (20)\n","database_type":"postgres"}},{"id":418868,"event":"return","thread_id":9160,"parent_id":418867,"elapsed":0.000588191,"elapsed_instrumentation":7.616699440404773e-05},{"id":418869,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (18)\n","database_type":"postgres"}},{"id":418870,"event":"return","thread_id":9160,"parent_id":418869,"elapsed":0.000606202,"elapsed_instrumentation":0.0001304500037804246},{"id":418871,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (6)\n","database_type":"postgres"}},{"id":418872,"event":"return","thread_id":9160,"parent_id":418871,"elapsed":0.000657761,"elapsed_instrumentation":7.613899651914835e-05},{"id":418873,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (7, 16)\n","database_type":"postgres"}},{"id":418874,"event":"return","thread_id":9160,"parent_id":418873,"elapsed":0.000576908,"elapsed_instrumentation":7.674400694668293e-05},{"id":418875,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":418876,"event":"return","thread_id":9160,"parent_id":418875,"elapsed":0.000661572,"elapsed_instrumentation":7.16520007699728e-05},{"id":418877,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (1, 16)\n","database_type":"postgres"}},{"id":418878,"event":"return","thread_id":9160,"parent_id":418877,"elapsed":0.000740986,"elapsed_instrumentation":6.704498082399368e-05},{"id":418879,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP INDEX  \"index_statuses_conversation_id\"","database_type":"postgres"}},{"id":418880,"event":"return","thread_id":9160,"parent_id":418879,"elapsed":0.001853588,"elapsed_instrumentation":7.396104047074914e-05},{"id":418881,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n       pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n       c.collname, col_description(a.attrelid, a.attnum) AS comment,\n       a.attidentity AS identity,\n       attgenerated as attgenerated\n  FROM pg_attribute a\n  LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n  LEFT JOIN pg_type t ON a.atttypid = t.oid\n  LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation <> t.typcollation\n WHERE a.attrelid = '\"conversations_to_be_deleted\"'::regclass\n   AND a.attnum > 0 AND NOT a.attisdropped\n ORDER BY a.attnum\n","database_type":"postgres"}},{"id":418882,"event":"return","thread_id":9160,"parent_id":418881,"elapsed":0.002242874,"elapsed_instrumentation":8.12410144135356e-05},{"id":418883,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"conversations_to_be_deleted\"","database_type":"postgres"}},{"id":418884,"event":"return","thread_id":9160,"parent_id":418883,"elapsed":0.001004266,"elapsed_instrumentation":0.0001177049707621336},{"id":418885,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":1,"value":"0","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::Statuses","object_id":2972700,"value":"#<Mastodon::CLI::Statuses:0x00007fc931441f90>"}},{"id":418886,"event":"return","thread_id":9160,"parent_id":418885,"elapsed":0.00030424498254433274,"elapsed_instrumentation":0.00035052100429311395,"return_value":{"class":"ProgressBar::Base","value":"","object_id":2972840}},{"id":418887,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas(false)) AND c.relname = 'conversations_to_be_deleted' AND c.relkind IN ('r','v','m','p','f')","database_type":"postgres"}},{"id":418888,"event":"return","thread_id":9160,"parent_id":418887,"elapsed":0.001181659,"elapsed_instrumentation":0.0003263800172135234},{"id":418889,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attname\n  FROM (\n         SELECT indrelid, indkey, generate_subscripts(indkey, 1) idx\n           FROM pg_index\n          WHERE indrelid = '\"conversations_to_be_deleted\"'::regclass\n            AND indisprimary\n       ) i\n  JOIN pg_attribute a\n    ON a.attrelid = i.indrelid\n   AND a.attnum = i.indkey[i.idx]\n ORDER BY i.idx\n","database_type":"postgres"}},{"id":418890,"event":"return","thread_id":9160,"parent_id":418889,"elapsed":0.00617813,"elapsed_instrumentation":0.00013574300101026893},{"id":418891,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"conversations_to_be_deleted\".\"id\" FROM \"conversations_to_be_deleted\" ORDER BY \"conversations_to_be_deleted\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":418892,"event":"return","thread_id":9160,"parent_id":418891,"elapsed":0.000706001,"elapsed_instrumentation":8.523801807314157e-05},{"id":418893,"event":"call","thread_id":9160,"sql_query":{"sql":"DROP TABLE \"conversations_to_be_deleted\"","database_type":"postgres"}},{"id":418894,"event":"return","thread_id":9160,"parent_id":418893,"elapsed":0.00512096,"elapsed_instrumentation":8.533196523785591e-05},{"id":418895,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'statuses'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":418896,"event":"return","thread_id":9160,"parent_id":418895,"elapsed":0.004810834,"elapsed_instrumentation":0.00010435801232233644},{"id":418897,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (16, 1, 10, 5)\n","database_type":"postgres"}},{"id":418898,"event":"return","thread_id":9160,"parent_id":418897,"elapsed":0.000744069,"elapsed_instrumentation":8.530501509085298e-05},{"id":418899,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (1, 16)\n","database_type":"postgres"}},{"id":418900,"event":"return","thread_id":9160,"parent_id":418899,"elapsed":0.000572902,"elapsed_instrumentation":7.419200846925378e-05},{"id":418901,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (16)\n","database_type":"postgres"}},{"id":418902,"event":"return","thread_id":9160,"parent_id":418901,"elapsed":0.00049124,"elapsed_instrumentation":6.320799002423882e-05},{"id":418903,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (20)\n","database_type":"postgres"}},{"id":418904,"event":"return","thread_id":9160,"parent_id":418903,"elapsed":0.000635032,"elapsed_instrumentation":6.25219545327127e-05},{"id":418905,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (18)\n","database_type":"postgres"}},{"id":418906,"event":"return","thread_id":9160,"parent_id":418905,"elapsed":0.000694493,"elapsed_instrumentation":7.181597175076604e-05},{"id":418907,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (6)\n","database_type":"postgres"}},{"id":418908,"event":"return","thread_id":9160,"parent_id":418907,"elapsed":0.000607146,"elapsed_instrumentation":6.791501073166728e-05},{"id":418909,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (7, 16)\n","database_type":"postgres"}},{"id":418910,"event":"return","thread_id":9160,"parent_id":418909,"elapsed":0.000490939,"elapsed_instrumentation":0.0001938230125233531},{"id":418911,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":418912,"event":"return","thread_id":9160,"parent_id":418911,"elapsed":0.000429866,"elapsed_instrumentation":6.377499084919691e-05},{"id":418913,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279638\nAND a.attnum IN (1, 16)\n","database_type":"postgres"}},{"id":418914,"event":"return","thread_id":9160,"parent_id":418913,"elapsed":0.000592682,"elapsed_instrumentation":6.4307008869946e-05},{"id":418915,"event":"call","thread_id":9160,"sql_query":{"sql":"ANALYZE conversations","database_type":"postgres"}},{"id":418916,"event":"return","thread_id":9160,"parent_id":418915,"elapsed":0.000965503,"elapsed_instrumentation":7.149297744035721e-05},{"id":418917,"event":"return","thread_id":9160,"parent_id":418692,"elapsed":0.26595277996966615,"elapsed_instrumentation":0.00017356296302750707,"return_value":{"class":"PG::Result","value":"#<PG::Result:0x00007fc9317be560>","object_id":2972860}}]}