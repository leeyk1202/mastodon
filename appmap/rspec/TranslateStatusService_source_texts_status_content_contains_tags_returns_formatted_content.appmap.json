{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"TranslateStatusService #source_texts status content contains tags returns formatted content","source_location":"spec/services/translate_status_service_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Status","type":"class","children":[{"name":"content","type":"function","location":"app/models/status.rb:220","static":false},{"name":"proper","type":"function","location":"app/models/status.rb:216","static":false},{"name":"reblog?","type":"function","location":"app/models/status.rb:196","static":false},{"name":"local?","type":"function","location":"app/models/status.rb:188","static":false},{"name":"emojis","type":"function","location":"app/models/status.rb:262","static":false}]},{"name":"CustomEmoji","type":"class","children":[{"name":"from_text","type":"function","location":"app/models/custom_emoji.rb:78","static":true}]}]},{"name":"helpers","type":"package","children":[{"name":"FormattingHelper","type":"class","children":[{"name":"status_content_format","type":"function","location":"app/helpers/formatting_helper.rb:21","static":false},{"name":"html_aware_format","type":"function","location":"app/helpers/formatting_helper.rb:4","static":false}]},{"name":"TextFormatter","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"TextFormatter","type":"class","children":[{"name":"entities","type":"function","location":"app/lib/text_formatter.rb:29","static":false}]}]}]}],"events":[{"id":1414651,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"content","path":"app/models/status.rb","lineno":220,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8078220,"value":"#<Status:0x00007fc918916930>"}},{"id":1414652,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"proper","path":"app/models/status.rb","lineno":216,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8078220,"value":"#<Status:0x00007fc918916930>"}},{"id":1414653,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblog?","path":"app/models/status.rb","lineno":196,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8078220,"value":"#<Status:0x00007fc918916930>"}},{"id":1414654,"event":"return","thread_id":9160,"parent_id":1414653,"elapsed":8.840986993163824e-06,"elapsed_instrumentation":4.892004653811455e-05},{"id":1414655,"event":"return","thread_id":9160,"parent_id":1414652,"elapsed":7.48049933463335e-05,"elapsed_instrumentation":6.793002830818295e-05,"return_value":{"class":"Status","value":"#<Status:0x00007fc918916930>","object_id":8078220}},{"id":1414656,"event":"return","thread_id":9160,"parent_id":1414651,"elapsed":0.00016376003623008728,"elapsed_instrumentation":0.00011864793486893177,"return_value":{"class":"String","value":"Hello #hola","object_id":8078300}},{"id":1414657,"event":"call","thread_id":9160,"defined_class":"FormattingHelper","method_id":"status_content_format","path":"app/helpers/formatting_helper.rb","lineno":21,"static":false,"parameters":[{"name":"status","class":"Status","object_id":8078220,"value":"#<Status:0x00007fc918916930>","kind":"req"}],"receiver":{"class":"TranslateStatusService","object_id":8078320,"value":"#<TranslateStatusService:0x00007fc931146598>"}},{"id":1414658,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"local?","path":"app/models/status.rb","lineno":188,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8078220,"value":"#<Status:0x00007fc918916930>"}},{"id":1414659,"event":"return","thread_id":9160,"parent_id":1414658,"elapsed":5.0358998123556376e-05,"elapsed_instrumentation":5.572004010900855e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1414660,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"mentions\".* FROM \"mentions\" WHERE \"mentions\".\"status_id\" = $1 AND \"mentions\".\"silent\" = $2","database_type":"postgres"}},{"id":1414661,"event":"return","thread_id":9160,"parent_id":1414660,"elapsed":0.000281591,"elapsed_instrumentation":7.985200500115752e-05},{"id":1414662,"event":"call","thread_id":9160,"defined_class":"FormattingHelper","method_id":"html_aware_format","path":"app/helpers/formatting_helper.rb","lineno":4,"static":false,"parameters":[{"name":"text","class":"String","object_id":8078300,"value":"Hello #hola","kind":"req"},{"name":"local","class":"TrueClass","object_id":20,"value":"true","kind":"req"},{"name":"options","class":"Hash","object_id":8078340,"value":"{:preloaded_accounts=>[#<Account:0x00007fc91a42d5c0>]}","kind":"opt","size":1}],"receiver":{"class":"TranslateStatusService","object_id":8078320,"value":"#<TranslateStatusService:0x00007fc931146598>"}},{"id":1414663,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"entities","path":"app/lib/text_formatter.rb","lineno":29,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":8078360,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":1414664,"event":"return","thread_id":9160,"parent_id":1414663,"elapsed":2.332031726837158e-06,"elapsed_instrumentation":0.00046856794506311417,"return_value":{"class":"Array","value":"[{:hashtag=>hola, :indices=>[6, 11]}]","object_id":8078380,"size":1}},{"id":1414665,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"entities","path":"app/lib/text_formatter.rb","lineno":29,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":8078360,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":1414666,"event":"return","thread_id":9160,"parent_id":1414665,"elapsed":2.735003363341093e-06,"elapsed_instrumentation":0.0006048480281606317,"return_value":{"class":"Array","value":"[{:hashtag=>hola, :indices=>[6, 11]}]","object_id":8078380,"size":1}},{"id":1414667,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":8078360,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":1414668,"event":"return","thread_id":9160,"parent_id":1414667,"elapsed":2.5120098143815994e-06,"elapsed_instrumentation":0.00029103795532137156,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":1414669,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":8078360,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":1414670,"event":"return","thread_id":9160,"parent_id":1414669,"elapsed":2.6879715733230114e-06,"elapsed_instrumentation":0.0003572460263967514,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":1414671,"event":"return","thread_id":9160,"parent_id":1414662,"elapsed":0.001964637020137161,"elapsed_instrumentation":0.00017124495934695005,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola (...15 more characters)","object_id":8078400}},{"id":1414672,"event":"return","thread_id":9160,"parent_id":1414657,"elapsed":0.003987903008237481,"elapsed_instrumentation":8.519197581335902e-05,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola (...15 more characters)","object_id":8078400}},{"id":1414673,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"emojis","path":"app/models/status.rb","lineno":262,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8078220,"value":"#<Status:0x00007fc918916930>"}},{"id":1414674,"event":"call","thread_id":9160,"defined_class":"CustomEmoji","method_id":"from_text","path":"app/models/custom_emoji.rb","lineno":78,"static":true,"parameters":[{"name":"text","class":"String","object_id":8078420,"value":" Hello #hola","kind":"req"},{"name":"domain","class":"NilClass","object_id":4,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":58120,"value":"CustomEmoji"}},{"id":1414675,"event":"return","thread_id":9160,"parent_id":1414674,"elapsed":7.044000085443258e-06,"elapsed_instrumentation":0.0001040669740177691,"return_value":{"class":"Array","value":"[]","object_id":8078440,"size":0}},{"id":1414676,"event":"return","thread_id":9160,"parent_id":1414673,"elapsed":0.00019082799553871155,"elapsed_instrumentation":8.494401117786765e-05,"return_value":{"class":"Array","value":"[]","object_id":8078440,"size":0}},{"id":1414677,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"status_id\" = $1 ORDER BY \"media_attachments\".\"id\" ASC","database_type":"postgres"}},{"id":1414678,"event":"return","thread_id":9160,"parent_id":1414677,"elapsed":0.000401628,"elapsed_instrumentation":6.728002335876226e-05}]}