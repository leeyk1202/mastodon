{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"TranslateStatusService #source_texts status content contains tags returns formatted content","source_location":"spec/services/translate_status_service_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Status","type":"class","children":[{"name":"content","type":"function","location":"app/models/status.rb:220","static":false},{"name":"proper","type":"function","location":"app/models/status.rb:216","static":false},{"name":"reblog?","type":"function","location":"app/models/status.rb:196","static":false},{"name":"local?","type":"function","location":"app/models/status.rb:188","static":false},{"name":"emojis","type":"function","location":"app/models/status.rb:262","static":false}]},{"name":"CustomEmoji","type":"class","children":[{"name":"from_text","type":"function","location":"app/models/custom_emoji.rb:78","static":true}]}]},{"name":"helpers","type":"package","children":[{"name":"FormattingHelper","type":"class","children":[{"name":"status_content_format","type":"function","location":"app/helpers/formatting_helper.rb:21","static":false},{"name":"html_aware_format","type":"function","location":"app/helpers/formatting_helper.rb:4","static":false}]},{"name":"TextFormatter","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"TextFormatter","type":"class","children":[{"name":"entities","type":"function","location":"app/lib/text_formatter.rb:29","static":false}]}]}]}],"events":[{"id":624474,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"content","path":"app/models/status.rb","lineno":220,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":3869200,"value":"#<Status:0x00007fdc09cee248>"}},{"id":624475,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"proper","path":"app/models/status.rb","lineno":216,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":3869200,"value":"#<Status:0x00007fdc09cee248>"}},{"id":624476,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblog?","path":"app/models/status.rb","lineno":196,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":3869200,"value":"#<Status:0x00007fdc09cee248>"}},{"id":624477,"event":"return","thread_id":9160,"parent_id":624476,"elapsed":9.472016245126724e-06,"elapsed_instrumentation":5.6760996812954545e-05},{"id":624478,"event":"return","thread_id":9160,"parent_id":624475,"elapsed":8.478900417685509e-05,"elapsed_instrumentation":7.639601244591177e-05,"return_value":{"class":"Status","value":"#<Status:0x00007fdc09cee248>","object_id":3869200}},{"id":624479,"event":"return","thread_id":9160,"parent_id":624474,"elapsed":0.00018289301078766584,"elapsed_instrumentation":0.00014574796659871936,"return_value":{"class":"String","value":"Hello #hola","object_id":3869280}},{"id":624480,"event":"call","thread_id":9160,"defined_class":"FormattingHelper","method_id":"status_content_format","path":"app/helpers/formatting_helper.rb","lineno":21,"static":false,"parameters":[{"name":"status","class":"Status","object_id":3869200,"value":"#<Status:0x00007fdc09cee248>","kind":"req"}],"receiver":{"class":"TranslateStatusService","object_id":3869300,"value":"#<TranslateStatusService:0x00007fdc09ccb888>"}},{"id":624481,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"local?","path":"app/models/status.rb","lineno":188,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":3869200,"value":"#<Status:0x00007fdc09cee248>"}},{"id":624482,"event":"return","thread_id":9160,"parent_id":624481,"elapsed":6.52330054435879e-05,"elapsed_instrumentation":0.0004102409875486046,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":624483,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"mentions\".* FROM \"mentions\" WHERE \"mentions\".\"status_id\" = $1 AND \"mentions\".\"silent\" = $2","database_type":"postgres"}},{"id":624484,"event":"return","thread_id":9160,"parent_id":624483,"elapsed":0.000579215,"elapsed_instrumentation":0.0001094590115826577},{"id":624485,"event":"call","thread_id":9160,"defined_class":"FormattingHelper","method_id":"html_aware_format","path":"app/helpers/formatting_helper.rb","lineno":4,"static":false,"parameters":[{"name":"text","class":"String","object_id":3869280,"value":"Hello #hola","kind":"req"},{"name":"local","class":"TrueClass","object_id":20,"value":"true","kind":"req"},{"name":"options","class":"Hash","object_id":3869320,"value":"{:preloaded_accounts=>[#<Account:0x00007fdc060c49c0>]}","kind":"opt","size":1}],"receiver":{"class":"TranslateStatusService","object_id":3869300,"value":"#<TranslateStatusService:0x00007fdc09ccb888>"}},{"id":624486,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"entities","path":"app/lib/text_formatter.rb","lineno":29,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":3869340,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":624487,"event":"return","thread_id":9160,"parent_id":624486,"elapsed":5.561014404520392e-06,"elapsed_instrumentation":0.0009866059990599751,"return_value":{"class":"Array","value":"[{:hashtag=>hola, :indices=>[6, 11]}]","object_id":3869360,"size":1}},{"id":624488,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"entities","path":"app/lib/text_formatter.rb","lineno":29,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":3869340,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":624489,"event":"return","thread_id":9160,"parent_id":624488,"elapsed":3.1380041036754847e-06,"elapsed_instrumentation":0.0006518720183521509,"return_value":{"class":"Array","value":"[{:hashtag=>hola, :indices=>[6, 11]}]","object_id":3869360,"size":1}},{"id":624490,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":3869340,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":624491,"event":"return","thread_id":9160,"parent_id":624490,"elapsed":7.405993528664112e-06,"elapsed_instrumentation":0.0011440390080679208,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":624492,"event":"call","thread_id":9160,"defined_class":"TextFormatter","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"TextFormatter","object_id":3869340,"value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola"}},{"id":624493,"event":"return","thread_id":9160,"parent_id":624492,"elapsed":4.606990842148662e-06,"elapsed_instrumentation":0.0008011309837456793,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":624494,"event":"return","thread_id":9160,"parent_id":624485,"elapsed":0.003997124993475154,"elapsed_instrumentation":0.0003631860017776489,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola (...15 more characters)","object_id":3869380}},{"id":624495,"event":"return","thread_id":9160,"parent_id":624480,"elapsed":0.008880112000042573,"elapsed_instrumentation":0.00015995101421140134,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<p>Hello <a href=\"https://cb6e6126.ngrok.io/tags/hola\" class=\"mention hashtag\" rel=\"tag\">#<span>hola (...15 more characters)","object_id":3869380}},{"id":624496,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"emojis","path":"app/models/status.rb","lineno":262,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":3869200,"value":"#<Status:0x00007fdc09cee248>"}},{"id":624497,"event":"call","thread_id":9160,"defined_class":"CustomEmoji","method_id":"from_text","path":"app/models/custom_emoji.rb","lineno":78,"static":true,"parameters":[{"name":"text","class":"String","object_id":3869400,"value":" Hello #hola","kind":"req"},{"name":"domain","class":"NilClass","object_id":4,"value":null,"kind":"opt"}],"receiver":{"class":"Class","object_id":58120,"value":"CustomEmoji"}},{"id":624498,"event":"return","thread_id":9160,"parent_id":624497,"elapsed":8.93601099960506e-06,"elapsed_instrumentation":0.0001379209861624986,"return_value":{"class":"Array","value":"[]","object_id":3869420,"size":0}},{"id":624499,"event":"return","thread_id":9160,"parent_id":624496,"elapsed":0.0002838509972207248,"elapsed_instrumentation":0.0002860969980247319,"return_value":{"class":"Array","value":"[]","object_id":3869420,"size":0}},{"id":624500,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"status_id\" = $1 ORDER BY \"media_attachments\".\"id\" ASC","database_type":"postgres"}},{"id":624501,"event":"return","thread_id":9160,"parent_id":624500,"elapsed":0.000614132,"elapsed_instrumentation":0.00010998800280503929}]}