{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"ReactionValidator #validate does not add error when non-unicode emoji is a custom emoji","source_location":"spec/validators/reaction_validator_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"RequestPool","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/request_pool.rb:114","static":false}]},{"name":"connection_pool","type":"package","children":[{"name":"ConnectionPool","type":"class","children":[{"name":"SharedConnectionPool","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/connection_pool/shared_connection_pool.rb:13","static":false}]},{"name":"SharedTimedStack","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/connection_pool/shared_timed_stack.rb:51","static":false}]}]}]},{"name":"EntityCache","type":"class","children":[{"name":"to_key","type":"function","location":"app/lib/entity_cache.rb:37","static":false}]}]},{"name":"models","type":"package","children":[{"name":"CustomEmoji","type":"class","children":[{"name":"local?","type":"function","location":"app/models/custom_emoji.rb:59","static":false}]}]},{"name":"validators","type":"package","children":[{"name":"ReactionValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/reaction_validator.rb:8","static":false}]}]}]},{"name":"lib/paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"assign_attributes","type":"function","location":"lib/paperclip/attachment_extensions.rb:54","static":false},{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false},{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]}],"events":[{"id":2712807,"event":"call","thread_id":13276700,"defined_class":"RequestPool","method_id":"flush","path":"app/lib/request_pool.rb","lineno":114,"static":false,"parameters":[{"name":"*","class":"Array","object_id":13329660,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":13329680,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"RequestPool","object_id":13276720,"value":"#<RequestPool:0x00007fc937dbdb90>"}},{"id":2712808,"event":"call","thread_id":13276700,"defined_class":"ConnectionPool::SharedConnectionPool","method_id":"flush","path":"app/lib/connection_pool/shared_connection_pool.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":13329700,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":13329720,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"ConnectionPool::SharedConnectionPool","object_id":13276740,"value":"#<ConnectionPool::SharedConnectionPool:0x00007fc93772a698>"}},{"id":2712809,"event":"call","thread_id":13276700,"defined_class":"ConnectionPool::SharedTimedStack","method_id":"flush","path":"app/lib/connection_pool/shared_timed_stack.rb","lineno":51,"static":false,"parameters":[],"receiver":{"class":"ConnectionPool::SharedTimedStack","object_id":13276780,"value":"#<ConnectionPool::SharedTimedStack:0x00007fc93772a5a8>"}},{"id":2712810,"event":"return","thread_id":13276700,"parent_id":2712809,"elapsed":6.487010978162289e-06,"elapsed_instrumentation":8.167501073330641e-05,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":2712811,"event":"return","thread_id":13276700,"parent_id":2712808,"elapsed":0.00011073198402300477,"elapsed_instrumentation":0.00012493296526372433,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":2712812,"event":"return","thread_id":13276700,"parent_id":2712807,"elapsed":0.0002624049666337669,"elapsed_instrumentation":0.00023813103325664997,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":2712813,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"assign_attributes","path":"lib/paperclip/attachment_extensions.rb","lineno":54,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":13329740,"value":"/images/original/missing.png"}},{"id":2712814,"event":"return","thread_id":9160,"parent_id":2712813,"elapsed":0.0001832139678299427,"elapsed_instrumentation":0.0003901550080627203,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":2712815,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315becb0>"}},{"id":2712816,"event":"return","thread_id":9160,"parent_id":2712815,"elapsed":3.927299985662103e-05,"elapsed_instrumentation":0.00022439297754317522,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93189a1f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93189a330 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2911700,"size":2}},{"id":2712817,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315bebc0>"}},{"id":2712818,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2712819,"event":"return","thread_id":9160,"parent_id":2712818,"elapsed":0.000443362,"elapsed_instrumentation":0.00025045103393495083},{"id":2712820,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"custom_emojis\" WHERE \"custom_emojis\".\"shortcode\" = $1 AND \"custom_emojis\".\"domain\" IS NULL LIMIT $2","database_type":"postgres"}},{"id":2712821,"event":"return","thread_id":9160,"parent_id":2712820,"elapsed":0.001803501,"elapsed_instrumentation":8.887500734999776e-05},{"id":2712822,"event":"return","thread_id":9160,"parent_id":2712817,"elapsed":0.003444187983404845,"elapsed_instrumentation":0.00030737905763089657,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931897ea0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931898058 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931898238 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931898558 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9318987d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9318989b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931898bc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931898da0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2911760,"size":8}},{"id":2712823,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315bebc0>"}},{"id":2712824,"event":"return","thread_id":9160,"parent_id":2712823,"elapsed":4.0539889596402645e-06,"elapsed_instrumentation":0.00010171200847253203,"return_value":{"class":"Array","value":"[]","object_id":2911780,"size":0}},{"id":2712825,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315becb0>"}},{"id":2712826,"event":"return","thread_id":9160,"parent_id":2712825,"elapsed":2.7060159482061863e-06,"elapsed_instrumentation":8.183001773431897e-05,"return_value":{"class":"Array","value":"[]","object_id":2911800,"size":0}},{"id":2712827,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329820,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911840,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315bdef0>"}},{"id":2712828,"event":"return","thread_id":9160,"parent_id":2712827,"elapsed":2.9601971618831158e-05,"elapsed_instrumentation":0.0002682959893718362,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93182f008 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2911860,"size":1}},{"id":2712829,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911900,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315bdd60>"}},{"id":2712830,"event":"return","thread_id":9160,"parent_id":2712829,"elapsed":3.171968273818493e-06,"elapsed_instrumentation":9.469396900385618e-05,"return_value":{"class":"Array","value":"[]","object_id":2911920,"size":0}},{"id":2712831,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"custom_emojis\" (\"shortcode\", \"domain\", \"image_file_name\", \"image_content_type\", \"image_file_size\", \"image_updated_at\", \"created_at\", \"updated_at\", \"disabled\", \"uri\", \"image_remote_url\", \"visible_in_picker\", \"category_id\", \"image_storage_schema_version\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING \"id\"","database_type":"postgres"}},{"id":2712832,"event":"return","thread_id":9160,"parent_id":2712831,"elapsed":0.000957887,"elapsed_instrumentation":9.090796811506152e-05},{"id":2712833,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911900,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315bdd60>"}},{"id":2712834,"event":"return","thread_id":9160,"parent_id":2712833,"elapsed":3.2118987292051315e-05,"elapsed_instrumentation":0.00015279697254300117,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93182d780 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2911940,"size":1}},{"id":2712835,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329820,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2911840,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315bdef0>"}},{"id":2712836,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":13329740,"value":"/system/custom_emojis/images/000/000/260/original/emojo.png"}},{"id":2712837,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":13329740,"value":"/system/custom_emojis/images/000/000/260/original/emojo.png"}},{"id":2712838,"event":"return","thread_id":9160,"parent_id":2712837,"elapsed":1.3515993487089872e-05,"elapsed_instrumentation":0.00040705996798351407,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":2712839,"event":"call","thread_id":9160,"defined_class":"CustomEmoji","method_id":"local?","path":"app/models/custom_emoji.rb","lineno":59,"static":false,"parameters":[],"receiver":{"class":"CustomEmoji","object_id":13329860,"value":"#<CustomEmoji:0x00007fc93b96dfc8>"}},{"id":2712840,"event":"return","thread_id":9160,"parent_id":2712839,"elapsed":6.064015906304121e-06,"elapsed_instrumentation":0.00011576199904084206,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":2712841,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":13329740,"value":"/system/custom_emojis/images/000/000/260/original/emojo.png"}},{"id":2712842,"event":"return","thread_id":9160,"parent_id":2712841,"elapsed":3.171904245391488e-05,"elapsed_instrumentation":0.0009305879357270896,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":2712843,"event":"call","thread_id":9160,"defined_class":"CustomEmoji","method_id":"local?","path":"app/models/custom_emoji.rb","lineno":59,"static":false,"parameters":[],"receiver":{"class":"CustomEmoji","object_id":13329860,"value":"#<CustomEmoji:0x00007fc93b96dfc8>"}},{"id":2712844,"event":"return","thread_id":9160,"parent_id":2712843,"elapsed":3.801396815106273e-05,"elapsed_instrumentation":0.0001980690285563469,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":2712845,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":13329740,"value":"/system/custom_emojis/images/000/000/260/original/emojo.png"}},{"id":2712846,"event":"return","thread_id":9160,"parent_id":2712845,"elapsed":1.8719991203397512e-05,"elapsed_instrumentation":0.0009047320345416665,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":2712847,"event":"call","thread_id":9160,"defined_class":"CustomEmoji","method_id":"local?","path":"app/models/custom_emoji.rb","lineno":59,"static":false,"parameters":[],"receiver":{"class":"CustomEmoji","object_id":13329860,"value":"#<CustomEmoji:0x00007fc93b96dfc8>"}},{"id":2712848,"event":"return","thread_id":9160,"parent_id":2712847,"elapsed":1.6347970813512802e-05,"elapsed_instrumentation":0.0004225790617056191,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":2712849,"event":"return","thread_id":9160,"parent_id":2712836,"elapsed":0.02218839799752459,"elapsed_instrumentation":0.00046464294428005815,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":2712850,"event":"return","thread_id":9160,"parent_id":2712835,"elapsed":0.022716539970133454,"elapsed_instrumentation":0.00015597097808495164,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93182ee00 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2911980,"size":1}},{"id":2712851,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2712852,"event":"return","thread_id":9160,"parent_id":2712851,"elapsed":0.00094422,"elapsed_instrumentation":0.00012043199967592955},{"id":2712853,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2912020,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315b8f90>"}},{"id":2712854,"event":"return","thread_id":9160,"parent_id":2712853,"elapsed":7.0499954745173454e-06,"elapsed_instrumentation":0.00046492397086694837,"return_value":{"class":"Array","value":"[]","object_id":2912040,"size":0}},{"id":2712855,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2912020,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9315b8f90>"}},{"id":2712856,"event":"call","thread_id":9160,"defined_class":"EntityCache","method_id":"to_key","path":"app/lib/entity_cache.rb","lineno":37,"static":false,"parameters":[{"name":"type","class":"Symbol","object_id":15425948,"value":":emoji","kind":"req"},{"name":"ids","class":"Array","object_id":13329900,"value":"[coolcat, ]","kind":"rest","size":2}],"receiver":{"class":"EntityCache","object_id":2397840,"value":"#<EntityCache:0x00007fc932c7c8d0>"}},{"id":2712857,"event":"return","thread_id":9160,"parent_id":2712856,"elapsed":1.3269949704408646e-05,"elapsed_instrumentation":0.00018225697567686439,"return_value":{"class":"String","value":"emoji:coolcat","object_id":13329920}},{"id":2712858,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13329940,"value":"Cache delete: emoji:coolcat\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2712859,"event":"return","thread_id":9160,"parent_id":2712858,"elapsed":0.0013784340117126703,"elapsed_instrumentation":0.00016050698468461633,"return_value":{"class":"Integer","value":"28","object_id":57}},{"id":2712860,"event":"return","thread_id":9160,"parent_id":2712855,"elapsed":0.002085058018565178,"elapsed_instrumentation":0.00020287901861593127,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93184f380 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93184f1a0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2912120,"size":2}},{"id":2712861,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930160,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9327398a0>"}},{"id":2712862,"event":"return","thread_id":9160,"parent_id":2712861,"elapsed":0.00030504202004522085,"elapsed_instrumentation":0.00037745392182841897,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9323007c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932300900 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":930180,"size":2}},{"id":2712863,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932739710>"}},{"id":2712864,"event":"return","thread_id":9160,"parent_id":2712863,"elapsed":0.00014163501327857375,"elapsed_instrumentation":0.0002617010031826794,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322be898 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322bea50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322beb90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322becd0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322beed8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322bf130 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":930240,"size":6}},{"id":2712865,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932739710>"}},{"id":2712866,"event":"return","thread_id":9160,"parent_id":2712865,"elapsed":6.1549944803118706e-06,"elapsed_instrumentation":0.00011435896158218384,"return_value":{"class":"Array","value":"[]","object_id":930260,"size":0}},{"id":2712867,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13329960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930160,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9327398a0>"}},{"id":2712868,"event":"return","thread_id":9160,"parent_id":2712867,"elapsed":1.9141007214784622e-05,"elapsed_instrumentation":0.00020295800641179085,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932300680 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":930280,"size":1}},{"id":2712869,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13330000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9327393f0>"}},{"id":2712870,"event":"return","thread_id":9160,"parent_id":2712869,"elapsed":5.80900814384222e-06,"elapsed_instrumentation":0.00019395799608901143,"return_value":{"class":"Array","value":"[]","object_id":930340,"size":0}},{"id":2712871,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13330000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930360,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932739440>"}},{"id":2712872,"event":"return","thread_id":9160,"parent_id":2712871,"elapsed":5.235022399574518e-06,"elapsed_instrumentation":0.00015644601080566645,"return_value":{"class":"Array","value":"[]","object_id":930380,"size":0}},{"id":2712873,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13330020,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9327391c0>"}},{"id":2712874,"event":"return","thread_id":9160,"parent_id":2712873,"elapsed":5.332985892891884e-06,"elapsed_instrumentation":0.00015946500934660435,"return_value":{"class":"Array","value":"[]","object_id":930440,"size":0}},{"id":2712875,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2712876,"event":"return","thread_id":9160,"parent_id":2712875,"elapsed":0.00062231,"elapsed_instrumentation":0.00010778103023767471},{"id":2712877,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"announcements\" (\"text\", \"published\", \"all_day\", \"scheduled_at\", \"starts_at\", \"ends_at\", \"created_at\", \"updated_at\", \"published_at\", \"status_ids\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING \"id\"","database_type":"postgres"}},{"id":2712878,"event":"return","thread_id":9160,"parent_id":2712877,"elapsed":0.001820461,"elapsed_instrumentation":9.784998837858438e-05},{"id":2712879,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13330020,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9327391c0>"}},{"id":2712880,"event":"return","thread_id":9160,"parent_id":2712879,"elapsed":4.707800690084696e-05,"elapsed_instrumentation":0.0002251950209029019,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322b97f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322b9640 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":930460,"size":2}},{"id":2712881,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13330000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930360,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932739440>"}},{"id":2712882,"event":"return","thread_id":9160,"parent_id":2712881,"elapsed":2.9269722290337086e-06,"elapsed_instrumentation":9.998102905228734e-05,"return_value":{"class":"Array","value":"[]","object_id":930480,"size":0}},{"id":2712883,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13330000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":930320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9327393f0>"}},{"id":2712884,"event":"return","thread_id":9160,"parent_id":2712883,"elapsed":2.7070054784417152e-06,"elapsed_instrumentation":8.027395233511925e-05,"return_value":{"class":"Array","value":"[]","object_id":930500,"size":0}},{"id":2712885,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2712886,"event":"return","thread_id":9160,"parent_id":2712885,"elapsed":0.000625109,"elapsed_instrumentation":9.077595314010978e-05},{"id":2712887,"event":"call","thread_id":9160,"defined_class":"ReactionValidator","method_id":"validate","path":"app/validators/reaction_validator.rb","lineno":8,"static":false,"parameters":[{"name":"reaction","class":"AnnouncementReaction","object_id":13330060,"value":"#<AnnouncementReaction:0x00007fc93b966048>","kind":"req"}],"receiver":{"class":"ReactionValidator","object_id":13330080,"value":"#<ReactionValidator:0x00007fc9191ba7a8>"}},{"id":2712888,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"announcement_reactions\" WHERE \"announcement_reactions\".\"announcement_id\" = $1 AND \"announcement_reactions\".\"name\" = $2 LIMIT $3","database_type":"postgres"}},{"id":2712889,"event":"return","thread_id":9160,"parent_id":2712888,"elapsed":0.000977384,"elapsed_instrumentation":0.00010031700367107987},{"id":2712890,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(distinct name) FROM \"announcement_reactions\" WHERE \"announcement_reactions\".\"announcement_id\" = $1 AND \"announcement_reactions\".\"name\" != $2","database_type":"postgres"}},{"id":2712891,"event":"return","thread_id":9160,"parent_id":2712890,"elapsed":0.000634761,"elapsed_instrumentation":8.796801557764411e-05},{"id":2712892,"event":"return","thread_id":9160,"parent_id":2712887,"elapsed":0.004364593012724072,"elapsed_instrumentation":0.00031528493855148554}]}