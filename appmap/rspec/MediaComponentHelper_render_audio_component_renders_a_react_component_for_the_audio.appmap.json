{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"MediaComponentHelper render_audio_component renders a react component for the audio","source_location":"spec/helpers/media_component_helper_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"helpers","type":"package","children":[{"name":"MediaComponentHelper","type":"class","children":[{"name":"render_audio_component","type":"function","location":"app/helpers/media_component_helper.rb:28","static":false}]},{"name":"RoutingHelper","type":"class","children":[{"name":"full_asset_url","type":"function","location":"app/helpers/routing_helper.rb:17","static":false},{"name":"use_storage?","type":"function","location":"app/helpers/routing_helper.rb:31","static":false},{"name":"asset_host","type":"function","location":"app/helpers/routing_helper.rb:23","static":false}]},{"name":"ReactComponentHelper","type":"class","children":[{"name":"react_component","type":"function","location":"app/helpers/react_component_helper.rb:4","static":false}]},{"name":"ApplicationHelper","type":"class","children":[{"name":"fa_icon","type":"function","location":"app/helpers/application_helper.rb:108","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Status","type":"class","children":[{"name":"ordered_media_attachments","type":"function","location":"app/models/status.rb:271","static":false}]},{"name":"MediaAttachment","type":"class","children":[{"name":"local?","type":"function","location":"app/models/media_attachment.rb:217","static":false}]},{"name":"concerns","type":"package","children":[{"name":"AccountAvatar","type":"class","children":[{"name":"avatar_static_url","type":"function","location":"app/models/concerns/account_avatar.rb:31","static":false},{"name":"avatar_original_url","type":"function","location":"app/models/concerns/account_avatar.rb:27","static":false}]}]}]},{"name":"views","type":"package","children":[{"name":"app_views_statuses__attachment_list_html_haml","type":"class","children":[{"name":"render","type":"function","location":"app/views/statuses/_attachment_list.html.haml","static":true,"labels":["mvc.template"]}]}]}]},{"name":"lib/paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"meta","type":"function","location":"lib/paperclip/attachment_extensions.rb:5","static":false},{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false}]}]}]},{"name":"actionview","type":"package","children":[{"name":"ActionView","type":"class","children":[{"name":"Renderer","type":"class","children":[{"name":"render","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionview-7.1.1/lib/action_view/renderer/renderer.rb:23","labels":["mvc.view"]}]},{"name":"PartialRenderer","type":"class","children":[{"name":"render","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionview-7.1.1/lib/action_view/renderer/partial_renderer.rb:230","labels":["mvc.view"]}]},{"name":"Resolver","type":"class","children":[{"name":"find_all","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/actionview-7.1.1/lib/action_view/template/resolver.rb:63","static":false,"labels":["mvc.template.resolver"]}]}]}]}],"events":[{"id":1625355,"event":"call","thread_id":9160,"defined_class":"MediaComponentHelper","method_id":"render_audio_component","path":"app/helpers/media_component_helper.rb","lineno":28,"static":false,"parameters":[{"name":"status","class":"Status","object_id":8766120,"value":"#<Status:0x00007fdc09dcfae0>","kind":"req"},{"name":"options","class":"Hash","object_id":8766440,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625356,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"ordered_media_attachments","path":"app/models/status.rb","lineno":271,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8766120,"value":"#<Status:0x00007fdc09dcfae0>"}},{"id":1625357,"event":"return","thread_id":9160,"parent_id":1625356,"elapsed":2.9888993594795465e-05,"elapsed_instrumentation":0.00011468399316072464,"return_value":{"class":"ActiveRecord::Associations::CollectionProxy","value":"#<MediaAttachment::ActiveRecord_Associations_CollectionProxy:0x00007fdbf66e7f88>","object_id":8766460}},{"id":1625358,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"status_id\" = $1 ORDER BY \"media_attachments\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1625359,"event":"return","thread_id":9160,"parent_id":1625358,"elapsed":0.000818909,"elapsed_instrumentation":0.00017710900283418596},{"id":1625360,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"meta","path":"lib/paperclip/attachment_extensions.rb","lineno":5,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":8766480,"value":"/system/media_attachments/files/111/360/531/171/130/197/original/attachment.jpg"}},{"id":1625361,"event":"return","thread_id":9160,"parent_id":1625360,"elapsed":3.3037998946383595e-05,"elapsed_instrumentation":0.0006001169967930764},{"id":1625362,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":8766480,"value":"/system/media_attachments/files/111/360/531/171/130/197/original/attachment.jpg"}},{"id":1625363,"event":"return","thread_id":9160,"parent_id":1625362,"elapsed":1.328898360952735e-05,"elapsed_instrumentation":0.0003061490133404732,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1625364,"event":"call","thread_id":9160,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":8766500,"value":"#<MediaAttachment:0x00007fdbf64ba648>"}},{"id":1625365,"event":"return","thread_id":9160,"parent_id":1625364,"elapsed":8.436007192358375e-06,"elapsed_instrumentation":0.00012154501746408641,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1625366,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"full_asset_url","path":"app/helpers/routing_helper.rb","lineno":17,"static":false,"parameters":[{"name":"source","class":"String","object_id":8766520,"value":"/system/media_attachments/files/111/360/531/171/130/197/original/attachment.jpg","kind":"req"},{"name":"options","class":"Hash","object_id":8766540,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625367,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"use_storage?","path":"app/helpers/routing_helper.rb","lineno":31,"static":false,"parameters":[],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625368,"event":"return","thread_id":9160,"parent_id":1625367,"elapsed":2.0637991838157177e-05,"elapsed_instrumentation":7.991600432433188e-05},{"id":1625369,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"asset_host","path":"app/helpers/routing_helper.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625370,"event":"return","thread_id":9160,"parent_id":1625369,"elapsed":0.0002660629979800433,"elapsed_instrumentation":0.00011956403614021838,"return_value":{"class":"String","value":"http://test.host/","object_id":8766560}},{"id":1625371,"event":"return","thread_id":9160,"parent_id":1625366,"elapsed":0.0009116820001509041,"elapsed_instrumentation":0.00039325596299022436,"return_value":{"class":"String","value":"http://test.host/system/media_attachments/files/111/360/531/171/130/197/original/attachment.jpg","object_id":8766580}},{"id":1625372,"event":"call","thread_id":9160,"defined_class":"AccountAvatar","method_id":"avatar_static_url","path":"app/models/concerns/account_avatar.rb","lineno":31,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8766140,"value":"#<Account:0x00007fdbf64abcd8>"}},{"id":1625373,"event":"call","thread_id":9160,"defined_class":"AccountAvatar","method_id":"avatar_original_url","path":"app/models/concerns/account_avatar.rb","lineno":27,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":8766140,"value":"#<Account:0x00007fdbf64abcd8>"}},{"id":1625374,"event":"return","thread_id":9160,"parent_id":1625373,"elapsed":0.00016454100841656327,"elapsed_instrumentation":0.00012746499851346016,"return_value":{"class":"String","value":"/avatars/original/missing.png","object_id":8766600}},{"id":1625375,"event":"return","thread_id":9160,"parent_id":1625372,"elapsed":0.0003451890079304576,"elapsed_instrumentation":0.00020265299826860428,"return_value":{"class":"String","value":"/avatars/original/missing.png","object_id":8766600}},{"id":1625376,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"full_asset_url","path":"app/helpers/routing_helper.rb","lineno":17,"static":false,"parameters":[{"name":"source","class":"String","object_id":8766600,"value":"/avatars/original/missing.png","kind":"req"},{"name":"options","class":"Hash","object_id":8766620,"value":"{}","kind":"keyrest","size":0}],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625377,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"use_storage?","path":"app/helpers/routing_helper.rb","lineno":31,"static":false,"parameters":[],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625378,"event":"return","thread_id":9160,"parent_id":1625377,"elapsed":2.6577006792649627e-05,"elapsed_instrumentation":0.00020520598627626896},{"id":1625379,"event":"call","thread_id":9160,"defined_class":"RoutingHelper","method_id":"asset_host","path":"app/helpers/routing_helper.rb","lineno":23,"static":false,"parameters":[],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625380,"event":"return","thread_id":9160,"parent_id":1625379,"elapsed":0.00012652401346713305,"elapsed_instrumentation":0.00011501600965857506,"return_value":{"class":"String","value":"http://test.host/","object_id":8766640}},{"id":1625381,"event":"return","thread_id":9160,"parent_id":1625376,"elapsed":0.0007506239926442504,"elapsed_instrumentation":0.00020952601335011423,"return_value":{"class":"String","value":"http://test.host/avatars/original/missing.png","object_id":8766660}},{"id":1625382,"event":"call","thread_id":9160,"defined_class":"ReactComponentHelper","method_id":"react_component","path":"app/helpers/react_component_helper.rb","lineno":4,"static":false,"parameters":[{"name":"name","class":"Symbol","object_id":6424348,"value":":audio","kind":"req"},{"name":"props","class":"Hash","object_id":8766680,"value":"{:src=>http://test.host/system/media_attachments/files/111/360/531/171/130/197/original/attachment.jpg, :poster=>http://test.host/avatars/original/missing.png, :alt=>, :backgroundColor=>, :foregroundColor=>, :accentColor=>, :duration=>}","kind":"opt","size":7},{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625383,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"ordered_media_attachments","path":"app/models/status.rb","lineno":271,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":8766120,"value":"#<Status:0x00007fdc09dcfae0>"}},{"id":1625384,"event":"return","thread_id":9160,"parent_id":1625383,"elapsed":5.264399806037545e-05,"elapsed_instrumentation":0.0002048930327873677,"return_value":{"class":"ActiveRecord::Associations::CollectionProxy","value":"#<MediaAttachment::ActiveRecord_Associations_CollectionProxy:0x00007fdbf66e7f88>","object_id":8766460}},{"id":1625385,"event":"call","thread_id":9160,"defined_class":"inline_template","method_id":"render","static":true,"parameters":[],"receiver":{"class":"ActionView::Renderer","object_id":8766860,"value":"#<ActionView::Renderer:0x00007fdc09dbdb38>"}},{"id":1625386,"event":"call","thread_id":9160,"defined_class":"app_views_statuses__attachment_list_html_haml","method_id":"render","path":"app/views/statuses/_attachment_list.html.haml","static":true,"parameters":[],"receiver":{"class":"ActionView::PartialRenderer","object_id":8766880,"value":"#<ActionView::PartialRenderer:0x00007fdc073a10e8>"}},{"id":1625387,"event":"call","thread_id":9160,"defined_class":"ActionView::Resolver","method_id":"find_all","path":"vendor/bundle/ruby/3.2.0/gems/actionview-7.1.1/lib/action_view/template/resolver.rb","lineno":63,"static":false,"parameters":[{"name":"name","class":"String","object_id":8766700,"value":"attachment_list","kind":"req"},{"name":"prefix","class":"String","object_id":8766720,"value":"statuses","kind":"opt"},{"name":"partial","class":"TrueClass","object_id":20,"value":"true","kind":"opt"},{"name":"details","class":"Hash","object_id":8766740,"value":"{:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg (...27 more items)], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :haml]}","kind":"opt","size":4},{"name":"key","class":"ActionView::TemplateDetails::Requested","object_id":1008220,"value":"#<ActionView::TemplateDetails::Requested:0x00007fdc0e5988e0>","kind":"opt"},{"name":"locals","class":"Array","object_id":8766760,"value":"[:attachments]","kind":"opt","size":1}],"receiver":{"class":"ActionView::FileSystemResolver","object_id":212560,"value":"/workspaces/mastodon/app/views"}},{"id":1625388,"event":"return","thread_id":9160,"parent_id":1625387,"elapsed":5.4912990890443325e-05,"elapsed_instrumentation":0.0015934209804981947,"return_value":{"class":"Array","value":"[#<ActionView::Template:0x00007fdc08fea3d0>]","object_id":8766780,"size":1}},{"id":1625389,"event":"call","thread_id":9160,"defined_class":"ApplicationHelper","method_id":"fa_icon","path":"app/helpers/application_helper.rb","lineno":108,"static":false,"parameters":[{"name":"icon","class":"String","object_id":8766800,"value":"link","kind":"req"},{"name":"attributes","class":"NilClass","object_id":4,"value":null,"kind":"opt"}],"receiver":{"class":"ActionView::Base","object_id":8766420,"value":"#<#<Class:0x00007fdc08605a18>:0x00007fdbf64ac098>"}},{"id":1625390,"event":"return","thread_id":9160,"parent_id":1625389,"elapsed":0.00017191501683555543,"elapsed_instrumentation":0.0004089450230821967,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<i class=\"fa fa-link\"></i>","object_id":8766820}},{"id":1625391,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"media_attachments\".* FROM \"media_attachments\" WHERE \"media_attachments\".\"status_id\" = $1 ORDER BY \"media_attachments\".\"id\" ASC","database_type":"postgres"}},{"id":1625392,"event":"return","thread_id":9160,"parent_id":1625391,"elapsed":0.000648791,"elapsed_instrumentation":0.00016479199985042214},{"id":1625393,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":8766200,"value":"/system/media_attachments/files/111/360/531/171/130/197/original/attachment.jpg"}},{"id":1625394,"event":"return","thread_id":9160,"parent_id":1625393,"elapsed":1.6623002011328936e-05,"elapsed_instrumentation":0.00044031799188815057,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1625395,"event":"call","thread_id":9160,"defined_class":"MediaAttachment","method_id":"local?","path":"app/models/media_attachment.rb","lineno":217,"static":false,"parameters":[],"receiver":{"class":"MediaAttachment","object_id":8766360,"value":"#<MediaAttachment:0x00007fdbf64a0018>"}},{"id":1625396,"event":"return","thread_id":9160,"parent_id":1625395,"elapsed":6.5889908000826836e-06,"elapsed_instrumentation":0.00010824599303305149,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1625397,"event":"return","thread_id":9160,"parent_id":1625386,"elapsed":0.008421434002229944,"elapsed_instrumentation":0.00044282502494752407},{"id":1625398,"event":"return","thread_id":9160,"parent_id":1625385,"elapsed":0.008937567006796598,"elapsed_instrumentation":6.903495523147285e-05},{"id":1625399,"event":"return","thread_id":9160,"parent_id":1625382,"elapsed":0.010005424992414191,"elapsed_instrumentation":0.000267950032139197,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<div data-component=\"Audio\" data-props=\"{&quot;src&quot;:&quot;http://test.host/system/media_attachm (...560 more characters)","object_id":8766840}},{"id":1625400,"event":"return","thread_id":9160,"parent_id":1625355,"elapsed":0.01850962301250547,"elapsed_instrumentation":0.0003323269775137305,"return_value":{"class":"ActiveSupport::SafeBuffer","value":"<div data-component=\"Audio\" data-props=\"{&quot;src&quot;:&quot;http://test.host/system/media_attachm (...560 more characters)","object_id":8766840}}]}