{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::Settings subcommand \"registrations\" #approved changes \"registrations_mode\" to \"approved\"","source_location":"spec/lib/mastodon/cli/settings_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/models","type":"package","children":[{"name":"Setting","type":"class","children":[{"name":"[]","type":"function","location":"app/models/setting.rb:24","static":true}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"Registrations","type":"class","children":[{"name":"approved","type":"function","location":"lib/mastodon/cli/settings.rb:21","static":false}]}]}]}]},{"name":"psych","type":"package","children":[{"name":"Psych","type":"class","children":[{"name":"dump","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/psych-5.1.1/lib/psych.rb:505","static":true,"labels":["format.yaml.generate","serialize"]},{"name":"parse","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/psych-5.1.1/lib/psych.rb:398","static":true,"labels":["format.yaml.parse"]},{"name":"parse_stream","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/psych-5.1.1/lib/psych.rb:452","static":true,"labels":["format.yaml.parse"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":2688985,"event":"call","thread_id":9160,"defined_class":"Setting","method_id":"[]","path":"app/models/setting.rb","lineno":24,"static":true,"parameters":[{"name":"key","class":"String","object_id":13229360,"value":"registrations_mode","kind":"req"}],"receiver":{"class":"Class","object_id":61700,"value":"Setting"}},{"id":2688986,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13229380,"value":"Cache read: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/registrations_mode ({:compress=>f (...34 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2688987,"event":"return","thread_id":9160,"parent_id":2688986,"elapsed":0.0009221920045092702,"elapsed_instrumentation":0.00013481697533279657,"return_value":{"class":"Integer","value":"134","object_id":269}},{"id":2688988,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13229400,"value":"Cache fetch_hit: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/registrations_mode ({:compre (...39 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2688989,"event":"return","thread_id":9160,"parent_id":2688988,"elapsed":0.0007602719706483185,"elapsed_instrumentation":0.00014922901755198836,"return_value":{"class":"Integer","value":"139","object_id":279}},{"id":2688990,"event":"return","thread_id":9160,"parent_id":2688985,"elapsed":0.0022526379907503724,"elapsed_instrumentation":0.00016512599540874362},{"id":2688991,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::Registrations","method_id":"approved","path":"lib/mastodon/cli/settings.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::Registrations","object_id":13229420,"value":"#<Mastodon::CLI::Registrations:0x00007fc930b33750>"}},{"id":2688992,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"settings\".* FROM \"settings\" WHERE (thing_type is NULL and thing_id is NULL) AND \"settings\".\"var\" = $1 ORDER BY \"settings\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":2688993,"event":"return","thread_id":9160,"parent_id":2688992,"elapsed":0.00088381,"elapsed_instrumentation":0.00011224101763218641},{"id":2688994,"event":"call","thread_id":9160,"defined_class":"Psych","method_id":"dump","path":"vendor/bundle/ruby/3.2.0/gems/psych-5.1.1/lib/psych.rb","lineno":505,"static":true,"parameters":[{"name":"o","class":"String","object_id":3102560,"value":"approved","kind":"req"},{"name":"io","class":"Hash","object_id":13229440,"value":"{}","kind":"opt","size":0},{"name":"options","class":"NilClass","object_id":4,"value":null,"kind":"opt"}],"receiver":{"class":"Module","object_id":3083660,"value":"Psych"}},{"id":2688995,"event":"return","thread_id":9160,"parent_id":2688994,"elapsed":0.00016377202700823545,"elapsed_instrumentation":0.00018891302170231938,"return_value":{"class":"String","value":"--- approved\n","object_id":13229460}},{"id":2688996,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2688997,"event":"return","thread_id":9160,"parent_id":2688996,"elapsed":2.2969034034758806e-05,"elapsed_instrumentation":0.00014065398136153817,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2688998,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3083740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931d1e7a8>"}},{"id":2688999,"event":"return","thread_id":9160,"parent_id":2688998,"elapsed":1.6352045349776745e-05,"elapsed_instrumentation":9.720103116706014e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932f49658 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":3083760,"size":1}},{"id":2689000,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3083740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931d1e7a8>"}},{"id":2689001,"event":"return","thread_id":9160,"parent_id":2689000,"elapsed":3.3570104278624058e-06,"elapsed_instrumentation":7.108907448127866e-05,"return_value":{"class":"Array","value":"[]","object_id":3083780,"size":0}},{"id":2689002,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2689003,"event":"return","thread_id":9160,"parent_id":2689002,"elapsed":2.503977157175541e-06,"elapsed_instrumentation":7.007201202213764e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2689004,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3083820,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc937cc1b38>"}},{"id":2689005,"event":"return","thread_id":9160,"parent_id":2689004,"elapsed":2.2848020307719707e-05,"elapsed_instrumentation":8.881994290277362e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9318b55e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":3083840,"size":1}},{"id":2689006,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2689007,"event":"return","thread_id":9160,"parent_id":2689006,"elapsed":0.000794398,"elapsed_instrumentation":0.0002981380093842745},{"id":2689008,"event":"call","thread_id":9160,"sql_query":{"sql":"UPDATE \"settings\" SET \"value\" = $1, \"updated_at\" = $2 WHERE \"settings\".\"id\" = $3","database_type":"postgres"}},{"id":2689009,"event":"return","thread_id":9160,"parent_id":2689008,"elapsed":0.002487982,"elapsed_instrumentation":0.00012693798635154963},{"id":2689010,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3083820,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc937cc1b38>"}},{"id":2689011,"event":"return","thread_id":9160,"parent_id":2689010,"elapsed":5.074020009487867e-06,"elapsed_instrumentation":0.0002628899528644979,"return_value":{"class":"Array","value":"[]","object_id":3083860,"size":0}},{"id":2689012,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2689013,"event":"return","thread_id":9160,"parent_id":2689012,"elapsed":0.000513438,"elapsed_instrumentation":0.00010869296966120601},{"id":2689014,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3083920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc937cc1098>"}},{"id":2689015,"event":"return","thread_id":9160,"parent_id":2689014,"elapsed":4.898000042885542e-06,"elapsed_instrumentation":0.00017727504018694162,"return_value":{"class":"Array","value":"[]","object_id":3083940,"size":0}},{"id":2689016,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":13229560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":3083920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc937cc1098>"}},{"id":2689017,"event":"call","thread_id":9160,"defined_class":"Psych","method_id":"parse","path":"vendor/bundle/ruby/3.2.0/gems/psych-5.1.1/lib/psych.rb","lineno":398,"static":true,"parameters":[{"name":"yaml","class":"String","object_id":13229580,"value":"--- approved\n","kind":"req"},{"name":"filename","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Module","object_id":3083660,"value":"Psych"}},{"id":2689018,"event":"call","thread_id":9160,"defined_class":"Psych","method_id":"parse_stream","path":"vendor/bundle/ruby/3.2.0/gems/psych-5.1.1/lib/psych.rb","lineno":452,"static":true,"parameters":[{"name":"yaml","class":"String","object_id":13229580,"value":"--- approved\n","kind":"req"},{"name":"filename","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Module","object_id":3083660,"value":"Psych"}},{"id":2689019,"event":"return","thread_id":9160,"parent_id":2689018,"elapsed":0.00010425399523228407,"elapsed_instrumentation":0.0001471519935876131},{"id":2689020,"event":"return","thread_id":9160,"parent_id":2689017,"elapsed":0.0003081490285694599,"elapsed_instrumentation":0.0001738509745337069,"return_value":{"class":"Psych::Nodes::Document","value":"#<Psych::Nodes::Document:0x00007fc91a8341a0>","object_id":13229600}},{"id":2689021,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13229620,"value":"Cache write: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/registrations_mode ({:compress=> (...35 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2689022,"event":"return","thread_id":9160,"parent_id":2689021,"elapsed":0.0009311559842899442,"elapsed_instrumentation":0.00016052904538810253,"return_value":{"class":"Integer","value":"135","object_id":271}},{"id":2689023,"event":"return","thread_id":9160,"parent_id":2689016,"elapsed":0.002376627002377063,"elapsed_instrumentation":0.00017737795133143663,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9318b10a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9318b0ef0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":3084020,"size":2}},{"id":2689024,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13229640,"value":"Cache write: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/registrations_mode ({:compress=> (...35 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2689025,"event":"return","thread_id":9160,"parent_id":2689024,"elapsed":0.0010983990505337715,"elapsed_instrumentation":0.0005553029477596283,"return_value":{"class":"Integer","value":"135","object_id":271}},{"id":2689026,"event":"return","thread_id":9160,"parent_id":2688991,"elapsed":0.015766923024784774,"elapsed_instrumentation":0.00017639296129345894,"return_value":{"class":"IO","value":"#<IO:0x00007fc94b108f80>","object_id":195040}},{"id":2689027,"event":"call","thread_id":9160,"defined_class":"Setting","method_id":"[]","path":"app/models/setting.rb","lineno":24,"static":true,"parameters":[{"name":"key","class":"String","object_id":13229660,"value":"registrations_mode","kind":"req"}],"receiver":{"class":"Class","object_id":61700,"value":"Setting"}},{"id":2689028,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13229680,"value":"Cache read: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/registrations_mode ({:compress=>f (...34 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2689029,"event":"return","thread_id":9160,"parent_id":2689028,"elapsed":0.0008448759908787906,"elapsed_instrumentation":0.00015380396507680416,"return_value":{"class":"Integer","value":"134","object_id":269}},{"id":2689030,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":13229700,"value":"Cache fetch_hit: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/registrations_mode ({:compre (...39 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2689031,"event":"return","thread_id":9160,"parent_id":2689030,"elapsed":0.0008393259486183524,"elapsed_instrumentation":0.00020450400188565254,"return_value":{"class":"Integer","value":"139","object_id":279}},{"id":2689032,"event":"return","thread_id":9160,"parent_id":2689027,"elapsed":0.00247194996336475,"elapsed_instrumentation":0.0005006060237064958,"return_value":{"class":"String","value":"approved","object_id":13229720}}]}