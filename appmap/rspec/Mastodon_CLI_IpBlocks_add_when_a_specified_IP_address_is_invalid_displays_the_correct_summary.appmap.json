{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::IpBlocks #add when a specified IP address is invalid displays the correct summary","source_location":"spec/lib/mastodon/cli/ip_blocks_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"IpBlocks","type":"class","children":[{"name":"add","type":"function","location":"lib/mastodon/cli/ip_blocks.rb:22","static":false}]}]}]}]},{"name":"app/models/concerns","type":"package","children":[{"name":"IpBlock","type":"class","children":[{"name":"expires_in=","type":"function","location":"app/models/concerns/expireable.rb:19","static":false}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]}],"events":[{"id":2189199,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::IpBlocks","method_id":"add","path":"lib/mastodon/cli/ip_blocks.rb","lineno":22,"static":false,"parameters":[{"name":"addresses","class":"Array","object_id":11136680,"value":"[320.15.175.0, 9.5.105.255, 0.0.0.0]","kind":"rest","size":3}],"receiver":{"class":"Mastodon::CLI::IpBlocks","object_id":11136700,"value":"#<Mastodon::CLI::IpBlocks:0x00007fc93149c120>"}},{"id":2189200,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2189201,"event":"return","thread_id":9160,"parent_id":2189200,"elapsed":0.000757493,"elapsed_instrumentation":0.00010027503594756126},{"id":2189202,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11136720,"value":"#<IpBlock:0x00007fc8e1763980>"}},{"id":2189203,"event":"return","thread_id":9160,"parent_id":2189202,"elapsed":2.8730020858347416e-05,"elapsed_instrumentation":0.0001437310129404068},{"id":2189204,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2189205,"event":"return","thread_id":9160,"parent_id":2189204,"elapsed":2.5429006200283766e-05,"elapsed_instrumentation":0.0001683449954725802,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2189206,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2189207,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2189208,"event":"return","thread_id":9160,"parent_id":2189207,"elapsed":0.000578206,"elapsed_instrumentation":0.00017102697165682912},{"id":2189209,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2189210,"event":"return","thread_id":9160,"parent_id":2189209,"elapsed":0.001922137,"elapsed_instrumentation":9.87559906207025e-05},{"id":2189211,"event":"return","thread_id":9160,"parent_id":2189206,"elapsed":0.003832882968708873,"elapsed_instrumentation":0.0004803190240636468,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2189212,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2189213,"event":"return","thread_id":9160,"parent_id":2189212,"elapsed":3.9959559217095375e-06,"elapsed_instrumentation":0.00011680705938488245,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2189214,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2189215,"event":"return","thread_id":9160,"parent_id":2189214,"elapsed":2.7410569600760937e-06,"elapsed_instrumentation":7.752096280455589e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2189216,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2189217,"event":"return","thread_id":9160,"parent_id":2189216,"elapsed":0.000578973,"elapsed_instrumentation":8.322304347530007e-05},{"id":2189218,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2189219,"event":"return","thread_id":9160,"parent_id":2189218,"elapsed":0.000443972,"elapsed_instrumentation":8.065003203228116e-05},{"id":2189220,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2189221,"event":"return","thread_id":9160,"parent_id":2189220,"elapsed":4.036002792418003e-06,"elapsed_instrumentation":0.00013295700773596764,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2189222,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2189223,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11136800,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2189224,"event":"return","thread_id":9160,"parent_id":2189223,"elapsed":0.0006248130230233073,"elapsed_instrumentation":0.0001152979675680399,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2189225,"event":"return","thread_id":9160,"parent_id":2189222,"elapsed":0.0008952470379881561,"elapsed_instrumentation":0.00014021899551153183,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2189226,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2189227,"event":"return","thread_id":9160,"parent_id":2189226,"elapsed":0.00041866,"elapsed_instrumentation":8.099497063085437e-05},{"id":2189228,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11136820,"value":"#<IpBlock:0x00007fc8e17630c0>"}},{"id":2189229,"event":"return","thread_id":9160,"parent_id":2189228,"elapsed":1.9776984117925167e-05,"elapsed_instrumentation":0.00012101104948669672},{"id":2189230,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2189231,"event":"return","thread_id":9160,"parent_id":2189230,"elapsed":2.0167033653706312e-05,"elapsed_instrumentation":0.00011963298311457038,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2189232,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2189233,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2189234,"event":"return","thread_id":9160,"parent_id":2189233,"elapsed":0.000343283,"elapsed_instrumentation":7.788499351590872e-05},{"id":2189235,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2189236,"event":"return","thread_id":9160,"parent_id":2189235,"elapsed":0.00110174,"elapsed_instrumentation":6.573699647560716e-05},{"id":2189237,"event":"return","thread_id":9160,"parent_id":2189232,"elapsed":0.002023083041422069,"elapsed_instrumentation":0.00013379601296037436,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2189238,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2189239,"event":"return","thread_id":9160,"parent_id":2189238,"elapsed":3.6460114642977715e-06,"elapsed_instrumentation":0.00016681093256920576,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2189240,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2189241,"event":"return","thread_id":9160,"parent_id":2189240,"elapsed":3.027031198143959e-06,"elapsed_instrumentation":8.864502888172865e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2189242,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2189243,"event":"return","thread_id":9160,"parent_id":2189242,"elapsed":0.000521346,"elapsed_instrumentation":6.46990374661982e-05},{"id":2189244,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2189245,"event":"return","thread_id":9160,"parent_id":2189244,"elapsed":0.000298766,"elapsed_instrumentation":6.186601240187883e-05},{"id":2189246,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2189247,"event":"return","thread_id":9160,"parent_id":2189246,"elapsed":3.431981895118952e-06,"elapsed_instrumentation":0.00010534800821915269,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2189248,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11136880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2189249,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11136900,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2189250,"event":"return","thread_id":9160,"parent_id":2189249,"elapsed":0.0004933749441988766,"elapsed_instrumentation":0.00010673899669200182,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2189251,"event":"return","thread_id":9160,"parent_id":2189248,"elapsed":0.0007397730369120836,"elapsed_instrumentation":9.948702063411474e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2189252,"event":"return","thread_id":9160,"parent_id":2189199,"elapsed":0.02040965500054881,"elapsed_instrumentation":0.0002542919828556478,"return_value":{"class":"StringIO","value":"#<StringIO:0x00007fc931efee10>","object_id":11136920}}]}