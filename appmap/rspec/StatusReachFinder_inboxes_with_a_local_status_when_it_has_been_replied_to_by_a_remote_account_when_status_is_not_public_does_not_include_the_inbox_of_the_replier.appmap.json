{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"StatusReachFinder #inboxes with a local status when it has been replied to by a remote account when status is not public does not include the inbox of the replier","source_location":"spec/lib/status_reach_finder_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"StatusReachFinder","type":"class","children":[{"name":"inboxes","type":"function","location":"app/lib/status_reach_finder.rb:12","static":false}]},{"name":"DeliveryFailureTracker","type":"class","children":[{"name":"without_unavailable","type":"function","location":"app/lib/delivery_failure_tracker.rb:43","static":true}]}]},{"name":"models","type":"package","children":[{"name":"Status","type":"class","children":[{"name":"reblog?","type":"function","location":"app/models/status.rb:196","static":false},{"name":"in_reply_to_local_account?","type":"function","location":"app/models/status.rb:192","static":false},{"name":"reply?","type":"function","location":"app/models/status.rb:184","static":false}]},{"name":"Account","type":"class","children":[{"name":"inboxes","type":"function","location":"app/models/account.rb:436","static":true}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]},{"name":"load","type":"function","location":"<internal:marshal>:33","static":true,"labels":["deserialize.unsafe"]}]}]}],"events":[{"id":1965157,"event":"call","thread_id":9160,"defined_class":"StatusReachFinder","method_id":"inboxes","path":"app/lib/status_reach_finder.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"StatusReachFinder","object_id":10562160,"value":"#<StatusReachFinder:0x00007fdbf5517f10>"}},{"id":1965158,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblog?","path":"app/models/status.rb","lineno":196,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":10562080,"value":"#<Status:0x00007fdbf55fe898>"}},{"id":1965159,"event":"return","thread_id":9160,"parent_id":1965158,"elapsed":9.753013728186488e-06,"elapsed_instrumentation":7.637299131602049e-05},{"id":1965160,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reblog?","path":"app/models/status.rb","lineno":196,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":10562080,"value":"#<Status:0x00007fdbf55fe898>"}},{"id":1965161,"event":"return","thread_id":9160,"parent_id":1965160,"elapsed":7.380003808066249e-06,"elapsed_instrumentation":0.00013871700502932072},{"id":1965162,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"mentions\".\"account_id\" FROM \"mentions\" WHERE \"mentions\".\"status_id\" = $1","database_type":"postgres"}},{"id":1965163,"event":"return","thread_id":9160,"parent_id":1965162,"elapsed":0.000594573,"elapsed_instrumentation":0.00010288399062119424},{"id":1965164,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"inboxes","path":"app/models/account.rb","lineno":436,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":36540,"value":"Account"}},{"id":1965165,"event":"call","thread_id":9160,"defined_class":"DeliveryFailureTracker","method_id":"without_unavailable","path":"app/lib/delivery_failure_tracker.rb","lineno":43,"static":true,"parameters":[{"name":"urls","class":"Array","object_id":10562180,"value":"[]","kind":"req","size":0}],"receiver":{"class":"Class","object_id":52940,"value":"DeliveryFailureTracker"}},{"id":1965166,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10562200,"value":"Cache read: unavailable_domains ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1965167,"event":"return","thread_id":9160,"parent_id":1965166,"elapsed":0.000651312991976738,"elapsed_instrumentation":0.00018244501552544534,"return_value":{"class":"Integer","value":"80","object_id":161}},{"id":1965168,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10562220,"value":"Cache generate: unavailable_domains ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1965169,"event":"return","thread_id":9160,"parent_id":1965168,"elapsed":0.0005135640094522387,"elapsed_instrumentation":0.0002548079937696457,"return_value":{"class":"Integer","value":"84","object_id":169}},{"id":1965170,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"unavailable_domains\".\"domain\" FROM \"unavailable_domains\"","database_type":"postgres"}},{"id":1965171,"event":"return","thread_id":9160,"parent_id":1965170,"elapsed":0.000696504,"elapsed_instrumentation":9.026599582284689e-05},{"id":1965172,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10562240,"value":"Cache write: unavailable_domains ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1965173,"event":"return","thread_id":9160,"parent_id":1965172,"elapsed":0.0005444400012493134,"elapsed_instrumentation":0.0001575560017954558,"return_value":{"class":"Integer","value":"81","object_id":163}},{"id":1965174,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":10562260,"value":"[{}]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":209120,"value":"Marshal"}},{"id":1965175,"event":"return","thread_id":9160,"parent_id":1965174,"elapsed":9.920011507347226e-06,"elapsed_instrumentation":0.000150472013046965,"return_value":{"class":"String","value":"\u0004\b{\u0000","object_id":10562280}},{"id":1965176,"event":"return","thread_id":9160,"parent_id":1965165,"elapsed":0.004388047003885731,"elapsed_instrumentation":0.00012581198825500906,"return_value":{"class":"Array","value":"[]","object_id":10562300,"size":0}},{"id":1965177,"event":"return","thread_id":9160,"parent_id":1965164,"elapsed":0.004954527015797794,"elapsed_instrumentation":0.00011850701412186027,"return_value":{"class":"Array","value":"[]","object_id":10562300,"size":0}},{"id":1965178,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"in_reply_to_local_account?","path":"app/models/status.rb","lineno":192,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":10562080,"value":"#<Status:0x00007fdbf55fe898>"}},{"id":1965179,"event":"call","thread_id":9160,"defined_class":"Status","method_id":"reply?","path":"app/models/status.rb","lineno":184,"static":false,"parameters":[],"receiver":{"class":"Status","object_id":10562080,"value":"#<Status:0x00007fdbf55fe898>"}},{"id":1965180,"event":"return","thread_id":9160,"parent_id":1965179,"elapsed":7.216198719106615e-05,"elapsed_instrumentation":0.0001823610218707472},{"id":1965181,"event":"return","thread_id":9160,"parent_id":1965178,"elapsed":0.0002770089777186513,"elapsed_instrumentation":7.267601904459298e-05},{"id":1965182,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"inboxes","path":"app/models/account.rb","lineno":436,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":36540,"value":"Account"}},{"id":1965183,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT coalesce(nullif(accounts.shared_inbox_url, ''), accounts.inbox_url) AS preferred_inbox_url FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND \"accounts\".\"protocol\" = $2 GROUP BY \"preferred_inbox_url\"","database_type":"postgres"}},{"id":1965184,"event":"return","thread_id":9160,"parent_id":1965183,"elapsed":0.001897198,"elapsed_instrumentation":0.00017226801719516516},{"id":1965185,"event":"call","thread_id":9160,"defined_class":"DeliveryFailureTracker","method_id":"without_unavailable","path":"app/lib/delivery_failure_tracker.rb","lineno":43,"static":true,"parameters":[{"name":"urls","class":"Array","object_id":10562320,"value":"[]","kind":"req","size":0}],"receiver":{"class":"Class","object_id":52940,"value":"DeliveryFailureTracker"}},{"id":1965186,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10562340,"value":"Cache read: unavailable_domains ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1965187,"event":"return","thread_id":9160,"parent_id":1965186,"elapsed":0.0012266940029803663,"elapsed_instrumentation":0.00029713401454500854,"return_value":{"class":"Integer","value":"80","object_id":161}},{"id":1965188,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"load","path":"<internal:marshal>","lineno":33,"static":true,"parameters":[{"name":"source","class":"String","object_id":10562280,"value":"\u0004\b{\u0000","kind":"req"},{"name":"arg","class":"Array","object_id":10562360,"value":"[]","kind":"rest","size":0}],"receiver":{"class":"Module","object_id":209120,"value":"Marshal"}},{"id":1965189,"event":"return","thread_id":9160,"parent_id":1965188,"elapsed":1.4157994883134961e-05,"elapsed_instrumentation":0.00055405602324754,"return_value":{"class":"Hash","value":"{}","object_id":10562380,"size":0}},{"id":1965190,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":10562400,"value":"Cache fetch_hit: unavailable_domains ({:compress=>false, :compress_threshold=>1024})\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1965191,"event":"return","thread_id":9160,"parent_id":1965190,"elapsed":0.0011152480146847665,"elapsed_instrumentation":0.0003635620232671499,"return_value":{"class":"Integer","value":"85","object_id":171}},{"id":1965192,"event":"return","thread_id":9160,"parent_id":1965185,"elapsed":0.004287046001991257,"elapsed_instrumentation":0.0002789410063996911,"return_value":{"class":"Array","value":"[]","object_id":10562420,"size":0}},{"id":1965193,"event":"return","thread_id":9160,"parent_id":1965182,"elapsed":0.008759296004427597,"elapsed_instrumentation":0.00015232799341902137,"return_value":{"class":"Array","value":"[]","object_id":10562420,"size":0}},{"id":1965194,"event":"return","thread_id":9160,"parent_id":1965157,"elapsed":0.01977117598289624,"elapsed_instrumentation":0.00017085400759242475,"return_value":{"class":"Array","value":"[]","object_id":10562440,"size":0}}]}