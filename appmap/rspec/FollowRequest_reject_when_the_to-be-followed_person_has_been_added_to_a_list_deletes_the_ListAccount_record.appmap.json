{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"FollowRequest #reject! when the to-be-followed person has been added to a list deletes the ListAccount record","source_location":"spec/models/follow_request_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"app/lib","type":"package","children":[{"name":"RequestPool","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/request_pool.rb:114","static":false}]},{"name":"connection_pool","type":"package","children":[{"name":"ConnectionPool","type":"class","children":[{"name":"SharedConnectionPool","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/connection_pool/shared_connection_pool.rb:13","static":false}]},{"name":"SharedTimedStack","type":"class","children":[{"name":"flush","type":"function","location":"app/lib/connection_pool/shared_timed_stack.rb:51","static":false}]}]}]}]}],"events":[{"id":3077305,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"accounts\" INNER JOIN \"list_accounts\" ON \"accounts\".\"id\" = \"list_accounts\".\"account_id\" WHERE \"list_accounts\".\"list_id\" = $1","database_type":"postgres"}},{"id":3077306,"event":"return","thread_id":9160,"parent_id":3077305,"elapsed":0.0008661,"elapsed_instrumentation":0.00010031601414084435},{"id":3077307,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":15068300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":9036180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930c2bc70>"}},{"id":3077308,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":3077309,"event":"return","thread_id":9160,"parent_id":3077308,"elapsed":0.000432589,"elapsed_instrumentation":7.689202902838588e-05},{"id":3077310,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":3077311,"event":"return","thread_id":9160,"parent_id":3077310,"elapsed":0.00040159,"elapsed_instrumentation":7.260905113071203e-05},{"id":3077312,"event":"return","thread_id":9160,"parent_id":3077307,"elapsed":0.002447330974973738,"elapsed_instrumentation":0.00019558798521757126,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932745bf0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":9036220,"size":1}},{"id":3077313,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follow_requests\" WHERE \"follow_requests\".\"id\" = $1","database_type":"postgres"}},{"id":3077314,"event":"return","thread_id":9160,"parent_id":3077313,"elapsed":0.000636782,"elapsed_instrumentation":6.902002496644855e-05},{"id":3077315,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":15068300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":9036180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930c2bc70>"}},{"id":3077316,"event":"return","thread_id":9160,"parent_id":3077315,"elapsed":4.20096330344677e-06,"elapsed_instrumentation":0.00012144801439717412,"return_value":{"class":"Array","value":"[]","object_id":9036240,"size":0}},{"id":3077317,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":3077318,"event":"return","thread_id":9160,"parent_id":3077317,"elapsed":0.000620541,"elapsed_instrumentation":8.884398266673088e-05},{"id":3077319,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":15068320,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2848420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930c2c5d0>"}},{"id":3077320,"event":"return","thread_id":9160,"parent_id":3077319,"elapsed":5.018955562263727e-06,"elapsed_instrumentation":0.0003380540292710066,"return_value":{"class":"Array","value":"[]","object_id":2848440,"size":0}},{"id":3077321,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":15068320,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2848420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930c2c5d0>"}},{"id":3077322,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15068340,"value":"Cache delete: relationship:111361447765053277:111361447765053278\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3077323,"event":"call","thread_id":13276700,"defined_class":"RequestPool","method_id":"flush","path":"app/lib/request_pool.rb","lineno":114,"static":false,"parameters":[{"name":"*","class":"Array","object_id":15068360,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":15068380,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"RequestPool","object_id":13276720,"value":"#<RequestPool:0x00007fc937dbdb90>"}},{"id":3077324,"event":"call","thread_id":13276700,"defined_class":"ConnectionPool::SharedConnectionPool","method_id":"flush","path":"app/lib/connection_pool/shared_connection_pool.rb","lineno":13,"static":false,"parameters":[{"name":"*","class":"Array","object_id":15068400,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":15068420,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"ConnectionPool::SharedConnectionPool","object_id":13276740,"value":"#<ConnectionPool::SharedConnectionPool:0x00007fc93772a698>"}},{"id":3077325,"event":"call","thread_id":13276700,"defined_class":"ConnectionPool::SharedTimedStack","method_id":"flush","path":"app/lib/connection_pool/shared_timed_stack.rb","lineno":51,"static":false,"parameters":[],"receiver":{"class":"ConnectionPool::SharedTimedStack","object_id":13276780,"value":"#<ConnectionPool::SharedTimedStack:0x00007fc93772a5a8>"}},{"id":3077326,"event":"return","thread_id":13276700,"parent_id":3077325,"elapsed":5.883979611098766e-06,"elapsed_instrumentation":6.991002010181546e-05,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":3077327,"event":"return","thread_id":13276700,"parent_id":3077324,"elapsed":9.471701923757792e-05,"elapsed_instrumentation":9.659602073952556e-05,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":3077328,"event":"return","thread_id":13276700,"parent_id":3077323,"elapsed":0.000210518017411232,"elapsed_instrumentation":0.0002916869707405567,"return_value":{"class":"Array","value":"[]","object_id":13277080,"size":0}},{"id":3077329,"event":"return","thread_id":9160,"parent_id":3077322,"elapsed":0.0011236650170758367,"elapsed_instrumentation":0.00012056197738274932,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":3077330,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15068440,"value":"Cache delete: relationship:111361447765053278:111361447765053277\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3077331,"event":"return","thread_id":9160,"parent_id":3077330,"elapsed":0.0006030089571140707,"elapsed_instrumentation":0.0001360190217383206,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":3077332,"event":"return","thread_id":9160,"parent_id":3077321,"elapsed":0.002283817040733993,"elapsed_instrumentation":0.00012640398927032948,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93274fa60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2848500,"size":1}},{"id":3077333,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"accounts\" INNER JOIN \"list_accounts\" ON \"accounts\".\"id\" = \"list_accounts\".\"account_id\" WHERE \"list_accounts\".\"list_id\" = $1","database_type":"postgres"}},{"id":3077334,"event":"return","thread_id":9160,"parent_id":3077333,"elapsed":0.001253783,"elapsed_instrumentation":0.00025429599918425083}]}