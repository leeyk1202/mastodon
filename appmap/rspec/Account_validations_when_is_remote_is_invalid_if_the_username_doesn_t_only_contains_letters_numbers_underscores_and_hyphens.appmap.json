{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Account validations when is remote is invalid if the username doesn't only contains letters, numbers, underscores and hyphens","source_location":"spec/models/account_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]}]},{"name":"validators","type":"package","children":[{"name":"UniqueUsernameValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/unique_username_validator.rb:6","static":false}]}]}]}],"events":[{"id":532315,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3345260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59d48>"}},{"id":532316,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532317,"event":"return","thread_id":9160,"parent_id":532316,"elapsed":2.3375003365799785e-05,"elapsed_instrumentation":0.00011829897994175553},{"id":532318,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":3345300,"value":"domain","kind":"req"}],"receiver":{"class":"TagManager","object_id":831360,"value":"#<TagManager:0x00007fdc08786ea0>"}},{"id":532319,"event":"return","thread_id":9160,"parent_id":532318,"elapsed":0.00038355198921635747,"elapsed_instrumentation":0.0001693870290182531,"return_value":{"class":"String","value":"domain","object_id":3345320}},{"id":532320,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532321,"event":"return","thread_id":9160,"parent_id":532320,"elapsed":1.0849005775526166e-05,"elapsed_instrumentation":9.905002661980689e-05},{"id":532322,"event":"return","thread_id":9160,"parent_id":532315,"elapsed":0.0009939619922079146,"elapsed_instrumentation":0.0003511690010782331,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa3ac30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b040 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b1f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b4c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":208720,"size":4}},{"id":532323,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3345340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208760,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59898>"}},{"id":532324,"event":"call","thread_id":9160,"defined_class":"UniqueUsernameValidator","method_id":"validate","path":"app/validators/unique_username_validator.rb","lineno":6,"static":false,"parameters":[{"name":"account","class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>","kind":"req"}],"receiver":{"class":"UniqueUsernameValidator","object_id":208780,"value":"#<UniqueUsernameValidator:0x00007fdc16b80188>"}},{"id":532325,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"accounts\" WHERE LOWER(\"accounts\".\"username\") = 'the doctor' AND LOWER(\"accounts\".\"domain\") = 'domain' LIMIT $1","database_type":"postgres"}},{"id":532326,"event":"return","thread_id":9160,"parent_id":532325,"elapsed":0.001264255,"elapsed_instrumentation":0.0001269080094061792},{"id":532327,"event":"return","thread_id":9160,"parent_id":532324,"elapsed":0.0028418579895514995,"elapsed_instrumentation":0.00018280299264006317},{"id":532328,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532329,"event":"return","thread_id":9160,"parent_id":532328,"elapsed":1.4015007764101028e-05,"elapsed_instrumentation":0.0001399899774696678},{"id":532330,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532331,"event":"return","thread_id":9160,"parent_id":532330,"elapsed":6.811699131503701e-05,"elapsed_instrumentation":0.00011613697279244661},{"id":532332,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532333,"event":"return","thread_id":9160,"parent_id":532332,"elapsed":1.024699304252863e-05,"elapsed_instrumentation":0.00011749501572921872},{"id":532334,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532335,"event":"return","thread_id":9160,"parent_id":532334,"elapsed":2.0208011846989393e-05,"elapsed_instrumentation":0.00011764396913349628},{"id":532336,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532337,"event":"return","thread_id":9160,"parent_id":532336,"elapsed":4.692003130912781e-06,"elapsed_instrumentation":6.780601688660681e-05},{"id":532338,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532339,"event":"return","thread_id":9160,"parent_id":532338,"elapsed":6.0019956436008215e-06,"elapsed_instrumentation":4.9256981583312154e-05},{"id":532340,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532341,"event":"return","thread_id":9160,"parent_id":532340,"elapsed":4.039990017190576e-06,"elapsed_instrumentation":4.7784007620066404e-05},{"id":532342,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532343,"event":"return","thread_id":9160,"parent_id":532342,"elapsed":4.28498606197536e-06,"elapsed_instrumentation":5.161200533621013e-05},{"id":532344,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532345,"event":"return","thread_id":9160,"parent_id":532344,"elapsed":4.917994374409318e-06,"elapsed_instrumentation":6.765901343896985e-05},{"id":532346,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532347,"event":"return","thread_id":9160,"parent_id":532346,"elapsed":1.5693018212914467e-05,"elapsed_instrumentation":8.022296242415905e-05},{"id":532348,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532349,"event":"return","thread_id":9160,"parent_id":532348,"elapsed":8.153991075232625e-06,"elapsed_instrumentation":8.820497896522284e-05},{"id":532350,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3345280,"value":"#<Account:0x00007fdc082a0148>"}},{"id":532351,"event":"return","thread_id":9160,"parent_id":532350,"elapsed":4.617002559825778e-06,"elapsed_instrumentation":5.686897202394903e-05},{"id":532352,"event":"return","thread_id":9160,"parent_id":532323,"elapsed":0.0066367569961585104,"elapsed_instrumentation":0.0009174809965770692,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa57768 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57920 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57ab0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57cb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58050 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58370 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58960 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58e10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa590e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa59360 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...61 more items)]","object_id":209280,"size":71}},{"id":532353,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3345340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208760,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59898>"}},{"id":532354,"event":"return","thread_id":9160,"parent_id":532353,"elapsed":5.155015969648957e-06,"elapsed_instrumentation":0.00015139300376176834,"return_value":{"class":"Array","value":"[]","object_id":209300,"size":0}},{"id":532355,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3345260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59d48>"}},{"id":532356,"event":"return","thread_id":9160,"parent_id":532355,"elapsed":1.1840980732813478e-05,"elapsed_instrumentation":0.00010641402332112193,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa3a730 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209320,"size":1}}]}