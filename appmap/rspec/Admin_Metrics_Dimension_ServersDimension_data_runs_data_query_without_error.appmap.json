{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::ServersDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/servers_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:61","static":false}]},{"name":"ServersDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/servers_dimension.rb:6","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/servers_dimension.rb:12","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/servers_dimension.rb:16","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/servers_dimension.rb:20","static":false},{"name":"earliest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/servers_dimension.rb:32","static":false},{"name":"latest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/servers_dimension.rb:36","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"Snowflake","type":"class","children":[{"name":"id_at","type":"function","location":"lib/mastodon/snowflake.rb:99","static":true}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":3219266,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219267,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219268,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219269,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::ServersDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/servers_dimension.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219270,"event":"return","thread_id":9160,"parent_id":3219269,"elapsed":3.7529971450567245e-06,"elapsed_instrumentation":0.00017276598373427987,"return_value":{"class":"String","value":"servers","object_id":15741700}},{"id":3219271,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219272,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":61,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219273,"event":"return","thread_id":9160,"parent_id":3219272,"elapsed":2.577959094196558e-06,"elapsed_instrumentation":7.134804036468267e-05,"return_value":{"class":"Hash","value":"{}","object_id":15741720,"size":0}},{"id":3219274,"event":"return","thread_id":9160,"parent_id":3219271,"elapsed":9.743397822603583e-05,"elapsed_instrumentation":7.182505214586854e-05,"return_value":{"class":"String","value":"","object_id":15741740}},{"id":3219275,"event":"return","thread_id":9160,"parent_id":3219268,"elapsed":0.00040984200313687325,"elapsed_instrumentation":6.029603537172079e-05,"return_value":{"class":"String","value":"metrics/dimension/servers;2023-11-04T03:22:17+00:00;2023-11-06T03:22:17+00:00;10;","object_id":15741760}},{"id":3219276,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15741780,"value":"Cache read: metrics/dimension/servers;2023-11-04T03:22:17+00:00;2023-11-06T03:22:17+00:00;10; ({:com (...66 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3219277,"event":"return","thread_id":9160,"parent_id":3219276,"elapsed":0.0005080419941805303,"elapsed_instrumentation":0.00012736005010083318,"return_value":{"class":"Integer","value":"166","object_id":333}},{"id":3219278,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15741800,"value":"Cache generate: metrics/dimension/servers;2023-11-04T03:22:17+00:00;2023-11-06T03:22:17+00:00;10; ({ (...70 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3219279,"event":"return","thread_id":9160,"parent_id":3219278,"elapsed":0.0004961439990438521,"elapsed_instrumentation":0.0001404089853167534,"return_value":{"class":"Integer","value":"170","object_id":341}},{"id":3219280,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::ServersDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/servers_dimension.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219281,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219282,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219283,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::ServersDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/servers_dimension.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219284,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::ServersDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/servers_dimension.rb","lineno":20,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219285,"event":"return","thread_id":9160,"parent_id":3219284,"elapsed":5.099800182506442e-05,"elapsed_instrumentation":8.652702672407031e-05,"return_value":{"class":"String","value":"SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuse (...141 more characters)","object_id":15741820}},{"id":3219286,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::ServersDimension","method_id":"earliest_status_id","path":"app/lib/admin/metrics/dimension/servers_dimension.rb","lineno":32,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219287,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":15741840,"value":"2023-11-04T03:22:17+00:00","kind":"req"},{"name":"with_random","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":3219288,"event":"return","thread_id":9160,"parent_id":3219287,"elapsed":2.1329964511096478e-05,"elapsed_instrumentation":0.00012091698590666056,"return_value":{"class":"Integer","value":"111350129441406736","object_id":222700258882813473}},{"id":3219289,"event":"return","thread_id":9160,"parent_id":3219286,"elapsed":0.0001699039712548256,"elapsed_instrumentation":7.697200635448098e-05,"return_value":{"class":"Integer","value":"111350129441406736","object_id":222700258882813473}},{"id":3219290,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::ServersDimension","method_id":"latest_status_id","path":"app/lib/admin/metrics/dimension/servers_dimension.rb","lineno":36,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::ServersDimension","object_id":15741680,"value":"#<Admin::Metrics::Dimension::ServersDimension:0x00007fc931cb6220>"}},{"id":3219291,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":15741860,"value":"2023-11-06T03:22:17+00:00","kind":"req"},{"name":"with_random","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":3219292,"event":"return","thread_id":9160,"parent_id":3219291,"elapsed":2.021098043769598e-05,"elapsed_instrumentation":0.0003300409880466759,"return_value":{"class":"Integer","value":"111361454102619754","object_id":222722908205239509}},{"id":3219293,"event":"return","thread_id":9160,"parent_id":3219290,"elapsed":0.00038062798557803035,"elapsed_instrumentation":8.013396291062236e-05,"return_value":{"class":"Integer","value":"111361454102619754","object_id":222722908205239509}},{"id":3219294,"event":"return","thread_id":9160,"parent_id":3219283,"elapsed":0.0008964129956439137,"elapsed_instrumentation":0.00017415703041478992,"return_value":{"class":"Array","value":"[SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuse (...141 more characters), {:earliest_status_id=>111350129441406736, :latest_status_id=>111361454102619754, :limit=>10}]","object_id":15741880,"size":2}},{"id":3219295,"event":"return","thread_id":9160,"parent_id":3219282,"elapsed":0.0011991130304522812,"elapsed_instrumentation":7.833598647266626e-05,"return_value":{"class":"String","value":"SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuse (...137 more characters)","object_id":15741900}},{"id":3219296,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT accounts.domain, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuses.account_id WHERE statuses.id BETWEEN 111350129441406736 AND 111361454102619754 GROUP BY accounts.domain ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":3219297,"event":"return","thread_id":9160,"parent_id":3219296,"elapsed":0.001453999,"elapsed_instrumentation":9.196798782795668e-05},{"id":3219298,"event":"return","thread_id":9160,"parent_id":3219281,"elapsed":0.003191005962435156,"elapsed_instrumentation":0.00013701204443350434,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc931cb4790>","object_id":15741920}},{"id":3219299,"event":"return","thread_id":9160,"parent_id":3219280,"elapsed":0.003365386975929141,"elapsed_instrumentation":0.0001942149829119444,"return_value":{"class":"Array","value":"[]","object_id":15741940,"size":0}},{"id":3219300,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":15741960,"value":"Cache write: metrics/dimension/servers;2023-11-04T03:22:17+00:00;2023-11-06T03:22:17+00:00;10; ({:co (...67 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3219301,"event":"return","thread_id":9160,"parent_id":3219300,"elapsed":0.0007570279994979501,"elapsed_instrumentation":0.0001382389455102384,"return_value":{"class":"Integer","value":"167","object_id":335}},{"id":3219302,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":15741980,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":3219303,"event":"return","thread_id":9160,"parent_id":3219302,"elapsed":9.22300387173891e-06,"elapsed_instrumentation":0.0001287449849769473,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":15742000}},{"id":3219304,"event":"return","thread_id":9160,"parent_id":3219267,"elapsed":0.00701974198454991,"elapsed_instrumentation":6.70100562274456e-05,"return_value":{"class":"Array","value":"[]","object_id":15741940,"size":0}},{"id":3219305,"event":"return","thread_id":9160,"parent_id":3219266,"elapsed":0.007107082987204194,"elapsed_instrumentation":0.0001230509951710701,"return_value":{"class":"Array","value":"[]","object_id":15741940,"size":0}}]}