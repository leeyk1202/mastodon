{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Webhook #disable! disables the webhook","source_location":"spec/models/webhook_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"validators","type":"package","children":[{"name":"URLValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/url_validator.rb:6","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Webhook","type":"class","children":[{"name":"disable!","type":"function","location":"app/models/webhook.rb:51","static":false}]}]}]}],"events":[{"id":1400881,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":210800,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":7500860,"value":"_K___a__gP_j\u0007a\\K"}},{"id":1400882,"event":"return","thread_id":9160,"parent_id":1400881,"elapsed":6.185990059748292e-06,"elapsed_instrumentation":0.0002513430081307888,"return_value":{"class":"String","value":"f44b92fe9261dc956750df6a07615c4b","object_id":7500880}},{"id":1400883,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7500900,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09578180>"}},{"id":1400884,"event":"return","thread_id":9160,"parent_id":1400883,"elapsed":0.00010468901018612087,"elapsed_instrumentation":0.0002572079829405993,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0b4d0848 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4d0dc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4d14f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2793260,"size":3}},{"id":1400885,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7500920,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09577fa0>"}},{"id":1400886,"event":"call","thread_id":9160,"defined_class":"URLValidator","method_id":"validate_each","path":"app/validators/url_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Webhook","object_id":7500940,"value":"#<Webhook:0x00007fdc0712c808>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1292188,"value":":url","kind":"req"},{"name":"value","class":"String","object_id":7500960,"value":"http://kub-white.example/alma.muller","kind":"req"}],"receiver":{"class":"URLValidator","object_id":2793360,"value":"#<URLValidator:0x00007fdc0f98c608>"}},{"id":1400887,"event":"return","thread_id":9160,"parent_id":1400886,"elapsed":0.0003474340192042291,"elapsed_instrumentation":0.0004801259783562273},{"id":1400888,"event":"return","thread_id":9160,"parent_id":1400885,"elapsed":0.0017777550092432648,"elapsed_instrumentation":0.0003731769975274801,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0b4f64a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f6818 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f6e80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f71f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f80a0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f8320 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f8758 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f9270 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f94f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2793380,"size":9}},{"id":1400889,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7500920,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09577fa0>"}},{"id":1400890,"event":"return","thread_id":9160,"parent_id":1400889,"elapsed":3.9000005926936865e-06,"elapsed_instrumentation":0.0002035579818766564,"return_value":{"class":"Array","value":"[]","object_id":2793400,"size":0}},{"id":1400891,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7500900,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09578180>"}},{"id":1400892,"event":"return","thread_id":9160,"parent_id":1400891,"elapsed":4.515983164310455e-06,"elapsed_instrumentation":0.00014211199595592916,"return_value":{"class":"Array","value":"[]","object_id":2793420,"size":0}},{"id":1400893,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1400894,"event":"return","thread_id":9160,"parent_id":1400893,"elapsed":0.001199556,"elapsed_instrumentation":0.00015911200898699462},{"id":1400895,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"webhooks\" (\"url\", \"events\", \"secret\", \"enabled\", \"created_at\", \"updated_at\", \"template\") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING \"id\"","database_type":"postgres"}},{"id":1400896,"event":"return","thread_id":9160,"parent_id":1400895,"elapsed":0.003571521,"elapsed_instrumentation":0.0004166970029473305},{"id":1400897,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1400898,"event":"return","thread_id":9160,"parent_id":1400897,"elapsed":0.000559471,"elapsed_instrumentation":9.869900532066822e-05},{"id":1400899,"event":"call","thread_id":9160,"defined_class":"Webhook","method_id":"disable!","path":"app/models/webhook.rb","lineno":51,"static":false,"parameters":[],"receiver":{"class":"Webhook","object_id":7500940,"value":"#<Webhook:0x00007fdc0712c808>"}},{"id":1400900,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7500980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09578180>"}},{"id":1400901,"event":"return","thread_id":9160,"parent_id":1400900,"elapsed":0.00023664900800213218,"elapsed_instrumentation":0.00021635598386637866,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0b4d0848 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4d0dc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4d14f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2793260,"size":3}},{"id":1400902,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7501000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09577fa0>"}},{"id":1400903,"event":"call","thread_id":9160,"defined_class":"URLValidator","method_id":"validate_each","path":"app/validators/url_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Webhook","object_id":7500940,"value":"#<Webhook:0x00007fdc0712c808>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1292188,"value":":url","kind":"req"},{"name":"value","class":"String","object_id":7501020,"value":"http://kub-white.example/alma.muller","kind":"req"}],"receiver":{"class":"URLValidator","object_id":2793360,"value":"#<URLValidator:0x00007fdc0f98c608>"}},{"id":1400904,"event":"return","thread_id":9160,"parent_id":1400903,"elapsed":0.0002683959901332855,"elapsed_instrumentation":0.0001817950396798551},{"id":1400905,"event":"return","thread_id":9160,"parent_id":1400902,"elapsed":0.000789229990914464,"elapsed_instrumentation":0.0002440859971102327,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0b4f64a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f6818 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f6e80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f71f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f80a0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f8320 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f8758 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f9270 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0b4f94f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2793380,"size":9}},{"id":1400906,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7501000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09577fa0>"}},{"id":1400907,"event":"return","thread_id":9160,"parent_id":1400906,"elapsed":4.182016709819436e-06,"elapsed_instrumentation":9.940596646629274e-05,"return_value":{"class":"Array","value":"[]","object_id":2793400,"size":0}},{"id":1400908,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7500980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2793240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09578180>"}},{"id":1400909,"event":"return","thread_id":9160,"parent_id":1400908,"elapsed":4.45000478066504e-06,"elapsed_instrumentation":0.00010960502550005913,"return_value":{"class":"Array","value":"[]","object_id":2793420,"size":0}},{"id":1400910,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1400911,"event":"return","thread_id":9160,"parent_id":1400910,"elapsed":0.000768319,"elapsed_instrumentation":0.0001044750097207725},{"id":1400912,"event":"call","thread_id":9160,"sql_query":{"sql":"UPDATE \"webhooks\" SET \"enabled\" = $1, \"updated_at\" = $2 WHERE \"webhooks\".\"id\" = $3","database_type":"postgres"}},{"id":1400913,"event":"return","thread_id":9160,"parent_id":1400912,"elapsed":0.002305643,"elapsed_instrumentation":7.661100244149566e-05},{"id":1400914,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1400915,"event":"return","thread_id":9160,"parent_id":1400914,"elapsed":0.000507989,"elapsed_instrumentation":8.01779970061034e-05},{"id":1400916,"event":"return","thread_id":9160,"parent_id":1400899,"elapsed":0.007898249983554706,"elapsed_instrumentation":0.0005433010228443891,"return_value":{"class":"TrueClass","value":"true","object_id":20}}]}