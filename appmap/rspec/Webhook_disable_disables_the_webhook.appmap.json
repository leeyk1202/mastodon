{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Webhook #disable! disables the webhook","source_location":"spec/models/webhook_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"validators","type":"package","children":[{"name":"URLValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/url_validator.rb:6","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Webhook","type":"class","children":[{"name":"disable!","type":"function","location":"app/models/webhook.rb:51","static":false}]}]}]}],"events":[{"id":131581,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":319240,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":1061340,"value":"__{(___\u000b___\u0013M\t__"}},{"id":131582,"event":"return","thread_id":9160,"parent_id":131581,"elapsed":6.06500543653965e-06,"elapsed_instrumentation":0.0002044540597125888,"return_value":{"class":"String","value":"daba7b28ba99f60b83ddd7134d09dfbf","object_id":1061360}},{"id":131583,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062540,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062560,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1fe8>"}},{"id":131584,"event":"return","thread_id":9160,"parent_id":131583,"elapsed":0.000107796979136765,"elapsed_instrumentation":0.0003168319817632437,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933157800 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933157940 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933157a80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1062580,"size":3}},{"id":131585,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062600,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1e08>"}},{"id":131586,"event":"call","thread_id":9160,"defined_class":"URLValidator","method_id":"validate_each","path":"app/validators/url_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Webhook","object_id":1062640,"value":"#<Webhook:0x00007fc93319db20>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1292188,"value":":url","kind":"req"},{"name":"value","class":"String","object_id":1062660,"value":"http://leuschke-walker.test/lashawn","kind":"req"}],"receiver":{"class":"URLValidator","object_id":1062680,"value":"#<URLValidator:0x00007fc9385cace8>"}},{"id":131587,"event":"return","thread_id":9160,"parent_id":131586,"elapsed":0.000185142969712615,"elapsed_instrumentation":0.000144082005135715},{"id":131588,"event":"return","thread_id":9160,"parent_id":131585,"elapsed":0.0005401829839684069,"elapsed_instrumentation":0.000405944068916142,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9331554d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155870 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155a50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155c30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155e10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155ff0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933156130 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933156270 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1062700,"size":9}},{"id":131589,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062600,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1e08>"}},{"id":131590,"event":"return","thread_id":9160,"parent_id":131589,"elapsed":4.299974534660578e-06,"elapsed_instrumentation":0.0001450510462746024,"return_value":{"class":"Array","value":"[]","object_id":1062720,"size":0}},{"id":131591,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062540,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062560,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1fe8>"}},{"id":131592,"event":"return","thread_id":9160,"parent_id":131591,"elapsed":2.729007974267006e-06,"elapsed_instrumentation":8.454197086393833e-05,"return_value":{"class":"Array","value":"[]","object_id":1062740,"size":0}},{"id":131593,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":131594,"event":"return","thread_id":9160,"parent_id":131593,"elapsed":0.000541487,"elapsed_instrumentation":0.00010115094482898712},{"id":131595,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"webhooks\" (\"url\", \"events\", \"secret\", \"enabled\", \"created_at\", \"updated_at\", \"template\") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING \"id\"","database_type":"postgres"}},{"id":131596,"event":"return","thread_id":9160,"parent_id":131595,"elapsed":0.002090453,"elapsed_instrumentation":8.966197492554784e-05},{"id":131597,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":131598,"event":"return","thread_id":9160,"parent_id":131597,"elapsed":0.000471477,"elapsed_instrumentation":0.0002415049821138382},{"id":131599,"event":"call","thread_id":9160,"defined_class":"Webhook","method_id":"disable!","path":"app/models/webhook.rb","lineno":51,"static":false,"parameters":[],"receiver":{"class":"Webhook","object_id":1062640,"value":"#<Webhook:0x00007fc93319db20>"}},{"id":131600,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062560,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1fe8>"}},{"id":131601,"event":"return","thread_id":9160,"parent_id":131600,"elapsed":0.00030174502171576023,"elapsed_instrumentation":0.0001978430082090199,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933157800 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933157940 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933157a80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1062580,"size":3}},{"id":131602,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1e08>"}},{"id":131603,"event":"call","thread_id":9160,"defined_class":"URLValidator","method_id":"validate_each","path":"app/validators/url_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Webhook","object_id":1062640,"value":"#<Webhook:0x00007fc93319db20>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1292188,"value":":url","kind":"req"},{"name":"value","class":"String","object_id":1062800,"value":"http://leuschke-walker.test/lashawn","kind":"req"}],"receiver":{"class":"URLValidator","object_id":1062680,"value":"#<URLValidator:0x00007fc9385cace8>"}},{"id":131604,"event":"return","thread_id":9160,"parent_id":131603,"elapsed":0.00019422703189775348,"elapsed_instrumentation":0.00013255898375064135},{"id":131605,"event":"return","thread_id":9160,"parent_id":131602,"elapsed":0.0007328650099225342,"elapsed_instrumentation":0.0002553759841248393,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9331554d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155870 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155a50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155c30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155e10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933155ff0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933156130 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933156270 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1062700,"size":9}},{"id":131606,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1e08>"}},{"id":131607,"event":"return","thread_id":9160,"parent_id":131606,"elapsed":4.610046744346619e-06,"elapsed_instrumentation":0.00011475000064820051,"return_value":{"class":"Array","value":"[]","object_id":1062720,"size":0}},{"id":131608,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":1062760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1062560,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc930ba1fe8>"}},{"id":131609,"event":"return","thread_id":9160,"parent_id":131608,"elapsed":5.687004886567593e-06,"elapsed_instrumentation":0.00015423900913447142,"return_value":{"class":"Array","value":"[]","object_id":1062740,"size":0}},{"id":131610,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":131611,"event":"return","thread_id":9160,"parent_id":131610,"elapsed":0.000635643,"elapsed_instrumentation":0.00010077201295644045},{"id":131612,"event":"call","thread_id":9160,"sql_query":{"sql":"UPDATE \"webhooks\" SET \"enabled\" = $1, \"updated_at\" = $2 WHERE \"webhooks\".\"id\" = $3","database_type":"postgres"}},{"id":131613,"event":"return","thread_id":9160,"parent_id":131612,"elapsed":0.001747009,"elapsed_instrumentation":9.105197386816144e-05},{"id":131614,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":131615,"event":"return","thread_id":9160,"parent_id":131614,"elapsed":0.000429436,"elapsed_instrumentation":8.190603693947196e-05},{"id":131616,"event":"return","thread_id":9160,"parent_id":131599,"elapsed":0.00766321801347658,"elapsed_instrumentation":0.00022980599896982312,"return_value":{"class":"TrueClass","value":"true","object_id":20}}]}