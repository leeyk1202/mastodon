{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::Media #remove with a relevant account with --prune-profiles removes account avatars","source_location":"spec/lib/mastodon/cli/media_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib","type":"package","children":[{"name":"mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"Media","type":"class","children":[{"name":"remove","type":"function","location":"lib/mastodon/cli/media.rb:33","static":false}]},{"name":"ProgressHelper","type":"class","children":[{"name":"parallelize_with_progress","type":"function","location":"lib/mastodon/cli/progress_helper.rb:27","static":false},{"name":"create_progress_bar","type":"function","location":"lib/mastodon/cli/progress_helper.rb:18","static":false}]}]}]}]},{"name":"paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false},{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false}]}]}]},{"name":"chewy","type":"package","children":[{"name":"strategy","type":"package","children":[{"name":"Chewy","type":"class","children":[{"name":"Strategy","type":"class","children":[{"name":"Mastodon","type":"class","children":[{"name":"update","type":"function","location":"lib/chewy/strategy/mastodon.rb:12","static":false},{"name":"leave","type":"function","location":"lib/chewy/strategy/mastodon.rb:16","static":false}]}]}]}]},{"name":"Chewy","type":"class","children":[{"name":"SettingsExtensions","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/chewy/settings_extensions.rb:5","static":true}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]},{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true},{"name":"connection","type":"function","location":"app/lib/redis_configuration.rb:25","static":false},{"name":"namespace?","type":"function","location":"app/lib/redis_configuration.rb:33","static":false},{"name":"namespace","type":"function","location":"app/lib/redis_configuration.rb:37","static":false},{"name":"url","type":"function","location":"app/lib/redis_configuration.rb:41","static":false}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]}]}]}],"events":[{"id":396464,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::Media","method_id":"remove","path":"lib/mastodon/cli/media.rb","lineno":33,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::Media","object_id":2820140,"value":"#<Mastodon::CLI::Media:0x00007fc9309e2bd0>"}},{"id":396465,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"parallelize_with_progress","path":"lib/mastodon/cli/progress_helper.rb","lineno":27,"static":false,"parameters":[{"name":"scope","class":"ActiveRecord::Relation","object_id":2820160,"value":"#<Account::ActiveRecord_Relation:0x00007fc919b206f8>","kind":"req"}],"receiver":{"class":"Mastodon::CLI::Media","object_id":2820140,"value":"#<Mastodon::CLI::Media:0x00007fc9309e2bd0>"}},{"id":396466,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"accounts\" WHERE \"accounts\".\"domain\" IS NOT NULL AND \"accounts\".\"last_webfingered_at\" <= $1 AND \"accounts\".\"updated_at\" <= $2","database_type":"postgres"}},{"id":396467,"event":"return","thread_id":9160,"parent_id":396466,"elapsed":0.001289574,"elapsed_instrumentation":0.0001212179777212441},{"id":396468,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":3,"value":"1","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::Media","object_id":2820140,"value":"#<Mastodon::CLI::Media:0x00007fc9309e2bd0>"}},{"id":396469,"event":"return","thread_id":9160,"parent_id":396468,"elapsed":0.0001592240296304226,"elapsed_instrumentation":0.00028579303761944175,"return_value":{"class":"ProgressBar::Base","value":"","object_id":2820180}},{"id":396470,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"domain\" IS NOT NULL AND \"accounts\".\"last_webfingered_at\" <= $1 AND \"accounts\".\"updated_at\" <= $2 ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":396471,"event":"return","thread_id":9160,"parent_id":396470,"elapsed":0.001025051,"elapsed_instrumentation":9.755900828167796e-05},{"id":396472,"event":"call","thread_id":2820200,"sql_query":{"sql":"SELECT 1 AS one FROM \"follows\" WHERE (\"follows\".\"account_id\" = $1 OR \"follows\".\"target_account_id\" = $2) LIMIT $3","database_type":"postgres"}},{"id":396473,"event":"return","thread_id":2820200,"parent_id":396472,"elapsed":0.000835436,"elapsed_instrumentation":9.012199006974697e-05},{"id":396474,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820220,"value":"/system/cache/accounts/headers/111/361/339/866/531/548/original/attachment.jpg"}},{"id":396475,"event":"return","thread_id":2820200,"parent_id":396474,"elapsed":1.2598000466823578e-05,"elapsed_instrumentation":0.0005015659844502807,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396476,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396477,"event":"return","thread_id":2820200,"parent_id":396476,"elapsed":4.8140063881874084e-06,"elapsed_instrumentation":7.440999615937471e-05},{"id":396478,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820220,"value":"/system/cache/accounts/headers/111/361/339/866/531/548/original/attachment.jpg"}},{"id":396479,"event":"return","thread_id":2820200,"parent_id":396478,"elapsed":1.6042031347751617e-05,"elapsed_instrumentation":0.0006637410260736942,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396480,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396481,"event":"return","thread_id":2820200,"parent_id":396480,"elapsed":6.099988240748644e-06,"elapsed_instrumentation":7.550400914624333e-05},{"id":396482,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820220,"value":"/headers/original/missing.png"}},{"id":396483,"event":"return","thread_id":2820200,"parent_id":396482,"elapsed":0.009446150972507894,"elapsed_instrumentation":0.00017230201046913862,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396484,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820260,"value":"/system/cache/accounts/avatars/111/361/339/866/531/548/original/attachment.jpg"}},{"id":396485,"event":"return","thread_id":2820200,"parent_id":396484,"elapsed":1.2878968846052885e-05,"elapsed_instrumentation":0.0003481519524939358,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396486,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396487,"event":"return","thread_id":2820200,"parent_id":396486,"elapsed":1.4377990737557411e-05,"elapsed_instrumentation":0.0003454350517131388},{"id":396488,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820260,"value":"/system/cache/accounts/avatars/111/361/339/866/531/548/original/attachment.jpg"}},{"id":396489,"event":"return","thread_id":2820200,"parent_id":396488,"elapsed":1.1589028872549534e-05,"elapsed_instrumentation":0.0005548479384742677,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396490,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396491,"event":"return","thread_id":2820200,"parent_id":396490,"elapsed":7.552036549896002e-06,"elapsed_instrumentation":0.00013083004159852862},{"id":396492,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820260,"value":"/avatars/original/missing.png"}},{"id":396493,"event":"return","thread_id":2820200,"parent_id":396492,"elapsed":0.01541977800661698,"elapsed_instrumentation":0.000393562950193882,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396494,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323120,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b470>"}},{"id":396495,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396496,"event":"return","thread_id":2820200,"parent_id":396495,"elapsed":1.7072015907615423e-05,"elapsed_instrumentation":0.00017249304801225662},{"id":396497,"event":"call","thread_id":2820200,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":2820300,"value":"example.com","kind":"req"}],"receiver":{"class":"TagManager","object_id":521840,"value":"#<TagManager:0x00007fc93503aec0>"}},{"id":396498,"event":"return","thread_id":2820200,"parent_id":396497,"elapsed":0.00017615401884540915,"elapsed_instrumentation":0.00040419999277219176,"return_value":{"class":"String","value":"example.com","object_id":2820320}},{"id":396499,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396500,"event":"return","thread_id":2820200,"parent_id":396499,"elapsed":1.8407008610665798e-05,"elapsed_instrumentation":0.00012624001828953624},{"id":396501,"event":"return","thread_id":2820200,"parent_id":396494,"elapsed":0.0016663489514030516,"elapsed_instrumentation":0.0008691539987921715,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939b28e78 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939b29ad0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939b29ee0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939b2b5d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323140,"size":4}},{"id":396502,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b330>"}},{"id":396503,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396504,"event":"return","thread_id":2820200,"parent_id":396503,"elapsed":1.1579017154872417e-05,"elapsed_instrumentation":0.0001393379643559456},{"id":396505,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396506,"event":"return","thread_id":2820200,"parent_id":396505,"elapsed":9.744020644575357e-06,"elapsed_instrumentation":0.00011718296445906162},{"id":396507,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396508,"event":"return","thread_id":2820200,"parent_id":396507,"elapsed":9.041978046298027e-06,"elapsed_instrumentation":9.669800056144595e-05},{"id":396509,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396510,"event":"return","thread_id":2820200,"parent_id":396509,"elapsed":1.0307994671165943e-05,"elapsed_instrumentation":0.0004951410228386521},{"id":396511,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396512,"event":"return","thread_id":2820200,"parent_id":396511,"elapsed":8.666946087032557e-06,"elapsed_instrumentation":0.00010034901788458228},{"id":396513,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396514,"event":"return","thread_id":2820200,"parent_id":396513,"elapsed":9.767012670636177e-06,"elapsed_instrumentation":0.00010080699576064944},{"id":396515,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396516,"event":"return","thread_id":2820200,"parent_id":396515,"elapsed":8.476024959236383e-06,"elapsed_instrumentation":0.00011787400580942631},{"id":396517,"event":"return","thread_id":2820200,"parent_id":396502,"elapsed":0.0031316179665736854,"elapsed_instrumentation":0.0007168390438891947,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939c310e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c31f90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c320d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c32210 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c32468 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c325f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c32a08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c33110 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c337f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c33980 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...61 more items)]","object_id":323620,"size":71}},{"id":396518,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b330>"}},{"id":396519,"event":"return","thread_id":2820200,"parent_id":396518,"elapsed":6.565009243786335e-06,"elapsed_instrumentation":0.000224602990783751,"return_value":{"class":"Array","value":"[]","object_id":323640,"size":0}},{"id":396520,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323120,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b470>"}},{"id":396521,"event":"return","thread_id":2820200,"parent_id":396520,"elapsed":2.0327046513557434e-05,"elapsed_instrumentation":0.00017614196985960007,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939b28b08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323660,"size":1}},{"id":396522,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323700,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938226fb0>"}},{"id":396523,"event":"return","thread_id":2820200,"parent_id":396522,"elapsed":0.00021565501810982823,"elapsed_instrumentation":0.00022210797760635614,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93912dae0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323720,"size":1}},{"id":396524,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938227050>"}},{"id":396525,"event":"return","thread_id":2820200,"parent_id":396524,"elapsed":5.654001142829657e-06,"elapsed_instrumentation":0.00017078296514227986,"return_value":{"class":"Array","value":"[]","object_id":323760,"size":0}},{"id":396526,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":521940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931f1bf10>"}},{"id":396527,"event":"return","thread_id":2820200,"parent_id":396526,"elapsed":5.807029083371162e-06,"elapsed_instrumentation":0.00019407999934628606,"return_value":{"class":"Array","value":"[]","object_id":521960,"size":0}},{"id":396528,"event":"call","thread_id":2820200,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":396529,"event":"return","thread_id":2820200,"parent_id":396528,"elapsed":0.000877372,"elapsed_instrumentation":0.0001651920028962195},{"id":396530,"event":"call","thread_id":2820200,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":319240,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":2820400,"value":"|___D9_l5_"}},{"id":396531,"event":"return","thread_id":2820200,"parent_id":396530,"elapsed":8.635979611426592e-06,"elapsed_instrumentation":0.0003167139948345721,"return_value":{"class":"String","value":"7c84debb4439936c35cc","object_id":2820420}},{"id":396532,"event":"call","thread_id":2820200,"sql_query":{"sql":"UPDATE \"accounts\" SET \"updated_at\" = $1, \"avatar_file_name\" = $2, \"avatar_content_type\" = $3, \"avatar_file_size\" = $4, \"avatar_updated_at\" = $5, \"header_file_name\" = $6, \"header_content_type\" = $7, \"header_file_size\" = $8, \"header_updated_at\" = $9 WHERE \"accounts\".\"id\" = $10","database_type":"postgres"}},{"id":396533,"event":"return","thread_id":2820200,"parent_id":396532,"elapsed":0.003581871,"elapsed_instrumentation":0.00014515197835862637},{"id":396534,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":521940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931f1bf10>"}},{"id":396535,"event":"return","thread_id":2820200,"parent_id":396534,"elapsed":0.00042948604095727205,"elapsed_instrumentation":0.0006213579908944666,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932760158 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270ff78 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270fdc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270fc08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270fa50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f898 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f6e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f528 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f370 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f1b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...43 more items)]","object_id":521980,"size":53}},{"id":396536,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938227050>"}},{"id":396537,"event":"return","thread_id":2820200,"parent_id":396536,"elapsed":4.576984792947769e-06,"elapsed_instrumentation":0.00014247902436181903,"return_value":{"class":"Array","value":"[]","object_id":325460,"size":0}},{"id":396538,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323700,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938226fb0>"}},{"id":396539,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820260,"value":"/avatars/original/missing.png"}},{"id":396540,"event":"return","thread_id":2820200,"parent_id":396539,"elapsed":2.362800296396017e-05,"elapsed_instrumentation":0.0001989239826798439,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396541,"event":"call","thread_id":2820200,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820220,"value":"/headers/original/missing.png"}},{"id":396542,"event":"return","thread_id":2820200,"parent_id":396541,"elapsed":1.3850978575646877e-05,"elapsed_instrumentation":0.00014596502296626568,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396543,"event":"call","thread_id":2820200,"defined_class":"Chewy::Strategy::Mastodon","method_id":"update","path":"lib/chewy/strategy/mastodon.rb","lineno":12,"static":false,"parameters":[{"name":"type","class":"Class","object_id":2689660,"value":"AccountsIndex","kind":"req"},{"name":"objects","class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>","kind":"req"},{"name":"_options","class":"Hash","object_id":2689680,"value":"{}","kind":"opt","size":0}],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":2820440,"value":"#<Chewy::Strategy::Mastodon:0x00007fc9338b18d0>"}},{"id":396544,"event":"call","thread_id":2820200,"defined_class":"Chewy::SettingsExtensions","method_id":"enabled?","path":"lib/chewy/settings_extensions.rb","lineno":5,"static":true,"parameters":[],"receiver":{"class":"Module","object_id":688920,"value":"Chewy"}},{"id":396545,"event":"return","thread_id":2820200,"parent_id":396544,"elapsed":1.4767982065677643e-05,"elapsed_instrumentation":9.927299106493592e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396546,"event":"return","thread_id":2820200,"parent_id":396543,"elapsed":0.0002007220173254609,"elapsed_instrumentation":0.00018620997434481978,"return_value":{"class":"Array","value":"[111361339866531548]","object_id":2820460,"size":1}},{"id":396547,"event":"return","thread_id":2820200,"parent_id":396538,"elapsed":0.001370601006783545,"elapsed_instrumentation":0.00012688396964222193,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939129148 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939125ef8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939121470 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939120b88 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":325520,"size":4}},{"id":396548,"event":"call","thread_id":2820200,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":396549,"event":"return","thread_id":2820200,"parent_id":396548,"elapsed":0.000633517,"elapsed_instrumentation":0.00032237102277576923},{"id":396550,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":328280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9378db2d0>"}},{"id":396551,"event":"return","thread_id":2820200,"parent_id":396550,"elapsed":3.742985427379608e-06,"elapsed_instrumentation":0.00012014398816972971,"return_value":{"class":"Array","value":"[]","object_id":328300,"size":0}},{"id":396552,"event":"call","thread_id":2820200,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":328280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9378db2d0>"}},{"id":396553,"event":"call","thread_id":2820200,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820240,"value":"#<Account:0x00007fc919a9fb48>"}},{"id":396554,"event":"return","thread_id":2820200,"parent_id":396553,"elapsed":1.7952988855540752e-05,"elapsed_instrumentation":6.4683030359447e-05},{"id":396555,"event":"return","thread_id":2820200,"parent_id":396552,"elapsed":0.00016374996630474925,"elapsed_instrumentation":0.00022700405679643154,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc938945850 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938942a10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855fba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855f0b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855ebb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855de40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":328320,"size":6}},{"id":396556,"event":"call","thread_id":2820200,"defined_class":"Chewy::Strategy::Mastodon","method_id":"leave","path":"lib/chewy/strategy/mastodon.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":2820440,"value":"#<Chewy::Strategy::Mastodon:0x00007fc9338b18d0>"}},{"id":396557,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":2820500,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2820520,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":396558,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":396559,"event":"return","thread_id":2820200,"parent_id":396558,"elapsed":2.896005753427744e-06,"elapsed_instrumentation":8.370500290766358e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":396560,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"connection","path":"app/lib/redis_configuration.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"RedisConfiguration","object_id":2820540,"value":"#<RedisConfiguration:0x00007fc93380eba8>"}},{"id":396561,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"namespace?","path":"app/lib/redis_configuration.rb","lineno":33,"static":false,"parameters":[],"receiver":{"class":"RedisConfiguration","object_id":2820540,"value":"#<RedisConfiguration:0x00007fc93380eba8>"}},{"id":396562,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"namespace","path":"app/lib/redis_configuration.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"RedisConfiguration","object_id":2820540,"value":"#<RedisConfiguration:0x00007fc93380eba8>"}},{"id":396563,"event":"return","thread_id":2820200,"parent_id":396562,"elapsed":6.8829976953566074e-06,"elapsed_instrumentation":0.00012512796092778444,"return_value":{"class":"String","value":"mastodon_test","object_id":2820560}},{"id":396564,"event":"return","thread_id":2820200,"parent_id":396561,"elapsed":0.00016688398318365216,"elapsed_instrumentation":0.0003118279273621738,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396565,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"namespace","path":"app/lib/redis_configuration.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"RedisConfiguration","object_id":2820540,"value":"#<RedisConfiguration:0x00007fc93380eba8>"}},{"id":396566,"event":"return","thread_id":2820200,"parent_id":396565,"elapsed":9.213981684297323e-06,"elapsed_instrumentation":0.00012823997531086206,"return_value":{"class":"String","value":"mastodon_test","object_id":2820580}},{"id":396567,"event":"call","thread_id":2820200,"defined_class":"RedisConfiguration","method_id":"url","path":"app/lib/redis_configuration.rb","lineno":41,"static":false,"parameters":[],"receiver":{"class":"RedisConfiguration","object_id":2820540,"value":"#<RedisConfiguration:0x00007fc93380eba8>"}},{"id":396568,"event":"return","thread_id":2820200,"parent_id":396567,"elapsed":8.299015462398529e-06,"elapsed_instrumentation":0.00015132402768358588,"return_value":{"class":"String","value":"redis://redis:6379/0","object_id":2820600}},{"id":396569,"event":"return","thread_id":2820200,"parent_id":396560,"elapsed":0.0012429680209606886,"elapsed_instrumentation":0.0001562790130265057,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fc930a46720>","object_id":2820620}},{"id":396570,"event":"return","thread_id":2820200,"parent_id":396557,"elapsed":0.003544639970641583,"elapsed_instrumentation":0.00047006498789414763,"return_value":{"class":"Array","value":"[1]","object_id":2820640,"size":1}},{"id":396571,"event":"return","thread_id":2820200,"parent_id":396556,"elapsed":0.004042776010464877,"elapsed_instrumentation":0.00012498698197305202,"return_value":{"class":"Array","value":"[1]","object_id":2820640,"size":1}},{"id":396572,"event":"return","thread_id":9160,"parent_id":396465,"elapsed":0.07135565800126642,"elapsed_instrumentation":0.0005572520312853158,"return_value":{"class":"Array","value":"[1, 122044]","object_id":2820660,"size":2}},{"id":396573,"event":"return","thread_id":9160,"parent_id":396464,"elapsed":0.07471833698218688,"elapsed_instrumentation":0.00015989301027730107},{"id":396574,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":396575,"event":"return","thread_id":9160,"parent_id":396574,"elapsed":0.001255049,"elapsed_instrumentation":0.00012050900841131806}]}