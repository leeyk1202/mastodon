{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::LanguagesDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/languages_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:61","static":false}]},{"name":"LanguagesDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:7","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:13","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:17","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:21","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":533893,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533894,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533895,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533896,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":7,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533897,"event":"return","thread_id":9160,"parent_id":533896,"elapsed":3.470981027930975e-06,"elapsed_instrumentation":9.82200144790113e-05,"return_value":{"class":"String","value":"languages","object_id":3604360}},{"id":533898,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533899,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":61,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533900,"event":"return","thread_id":9160,"parent_id":533899,"elapsed":2.770975697785616e-06,"elapsed_instrumentation":8.672598050907254e-05,"return_value":{"class":"Hash","value":"{}","object_id":3604380,"size":0}},{"id":533901,"event":"return","thread_id":9160,"parent_id":533898,"elapsed":0.0001174050266854465,"elapsed_instrumentation":8.287501987069845e-05,"return_value":{"class":"String","value":"","object_id":3604400}},{"id":533902,"event":"return","thread_id":9160,"parent_id":533895,"elapsed":0.00037004699697718024,"elapsed_instrumentation":0.00012553692795336246,"return_value":{"class":"String","value":"metrics/dimension/languages;2023-11-04T02:54:47+00:00;2023-11-06T02:54:47+00:00;10;","object_id":3604420}},{"id":533903,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3604440,"value":"Cache read: metrics/dimension/languages;2023-11-04T02:54:47+00:00;2023-11-06T02:54:47+00:00;10; ({:c (...68 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":533904,"event":"return","thread_id":9160,"parent_id":533903,"elapsed":0.0009608970140106976,"elapsed_instrumentation":0.0003262369427829981,"return_value":{"class":"Integer","value":"168","object_id":337}},{"id":533905,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3604460,"value":"Cache generate: metrics/dimension/languages;2023-11-04T02:54:47+00:00;2023-11-06T02:54:47+00:00;10;  (...72 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":533906,"event":"return","thread_id":9160,"parent_id":533905,"elapsed":0.0006399530102498829,"elapsed_instrumentation":0.00023251300444826484,"return_value":{"class":"Integer","value":"172","object_id":345}},{"id":533907,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":13,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533908,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533909,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533910,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":17,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533911,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":3604340,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fc9347df320>"}},{"id":533912,"event":"return","thread_id":9160,"parent_id":533911,"elapsed":5.6210963521152735e-05,"elapsed_instrumentation":8.089508628472686e-05,"return_value":{"class":"String","value":"SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN :start_at AND :end_at A (...73 more characters)","object_id":3604480}},{"id":533913,"event":"return","thread_id":9160,"parent_id":533910,"elapsed":0.00015640200581401587,"elapsed_instrumentation":0.0001481400104239583,"return_value":{"class":"Array","value":"[SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN :start_at AND :end_at A (...73 more characters), {:start_at=>2023-11-04T02:54:47+00:00, :end_at=>2023-11-06T02:54:47+00:00, :limit=>10}]","object_id":3604500,"size":2}},{"id":533914,"event":"return","thread_id":9160,"parent_id":533909,"elapsed":0.0007228240137919784,"elapsed_instrumentation":0.00010818999726325274,"return_value":{"class":"String","value":"SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN '2023-11-04 02:54:47.71 (...109 more characters)","object_id":3604520}},{"id":533915,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN '2023-11-04 02:54:47.716662' AND '2023-11-06 02:54:47.716838' AND locale IS NOT NULL GROUP BY locale ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":533916,"event":"return","thread_id":9160,"parent_id":533915,"elapsed":0.001147239,"elapsed_instrumentation":0.0001298509887419641},{"id":533917,"event":"return","thread_id":9160,"parent_id":533908,"elapsed":0.002911208022851497,"elapsed_instrumentation":0.0001616699737496674,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc9347dbbd0>","object_id":3604540}},{"id":533918,"event":"return","thread_id":9160,"parent_id":533907,"elapsed":0.0031196560012176633,"elapsed_instrumentation":0.00014575303066521883,"return_value":{"class":"Array","value":"[]","object_id":3604560,"size":0}},{"id":533919,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3604580,"value":"Cache write: metrics/dimension/languages;2023-11-04T02:54:47+00:00;2023-11-06T02:54:47+00:00;10; ({: (...69 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":533920,"event":"return","thread_id":9160,"parent_id":533919,"elapsed":0.0006617840263061225,"elapsed_instrumentation":0.00018671498401090503,"return_value":{"class":"Integer","value":"169","object_id":339}},{"id":533921,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":3604600,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":533922,"event":"return","thread_id":9160,"parent_id":533921,"elapsed":1.6626028809696436e-05,"elapsed_instrumentation":0.0002397960051894188,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":3604620}},{"id":533923,"event":"return","thread_id":9160,"parent_id":533894,"elapsed":0.007967785000801086,"elapsed_instrumentation":0.00028298498364165425,"return_value":{"class":"Array","value":"[]","object_id":3604560,"size":0}},{"id":533924,"event":"return","thread_id":9160,"parent_id":533893,"elapsed":0.008277091023046523,"elapsed_instrumentation":0.00017295096768066287,"return_value":{"class":"Array","value":"[]","object_id":3604560,"size":0}}]}