{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::LanguagesDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/languages_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:61","static":false}]},{"name":"LanguagesDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:7","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:13","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:17","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/languages_dimension.rb:21","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":792942,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792943,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792944,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792945,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":7,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792946,"event":"return","thread_id":9160,"parent_id":792945,"elapsed":7.5998977990821e-05,"elapsed_instrumentation":0.0001744690234772861,"return_value":{"class":"String","value":"languages","object_id":4855940}},{"id":792947,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792948,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":61,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792949,"event":"return","thread_id":9160,"parent_id":792948,"elapsed":4.276022082194686e-06,"elapsed_instrumentation":0.00015823898138478398,"return_value":{"class":"Hash","value":"{}","object_id":4855960,"size":0}},{"id":792950,"event":"return","thread_id":9160,"parent_id":792947,"elapsed":0.00020355498418211937,"elapsed_instrumentation":0.00043627602281048894,"return_value":{"class":"String","value":"","object_id":4855980}},{"id":792951,"event":"return","thread_id":9160,"parent_id":792944,"elapsed":0.0010034760052803904,"elapsed_instrumentation":0.0001449190021958202,"return_value":{"class":"String","value":"metrics/dimension/languages;2023-11-03T23:13:14+00:00;2023-11-05T23:13:14+00:00;10;","object_id":4856000}},{"id":792952,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":4856020,"value":"Cache read: metrics/dimension/languages;2023-11-03T23:13:14+00:00;2023-11-05T23:13:14+00:00;10; ({:c (...68 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":792953,"event":"return","thread_id":9160,"parent_id":792952,"elapsed":0.004520771995885298,"elapsed_instrumentation":0.0004258010012563318,"return_value":{"class":"Integer","value":"168","object_id":337}},{"id":792954,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":4856040,"value":"Cache generate: metrics/dimension/languages;2023-11-03T23:13:14+00:00;2023-11-05T23:13:14+00:00;10;  (...72 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":792955,"event":"return","thread_id":9160,"parent_id":792954,"elapsed":0.0028421549941413105,"elapsed_instrumentation":0.00036560496664606035,"return_value":{"class":"Integer","value":"172","object_id":345}},{"id":792956,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":13,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792957,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792958,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792959,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":17,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792960,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::LanguagesDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/languages_dimension.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::LanguagesDimension","object_id":4855920,"value":"#<Admin::Metrics::Dimension::LanguagesDimension:0x00007fdc08e1f870>"}},{"id":792961,"event":"return","thread_id":9160,"parent_id":792960,"elapsed":6.127799861133099e-05,"elapsed_instrumentation":8.269297541119158e-05,"return_value":{"class":"String","value":"SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN :start_at AND :end_at A (...73 more characters)","object_id":4856060}},{"id":792962,"event":"return","thread_id":9160,"parent_id":792959,"elapsed":0.0001635549997445196,"elapsed_instrumentation":0.00016100401990115643,"return_value":{"class":"Array","value":"[SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN :start_at AND :end_at A (...73 more characters), {:start_at=>2023-11-03T23:13:14+00:00, :end_at=>2023-11-05T23:13:14+00:00, :limit=>10}]","object_id":4856080,"size":2}},{"id":792963,"event":"return","thread_id":9160,"parent_id":792958,"elapsed":0.0005183049943298101,"elapsed_instrumentation":0.00011236200225539505,"return_value":{"class":"String","value":"SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN '2023-11-03 23:13:14.39 (...109 more characters)","object_id":4856100}},{"id":792964,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT locale, count(*) AS value FROM users WHERE current_sign_in_at BETWEEN '2023-11-03 23:13:14.399917' AND '2023-11-05 23:13:14.400405' AND locale IS NOT NULL GROUP BY locale ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":792965,"event":"return","thread_id":9160,"parent_id":792964,"elapsed":0.002743601,"elapsed_instrumentation":0.0001378159795422107},{"id":792966,"event":"return","thread_id":9160,"parent_id":792957,"elapsed":0.004400117992190644,"elapsed_instrumentation":0.00020699499873444438,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fdc08e1d5c0>","object_id":4856120}},{"id":792967,"event":"return","thread_id":9160,"parent_id":792956,"elapsed":0.004656217992305756,"elapsed_instrumentation":0.00029372802237048745,"return_value":{"class":"Array","value":"[]","object_id":4856140,"size":0}},{"id":792968,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":4856160,"value":"Cache write: metrics/dimension/languages;2023-11-03T23:13:14+00:00;2023-11-05T23:13:14+00:00;10; ({: (...69 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":792969,"event":"return","thread_id":9160,"parent_id":792968,"elapsed":0.002358603000175208,"elapsed_instrumentation":0.0003555159782990813,"return_value":{"class":"Integer","value":"169","object_id":339}},{"id":792970,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":4856180,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":209120,"value":"Marshal"}},{"id":792971,"event":"return","thread_id":9160,"parent_id":792970,"elapsed":1.4903023838996887e-05,"elapsed_instrumentation":0.0003947529767174274,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":4856200}},{"id":792972,"event":"return","thread_id":9160,"parent_id":792943,"elapsed":0.018844473001081496,"elapsed_instrumentation":0.00017952799680642784,"return_value":{"class":"Array","value":"[]","object_id":4856140,"size":0}},{"id":792973,"event":"return","thread_id":9160,"parent_id":792942,"elapsed":0.019063334999373183,"elapsed_instrumentation":0.0007380800088867545,"return_value":{"class":"Array","value":"[]","object_id":4856140,"size":0}}]}