{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::InstanceLanguagesDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/instance_languages_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false}]},{"name":"InstanceLanguagesDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:11","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:47","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:17","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:21","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:25","static":false},{"name":"earliest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:39","static":false},{"name":"latest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb:43","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"Snowflake","type":"class","children":[{"name":"id_at","type":"function","location":"lib/mastodon/snowflake.rb:99","static":true}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":1721557,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721558,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721559,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721560,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":11,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721561,"event":"return","thread_id":9160,"parent_id":1721560,"elapsed":6.104004569351673e-06,"elapsed_instrumentation":0.0004364509950391948,"return_value":{"class":"String","value":"instance_languages","object_id":9253460}},{"id":1721562,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721563,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":47,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721564,"event":"return","thread_id":9160,"parent_id":1721563,"elapsed":4.7434994485229254e-05,"elapsed_instrumentation":0.00010252598440274596,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":9253480}},{"id":1721565,"event":"return","thread_id":9160,"parent_id":1721562,"elapsed":0.00020150901400484145,"elapsed_instrumentation":9.381500422023237e-05,"return_value":{"class":"String","value":"","object_id":9253500}},{"id":1721566,"event":"return","thread_id":9160,"parent_id":1721559,"elapsed":0.0008285669900942594,"elapsed_instrumentation":8.696698932908475e-05,"return_value":{"class":"String","value":"metrics/dimension/instance_languages;2023-11-03T23:28:25+00:00;2023-11-05T23:28:25+00:00;10;","object_id":9253520}},{"id":1721567,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":9253540,"value":"Cache read: metrics/dimension/instance_languages;2023-11-03T23:28:25+00:00;2023-11-05T23:28:25+00:00 (...77 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1721568,"event":"return","thread_id":9160,"parent_id":1721567,"elapsed":0.0010873450082726777,"elapsed_instrumentation":0.00023582199355587363,"return_value":{"class":"Integer","value":"177","object_id":355}},{"id":1721569,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":9253560,"value":"Cache generate: metrics/dimension/instance_languages;2023-11-03T23:28:25+00:00;2023-11-05T23:28:25+0 (...81 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1721570,"event":"return","thread_id":9160,"parent_id":1721569,"elapsed":0.0009229239949490875,"elapsed_instrumentation":0.00013767299242317677,"return_value":{"class":"Integer","value":"181","object_id":363}},{"id":1721571,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":17,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721572,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721573,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721574,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721575,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721576,"event":"return","thread_id":9160,"parent_id":1721575,"elapsed":8.148798951879144e-05,"elapsed_instrumentation":0.00015884300228208303,"return_value":{"class":"String","value":"SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN ac (...255 more characters)","object_id":9253580}},{"id":1721577,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":47,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721578,"event":"return","thread_id":9160,"parent_id":1721577,"elapsed":3.5272998502478004e-05,"elapsed_instrumentation":0.00012314398190937936,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":9253600}},{"id":1721579,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"earliest_status_id","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":39,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721580,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":9253620,"value":"2023-11-03T23:28:25+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":784920,"value":"Mastodon::Snowflake"}},{"id":1721581,"event":"return","thread_id":9160,"parent_id":1721580,"elapsed":2.056400990113616e-05,"elapsed_instrumentation":0.00012554498971439898,"return_value":{"class":"Integer","value":"111349209825280000","object_id":222698419650560001}},{"id":1721582,"event":"return","thread_id":9160,"parent_id":1721579,"elapsed":0.00017931399634107947,"elapsed_instrumentation":0.00010522699449211359,"return_value":{"class":"Integer","value":"111349209825280000","object_id":222698419650560001}},{"id":1721583,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","method_id":"latest_status_id","path":"app/lib/admin/metrics/dimension/instance_languages_dimension.rb","lineno":43,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::InstanceLanguagesDimension","object_id":9253440,"value":"#<Admin::Metrics::Dimension::InstanceLanguagesDimension:0x00007fdc09653c08>"}},{"id":1721584,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":9253640,"value":"2023-11-05T23:28:25+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":784920,"value":"Mastodon::Snowflake"}},{"id":1721585,"event":"return","thread_id":9160,"parent_id":1721584,"elapsed":1.598702510818839e-05,"elapsed_instrumentation":0.0001647300086915493,"return_value":{"class":"Integer","value":"111360534446080000","object_id":222721068892160001}},{"id":1721586,"event":"return","thread_id":9160,"parent_id":1721583,"elapsed":0.0002149960200767964,"elapsed_instrumentation":0.0005962089926470071,"return_value":{"class":"Integer","value":"111360534446080000","object_id":222721068892160001}},{"id":1721587,"event":"return","thread_id":9160,"parent_id":1721574,"elapsed":0.0016083889931906015,"elapsed_instrumentation":0.00039394001942127943,"return_value":{"class":"Array","value":"[SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN ac (...255 more characters), {:domain=>, :earliest_status_id=>111349209825280000, :latest_status_id=>111360534446080000, :limit=>10}]","object_id":9253660,"size":2}},{"id":1721588,"event":"return","thread_id":9160,"parent_id":1721573,"elapsed":0.002311732998350635,"elapsed_instrumentation":8.520297706127167e-05,"return_value":{"class":"String","value":"SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN ac (...248 more characters)","object_id":9253680}},{"id":1721589,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN accounts ON accounts.id = statuses.account_id WHERE accounts.domain = NULL AND statuses.id BETWEEN 111349209825280000 AND 111360534446080000 AND statuses.reblog_of_id IS NULL GROUP BY COALESCE(statuses.language, 'und') ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":1721590,"event":"return","thread_id":9160,"parent_id":1721589,"elapsed":0.001855219,"elapsed_instrumentation":9.273298201151192e-05},{"id":1721591,"event":"return","thread_id":9160,"parent_id":1721572,"elapsed":0.0047246619942598045,"elapsed_instrumentation":0.0001454570156056434,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fdc09650d78>","object_id":9253700}},{"id":1721592,"event":"return","thread_id":9160,"parent_id":1721571,"elapsed":0.0049191860016435385,"elapsed_instrumentation":0.00018752599135041237,"return_value":{"class":"Array","value":"[]","object_id":9253720,"size":0}},{"id":1721593,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":9253740,"value":"Cache write: metrics/dimension/instance_languages;2023-11-03T23:28:25+00:00;2023-11-05T23:28:25+00:0 (...78 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1721594,"event":"return","thread_id":9160,"parent_id":1721593,"elapsed":0.0009126249933615327,"elapsed_instrumentation":0.00015246900147758424,"return_value":{"class":"Integer","value":"178","object_id":357}},{"id":1721595,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":9253760,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":209120,"value":"Marshal"}},{"id":1721596,"event":"return","thread_id":9160,"parent_id":1721595,"elapsed":8.739996701478958e-06,"elapsed_instrumentation":0.00014416899648495018,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":9253780}},{"id":1721597,"event":"return","thread_id":9160,"parent_id":1721558,"elapsed":0.010445296007674187,"elapsed_instrumentation":6.653903983533382e-05,"return_value":{"class":"Array","value":"[]","object_id":9253720,"size":0}},{"id":1721598,"event":"return","thread_id":9160,"parent_id":1721557,"elapsed":0.010530620987992734,"elapsed_instrumentation":0.0001550370070617646,"return_value":{"class":"Array","value":"[]","object_id":9253720,"size":0}}]}