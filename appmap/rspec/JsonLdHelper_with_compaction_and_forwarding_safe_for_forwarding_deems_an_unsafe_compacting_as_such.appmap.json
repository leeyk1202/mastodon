{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"JsonLdHelper with compaction and forwarding safe_for_forwarding? deems an unsafe compacting as such","source_location":"spec/helpers/jsonld_helper_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/helpers","type":"package","children":[{"name":"JsonLdHelper","type":"class","children":[{"name":"compact","type":"function","location":"app/helpers/jsonld_helper.rb:80","static":false},{"name":"patch_for_forwarding!","type":"function","location":"app/helpers/jsonld_helper.rb:105","static":false},{"name":"safe_for_forwarding?","type":"function","location":"app/helpers/jsonld_helper.rb:141","static":false}]},{"name":"ContextHelper","type":"class","children":[{"name":"full_context","type":"function","location":"app/helpers/context_helper.rb:37","static":false},{"name":"serialized_context","type":"function","location":"app/helpers/context_helper.rb:41","static":false}]}]}],"events":[{"id":414508,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"compact","path":"app/helpers/jsonld_helper.rb","lineno":80,"static":false,"parameters":[{"name":"json","class":"Hash","object_id":2950820,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414509,"event":"call","thread_id":9160,"defined_class":"ContextHelper","method_id":"full_context","path":"app/helpers/context_helper.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414510,"event":"call","thread_id":9160,"defined_class":"ContextHelper","method_id":"serialized_context","path":"app/helpers/context_helper.rb","lineno":41,"static":false,"parameters":[{"name":"named_contexts_map","class":"Hash","object_id":2949940,"value":"{:activitystreams=>https://www.w3.org/ns/activitystreams, :security=>https://w3id.org/security/v1}","kind":"req","size":2},{"name":"context_extensions_map","class":"Hash","object_id":2949960,"value":"{:manually_approves_followers=>{manuallyApprovesFollowers=>as:manuallyApprovesFollowers}, :sensitive=>{sensitive=>as:sensitive}, :hashtag=>{Hashtag=>as:Hashtag}, :moved_to=>{movedTo=>{@id=>as:movedTo, @type=>@id}}, :also_known_as=>{alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}}, :emoji=>{toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji}, :featured=>{toot=>http://joinmastodon.org/ns#, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}}, :property_value=>{schema=>http://schema.org#, PropertyValue=>schema:PropertyValue, value=>schema:value}, :atom_uri=>{ostatus=>http://ostatus.org#, atomUri=>ostatus:atomUri}, :conversation=>{ostatus=>http://ostatus.org#, inReplyToAtomUri=>ostatus:inReplyToAtomUri, conversation=>ostatus:conversation} (...8 more entries)}","kind":"req","size":18}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414511,"event":"return","thread_id":9160,"parent_id":414510,"elapsed":2.9560993425548077e-05,"elapsed_instrumentation":0.0008335890015587211,"return_value":{"class":"Array","value":"[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}]","object_id":2950860,"size":3}},{"id":414512,"event":"return","thread_id":9160,"parent_id":414509,"elapsed":0.0008868029690347612,"elapsed_instrumentation":0.0002698040334507823,"return_value":{"class":"Array","value":"[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}]","object_id":2950860,"size":3}},{"id":414513,"event":"return","thread_id":9160,"parent_id":414508,"elapsed":0.009390658990014344,"elapsed_instrumentation":0.0008495629881508648,"return_value":{"class":"Hash","value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>as:Public, object=>{id=>https://example.com/status, type=>Note, conversation=>https://example.com/conversation, tag=>{type=>Mention, href=>foo}}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","object_id":2950920,"size":5}},{"id":414514,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950820,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2950920,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>as:Public, object=>{id=>https://example.com/status, type=>Note, conversation=>https://example.com/conversation, tag=>{type=>Mention, href=>foo}}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414515,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950940,"value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2950960,"value":"{id=>https://example.com/status, type=>Note, conversation=>https://example.com/conversation, tag=>{type=>Mention, href=>foo}}","kind":"req","size":4}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414516,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950980,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2},{"name":"compacted","class":"Hash","object_id":2951000,"value":"{type=>Mention, href=>foo}","kind":"req","size":2}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414517,"event":"return","thread_id":9160,"parent_id":414516,"elapsed":1.648103352636099e-05,"elapsed_instrumentation":0.00022762001026421785,"return_value":{"class":"Hash","value":"{type=>Mention, href=>[foo]}","object_id":2951020,"size":2}},{"id":414518,"event":"return","thread_id":9160,"parent_id":414515,"elapsed":0.00028148997807875276,"elapsed_instrumentation":0.0005932729691267014,"return_value":{"class":"Hash","value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}","object_id":2951040,"size":5}},{"id":414519,"event":"return","thread_id":9160,"parent_id":414514,"elapsed":0.0009193640435114503,"elapsed_instrumentation":0.0009491620003245771,"return_value":{"class":"Hash","value":"{type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}}","object_id":2951060,"size":3}},{"id":414520,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950820,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2950920,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, conversation=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414521,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950940,"value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, convo=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2950960,"value":"{id=>https://example.com/status, type=>Note, conversation=>https://example.com/conversation, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":4}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2950840,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc91a3d3"}},{"id":414522,"event":"return","thread_id":9160,"parent_id":414521,"elapsed":1.6670965123921633e-05,"elapsed_instrumentation":0.0002377750352025032},{"id":414523,"event":"return","thread_id":9160,"parent_id":414520,"elapsed":0.00029563100542873144,"elapsed_instrumentation":0.0007727849879302084}]}