{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"User validations is invalid without an account","source_location":"spec/models/user_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"openssl","type":"package","children":[{"name":"OpenSSL","type":"class","children":[{"name":"Random","type":"class","children":[{"name":"random_bytes","type":"function","location":"OpenSSL::Random.random_bytes","static":true,"labels":["random.secure"]}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"User","type":"class","children":[{"name":"role","type":"function","location":"app/models/user.rb:153","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:332","static":false},{"name":"confirmed?","type":"function","location":"app/models/user.rb:161","static":false}]},{"name":"UserRole","type":"class","children":[{"name":"everyone","type":"function","location":"app/models/user_role.rb:105","static":true},{"name":"everyone?","type":"function","location":"app/models/user_role.rb:115","static":false}]},{"name":"Setting","type":"class","children":[{"name":"[]","type":"function","location":"app/models/setting.rb:24","static":true},{"name":"default_settings","type":"function","location":"app/models/setting.rb:55","static":true}]}]},{"name":"validators","type":"package","children":[{"name":"RegistrationFormTimeValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/registration_form_time_validator.rb:6","static":false}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":1370652,"event":"call","thread_id":9160,"defined_class":"OpenSSL::Random","method_id":"random_bytes","path":"OpenSSL::Random.random_bytes","static":true,"parameters":[{"name":"arg","class":"Integer","object_id":33,"value":"16","kind":"req"}],"receiver":{"class":"Module","object_id":322640,"value":"OpenSSL::Random"}},{"id":1370653,"event":"return","thread_id":9160,"parent_id":1370652,"elapsed":2.364697866141796e-05,"elapsed_instrumentation":0.00017478998051956296,"return_value":{"class":"String","value":"\u000e1__d|#_8_~\u001e_;,_","object_id":7842180}},{"id":1370654,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7842200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938225610>"}},{"id":1370655,"event":"call","thread_id":9160,"defined_class":"User","method_id":"role","path":"app/models/user.rb","lineno":153,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7842220,"value":"#<User:0x00007fc919a9b688>"}},{"id":1370656,"event":"call","thread_id":9160,"defined_class":"UserRole","method_id":"everyone","path":"app/models/user_role.rb","lineno":105,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":62120,"value":"UserRole"}},{"id":1370657,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"user_roles\".* FROM \"user_roles\" WHERE \"user_roles\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1370658,"event":"return","thread_id":9160,"parent_id":1370657,"elapsed":0.000698045,"elapsed_instrumentation":0.00011946400627493858},{"id":1370659,"event":"return","thread_id":9160,"parent_id":1370656,"elapsed":0.0016180920065380633,"elapsed_instrumentation":0.0003413519589230418,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fc919a9b2c8>","object_id":7842240}},{"id":1370660,"event":"return","thread_id":9160,"parent_id":1370655,"elapsed":0.001997574989218265,"elapsed_instrumentation":9.11140232346952e-05,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fc919a9b2c8>","object_id":7842240}},{"id":1370661,"event":"call","thread_id":9160,"defined_class":"User","method_id":"role","path":"app/models/user.rb","lineno":153,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7842220,"value":"#<User:0x00007fc919a9b688>"}},{"id":1370662,"event":"call","thread_id":9160,"defined_class":"UserRole","method_id":"everyone","path":"app/models/user_role.rb","lineno":105,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":62120,"value":"UserRole"}},{"id":1370663,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"user_roles\".* FROM \"user_roles\" WHERE \"user_roles\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1370664,"event":"return","thread_id":9160,"parent_id":1370663,"elapsed":0.000586463,"elapsed_instrumentation":0.00010361499153077602},{"id":1370665,"event":"return","thread_id":9160,"parent_id":1370662,"elapsed":0.0014228869695216417,"elapsed_instrumentation":0.00017730100080370903,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fc919a9b048>","object_id":7842260}},{"id":1370666,"event":"return","thread_id":9160,"parent_id":1370661,"elapsed":0.0016469500260427594,"elapsed_instrumentation":0.000353095936588943,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fc919a9b048>","object_id":7842260}},{"id":1370667,"event":"call","thread_id":9160,"defined_class":"UserRole","method_id":"everyone?","path":"app/models/user_role.rb","lineno":115,"static":false,"parameters":[],"receiver":{"class":"UserRole","object_id":7842260,"value":"#<UserRole:0x00007fc919a9b048>"}},{"id":1370668,"event":"return","thread_id":9160,"parent_id":1370667,"elapsed":1.8976046703755856e-05,"elapsed_instrumentation":0.00020596198737621307,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1370669,"event":"return","thread_id":9160,"parent_id":1370654,"elapsed":0.004603062989190221,"elapsed_instrumentation":0.00017433997709304094,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc938dc6fc8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938dc90c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938dcb050 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938dcc180 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938dcc7c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323940,"size":5}},{"id":1370670,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7842280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323980,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938224d00>"}},{"id":1370671,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1370672,"event":"return","thread_id":9160,"parent_id":1370671,"elapsed":0.000539218,"elapsed_instrumentation":7.013505091890693e-05},{"id":1370673,"event":"call","thread_id":9160,"defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":332,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7842220,"value":"#<User:0x00007fc919a9b688>"}},{"id":1370674,"event":"return","thread_id":9160,"parent_id":1370673,"elapsed":7.121998351067305e-06,"elapsed_instrumentation":9.15639684535563e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1370675,"event":"call","thread_id":9160,"defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":332,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7842220,"value":"#<User:0x00007fc919a9b688>"}},{"id":1370676,"event":"return","thread_id":9160,"parent_id":1370675,"elapsed":3.823020961135626e-06,"elapsed_instrumentation":6.024999311193824e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1370677,"event":"call","thread_id":9160,"defined_class":"Setting","method_id":"[]","path":"app/models/setting.rb","lineno":24,"static":true,"parameters":[{"name":"key","class":"String","object_id":7842300,"value":"require_invite_text","kind":"req"}],"receiver":{"class":"Class","object_id":61700,"value":"Setting"}},{"id":1370678,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":7842320,"value":"Cache read: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/require_invite_text ({:compress=> (...35 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":1370679,"event":"return","thread_id":9160,"parent_id":1370678,"elapsed":0.0004380120080895722,"elapsed_instrumentation":0.00010112306335940957,"return_value":{"class":"Integer","value":"135","object_id":271}},{"id":1370680,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":7842340,"value":"Cache generate: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/require_invite_text ({:compre (...39 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":1370681,"event":"return","thread_id":9160,"parent_id":1370680,"elapsed":0.0003808810142800212,"elapsed_instrumentation":0.0001068240380845964,"return_value":{"class":"Integer","value":"139","object_id":279}},{"id":1370682,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"settings\".* FROM \"settings\" WHERE (thing_type is NULL and thing_id is NULL) AND \"settings\".\"var\" = $1 ORDER BY \"settings\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1370683,"event":"return","thread_id":9160,"parent_id":1370682,"elapsed":0.0005554,"elapsed_instrumentation":6.594398291781545e-05},{"id":1370684,"event":"call","thread_id":9160,"defined_class":"Setting","method_id":"default_settings","path":"app/models/setting.rb","lineno":55,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":61700,"value":"Setting"}},{"id":1370685,"event":"return","thread_id":9160,"parent_id":1370684,"elapsed":2.9817980248481035e-05,"elapsed_instrumentation":0.0002404240076430142,"return_value":{"class":"RailsSettings::Default","value":"{site_title=>Mastodon, site_short_description=>, site_description=>, site_extended_description=>, site_terms=>, site_contact_username=>, site_contact_email=>, registrations_mode=>open, profile_directory=>true, closed_registrations_message=> (...18 more entries)}","object_id":323420,"size":28}},{"id":1370686,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":7842360,"value":"Cache write: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/require_invite_text ({:compress= (...36 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":1370687,"event":"return","thread_id":9160,"parent_id":1370686,"elapsed":0.00046104699140414596,"elapsed_instrumentation":0.00010064599337056279,"return_value":{"class":"Integer","value":"136","object_id":273}},{"id":1370688,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":7842380,"value":"[false]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":1370689,"event":"return","thread_id":9160,"parent_id":1370688,"elapsed":4.874018486589193e-06,"elapsed_instrumentation":0.00010232202475890517,"return_value":{"class":"String","value":"\u0004\bF","object_id":7842400}},{"id":1370690,"event":"return","thread_id":9160,"parent_id":1370677,"elapsed":0.004040441010147333,"elapsed_instrumentation":9.163195500150323e-05},{"id":1370691,"event":"call","thread_id":9160,"defined_class":"User","method_id":"confirmed?","path":"app/models/user.rb","lineno":161,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7842220,"value":"#<User:0x00007fc919a9b688>"}},{"id":1370692,"event":"return","thread_id":9160,"parent_id":1370691,"elapsed":5.1364011596888304e-05,"elapsed_instrumentation":0.000461274990811944,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1370693,"event":"call","thread_id":9160,"defined_class":"RegistrationFormTimeValidator","method_id":"validate","path":"app/validators/registration_form_time_validator.rb","lineno":6,"static":false,"parameters":[{"name":"user","class":"User","object_id":7842220,"value":"#<User:0x00007fc919a9b688>","kind":"req"}],"receiver":{"class":"RegistrationFormTimeValidator","object_id":324120,"value":"#<RegistrationFormTimeValidator:0x00007fc940eaa770>"}},{"id":1370694,"event":"return","thread_id":9160,"parent_id":1370693,"elapsed":5.24596543982625e-06,"elapsed_instrumentation":8.8490080088377e-05},{"id":1370695,"event":"return","thread_id":9160,"parent_id":1370670,"elapsed":0.006896040984429419,"elapsed_instrumentation":0.0003009150386787951,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc938f3ddc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938f3e2c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938f3f058 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938f3ff80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938ef13d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938ef2cf8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938ef3e28 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938ef47b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938ef50c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938ef5ae8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...17 more items)]","object_id":324140,"size":27}},{"id":1370696,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7842280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323980,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938224d00>"}},{"id":1370697,"event":"return","thread_id":9160,"parent_id":1370696,"elapsed":3.535998985171318e-06,"elapsed_instrumentation":8.109200280159712e-05,"return_value":{"class":"Array","value":"[]","object_id":324160,"size":0}},{"id":1370698,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7842200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938225610>"}},{"id":1370699,"event":"return","thread_id":9160,"parent_id":1370698,"elapsed":1.0728021152317524e-05,"elapsed_instrumentation":7.722398731857538e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc938dc6a00 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":324180,"size":1}}]}