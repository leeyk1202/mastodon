{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"User validations is invalid without an account","source_location":"spec/models/user_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"openssl","type":"package","children":[{"name":"OpenSSL","type":"class","children":[{"name":"Random","type":"class","children":[{"name":"random_bytes","type":"function","location":"OpenSSL::Random.random_bytes","static":true,"labels":["random.secure"]}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"User","type":"class","children":[{"name":"role","type":"function","location":"app/models/user.rb:153","static":false},{"name":"password_required?","type":"function","location":"app/models/user.rb:332","static":false},{"name":"confirmed?","type":"function","location":"app/models/user.rb:161","static":false}]},{"name":"UserRole","type":"class","children":[{"name":"everyone","type":"function","location":"app/models/user_role.rb:105","static":true},{"name":"everyone?","type":"function","location":"app/models/user_role.rb:115","static":false}]},{"name":"Setting","type":"class","children":[{"name":"[]","type":"function","location":"app/models/setting.rb:24","static":true},{"name":"default_settings","type":"function","location":"app/models/setting.rb:55","static":true}]}]},{"name":"validators","type":"package","children":[{"name":"RegistrationFormTimeValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/registration_form_time_validator.rb:6","static":false}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":1410021,"event":"call","thread_id":9160,"defined_class":"OpenSSL::Random","method_id":"random_bytes","path":"OpenSSL::Random.random_bytes","static":true,"parameters":[{"name":"arg","class":"Integer","object_id":33,"value":"16","kind":"req"}],"receiver":{"class":"Module","object_id":208620,"value":"OpenSSL::Random"}},{"id":1410022,"event":"return","thread_id":9160,"parent_id":1410021,"elapsed":2.7044006856158376e-05,"elapsed_instrumentation":0.00023191902437247336,"return_value":{"class":"String","value":"9_5__\u0013_c__)_____","object_id":7555420}},{"id":1410023,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7555440,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db50608>"}},{"id":1410024,"event":"call","thread_id":9160,"defined_class":"User","method_id":"role","path":"app/models/user.rb","lineno":153,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7555460,"value":"#<User:0x00007fdc082a5dc8>"}},{"id":1410025,"event":"call","thread_id":9160,"defined_class":"UserRole","method_id":"everyone","path":"app/models/user_role.rb","lineno":105,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":62120,"value":"UserRole"}},{"id":1410026,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"user_roles\".* FROM \"user_roles\" WHERE \"user_roles\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1410027,"event":"return","thread_id":9160,"parent_id":1410026,"elapsed":0.000872486,"elapsed_instrumentation":0.00013767799828201532},{"id":1410028,"event":"return","thread_id":9160,"parent_id":1410025,"elapsed":0.0021051120129413903,"elapsed_instrumentation":0.0004397939774207771,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fdc082a5788>","object_id":7555480}},{"id":1410029,"event":"return","thread_id":9160,"parent_id":1410024,"elapsed":0.0025859579909592867,"elapsed_instrumentation":0.00012933698599226773,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fdc082a5788>","object_id":7555480}},{"id":1410030,"event":"call","thread_id":9160,"defined_class":"User","method_id":"role","path":"app/models/user.rb","lineno":153,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7555460,"value":"#<User:0x00007fdc082a5dc8>"}},{"id":1410031,"event":"call","thread_id":9160,"defined_class":"UserRole","method_id":"everyone","path":"app/models/user_role.rb","lineno":105,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":62120,"value":"UserRole"}},{"id":1410032,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"user_roles\".* FROM \"user_roles\" WHERE \"user_roles\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1410033,"event":"return","thread_id":9160,"parent_id":1410032,"elapsed":0.000701039,"elapsed_instrumentation":8.123600855469704e-05},{"id":1410034,"event":"return","thread_id":9160,"parent_id":1410031,"elapsed":0.0013591010065283626,"elapsed_instrumentation":0.00024131298414431512,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fdc082a53c8>","object_id":7555500}},{"id":1410035,"event":"return","thread_id":9160,"parent_id":1410030,"elapsed":0.0016352820093743503,"elapsed_instrumentation":0.00011058000382035971,"return_value":{"class":"UserRole","value":"#<UserRole:0x00007fdc082a53c8>","object_id":7555500}},{"id":1410036,"event":"call","thread_id":9160,"defined_class":"UserRole","method_id":"everyone?","path":"app/models/user_role.rb","lineno":115,"static":false,"parameters":[],"receiver":{"class":"UserRole","object_id":7555500,"value":"#<UserRole:0x00007fdc082a53c8>"}},{"id":1410037,"event":"return","thread_id":9160,"parent_id":1410036,"elapsed":1.7067999579012394e-05,"elapsed_instrumentation":8.003399125300348e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1410038,"event":"return","thread_id":9160,"parent_id":1410023,"elapsed":0.005200145009439439,"elapsed_instrumentation":0.0004207249730825424,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a8d5bb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a8d5d18 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a8d5ea8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a8d6010 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a8d6178 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209620,"size":5}},{"id":1410039,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7555520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db9ece0>"}},{"id":1410040,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1410041,"event":"return","thread_id":9160,"parent_id":1410040,"elapsed":0.001209157,"elapsed_instrumentation":0.00014575000386685133},{"id":1410042,"event":"call","thread_id":9160,"defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":332,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7555460,"value":"#<User:0x00007fdc082a5dc8>"}},{"id":1410043,"event":"return","thread_id":9160,"parent_id":1410042,"elapsed":1.8416991224512458e-05,"elapsed_instrumentation":0.00016320403665304184,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1410044,"event":"call","thread_id":9160,"defined_class":"User","method_id":"password_required?","path":"app/models/user.rb","lineno":332,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7555460,"value":"#<User:0x00007fdc082a5dc8>"}},{"id":1410045,"event":"return","thread_id":9160,"parent_id":1410044,"elapsed":7.679976988583803e-06,"elapsed_instrumentation":0.00013635901268571615,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1410046,"event":"call","thread_id":9160,"defined_class":"Setting","method_id":"[]","path":"app/models/setting.rb","lineno":24,"static":true,"parameters":[{"name":"key","class":"String","object_id":7555540,"value":"require_invite_text","kind":"req"}],"receiver":{"class":"Class","object_id":61700,"value":"Setting"}},{"id":1410047,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":7555560,"value":"Cache read: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/require_invite_text ({:compress=> (...35 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1410048,"event":"return","thread_id":9160,"parent_id":1410047,"elapsed":0.0016393739788327366,"elapsed_instrumentation":0.00016975001199170947,"return_value":{"class":"Integer","value":"135","object_id":271}},{"id":1410049,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":7555580,"value":"Cache generate: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/require_invite_text ({:compre (...39 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1410050,"event":"return","thread_id":9160,"parent_id":1410049,"elapsed":0.0012190880079288036,"elapsed_instrumentation":0.0008238769951276481,"return_value":{"class":"Integer","value":"139","object_id":279}},{"id":1410051,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"settings\".* FROM \"settings\" WHERE (thing_type is NULL and thing_id is NULL) AND \"settings\".\"var\" = $1 ORDER BY \"settings\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1410052,"event":"return","thread_id":9160,"parent_id":1410051,"elapsed":0.001452266,"elapsed_instrumentation":8.876700303517282e-05},{"id":1410053,"event":"call","thread_id":9160,"defined_class":"Setting","method_id":"default_settings","path":"app/models/setting.rb","lineno":55,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":61700,"value":"Setting"}},{"id":1410054,"event":"return","thread_id":9160,"parent_id":1410053,"elapsed":3.364798612892628e-05,"elapsed_instrumentation":0.0002718839969020337,"return_value":{"class":"RailsSettings::Default","value":"{site_title=>Mastodon, site_short_description=>, site_description=>, site_extended_description=>, site_terms=>, site_contact_username=>, site_contact_email=>, registrations_mode=>open, profile_directory=>true, closed_registrations_message=> (...18 more entries)}","object_id":209060,"size":28}},{"id":1410055,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":7555600,"value":"Cache write: rails_settings_cached/7236420e1d6bc0e8bb3d1d7df7c57de7/require_invite_text ({:compress= (...36 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1410056,"event":"return","thread_id":9160,"parent_id":1410055,"elapsed":0.0010317080013919622,"elapsed_instrumentation":0.00022400598390959203,"return_value":{"class":"Integer","value":"136","object_id":273}},{"id":1410057,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":7555620,"value":"[false]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":209120,"value":"Marshal"}},{"id":1410058,"event":"return","thread_id":9160,"parent_id":1410057,"elapsed":5.983019946143031e-06,"elapsed_instrumentation":0.00013653497444465756,"return_value":{"class":"String","value":"\u0004\bF","object_id":7555640}},{"id":1410059,"event":"return","thread_id":9160,"parent_id":1410046,"elapsed":0.00895130299613811,"elapsed_instrumentation":0.0001229030021931976},{"id":1410060,"event":"call","thread_id":9160,"defined_class":"User","method_id":"confirmed?","path":"app/models/user.rb","lineno":161,"static":false,"parameters":[],"receiver":{"class":"User","object_id":7555460,"value":"#<User:0x00007fdc082a5dc8>"}},{"id":1410061,"event":"return","thread_id":9160,"parent_id":1410060,"elapsed":7.202199776656926e-05,"elapsed_instrumentation":8.355299360118806e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1410062,"event":"call","thread_id":9160,"defined_class":"RegistrationFormTimeValidator","method_id":"validate","path":"app/validators/registration_form_time_validator.rb","lineno":6,"static":false,"parameters":[{"name":"user","class":"User","object_id":7555460,"value":"#<User:0x00007fdc082a5dc8>","kind":"req"}],"receiver":{"class":"RegistrationFormTimeValidator","object_id":209800,"value":"#<RegistrationFormTimeValidator:0x00007fdc18171028>"}},{"id":1410063,"event":"return","thread_id":9160,"parent_id":1410062,"elapsed":6.171001587063074e-06,"elapsed_instrumentation":9.620000491850078e-05},{"id":1410064,"event":"return","thread_id":9160,"parent_id":1410039,"elapsed":0.013281100982567295,"elapsed_instrumentation":0.0003011230146512389,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a85f168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a85fd70 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a8405b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a840fd8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a841460 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a8416b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a841910 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a841b40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a841fa0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a842108 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...17 more items)]","object_id":209820,"size":27}},{"id":1410065,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7555520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db9ece0>"}},{"id":1410066,"event":"return","thread_id":9160,"parent_id":1410065,"elapsed":2.869986928999424e-06,"elapsed_instrumentation":9.450200013816357e-05,"return_value":{"class":"Array","value":"[]","object_id":209840,"size":0}},{"id":1410067,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":7555440,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db50608>"}},{"id":1410068,"event":"return","thread_id":9160,"parent_id":1410067,"elapsed":1.0513002052903175e-05,"elapsed_instrumentation":8.775497553870082e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a8d5958 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209860,"size":1}}]}