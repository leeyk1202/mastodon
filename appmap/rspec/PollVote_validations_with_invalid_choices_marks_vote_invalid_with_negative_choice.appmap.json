{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"PollVote validations with invalid choices marks vote invalid with negative choice","source_location":"spec/models/poll_vote_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"openssl","type":"package","children":[{"name":"OpenSSL","type":"class","children":[{"name":"Random","type":"class","children":[{"name":"random_bytes","type":"function","location":"OpenSSL::Random.random_bytes","static":true,"labels":["random.secure"]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false}]},{"name":"PollVote","type":"class","children":[{"name":"poll_expired?","type":"function","location":"app/models/poll_vote.rb:26","static":false},{"name":"poll_multiple?","type":"function","location":"app/models/poll_vote.rb:26","static":false}]},{"name":"concerns","type":"package","children":[{"name":"Poll","type":"class","children":[{"name":"expired?","type":"function","location":"app/models/concerns/expireable.rb:28","static":false},{"name":"expires?","type":"function","location":"app/models/concerns/expireable.rb:32","static":false}]}]}]},{"name":"validators","type":"package","children":[{"name":"VoteValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/vote_validator.rb:4","static":false}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":449680,"event":"call","thread_id":9160,"defined_class":"OpenSSL::Random","method_id":"random_bytes","path":"OpenSSL::Random.random_bytes","static":true,"parameters":[{"name":"arg","class":"Integer","object_id":33,"value":"16","kind":"req"}],"receiver":{"class":"Module","object_id":208620,"value":"OpenSSL::Random"}},{"id":449681,"event":"return","thread_id":9160,"parent_id":449680,"elapsed":4.146998981013894e-05,"elapsed_instrumentation":0.0003572510031517595,"return_value":{"class":"String","value":"\u0007V[C_$'___<_?___","object_id":2902680}},{"id":449682,"event":"call","thread_id":9160,"defined_class":"OpenSSL::Random","method_id":"random_bytes","path":"OpenSSL::Random.random_bytes","static":true,"parameters":[{"name":"arg","class":"Integer","object_id":33,"value":"16","kind":"req"}],"receiver":{"class":"Module","object_id":208620,"value":"OpenSSL::Random"}},{"id":449683,"event":"return","thread_id":9160,"parent_id":449682,"elapsed":2.329700510017574e-05,"elapsed_instrumentation":0.00019980501383543015,"return_value":{"class":"String","value":"_4_p____b_+S\u001b__9","object_id":2902700}},{"id":449684,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2902720,"value":"#<Account:0x00007fdc06203ac0>"}},{"id":449685,"event":"return","thread_id":9160,"parent_id":449684,"elapsed":1.0542978998273611e-05,"elapsed_instrumentation":0.00014627701602876186,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":449686,"event":"call","thread_id":9160,"defined_class":"OpenSSL::Random","method_id":"random_bytes","path":"OpenSSL::Random.random_bytes","static":true,"parameters":[{"name":"arg","class":"Integer","object_id":33,"value":"16","kind":"req"}],"receiver":{"class":"Module","object_id":208620,"value":"OpenSSL::Random"}},{"id":449687,"event":"return","thread_id":9160,"parent_id":449686,"elapsed":2.7591013349592686e-05,"elapsed_instrumentation":0.0002647209621500224,"return_value":{"class":"String","value":"__&2Pw_G_F_4___\\","object_id":2902740}},{"id":449688,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2902760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":449689,"event":"return","thread_id":9160,"parent_id":449688,"elapsed":2.9068993171676993e-05,"elapsed_instrumentation":0.00027434699586592615,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":449690,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2902780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2870960,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09e037f0>"}},{"id":449691,"event":"call","thread_id":9160,"defined_class":"VoteValidator","method_id":"validate","path":"app/validators/vote_validator.rb","lineno":4,"static":false,"parameters":[{"name":"vote","class":"PollVote","object_id":2902800,"value":"#<PollVote:0x00007fdc06203480>","kind":"req"}],"receiver":{"class":"VoteValidator","object_id":2871000,"value":"#<VoteValidator:0x00007fdc0feb6480>"}},{"id":449692,"event":"call","thread_id":9160,"defined_class":"PollVote","method_id":"poll_expired?","path":"app/models/poll_vote.rb","lineno":26,"static":false,"parameters":[{"name":"*","class":"Array","object_id":2902820,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2902840,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"PollVote","object_id":2902800,"value":"#<PollVote:0x00007fdc06203480>"}},{"id":449693,"event":"call","thread_id":9160,"defined_class":"Poll","method_id":"expired?","path":"app/models/concerns/expireable.rb","lineno":28,"static":false,"parameters":[],"receiver":{"class":"Poll","object_id":2902860,"value":"#<Poll:0x00007fdc06203980>"}},{"id":449694,"event":"call","thread_id":9160,"defined_class":"Poll","method_id":"expires?","path":"app/models/concerns/expireable.rb","lineno":32,"static":false,"parameters":[],"receiver":{"class":"Poll","object_id":2902860,"value":"#<Poll:0x00007fdc06203980>"}},{"id":449695,"event":"return","thread_id":9160,"parent_id":449694,"elapsed":0.00018154099234379828,"elapsed_instrumentation":0.00010882300557568669,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":449696,"event":"return","thread_id":9160,"parent_id":449693,"elapsed":0.00035294800181873143,"elapsed_instrumentation":0.00042152500827796757},{"id":449697,"event":"return","thread_id":9160,"parent_id":449692,"elapsed":0.0008352510049007833,"elapsed_instrumentation":0.00025860400637611747},{"id":449698,"event":"call","thread_id":9160,"defined_class":"PollVote","method_id":"poll_multiple?","path":"app/models/poll_vote.rb","lineno":26,"static":false,"parameters":[{"name":"*","class":"Array","object_id":2902880,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2902900,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"PollVote","object_id":2902800,"value":"#<PollVote:0x00007fdc06203480>"}},{"id":449699,"event":"return","thread_id":9160,"parent_id":449698,"elapsed":3.937000292353332e-05,"elapsed_instrumentation":0.00037071999395266175},{"id":449700,"event":"call","thread_id":9160,"defined_class":"PollVote","method_id":"poll_multiple?","path":"app/models/poll_vote.rb","lineno":26,"static":false,"parameters":[{"name":"*","class":"Array","object_id":2902920,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2902940,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"PollVote","object_id":2902800,"value":"#<PollVote:0x00007fdc06203480>"}},{"id":449701,"event":"return","thread_id":9160,"parent_id":449700,"elapsed":2.2310996428132057e-05,"elapsed_instrumentation":0.00014573297812603414},{"id":449702,"event":"return","thread_id":9160,"parent_id":449691,"elapsed":0.0037310800107661635,"elapsed_instrumentation":0.00022026302758604288},{"id":449703,"event":"return","thread_id":9160,"parent_id":449690,"elapsed":0.004171734006376937,"elapsed_instrumentation":0.00027025301824323833,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc067a89a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc067a8b60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc067a8d40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc067a8f20 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc067a9100 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":2871140,"size":5}},{"id":449704,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2902780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":2870960,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09e037f0>"}},{"id":449705,"event":"return","thread_id":9160,"parent_id":449704,"elapsed":3.5749981179833412e-06,"elapsed_instrumentation":0.00014190201181918383,"return_value":{"class":"Array","value":"[]","object_id":2871160,"size":0}},{"id":449706,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2902760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":449707,"event":"return","thread_id":9160,"parent_id":449706,"elapsed":4.07799961976707e-06,"elapsed_instrumentation":0.0001126629940699786,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}}]}