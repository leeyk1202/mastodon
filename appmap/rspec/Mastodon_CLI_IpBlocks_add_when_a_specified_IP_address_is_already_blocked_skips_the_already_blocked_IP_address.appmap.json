{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::IpBlocks #add when a specified IP address is already blocked skips the already blocked IP address","source_location":"spec/lib/mastodon/cli/ip_blocks_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"IpBlocks","type":"class","children":[{"name":"add","type":"function","location":"lib/mastodon/cli/ip_blocks.rb:22","static":false}]}]}]}]},{"name":"app/models/concerns","type":"package","children":[{"name":"IpBlock","type":"class","children":[{"name":"expires_in=","type":"function","location":"app/models/concerns/expireable.rb:19","static":false}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]}],"events":[{"id":834621,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::IpBlocks","method_id":"add","path":"lib/mastodon/cli/ip_blocks.rb","lineno":22,"static":false,"parameters":[{"name":"addresses","class":"Array","object_id":5103700,"value":"[192.0.2.1, 172.16.0.1, 192.0.2.0/24, 172.16.0.0/16, 10.0.0.0/8, 2001:0db8:85a3:0000:0000:8a2e:0370:7334, fe80::1, ::1, 2001:0db8::/32, fe80::/10 (...1 more items)]","kind":"rest","size":11}],"receiver":{"class":"Mastodon::CLI::IpBlocks","object_id":5103720,"value":"#<Mastodon::CLI::IpBlocks:0x00007fdc09070ed0>"}},{"id":834622,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834623,"event":"return","thread_id":9160,"parent_id":834622,"elapsed":0.000536787,"elapsed_instrumentation":0.0003768359893001616},{"id":834624,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5103740,"value":"#<IpBlock:0x00007fdc069f2088>"}},{"id":834625,"event":"return","thread_id":9160,"parent_id":834624,"elapsed":3.112599370069802e-05,"elapsed_instrumentation":0.0001482049992773682},{"id":834626,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834627,"event":"return","thread_id":9160,"parent_id":834626,"elapsed":2.8098991606384516e-05,"elapsed_instrumentation":0.00021896199905313551,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834628,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834629,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834630,"event":"return","thread_id":9160,"parent_id":834629,"elapsed":0.000808151,"elapsed_instrumentation":0.00013658200623467565},{"id":834631,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834632,"event":"return","thread_id":9160,"parent_id":834631,"elapsed":0.002404265,"elapsed_instrumentation":0.00011339399497956038},{"id":834633,"event":"return","thread_id":9160,"parent_id":834628,"elapsed":0.004087949986569583,"elapsed_instrumentation":0.0002764360106084496,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834634,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834635,"event":"return","thread_id":9160,"parent_id":834634,"elapsed":6.760004907846451e-06,"elapsed_instrumentation":0.00019711299682967365,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834636,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834637,"event":"return","thread_id":9160,"parent_id":834636,"elapsed":5.940004484727979e-06,"elapsed_instrumentation":0.00014422202366404235,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834638,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834639,"event":"return","thread_id":9160,"parent_id":834638,"elapsed":0.000947566,"elapsed_instrumentation":9.44949861150235e-05},{"id":834640,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834641,"event":"return","thread_id":9160,"parent_id":834640,"elapsed":0.000669012,"elapsed_instrumentation":0.0001553799957036972},{"id":834642,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834643,"event":"return","thread_id":9160,"parent_id":834642,"elapsed":4.0669983718544245e-06,"elapsed_instrumentation":0.00016996797057799995,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834644,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834645,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5103820,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834646,"event":"return","thread_id":9160,"parent_id":834645,"elapsed":0.0014752910064999014,"elapsed_instrumentation":0.00013713398948311806,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834647,"event":"return","thread_id":9160,"parent_id":834644,"elapsed":0.0018021200085058808,"elapsed_instrumentation":0.00014037700020708144,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834648,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834649,"event":"return","thread_id":9160,"parent_id":834648,"elapsed":0.000715673,"elapsed_instrumentation":0.00010254999506287277},{"id":834650,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5103840,"value":"#<IpBlock:0x00007fdc069f1188>"}},{"id":834651,"event":"return","thread_id":9160,"parent_id":834650,"elapsed":3.210199065506458e-05,"elapsed_instrumentation":0.0002234679996035993},{"id":834652,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834653,"event":"return","thread_id":9160,"parent_id":834652,"elapsed":1.906199031509459e-05,"elapsed_instrumentation":0.0001452759897802025,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834654,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834655,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834656,"event":"return","thread_id":9160,"parent_id":834655,"elapsed":0.000848983,"elapsed_instrumentation":0.00016164101543836296},{"id":834657,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834658,"event":"return","thread_id":9160,"parent_id":834657,"elapsed":0.002539544,"elapsed_instrumentation":8.878001244738698e-05},{"id":834659,"event":"return","thread_id":9160,"parent_id":834654,"elapsed":0.0036455900117289275,"elapsed_instrumentation":0.00016997597413137555,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834660,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834661,"event":"return","thread_id":9160,"parent_id":834660,"elapsed":3.9529986679553986e-06,"elapsed_instrumentation":0.00011854799231514335,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834662,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834663,"event":"return","thread_id":9160,"parent_id":834662,"elapsed":4.089000867679715e-06,"elapsed_instrumentation":7.909099804237485e-05,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834664,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834665,"event":"return","thread_id":9160,"parent_id":834664,"elapsed":0.000818652,"elapsed_instrumentation":8.215499110519886e-05},{"id":834666,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834667,"event":"return","thread_id":9160,"parent_id":834666,"elapsed":0.000647218,"elapsed_instrumentation":7.726499461568892e-05},{"id":834668,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103900,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834669,"event":"return","thread_id":9160,"parent_id":834668,"elapsed":3.5159755498170853e-06,"elapsed_instrumentation":0.00015019101556390524,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834670,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103900,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834671,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5103920,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834672,"event":"return","thread_id":9160,"parent_id":834671,"elapsed":0.0012566889927256852,"elapsed_instrumentation":0.0001334069820586592,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834673,"event":"return","thread_id":9160,"parent_id":834670,"elapsed":0.0015493239916395396,"elapsed_instrumentation":0.00011584203457459807,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834674,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834675,"event":"return","thread_id":9160,"parent_id":834674,"elapsed":0.000668461,"elapsed_instrumentation":7.837597513571382e-05},{"id":834676,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5103940,"value":"#<IpBlock:0x00007fdc069f0508>"}},{"id":834677,"event":"return","thread_id":9160,"parent_id":834676,"elapsed":2.0054983906447887e-05,"elapsed_instrumentation":0.00012425699969753623},{"id":834678,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834679,"event":"return","thread_id":9160,"parent_id":834678,"elapsed":1.8773978808894753e-05,"elapsed_instrumentation":0.0001227880420628935,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834680,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834681,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834682,"event":"return","thread_id":9160,"parent_id":834681,"elapsed":0.000709881,"elapsed_instrumentation":7.578099030070007e-05},{"id":834683,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834684,"event":"return","thread_id":9160,"parent_id":834683,"elapsed":0.001954806,"elapsed_instrumentation":7.005198858678341e-05},{"id":834685,"event":"return","thread_id":9160,"parent_id":834680,"elapsed":0.002841691020876169,"elapsed_instrumentation":0.0005830420122947544,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834686,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834687,"event":"return","thread_id":9160,"parent_id":834686,"elapsed":3.911001840606332e-06,"elapsed_instrumentation":0.00016106502152979374,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834688,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5103960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834689,"event":"return","thread_id":9160,"parent_id":834688,"elapsed":4.6539935283362865e-06,"elapsed_instrumentation":0.00010692898649722338,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834690,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834691,"event":"return","thread_id":9160,"parent_id":834690,"elapsed":0.000812423,"elapsed_instrumentation":9.248001151718199e-05},{"id":834692,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834693,"event":"return","thread_id":9160,"parent_id":834692,"elapsed":0.000481014,"elapsed_instrumentation":0.0002661749895196408},{"id":834694,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834695,"event":"return","thread_id":9160,"parent_id":834694,"elapsed":3.689987352117896e-06,"elapsed_instrumentation":0.00014391200966201723,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834696,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834697,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104020,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834698,"event":"return","thread_id":9160,"parent_id":834697,"elapsed":0.0007026320090517402,"elapsed_instrumentation":0.000318610982503742,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834699,"event":"return","thread_id":9160,"parent_id":834696,"elapsed":0.0012186139938421547,"elapsed_instrumentation":0.00012352500925771892,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834700,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834701,"event":"return","thread_id":9160,"parent_id":834700,"elapsed":0.000662754,"elapsed_instrumentation":8.481001714244485e-05},{"id":834702,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104040,"value":"#<IpBlock:0x00007fdc06b1f8c0>"}},{"id":834703,"event":"return","thread_id":9160,"parent_id":834702,"elapsed":2.484899596311152e-05,"elapsed_instrumentation":0.0001648559991735965},{"id":834704,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834705,"event":"return","thread_id":9160,"parent_id":834704,"elapsed":2.1777988877147436e-05,"elapsed_instrumentation":0.00025565800024196506,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834706,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834707,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834708,"event":"return","thread_id":9160,"parent_id":834707,"elapsed":0.000618107,"elapsed_instrumentation":0.0001244409941136837},{"id":834709,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834710,"event":"return","thread_id":9160,"parent_id":834709,"elapsed":0.001906581,"elapsed_instrumentation":0.0001458540209569037},{"id":834711,"event":"return","thread_id":9160,"parent_id":834706,"elapsed":0.0033787790162023157,"elapsed_instrumentation":0.00019930701819248497,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834712,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834713,"event":"return","thread_id":9160,"parent_id":834712,"elapsed":3.958004526793957e-06,"elapsed_instrumentation":0.00012988198432140052,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834714,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834715,"event":"return","thread_id":9160,"parent_id":834714,"elapsed":1.1352996807545424e-05,"elapsed_instrumentation":0.00023179399431683123,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834716,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834717,"event":"return","thread_id":9160,"parent_id":834716,"elapsed":0.001024704,"elapsed_instrumentation":8.727301610633731e-05},{"id":834718,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834719,"event":"return","thread_id":9160,"parent_id":834718,"elapsed":0.000500744,"elapsed_instrumentation":7.175400969572365e-05},{"id":834720,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834721,"event":"return","thread_id":9160,"parent_id":834720,"elapsed":4.058994818478823e-06,"elapsed_instrumentation":0.00032656200346536934,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834722,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834723,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104120,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834724,"event":"return","thread_id":9160,"parent_id":834723,"elapsed":0.0010875599982682616,"elapsed_instrumentation":0.00011846699635498226,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834725,"event":"return","thread_id":9160,"parent_id":834722,"elapsed":0.001360029011266306,"elapsed_instrumentation":0.0001155560021288693,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834726,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834727,"event":"return","thread_id":9160,"parent_id":834726,"elapsed":0.000800638,"elapsed_instrumentation":0.00012943698675371706},{"id":834728,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104140,"value":"#<IpBlock:0x00007fdc06b1eec0>"}},{"id":834729,"event":"return","thread_id":9160,"parent_id":834728,"elapsed":3.5527016734704375e-05,"elapsed_instrumentation":0.00021485998877324164},{"id":834730,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834731,"event":"return","thread_id":9160,"parent_id":834730,"elapsed":2.7828005841001868e-05,"elapsed_instrumentation":0.00038809998659417033,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834732,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834733,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834734,"event":"return","thread_id":9160,"parent_id":834733,"elapsed":0.000636534,"elapsed_instrumentation":9.419498383067548e-05},{"id":834735,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834736,"event":"return","thread_id":9160,"parent_id":834735,"elapsed":0.001644384,"elapsed_instrumentation":7.702701259404421e-05},{"id":834737,"event":"return","thread_id":9160,"parent_id":834732,"elapsed":0.002951506001409143,"elapsed_instrumentation":0.00028967097750864923,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834738,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834739,"event":"return","thread_id":9160,"parent_id":834738,"elapsed":5.596986738964915e-06,"elapsed_instrumentation":0.00016619201051071286,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834740,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834741,"event":"return","thread_id":9160,"parent_id":834740,"elapsed":3.4949916880577803e-06,"elapsed_instrumentation":0.00011703098425641656,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834742,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834743,"event":"return","thread_id":9160,"parent_id":834742,"elapsed":0.001624188,"elapsed_instrumentation":0.00011379198986105621},{"id":834744,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834745,"event":"return","thread_id":9160,"parent_id":834744,"elapsed":0.000578508,"elapsed_instrumentation":9.340798715129495e-05},{"id":834746,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834747,"event":"return","thread_id":9160,"parent_id":834746,"elapsed":7.872993592172861e-06,"elapsed_instrumentation":0.0002451710170134902,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834748,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834749,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104220,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834750,"event":"return","thread_id":9160,"parent_id":834749,"elapsed":0.0013377490104176104,"elapsed_instrumentation":0.00023512198822572827,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834751,"event":"return","thread_id":9160,"parent_id":834748,"elapsed":0.001871521002613008,"elapsed_instrumentation":0.00035044600372202694,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834752,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834753,"event":"return","thread_id":9160,"parent_id":834752,"elapsed":0.000636555,"elapsed_instrumentation":0.00010184300481341779},{"id":834754,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104240,"value":"#<IpBlock:0x00007fdc06b1e240>"}},{"id":834755,"event":"return","thread_id":9160,"parent_id":834754,"elapsed":2.1822983399033546e-05,"elapsed_instrumentation":0.00013237600796855986},{"id":834756,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834757,"event":"return","thread_id":9160,"parent_id":834756,"elapsed":2.088898327201605e-05,"elapsed_instrumentation":0.0001598670205567032,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834758,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834759,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834760,"event":"return","thread_id":9160,"parent_id":834759,"elapsed":0.000669072,"elapsed_instrumentation":9.37779841478914e-05},{"id":834761,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834762,"event":"return","thread_id":9160,"parent_id":834761,"elapsed":0.001698135,"elapsed_instrumentation":7.958902278915048e-05},{"id":834763,"event":"return","thread_id":9160,"parent_id":834758,"elapsed":0.002940506994491443,"elapsed_instrumentation":0.00019220900139771402,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834764,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834765,"event":"return","thread_id":9160,"parent_id":834764,"elapsed":6.497983122244477e-06,"elapsed_instrumentation":0.00012559001334011555,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834766,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834767,"event":"return","thread_id":9160,"parent_id":834766,"elapsed":4.270987119525671e-06,"elapsed_instrumentation":0.00010697299148887396,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834768,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834769,"event":"return","thread_id":9160,"parent_id":834768,"elapsed":0.000934581,"elapsed_instrumentation":8.122299914248288e-05},{"id":834770,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834771,"event":"return","thread_id":9160,"parent_id":834770,"elapsed":0.000615794,"elapsed_instrumentation":7.541899685747921e-05},{"id":834772,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834773,"event":"return","thread_id":9160,"parent_id":834772,"elapsed":2.988992491737008e-06,"elapsed_instrumentation":0.00011948600877076387,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834774,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834775,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104320,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834776,"event":"return","thread_id":9160,"parent_id":834775,"elapsed":0.0008312799909617752,"elapsed_instrumentation":0.00012450397480279207,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834777,"event":"return","thread_id":9160,"parent_id":834774,"elapsed":0.0011064749851357192,"elapsed_instrumentation":0.00011299701873213053,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834778,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834779,"event":"return","thread_id":9160,"parent_id":834778,"elapsed":0.000531193,"elapsed_instrumentation":0.00024522899184376},{"id":834780,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104340,"value":"#<IpBlock:0x00007fdc06b1d980>"}},{"id":834781,"event":"return","thread_id":9160,"parent_id":834780,"elapsed":2.0373001461848617e-05,"elapsed_instrumentation":0.0001239099947270006},{"id":834782,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834783,"event":"return","thread_id":9160,"parent_id":834782,"elapsed":1.7152982763946056e-05,"elapsed_instrumentation":0.00013857000158168375,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834784,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834785,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834786,"event":"return","thread_id":9160,"parent_id":834785,"elapsed":0.000407178,"elapsed_instrumentation":7.53659987822175e-05},{"id":834787,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834788,"event":"return","thread_id":9160,"parent_id":834787,"elapsed":0.001621108,"elapsed_instrumentation":9.034498361870646e-05},{"id":834789,"event":"return","thread_id":9160,"parent_id":834784,"elapsed":0.0027743740065488964,"elapsed_instrumentation":0.00016568897990509868,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834790,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834791,"event":"return","thread_id":9160,"parent_id":834790,"elapsed":3.1410017982125282e-06,"elapsed_instrumentation":0.00010469401604495943,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834792,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834793,"event":"return","thread_id":9160,"parent_id":834792,"elapsed":2.9249931685626507e-06,"elapsed_instrumentation":0.00011317498865537345,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834794,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834795,"event":"return","thread_id":9160,"parent_id":834794,"elapsed":0.001052302,"elapsed_instrumentation":8.215999696403742e-05},{"id":834796,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834797,"event":"return","thread_id":9160,"parent_id":834796,"elapsed":0.000455483,"elapsed_instrumentation":7.954300963319838e-05},{"id":834798,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104400,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834799,"event":"return","thread_id":9160,"parent_id":834798,"elapsed":3.4469994716346264e-06,"elapsed_instrumentation":0.00014606199692934752,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834800,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104400,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834801,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104420,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834802,"event":"return","thread_id":9160,"parent_id":834801,"elapsed":0.0006307959847617894,"elapsed_instrumentation":0.0001345959899481386,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834803,"event":"return","thread_id":9160,"parent_id":834800,"elapsed":0.0009280460071749985,"elapsed_instrumentation":0.00013115801266394556,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834804,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834805,"event":"return","thread_id":9160,"parent_id":834804,"elapsed":0.000606894,"elapsed_instrumentation":8.063801215030253e-05},{"id":834806,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104440,"value":"#<IpBlock:0x00007fdc06b1d0c0>"}},{"id":834807,"event":"return","thread_id":9160,"parent_id":834806,"elapsed":2.3647007765248418e-05,"elapsed_instrumentation":0.00012834501103498042},{"id":834808,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834809,"event":"return","thread_id":9160,"parent_id":834808,"elapsed":1.8758000805974007e-05,"elapsed_instrumentation":0.0001273480011150241,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834810,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834811,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834812,"event":"return","thread_id":9160,"parent_id":834811,"elapsed":0.0004088,"elapsed_instrumentation":7.529399590566754e-05},{"id":834813,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834814,"event":"return","thread_id":9160,"parent_id":834813,"elapsed":0.00125533,"elapsed_instrumentation":7.157801883295178e-05},{"id":834815,"event":"return","thread_id":9160,"parent_id":834810,"elapsed":0.0022014270070940256,"elapsed_instrumentation":0.0002669560199137777,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834816,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834817,"event":"return","thread_id":9160,"parent_id":834816,"elapsed":3.0729861464351416e-06,"elapsed_instrumentation":9.542802581563592e-05,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834818,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834819,"event":"return","thread_id":9160,"parent_id":834818,"elapsed":2.5529880076646805e-06,"elapsed_instrumentation":7.940203067846596e-05,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834820,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834821,"event":"return","thread_id":9160,"parent_id":834820,"elapsed":0.000608314,"elapsed_instrumentation":7.363600889220834e-05},{"id":834822,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834823,"event":"return","thread_id":9160,"parent_id":834822,"elapsed":0.000394814,"elapsed_instrumentation":6.949601811356843e-05},{"id":834824,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834825,"event":"return","thread_id":9160,"parent_id":834824,"elapsed":3.141991328448057e-06,"elapsed_instrumentation":0.0001146109716501087,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834826,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834827,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104520,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834828,"event":"return","thread_id":9160,"parent_id":834827,"elapsed":0.0005433979968074709,"elapsed_instrumentation":0.00013234300422482193,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834829,"event":"return","thread_id":9160,"parent_id":834826,"elapsed":0.0011128019832540303,"elapsed_instrumentation":0.00010802000178955495,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834830,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834831,"event":"return","thread_id":9160,"parent_id":834830,"elapsed":0.000582891,"elapsed_instrumentation":7.139801164157689e-05},{"id":834832,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104540,"value":"#<IpBlock:0x00007fdc06b1c6c0>"}},{"id":834833,"event":"return","thread_id":9160,"parent_id":834832,"elapsed":1.7687998479232192e-05,"elapsed_instrumentation":0.00011751300189644098},{"id":834834,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834835,"event":"return","thread_id":9160,"parent_id":834834,"elapsed":1.5454977983608842e-05,"elapsed_instrumentation":0.00012136800796724856,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834836,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104580,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834837,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834838,"event":"return","thread_id":9160,"parent_id":834837,"elapsed":0.000511244,"elapsed_instrumentation":7.910799467936158e-05},{"id":834839,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834840,"event":"return","thread_id":9160,"parent_id":834839,"elapsed":0.00133559,"elapsed_instrumentation":0.00018260098295286298},{"id":834841,"event":"return","thread_id":9160,"parent_id":834836,"elapsed":0.00249241798883304,"elapsed_instrumentation":0.00016833702102303505,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834842,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104580,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834843,"event":"return","thread_id":9160,"parent_id":834842,"elapsed":6.591988494619727e-06,"elapsed_instrumentation":0.00022107199765741825,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834844,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834845,"event":"return","thread_id":9160,"parent_id":834844,"elapsed":1.2204982340335846e-05,"elapsed_instrumentation":0.00014626298798248172,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834846,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834847,"event":"return","thread_id":9160,"parent_id":834846,"elapsed":0.00114932,"elapsed_instrumentation":0.00031913400744087994},{"id":834848,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834849,"event":"return","thread_id":9160,"parent_id":834848,"elapsed":0.000609135,"elapsed_instrumentation":8.83470056578517e-05},{"id":834850,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104600,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834851,"event":"return","thread_id":9160,"parent_id":834850,"elapsed":4.130008164793253e-06,"elapsed_instrumentation":0.00016231200424954295,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834852,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104600,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834853,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104620,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834854,"event":"return","thread_id":9160,"parent_id":834853,"elapsed":0.0007602660043630749,"elapsed_instrumentation":0.00012982799671590328,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834855,"event":"return","thread_id":9160,"parent_id":834852,"elapsed":0.001048367004841566,"elapsed_instrumentation":0.00012010100181214511,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834856,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834857,"event":"return","thread_id":9160,"parent_id":834856,"elapsed":0.000451887,"elapsed_instrumentation":8.322499343194067e-05},{"id":834858,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":5104640,"value":"#<IpBlock:0x00007fdc06b1be00>"}},{"id":834859,"event":"return","thread_id":9160,"parent_id":834858,"elapsed":2.8853974072262645e-05,"elapsed_instrumentation":0.0002709499967750162},{"id":834860,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104660,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834861,"event":"return","thread_id":9160,"parent_id":834860,"elapsed":1.9063008949160576e-05,"elapsed_instrumentation":0.0001716099795885384,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a1a2168 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":218220,"size":1}},{"id":834862,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834863,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834864,"event":"return","thread_id":9160,"parent_id":834863,"elapsed":0.0006203,"elapsed_instrumentation":9.083599434234202e-05},{"id":834865,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834866,"event":"return","thread_id":9160,"parent_id":834865,"elapsed":0.001581107,"elapsed_instrumentation":6.99829834047705e-05},{"id":834867,"event":"return","thread_id":9160,"parent_id":834862,"elapsed":0.003133594000246376,"elapsed_instrumentation":0.00015344697749242187,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dca16b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca2ba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0dca3550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5084880,"size":3}},{"id":834868,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084860,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09affab8>"}},{"id":834869,"event":"return","thread_id":9160,"parent_id":834868,"elapsed":3.7659774534404278e-06,"elapsed_instrumentation":0.00020103302085772157,"return_value":{"class":"Array","value":"[]","object_id":5084900,"size":0}},{"id":834870,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104660,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":218200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0e23d088>"}},{"id":834871,"event":"return","thread_id":9160,"parent_id":834870,"elapsed":3.0049995984882116e-06,"elapsed_instrumentation":8.157698903232813e-05,"return_value":{"class":"Array","value":"[]","object_id":218320,"size":0}},{"id":834872,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":834873,"event":"return","thread_id":9160,"parent_id":834872,"elapsed":0.000736746,"elapsed_instrumentation":9.265300468541682e-05},{"id":834874,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":834875,"event":"return","thread_id":9160,"parent_id":834874,"elapsed":0.000585598,"elapsed_instrumentation":7.906500832177699e-05},{"id":834876,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834877,"event":"return","thread_id":9160,"parent_id":834876,"elapsed":3.121996996924281e-06,"elapsed_instrumentation":0.0001400390174239874,"return_value":{"class":"Array","value":"[]","object_id":5084960,"size":0}},{"id":834878,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5104700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":5084940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09afeb18>"}},{"id":834879,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5104720,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":834880,"event":"return","thread_id":9160,"parent_id":834879,"elapsed":0.0005444679991342127,"elapsed_instrumentation":0.0001268539926968515,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":834881,"event":"return","thread_id":9160,"parent_id":834878,"elapsed":0.0008388519927393645,"elapsed_instrumentation":0.00012042399612255394,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0dd15ce0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":5085000,"size":1}},{"id":834882,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":834883,"event":"return","thread_id":9160,"parent_id":834882,"elapsed":0.000521004,"elapsed_instrumentation":8.395902113988996e-05},{"id":834884,"event":"return","thread_id":9160,"parent_id":834621,"elapsed":0.12438432199996896,"elapsed_instrumentation":0.0002610250376164913,"return_value":{"class":"IO","value":"#<IO:0x00007fdc21298f60>","object_id":4113040}}]}