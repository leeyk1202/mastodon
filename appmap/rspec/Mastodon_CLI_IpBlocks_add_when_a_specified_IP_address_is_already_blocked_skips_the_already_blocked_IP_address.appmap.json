{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::IpBlocks #add when a specified IP address is already blocked skips the already blocked IP address","source_location":"spec/lib/mastodon/cli/ip_blocks_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib/mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"IpBlocks","type":"class","children":[{"name":"add","type":"function","location":"lib/mastodon/cli/ip_blocks.rb:22","static":false}]}]}]}]},{"name":"app/models/concerns","type":"package","children":[{"name":"IpBlock","type":"class","children":[{"name":"expires_in=","type":"function","location":"app/models/concerns/expireable.rb:19","static":false}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]}],"events":[{"id":2191863,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::IpBlocks","method_id":"add","path":"lib/mastodon/cli/ip_blocks.rb","lineno":22,"static":false,"parameters":[{"name":"addresses","class":"Array","object_id":11147500,"value":"[192.0.2.1, 172.16.0.1, 192.0.2.0/24, 172.16.0.0/16, 10.0.0.0/8, 2001:0db8:85a3:0000:0000:8a2e:0370:7334, fe80::1, ::1, 2001:0db8::/32, fe80::/10 (...1 more items)]","kind":"rest","size":11}],"receiver":{"class":"Mastodon::CLI::IpBlocks","object_id":11147520,"value":"#<Mastodon::CLI::IpBlocks:0x00007fc9329c2810>"}},{"id":2191864,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191865,"event":"return","thread_id":9160,"parent_id":2191864,"elapsed":0.000508852,"elapsed_instrumentation":0.0001026419922709465},{"id":2191866,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11147540,"value":"#<IpBlock:0x00007fc8e2197d20>"}},{"id":2191867,"event":"return","thread_id":9160,"parent_id":2191866,"elapsed":3.1585979741066694e-05,"elapsed_instrumentation":0.00016357406275346875},{"id":2191868,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191869,"event":"return","thread_id":9160,"parent_id":2191868,"elapsed":3.348401514813304e-05,"elapsed_instrumentation":0.0002534950035624206,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2191870,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147580,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191871,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191872,"event":"return","thread_id":9160,"parent_id":2191871,"elapsed":0.00058196,"elapsed_instrumentation":0.00021660502534359694},{"id":2191873,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191874,"event":"return","thread_id":9160,"parent_id":2191873,"elapsed":0.001931932,"elapsed_instrumentation":8.277402957901359e-05},{"id":2191875,"event":"return","thread_id":9160,"parent_id":2191870,"elapsed":0.0031722999992780387,"elapsed_instrumentation":0.0003151780110783875,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2191876,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147580,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191877,"event":"return","thread_id":9160,"parent_id":2191876,"elapsed":4.842004273086786e-06,"elapsed_instrumentation":0.000137358030769974,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2191878,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191879,"event":"return","thread_id":9160,"parent_id":2191878,"elapsed":2.54996120929718e-06,"elapsed_instrumentation":7.803499465808272e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2191880,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2191881,"event":"return","thread_id":9160,"parent_id":2191880,"elapsed":0.000567861,"elapsed_instrumentation":7.031101267784834e-05},{"id":2191882,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191883,"event":"return","thread_id":9160,"parent_id":2191882,"elapsed":0.000414987,"elapsed_instrumentation":6.421597208827734e-05},{"id":2191884,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147600,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191885,"event":"return","thread_id":9160,"parent_id":2191884,"elapsed":4.186003934592009e-06,"elapsed_instrumentation":0.00012178398901596665,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2191886,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147600,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191887,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11147620,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2191888,"event":"return","thread_id":9160,"parent_id":2191887,"elapsed":0.0006680350052192807,"elapsed_instrumentation":0.00015366403385996819,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2191889,"event":"return","thread_id":9160,"parent_id":2191886,"elapsed":0.000984243000857532,"elapsed_instrumentation":0.00012586795492097735,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2191890,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191891,"event":"return","thread_id":9160,"parent_id":2191890,"elapsed":0.000518315,"elapsed_instrumentation":7.748400093987584e-05},{"id":2191892,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11147640,"value":"#<IpBlock:0x00007fc8e2197460>"}},{"id":2191893,"event":"return","thread_id":9160,"parent_id":2191892,"elapsed":1.8229999113827944e-05,"elapsed_instrumentation":0.00010680296691134572},{"id":2191894,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147660,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191895,"event":"return","thread_id":9160,"parent_id":2191894,"elapsed":1.9825005438178778e-05,"elapsed_instrumentation":0.00012957595754414797,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2191896,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191897,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191898,"event":"return","thread_id":9160,"parent_id":2191897,"elapsed":0.000569884,"elapsed_instrumentation":8.448801236227155e-05},{"id":2191899,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191900,"event":"return","thread_id":9160,"parent_id":2191899,"elapsed":0.001488217,"elapsed_instrumentation":8.475698996335268e-05},{"id":2191901,"event":"return","thread_id":9160,"parent_id":2191896,"elapsed":0.002670803980436176,"elapsed_instrumentation":0.00014261400792747736,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2191902,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191903,"event":"return","thread_id":9160,"parent_id":2191902,"elapsed":4.2800093069672585e-06,"elapsed_instrumentation":9.880895959213376e-05,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2191904,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147660,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191905,"event":"return","thread_id":9160,"parent_id":2191904,"elapsed":2.515967935323715e-06,"elapsed_instrumentation":7.310998626053333e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2191906,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2191907,"event":"return","thread_id":9160,"parent_id":2191906,"elapsed":0.000689394,"elapsed_instrumentation":7.657700916752219e-05},{"id":2191908,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191909,"event":"return","thread_id":9160,"parent_id":2191908,"elapsed":0.00049082,"elapsed_instrumentation":7.461302448064089e-05},{"id":2191910,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191911,"event":"return","thread_id":9160,"parent_id":2191910,"elapsed":5.929963663220406e-06,"elapsed_instrumentation":0.00013776705600321293,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2191912,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191913,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11147720,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2191914,"event":"return","thread_id":9160,"parent_id":2191913,"elapsed":0.0008336799801327288,"elapsed_instrumentation":0.00014670105883851647,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2191915,"event":"return","thread_id":9160,"parent_id":2191912,"elapsed":0.0012025840114802122,"elapsed_instrumentation":0.00015030504437163472,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2191916,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191917,"event":"return","thread_id":9160,"parent_id":2191916,"elapsed":0.000524278,"elapsed_instrumentation":9.116699220612645e-05},{"id":2191918,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11147740,"value":"#<IpBlock:0x00007fc8e2196ba0>"}},{"id":2191919,"event":"return","thread_id":9160,"parent_id":2191918,"elapsed":2.084200968965888e-05,"elapsed_instrumentation":0.0001295030815526843},{"id":2191920,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191921,"event":"return","thread_id":9160,"parent_id":2191920,"elapsed":1.977902138605714e-05,"elapsed_instrumentation":0.00012489204527810216,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2191922,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191923,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191924,"event":"return","thread_id":9160,"parent_id":2191923,"elapsed":0.000441076,"elapsed_instrumentation":0.00025096803437918425},{"id":2191925,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191926,"event":"return","thread_id":9160,"parent_id":2191925,"elapsed":0.00140991,"elapsed_instrumentation":7.810501847416162e-05},{"id":2191927,"event":"return","thread_id":9160,"parent_id":2191922,"elapsed":0.0024981899769045413,"elapsed_instrumentation":0.00016611703904345632,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2191928,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191929,"event":"return","thread_id":9160,"parent_id":2191928,"elapsed":4.203000571578741e-06,"elapsed_instrumentation":0.0001118070213124156,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2191930,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191931,"event":"return","thread_id":9160,"parent_id":2191930,"elapsed":2.7360511012375355e-06,"elapsed_instrumentation":7.523194653913379e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2191932,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2191933,"event":"return","thread_id":9160,"parent_id":2191932,"elapsed":0.00068234,"elapsed_instrumentation":7.190002361312509e-05},{"id":2191934,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191935,"event":"return","thread_id":9160,"parent_id":2191934,"elapsed":0.000453716,"elapsed_instrumentation":7.610803004354239e-05},{"id":2191936,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191937,"event":"return","thread_id":9160,"parent_id":2191936,"elapsed":3.5859993658959866e-06,"elapsed_instrumentation":0.00011022703256458044,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2191938,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191939,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11147820,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2191940,"event":"return","thread_id":9160,"parent_id":2191939,"elapsed":0.0005722930072806776,"elapsed_instrumentation":0.0001085010590031743,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2191941,"event":"return","thread_id":9160,"parent_id":2191938,"elapsed":0.0008243249612860382,"elapsed_instrumentation":0.00010132300667464733,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2191942,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191943,"event":"return","thread_id":9160,"parent_id":2191942,"elapsed":0.000427539,"elapsed_instrumentation":6.747199222445488e-05},{"id":2191944,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11147840,"value":"#<IpBlock:0x00007fc8e21962e0>"}},{"id":2191945,"event":"return","thread_id":9160,"parent_id":2191944,"elapsed":0.00014878000365570188,"elapsed_instrumentation":0.00011548498878255486},{"id":2191946,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191947,"event":"return","thread_id":9160,"parent_id":2191946,"elapsed":1.8020044080913067e-05,"elapsed_instrumentation":0.00012128095841035247,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2191948,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191949,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191950,"event":"return","thread_id":9160,"parent_id":2191949,"elapsed":0.000391605,"elapsed_instrumentation":7.127999560907483e-05},{"id":2191951,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191952,"event":"return","thread_id":9160,"parent_id":2191951,"elapsed":0.001284405,"elapsed_instrumentation":7.237098179757595e-05},{"id":2191953,"event":"return","thread_id":9160,"parent_id":2191948,"elapsed":0.002266880008392036,"elapsed_instrumentation":0.00013621593825519085,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2191954,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147880,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191955,"event":"return","thread_id":9160,"parent_id":2191954,"elapsed":6.135960575193167e-06,"elapsed_instrumentation":0.00027955404948443174,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2191956,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191957,"event":"return","thread_id":9160,"parent_id":2191956,"elapsed":2.9539805836975574e-06,"elapsed_instrumentation":0.00010152102913707495,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2191958,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2191959,"event":"return","thread_id":9160,"parent_id":2191958,"elapsed":0.000593298,"elapsed_instrumentation":7.895199814811349e-05},{"id":2191960,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191961,"event":"return","thread_id":9160,"parent_id":2191960,"elapsed":0.000645685,"elapsed_instrumentation":7.619301322847605e-05},{"id":2191962,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147900,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191963,"event":"return","thread_id":9160,"parent_id":2191962,"elapsed":4.086003173142672e-06,"elapsed_instrumentation":0.00012745498679578304,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2191964,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147900,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191965,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11147920,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2191966,"event":"return","thread_id":9160,"parent_id":2191965,"elapsed":0.0006898349965922534,"elapsed_instrumentation":0.00011302798520773649,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2191967,"event":"return","thread_id":9160,"parent_id":2191964,"elapsed":0.0009536789730191231,"elapsed_instrumentation":0.00010381301399320364,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2191968,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191969,"event":"return","thread_id":9160,"parent_id":2191968,"elapsed":0.000392087,"elapsed_instrumentation":7.781502790749073e-05},{"id":2191970,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11147940,"value":"#<IpBlock:0x00007fc8e21958e0>"}},{"id":2191971,"event":"return","thread_id":9160,"parent_id":2191970,"elapsed":1.8244958482682705e-05,"elapsed_instrumentation":0.00011147401528432965},{"id":2191972,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191973,"event":"return","thread_id":9160,"parent_id":2191972,"elapsed":1.898000482469797e-05,"elapsed_instrumentation":0.00014509307220578194,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2191974,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191975,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191976,"event":"return","thread_id":9160,"parent_id":2191975,"elapsed":0.000370003,"elapsed_instrumentation":7.463397923856974e-05},{"id":2191977,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191978,"event":"return","thread_id":9160,"parent_id":2191977,"elapsed":0.001263145,"elapsed_instrumentation":6.36790064163506e-05},{"id":2191979,"event":"return","thread_id":9160,"parent_id":2191974,"elapsed":0.0021984800114296377,"elapsed_instrumentation":0.00013048999244347215,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2191980,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2191981,"event":"return","thread_id":9160,"parent_id":2191980,"elapsed":3.467022906988859e-06,"elapsed_instrumentation":8.885795250535011e-05,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2191982,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11147960,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191983,"event":"return","thread_id":9160,"parent_id":2191982,"elapsed":2.460030373185873e-06,"elapsed_instrumentation":7.014500442892313e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2191984,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2191985,"event":"return","thread_id":9160,"parent_id":2191984,"elapsed":0.000558964,"elapsed_instrumentation":6.642198422923684e-05},{"id":2191986,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2191987,"event":"return","thread_id":9160,"parent_id":2191986,"elapsed":0.000283273,"elapsed_instrumentation":6.108899833634496e-05},{"id":2191988,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191989,"event":"return","thread_id":9160,"parent_id":2191988,"elapsed":3.1199888326227665e-06,"elapsed_instrumentation":0.00010383606422692537,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2191990,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2191991,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11148020,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2191992,"event":"return","thread_id":9160,"parent_id":2191991,"elapsed":0.0005379960057325661,"elapsed_instrumentation":0.00010218098759651184,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2191993,"event":"return","thread_id":9160,"parent_id":2191990,"elapsed":0.0007696429966017604,"elapsed_instrumentation":9.920092998072505e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2191994,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2191995,"event":"return","thread_id":9160,"parent_id":2191994,"elapsed":0.0003054,"elapsed_instrumentation":6.363500142470002e-05},{"id":2191996,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11148040,"value":"#<IpBlock:0x00007fc8e2194ee0>"}},{"id":2191997,"event":"return","thread_id":9160,"parent_id":2191996,"elapsed":1.7568992916494608e-05,"elapsed_instrumentation":0.00012169202091172338},{"id":2191998,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2191999,"event":"return","thread_id":9160,"parent_id":2191998,"elapsed":1.610303297638893e-05,"elapsed_instrumentation":0.00011211197124794126,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2192000,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192001,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192002,"event":"return","thread_id":9160,"parent_id":2192001,"elapsed":0.000365387,"elapsed_instrumentation":7.337896386161447e-05},{"id":2192003,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192004,"event":"return","thread_id":9160,"parent_id":2192003,"elapsed":0.001055877,"elapsed_instrumentation":6.70870067551732e-05},{"id":2192005,"event":"return","thread_id":9160,"parent_id":2192000,"elapsed":0.001917215995490551,"elapsed_instrumentation":0.00026719202287495136,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2192006,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192007,"event":"return","thread_id":9160,"parent_id":2192006,"elapsed":4.008994437754154e-06,"elapsed_instrumentation":9.583402425050735e-05,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2192008,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192009,"event":"return","thread_id":9160,"parent_id":2192008,"elapsed":2.742977812886238e-06,"elapsed_instrumentation":7.268699118867517e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2192010,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2192011,"event":"return","thread_id":9160,"parent_id":2192010,"elapsed":0.000537226,"elapsed_instrumentation":7.556402124464512e-05},{"id":2192012,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192013,"event":"return","thread_id":9160,"parent_id":2192012,"elapsed":0.000337005,"elapsed_instrumentation":6.920797750353813e-05},{"id":2192014,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192015,"event":"return","thread_id":9160,"parent_id":2192014,"elapsed":3.836990799754858e-06,"elapsed_instrumentation":0.00021534296683967113,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2192016,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192017,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11148120,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2192018,"event":"return","thread_id":9160,"parent_id":2192017,"elapsed":0.000487842014990747,"elapsed_instrumentation":0.0001113229664042592,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2192019,"event":"return","thread_id":9160,"parent_id":2192016,"elapsed":0.0008439099765382707,"elapsed_instrumentation":0.00011750799603760242,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2192020,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192021,"event":"return","thread_id":9160,"parent_id":2192020,"elapsed":0.000325558,"elapsed_instrumentation":7.213099161162972e-05},{"id":2192022,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11148140,"value":"#<IpBlock:0x00007fc8e2194620>"}},{"id":2192023,"event":"return","thread_id":9160,"parent_id":2192022,"elapsed":1.848494866862893e-05,"elapsed_instrumentation":0.00010921299690380692},{"id":2192024,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192025,"event":"return","thread_id":9160,"parent_id":2192024,"elapsed":1.928600249812007e-05,"elapsed_instrumentation":0.00011075392831116915,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2192026,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192027,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192028,"event":"return","thread_id":9160,"parent_id":2192027,"elapsed":0.000302818,"elapsed_instrumentation":0.00034073495771735907},{"id":2192029,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192030,"event":"return","thread_id":9160,"parent_id":2192029,"elapsed":0.001322775,"elapsed_instrumentation":6.511795800179243e-05},{"id":2192031,"event":"return","thread_id":9160,"parent_id":2192026,"elapsed":0.0022363929892890155,"elapsed_instrumentation":0.0001844629878178239,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2192032,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192033,"event":"return","thread_id":9160,"parent_id":2192032,"elapsed":3.968016244471073e-06,"elapsed_instrumentation":9.232794400304556e-05,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2192034,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192035,"event":"return","thread_id":9160,"parent_id":2192034,"elapsed":2.500019036233425e-06,"elapsed_instrumentation":7.086602272465825e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2192036,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2192037,"event":"return","thread_id":9160,"parent_id":2192036,"elapsed":0.000698267,"elapsed_instrumentation":8.379702921956778e-05},{"id":2192038,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192039,"event":"return","thread_id":9160,"parent_id":2192038,"elapsed":0.000379533,"elapsed_instrumentation":7.727404590696096e-05},{"id":2192040,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192041,"event":"return","thread_id":9160,"parent_id":2192040,"elapsed":6.302958354353905e-06,"elapsed_instrumentation":0.00018446403555572033,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2192042,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192043,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11148220,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2192044,"event":"return","thread_id":9160,"parent_id":2192043,"elapsed":0.0007750020013190806,"elapsed_instrumentation":0.00013337098062038422,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2192045,"event":"return","thread_id":9160,"parent_id":2192042,"elapsed":0.001111198973376304,"elapsed_instrumentation":0.00023332401178777218,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2192046,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192047,"event":"return","thread_id":9160,"parent_id":2192046,"elapsed":0.000681781,"elapsed_instrumentation":8.13689548522234e-05},{"id":2192048,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11148240,"value":"#<IpBlock:0x00007fc8e2193ae0>"}},{"id":2192049,"event":"return","thread_id":9160,"parent_id":2192048,"elapsed":2.9588991310447454e-05,"elapsed_instrumentation":0.00016042793868109584},{"id":2192050,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192051,"event":"return","thread_id":9160,"parent_id":2192050,"elapsed":2.5559973437339067e-05,"elapsed_instrumentation":0.00016338401474058628,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2192052,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192053,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192054,"event":"return","thread_id":9160,"parent_id":2192053,"elapsed":0.00071335,"elapsed_instrumentation":0.00010214699432253838},{"id":2192055,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192056,"event":"return","thread_id":9160,"parent_id":2192055,"elapsed":0.002294881,"elapsed_instrumentation":0.0001257670228369534},{"id":2192057,"event":"return","thread_id":9160,"parent_id":2192052,"elapsed":0.004094520991202444,"elapsed_instrumentation":0.0002674550050869584,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2192058,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192059,"event":"return","thread_id":9160,"parent_id":2192058,"elapsed":4.8219808377325535e-06,"elapsed_instrumentation":0.00015971396351233125,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2192060,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192061,"event":"return","thread_id":9160,"parent_id":2192060,"elapsed":2.8230133466422558e-06,"elapsed_instrumentation":9.088002843782306e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2192062,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2192063,"event":"return","thread_id":9160,"parent_id":2192062,"elapsed":0.000917972,"elapsed_instrumentation":0.00010603101691231132},{"id":2192064,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192065,"event":"return","thread_id":9160,"parent_id":2192064,"elapsed":0.000593051,"elapsed_instrumentation":7.799500599503517e-05},{"id":2192066,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192067,"event":"return","thread_id":9160,"parent_id":2192066,"elapsed":4.642002750188112e-06,"elapsed_instrumentation":0.00016309594502672553,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2192068,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192069,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11148320,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2192070,"event":"return","thread_id":9160,"parent_id":2192069,"elapsed":0.0007867160020396113,"elapsed_instrumentation":0.00011625199113041162,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2192071,"event":"return","thread_id":9160,"parent_id":2192068,"elapsed":0.0010604399722069502,"elapsed_instrumentation":0.00011190399527549744,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2192072,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192073,"event":"return","thread_id":9160,"parent_id":2192072,"elapsed":0.000599272,"elapsed_instrumentation":0.0001404510112479329},{"id":2192074,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11148340,"value":"#<IpBlock:0x00007fc8e2193220>"}},{"id":2192075,"event":"return","thread_id":9160,"parent_id":2192074,"elapsed":1.8019054550677538e-05,"elapsed_instrumentation":0.00011493597412481904},{"id":2192076,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192077,"event":"return","thread_id":9160,"parent_id":2192076,"elapsed":1.9823957700282335e-05,"elapsed_instrumentation":0.0001267839688807726,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2192078,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192079,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192080,"event":"return","thread_id":9160,"parent_id":2192079,"elapsed":0.000376153,"elapsed_instrumentation":7.473502773791552e-05},{"id":2192081,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192082,"event":"return","thread_id":9160,"parent_id":2192081,"elapsed":0.001287394,"elapsed_instrumentation":6.940995808690786e-05},{"id":2192083,"event":"return","thread_id":9160,"parent_id":2192078,"elapsed":0.0022853389964438975,"elapsed_instrumentation":0.00013168103760108352,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2192084,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192085,"event":"return","thread_id":9160,"parent_id":2192084,"elapsed":5.4309493862092495e-06,"elapsed_instrumentation":0.0005043180426582694,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2192086,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192087,"event":"return","thread_id":9160,"parent_id":2192086,"elapsed":2.683955244719982e-06,"elapsed_instrumentation":8.768902625888586e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2192088,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2192089,"event":"return","thread_id":9160,"parent_id":2192088,"elapsed":0.00065008,"elapsed_instrumentation":0.00016237201634794474},{"id":2192090,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192091,"event":"return","thread_id":9160,"parent_id":2192090,"elapsed":0.000410327,"elapsed_instrumentation":0.00017940904945135117},{"id":2192092,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148400,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192093,"event":"return","thread_id":9160,"parent_id":2192092,"elapsed":4.216039087623358e-06,"elapsed_instrumentation":0.0001265450264327228,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2192094,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148400,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192095,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11148420,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2192096,"event":"return","thread_id":9160,"parent_id":2192095,"elapsed":0.00082465197192505,"elapsed_instrumentation":0.00013138004578649998,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2192097,"event":"return","thread_id":9160,"parent_id":2192094,"elapsed":0.0011240910389460623,"elapsed_instrumentation":0.00013342895545065403,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2192098,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192099,"event":"return","thread_id":9160,"parent_id":2192098,"elapsed":0.000588841,"elapsed_instrumentation":8.427398279309273e-05},{"id":2192100,"event":"call","thread_id":9160,"defined_class":"IpBlock","method_id":"expires_in=","path":"app/models/concerns/expireable.rb","lineno":19,"static":false,"parameters":[{"name":"interval","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"IpBlock","object_id":11148440,"value":"#<IpBlock:0x00007fc8e2192960>"}},{"id":2192101,"event":"return","thread_id":9160,"parent_id":2192100,"elapsed":2.0871986635029316e-05,"elapsed_instrumentation":0.00013889401452615857},{"id":2192102,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192103,"event":"return","thread_id":9160,"parent_id":2192102,"elapsed":1.9628030713647604e-05,"elapsed_instrumentation":0.0001221999409608543,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93408b8a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":318900,"size":1}},{"id":2192104,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192105,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192106,"event":"return","thread_id":9160,"parent_id":2192105,"elapsed":0.000359379,"elapsed_instrumentation":7.58059904910624e-05},{"id":2192107,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192108,"event":"return","thread_id":9160,"parent_id":2192107,"elapsed":0.001226556,"elapsed_instrumentation":6.776402005925775e-05},{"id":2192109,"event":"return","thread_id":9160,"parent_id":2192104,"elapsed":0.002285416005179286,"elapsed_instrumentation":0.00013046199455857277,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9316f4738 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f48f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9316f4af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529180,"size":3}},{"id":2192110,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529140,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fcd50>"}},{"id":2192111,"event":"return","thread_id":9160,"parent_id":2192110,"elapsed":4.2619649320840836e-06,"elapsed_instrumentation":0.0001582390395924449,"return_value":{"class":"Array","value":"[]","object_id":1529200,"size":0}},{"id":2192112,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":318880,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93543e670>"}},{"id":2192113,"event":"return","thread_id":9160,"parent_id":2192112,"elapsed":2.550950739532709e-06,"elapsed_instrumentation":7.527804700657725e-05,"return_value":{"class":"Array","value":"[]","object_id":319000,"size":0}},{"id":2192114,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"ip_blocks\" (\"created_at\", \"updated_at\", \"expires_at\", \"ip\", \"severity\", \"comment\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"","database_type":"postgres"}},{"id":2192115,"event":"return","thread_id":9160,"parent_id":2192114,"elapsed":0.000524556,"elapsed_instrumentation":7.419497705996037e-05},{"id":2192116,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2192117,"event":"return","thread_id":9160,"parent_id":2192116,"elapsed":0.000419909,"elapsed_instrumentation":7.230299524962902e-05},{"id":2192118,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192119,"event":"return","thread_id":9160,"parent_id":2192118,"elapsed":3.3919932320713997e-06,"elapsed_instrumentation":0.00021471298532560468,"return_value":{"class":"Array","value":"[]","object_id":1529260,"size":0}},{"id":2192120,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11148500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1529240,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9313fb9f0>"}},{"id":2192121,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":11148520,"value":"Cache delete: blocked_ips\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":2192122,"event":"return","thread_id":9160,"parent_id":2192121,"elapsed":0.0008054960053414106,"elapsed_instrumentation":0.00012766500003635883,"return_value":{"class":"Integer","value":"26","object_id":53}},{"id":2192123,"event":"return","thread_id":9160,"parent_id":2192120,"elapsed":0.001106871000956744,"elapsed_instrumentation":0.00015820300905033946,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93169ad50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1529300,"size":1}},{"id":2192124,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"ip_blocks\".* FROM \"ip_blocks\" WHERE \"ip_blocks\".\"ip\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2192125,"event":"return","thread_id":9160,"parent_id":2192124,"elapsed":0.00043213,"elapsed_instrumentation":7.401104085147381e-05},{"id":2192126,"event":"return","thread_id":9160,"parent_id":2191863,"elapsed":0.09864428400760517,"elapsed_instrumentation":0.0002575429971329868,"return_value":{"class":"IO","value":"#<IO:0x00007fc94b108f80>","object_id":195040}}]}