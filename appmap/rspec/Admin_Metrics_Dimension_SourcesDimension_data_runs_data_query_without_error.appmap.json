{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::SourcesDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/sources_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:61","static":false}]},{"name":"SourcesDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/sources_dimension.rb:6","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/sources_dimension.rb:12","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/sources_dimension.rb:16","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/sources_dimension.rb:20","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":949291,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949292,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949293,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949294,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::SourcesDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/sources_dimension.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949295,"event":"return","thread_id":9160,"parent_id":949294,"elapsed":2.896995283663273e-06,"elapsed_instrumentation":0.00010520796058699489,"return_value":{"class":"String","value":"sources","object_id":5759180}},{"id":949296,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949297,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":61,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949298,"event":"return","thread_id":9160,"parent_id":949297,"elapsed":2.2970489226281643e-06,"elapsed_instrumentation":6.292096804827452e-05,"return_value":{"class":"Hash","value":"{}","object_id":5759200,"size":0}},{"id":949299,"event":"return","thread_id":9160,"parent_id":949296,"elapsed":8.5117993876338e-05,"elapsed_instrumentation":5.73860015720129e-05,"return_value":{"class":"String","value":"","object_id":5759220}},{"id":949300,"event":"return","thread_id":9160,"parent_id":949293,"elapsed":0.0003010209766216576,"elapsed_instrumentation":5.534500814974308e-05,"return_value":{"class":"String","value":"metrics/dimension/sources;2023-11-04T02:58:28+00:00;2023-11-06T02:58:28+00:00;10;","object_id":5759240}},{"id":949301,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5759260,"value":"Cache read: metrics/dimension/sources;2023-11-04T02:58:28+00:00;2023-11-06T02:58:28+00:00;10; ({:com (...66 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":949302,"event":"return","thread_id":9160,"parent_id":949301,"elapsed":0.0007794019766151905,"elapsed_instrumentation":0.0001347380457445979,"return_value":{"class":"Integer","value":"166","object_id":333}},{"id":949303,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5759280,"value":"Cache generate: metrics/dimension/sources;2023-11-04T02:58:28+00:00;2023-11-06T02:58:28+00:00;10; ({ (...70 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":949304,"event":"return","thread_id":9160,"parent_id":949303,"elapsed":0.0009181590285152197,"elapsed_instrumentation":0.0001324079930782318,"return_value":{"class":"Integer","value":"170","object_id":341}},{"id":949305,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::SourcesDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/sources_dimension.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949306,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949307,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949308,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::SourcesDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/sources_dimension.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949309,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::SourcesDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/sources_dimension.rb","lineno":20,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::SourcesDimension","object_id":5759160,"value":"#<Admin::Metrics::Dimension::SourcesDimension:0x00007fc937b282b8>"}},{"id":949310,"event":"return","thread_id":9160,"parent_id":949309,"elapsed":6.115599535405636e-05,"elapsed_instrumentation":7.686601020395756e-05,"return_value":{"class":"String","value":"SELECT oauth_applications.name, count(*) AS value FROM users LEFT JOIN oauth_applications ON oauth_a (...170 more characters)","object_id":5759300}},{"id":949311,"event":"return","thread_id":9160,"parent_id":949308,"elapsed":0.00015690596774220467,"elapsed_instrumentation":0.0001405620714649558,"return_value":{"class":"Array","value":"[SELECT oauth_applications.name, count(*) AS value FROM users LEFT JOIN oauth_applications ON oauth_a (...170 more characters), {:start_at=>2023-11-04T02:58:28+00:00, :end_at=>2023-11-06T02:58:28+00:00, :limit=>10}]","object_id":5759320,"size":2}},{"id":949312,"event":"return","thread_id":9160,"parent_id":949307,"elapsed":0.0005820849910378456,"elapsed_instrumentation":9.296898497268558e-05,"return_value":{"class":"String","value":"SELECT oauth_applications.name, count(*) AS value FROM users LEFT JOIN oauth_applications ON oauth_a (...206 more characters)","object_id":5759340}},{"id":949313,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT oauth_applications.name, count(*) AS value FROM users LEFT JOIN oauth_applications ON oauth_applications.id = users.created_by_application_id WHERE users.created_at BETWEEN '2023-11-04 02:58:28.958826' AND '2023-11-06 02:58:28.959190' GROUP BY oauth_applications.name ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":949314,"event":"return","thread_id":9160,"parent_id":949313,"elapsed":0.00132982,"elapsed_instrumentation":9.526900248602033e-05},{"id":949315,"event":"return","thread_id":9160,"parent_id":949306,"elapsed":0.0026518029626458883,"elapsed_instrumentation":0.00013970304280519485,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc937b26b48>","object_id":5759360}},{"id":949316,"event":"return","thread_id":9160,"parent_id":949305,"elapsed":0.00282859499566257,"elapsed_instrumentation":0.0001253499649465084,"return_value":{"class":"Array","value":"[]","object_id":5759380,"size":0}},{"id":949317,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5759400,"value":"Cache write: metrics/dimension/sources;2023-11-04T02:58:28+00:00;2023-11-06T02:58:28+00:00;10; ({:co (...67 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":949318,"event":"return","thread_id":9160,"parent_id":949317,"elapsed":0.0009619109914638102,"elapsed_instrumentation":0.00015008402988314629,"return_value":{"class":"Integer","value":"167","object_id":335}},{"id":949319,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":5759420,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":949320,"event":"return","thread_id":9160,"parent_id":949319,"elapsed":8.91898525878787e-06,"elapsed_instrumentation":0.0001289360225200653,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":5759440}},{"id":949321,"event":"return","thread_id":9160,"parent_id":949292,"elapsed":0.007290794979780912,"elapsed_instrumentation":6.59390352666378e-05,"return_value":{"class":"Array","value":"[]","object_id":5759380,"size":0}},{"id":949322,"event":"return","thread_id":9160,"parent_id":949291,"elapsed":0.007376130961347371,"elapsed_instrumentation":0.00012686103582382202,"return_value":{"class":"Array","value":"[]","object_id":5759380,"size":0}}]}