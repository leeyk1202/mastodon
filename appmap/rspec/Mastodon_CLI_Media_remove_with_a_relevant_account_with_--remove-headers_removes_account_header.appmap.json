{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::Media #remove with a relevant account with --remove-headers removes account header","source_location":"spec/lib/mastodon/cli/media_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib","type":"package","children":[{"name":"mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"Media","type":"class","children":[{"name":"remove","type":"function","location":"lib/mastodon/cli/media.rb:33","static":false}]},{"name":"ProgressHelper","type":"class","children":[{"name":"parallelize_with_progress","type":"function","location":"lib/mastodon/cli/progress_helper.rb:27","static":false},{"name":"create_progress_bar","type":"function","location":"lib/mastodon/cli/progress_helper.rb:18","static":false}]}]}]}]},{"name":"paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false},{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false}]}]}]},{"name":"chewy","type":"package","children":[{"name":"strategy","type":"package","children":[{"name":"Chewy","type":"class","children":[{"name":"Strategy","type":"class","children":[{"name":"Mastodon","type":"class","children":[{"name":"update","type":"function","location":"lib/chewy/strategy/mastodon.rb:12","static":false},{"name":"leave","type":"function","location":"lib/chewy/strategy/mastodon.rb:16","static":false}]}]}]}]},{"name":"Chewy","type":"class","children":[{"name":"SettingsExtensions","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/chewy/settings_extensions.rb:5","static":true}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]},{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]}]}]}],"events":[{"id":396576,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::Media","method_id":"remove","path":"lib/mastodon/cli/media.rb","lineno":33,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::Media","object_id":2820860,"value":"#<Mastodon::CLI::Media:0x00007fc930adb280>"}},{"id":396577,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"parallelize_with_progress","path":"lib/mastodon/cli/progress_helper.rb","lineno":27,"static":false,"parameters":[{"name":"scope","class":"ActiveRecord::Relation","object_id":2820880,"value":"#<Account::ActiveRecord_Relation:0x00007fc919b5a470>","kind":"req"}],"receiver":{"class":"Mastodon::CLI::Media","object_id":2820860,"value":"#<Mastodon::CLI::Media:0x00007fc930adb280>"}},{"id":396578,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"accounts\" WHERE \"accounts\".\"domain\" IS NOT NULL AND \"accounts\".\"last_webfingered_at\" <= $1 AND \"accounts\".\"updated_at\" <= $2","database_type":"postgres"}},{"id":396579,"event":"return","thread_id":9160,"parent_id":396578,"elapsed":0.00091171,"elapsed_instrumentation":0.00010260299313813448},{"id":396580,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":3,"value":"1","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::Media","object_id":2820860,"value":"#<Mastodon::CLI::Media:0x00007fc930adb280>"}},{"id":396581,"event":"return","thread_id":9160,"parent_id":396580,"elapsed":0.0003910950035788119,"elapsed_instrumentation":0.00030450097983703017,"return_value":{"class":"ProgressBar::Base","value":"","object_id":2820900}},{"id":396582,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"domain\" IS NOT NULL AND \"accounts\".\"last_webfingered_at\" <= $1 AND \"accounts\".\"updated_at\" <= $2 ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":396583,"event":"return","thread_id":9160,"parent_id":396582,"elapsed":0.001143212,"elapsed_instrumentation":9.977800073102117e-05},{"id":396584,"event":"call","thread_id":2820920,"sql_query":{"sql":"SELECT 1 AS one FROM \"follows\" WHERE (\"follows\".\"account_id\" = $1 OR \"follows\".\"target_account_id\" = $2) LIMIT $3","database_type":"postgres"}},{"id":396585,"event":"return","thread_id":2820920,"parent_id":396584,"elapsed":0.000831503,"elapsed_instrumentation":8.951796917244792e-05},{"id":396586,"event":"call","thread_id":2820920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820940,"value":"/system/cache/accounts/headers/111/361/339/885/354/904/original/attachment.jpg"}},{"id":396587,"event":"return","thread_id":2820920,"parent_id":396586,"elapsed":2.010201569646597e-05,"elapsed_instrumentation":0.0003606219543144107,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396588,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396589,"event":"return","thread_id":2820920,"parent_id":396588,"elapsed":8.11403151601553e-06,"elapsed_instrumentation":8.689798414707184e-05},{"id":396590,"event":"call","thread_id":2820920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820940,"value":"/system/cache/accounts/headers/111/361/339/885/354/904/original/attachment.jpg"}},{"id":396591,"event":"return","thread_id":2820920,"parent_id":396590,"elapsed":1.1615047696977854e-05,"elapsed_instrumentation":0.0003567779785953462,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":396592,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396593,"event":"return","thread_id":2820920,"parent_id":396592,"elapsed":7.299007847905159e-06,"elapsed_instrumentation":7.024704245850444e-05},{"id":396594,"event":"call","thread_id":2820920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820940,"value":"/headers/original/missing.png"}},{"id":396595,"event":"return","thread_id":2820920,"parent_id":396594,"elapsed":0.009064426994882524,"elapsed_instrumentation":0.00018023099983111024,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396596,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323120,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b470>"}},{"id":396597,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396598,"event":"return","thread_id":2820920,"parent_id":396597,"elapsed":1.0162999387830496e-05,"elapsed_instrumentation":9.405898163095117e-05},{"id":396599,"event":"call","thread_id":2820920,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":2821000,"value":"example.com","kind":"req"}],"receiver":{"class":"TagManager","object_id":521840,"value":"#<TagManager:0x00007fc93503aec0>"}},{"id":396600,"event":"return","thread_id":2820920,"parent_id":396599,"elapsed":0.00025516399182379246,"elapsed_instrumentation":0.00017845502588897943,"return_value":{"class":"String","value":"example.com","object_id":2821020}},{"id":396601,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396602,"event":"return","thread_id":2820920,"parent_id":396601,"elapsed":1.3565004337579012e-05,"elapsed_instrumentation":8.090597111731768e-05},{"id":396603,"event":"return","thread_id":2820920,"parent_id":396596,"elapsed":0.0008327890536747873,"elapsed_instrumentation":0.0002755869645625353,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939b28e78 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939b29ad0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939b29ee0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939b2b5d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323140,"size":4}},{"id":396604,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821040,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b330>"}},{"id":396605,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396606,"event":"return","thread_id":2820920,"parent_id":396605,"elapsed":8.856004569679499e-06,"elapsed_instrumentation":0.00015934195835143328},{"id":396607,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396608,"event":"return","thread_id":2820920,"parent_id":396607,"elapsed":6.521004252135754e-06,"elapsed_instrumentation":0.00010986701818183064},{"id":396609,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396610,"event":"return","thread_id":2820920,"parent_id":396609,"elapsed":4.311033990234137e-06,"elapsed_instrumentation":5.485897418111563e-05},{"id":396611,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396612,"event":"return","thread_id":2820920,"parent_id":396611,"elapsed":4.096014890819788e-06,"elapsed_instrumentation":0.0003489219816401601},{"id":396613,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396614,"event":"return","thread_id":2820920,"parent_id":396613,"elapsed":1.0755029506981373e-05,"elapsed_instrumentation":0.00011904502753168344},{"id":396615,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396616,"event":"return","thread_id":2820920,"parent_id":396615,"elapsed":7.917988114058971e-06,"elapsed_instrumentation":9.700201917439699e-05},{"id":396617,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396618,"event":"return","thread_id":2820920,"parent_id":396617,"elapsed":9.8029850050807e-06,"elapsed_instrumentation":0.00014859606744721532},{"id":396619,"event":"return","thread_id":2820920,"parent_id":396604,"elapsed":0.0031493889982812107,"elapsed_instrumentation":0.000594559998717159,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939c310e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c31f90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c320d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c32210 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c32468 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c325f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c32a08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c33110 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c337f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939c33980 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...61 more items)]","object_id":323620,"size":71}},{"id":396620,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821040,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b330>"}},{"id":396621,"event":"return","thread_id":2820920,"parent_id":396620,"elapsed":5.812966264784336e-06,"elapsed_instrumentation":0.00020568701438605785,"return_value":{"class":"Array","value":"[]","object_id":323640,"size":0}},{"id":396622,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2820980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323120,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93822b470>"}},{"id":396623,"event":"return","thread_id":2820920,"parent_id":396622,"elapsed":1.9614992197602987e-05,"elapsed_instrumentation":0.00017340201884508133,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939b28b08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323660,"size":1}},{"id":396624,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323700,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938226fb0>"}},{"id":396625,"event":"return","thread_id":2820920,"parent_id":396624,"elapsed":3.936199937015772e-05,"elapsed_instrumentation":0.00036901596467942,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93912dae0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":323720,"size":1}},{"id":396626,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938227050>"}},{"id":396627,"event":"return","thread_id":2820920,"parent_id":396626,"elapsed":5.464011337608099e-06,"elapsed_instrumentation":0.0001458860351704061,"return_value":{"class":"Array","value":"[]","object_id":323760,"size":0}},{"id":396628,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":521940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931f1bf10>"}},{"id":396629,"event":"return","thread_id":2820920,"parent_id":396628,"elapsed":6.570015102624893e-06,"elapsed_instrumentation":0.0001560460077598691,"return_value":{"class":"Array","value":"[]","object_id":521960,"size":0}},{"id":396630,"event":"call","thread_id":2820920,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":396631,"event":"return","thread_id":2820920,"parent_id":396630,"elapsed":0.000976809,"elapsed_instrumentation":0.00011722795898094773},{"id":396632,"event":"call","thread_id":2820920,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":319240,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":2821100,"value":">_?_=___sf"}},{"id":396633,"event":"return","thread_id":2820920,"parent_id":396632,"elapsed":7.792958058416843e-06,"elapsed_instrumentation":0.0004394240095280111,"return_value":{"class":"String","value":"3ea63fb03dc8f6b97366","object_id":2821120}},{"id":396634,"event":"call","thread_id":2820920,"sql_query":{"sql":"UPDATE \"accounts\" SET \"updated_at\" = $1, \"header_file_name\" = $2, \"header_content_type\" = $3, \"header_file_size\" = $4, \"header_updated_at\" = $5 WHERE \"accounts\".\"id\" = $6","database_type":"postgres"}},{"id":396635,"event":"return","thread_id":2820920,"parent_id":396634,"elapsed":0.003376214,"elapsed_instrumentation":8.943903958424926e-05},{"id":396636,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821080,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":521940,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931f1bf10>"}},{"id":396637,"event":"return","thread_id":2820920,"parent_id":396636,"elapsed":0.0007115869666449726,"elapsed_instrumentation":0.0007962639792822301,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932760158 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270ff78 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270fdc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270fc08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270fa50 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f898 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f6e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f528 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f370 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93270f1b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...43 more items)]","object_id":521980,"size":53}},{"id":396638,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938227050>"}},{"id":396639,"event":"return","thread_id":2820920,"parent_id":396638,"elapsed":6.169022526592016e-06,"elapsed_instrumentation":0.0001856620074249804,"return_value":{"class":"Array","value":"[]","object_id":325460,"size":0}},{"id":396640,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821060,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":323700,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc938226fb0>"}},{"id":396641,"event":"call","thread_id":2820920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2821140,"value":"/system/cache/accounts/avatars/111/361/339/885/354/904/original/attachment.jpg"}},{"id":396642,"event":"return","thread_id":2820920,"parent_id":396641,"elapsed":6.11160066910088e-05,"elapsed_instrumentation":0.0007023860816843808,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396643,"event":"call","thread_id":2820920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":2820940,"value":"/headers/original/missing.png"}},{"id":396644,"event":"return","thread_id":2820920,"parent_id":396643,"elapsed":2.1080952137708664e-05,"elapsed_instrumentation":0.0002023060224018991,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396645,"event":"call","thread_id":2820920,"defined_class":"Chewy::Strategy::Mastodon","method_id":"update","path":"lib/chewy/strategy/mastodon.rb","lineno":12,"static":false,"parameters":[{"name":"type","class":"Class","object_id":2689660,"value":"AccountsIndex","kind":"req"},{"name":"objects","class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>","kind":"req"},{"name":"_options","class":"Hash","object_id":2689680,"value":"{}","kind":"opt","size":0}],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":2821160,"value":"#<Chewy::Strategy::Mastodon:0x00007fc9336b86f0>"}},{"id":396646,"event":"call","thread_id":2820920,"defined_class":"Chewy::SettingsExtensions","method_id":"enabled?","path":"lib/chewy/settings_extensions.rb","lineno":5,"static":true,"parameters":[],"receiver":{"class":"Module","object_id":688920,"value":"Chewy"}},{"id":396647,"event":"return","thread_id":2820920,"parent_id":396646,"elapsed":1.231400528922677e-05,"elapsed_instrumentation":7.467600516974926e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":396648,"event":"return","thread_id":2820920,"parent_id":396645,"elapsed":0.0001564090489409864,"elapsed_instrumentation":0.00042866391595453024,"return_value":{"class":"Array","value":"[111361339885354904]","object_id":2821180,"size":1}},{"id":396649,"event":"return","thread_id":2820920,"parent_id":396640,"elapsed":0.0019271090277470648,"elapsed_instrumentation":0.00019087799591943622,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc939129148 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939125ef8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939121470 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc939120b88 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":325520,"size":4}},{"id":396650,"event":"call","thread_id":2820920,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":396651,"event":"return","thread_id":2820920,"parent_id":396650,"elapsed":0.000832975,"elapsed_instrumentation":0.00021193595603108406},{"id":396652,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":328280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9378db2d0>"}},{"id":396653,"event":"return","thread_id":2820920,"parent_id":396652,"elapsed":3.860041033476591e-06,"elapsed_instrumentation":0.00013135600602254272,"return_value":{"class":"Array","value":"[]","object_id":328300,"size":0}},{"id":396654,"event":"call","thread_id":2820920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2821200,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":328280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9378db2d0>"}},{"id":396655,"event":"call","thread_id":2820920,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":2820960,"value":"#<Account:0x00007fc919a9a288>"}},{"id":396656,"event":"return","thread_id":2820920,"parent_id":396655,"elapsed":8.936971426010132e-06,"elapsed_instrumentation":7.606606232002378e-05},{"id":396657,"event":"return","thread_id":2820920,"parent_id":396654,"elapsed":0.00017003598622977734,"elapsed_instrumentation":0.00016878702444955707,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc938945850 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc938942a10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855fba0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855f0b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855ebb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc93855de40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":328320,"size":6}},{"id":396658,"event":"call","thread_id":2820920,"defined_class":"Chewy::Strategy::Mastodon","method_id":"leave","path":"lib/chewy/strategy/mastodon.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":2821160,"value":"#<Chewy::Strategy::Mastodon:0x00007fc9336b86f0>"}},{"id":396659,"event":"call","thread_id":2820920,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":2821220,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":2821240,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":396660,"event":"call","thread_id":2820920,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":396661,"event":"return","thread_id":2820920,"parent_id":396660,"elapsed":3.0740047805011272e-06,"elapsed_instrumentation":7.57069792598486e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":396662,"event":"return","thread_id":2820920,"parent_id":396659,"elapsed":0.0007122710230760276,"elapsed_instrumentation":0.00032955699134618044,"return_value":{"class":"Array","value":"[1]","object_id":2821260,"size":1}},{"id":396663,"event":"return","thread_id":2820920,"parent_id":396658,"elapsed":0.0010771160013973713,"elapsed_instrumentation":0.0002014010096900165,"return_value":{"class":"Array","value":"[1]","object_id":2821260,"size":1}},{"id":396664,"event":"return","thread_id":9160,"parent_id":396577,"elapsed":0.043183059024158865,"elapsed_instrumentation":0.00033439300023019314,"return_value":{"class":"Array","value":"[1, 61022]","object_id":2821280,"size":2}},{"id":396665,"event":"return","thread_id":9160,"parent_id":396576,"elapsed":0.0458029750152491,"elapsed_instrumentation":0.000139491050504148},{"id":396666,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":396667,"event":"return","thread_id":9160,"parent_id":396666,"elapsed":0.001272991,"elapsed_instrumentation":0.0003607310354709625}]}