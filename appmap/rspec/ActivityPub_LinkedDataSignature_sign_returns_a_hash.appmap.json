{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"ActivityPub::LinkedDataSignature #sign! returns a hash","source_location":"spec/lib/activitypub/linked_data_signature_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"lib/activitypub","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"LinkedDataSignature","type":"class","children":[{"name":"sign!","type":"function","location":"app/lib/activitypub/linked_data_signature.rb:35","static":false}]},{"name":"TagManager","type":"class","children":[{"name":"key_uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:53","static":false},{"name":"uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:36","static":false}]}]}]},{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"keypair","type":"function","location":"app/models/account.rb:293","static":false}]}]},{"name":"helpers","type":"package","children":[{"name":"JsonLdHelper","type":"class","children":[{"name":"canonicalize","type":"function","location":"app/helpers/jsonld_helper.rb:75","static":false}]}]}]},{"name":"openssl","type":"package","children":[{"name":"OpenSSL","type":"class","children":[{"name":"PKey","type":"class","children":[{"name":"PKey","type":"class","children":[{"name":"sign","type":"function","location":"OpenSSL::PKey::PKey#sign","static":false,"labels":["crypto.pkey"]}]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Array","type":"class","children":[{"name":"pack","type":"function","location":"<internal:pack>:7","static":false,"labels":["array.pack"]}]}]}],"events":[{"id":1147284,"event":"call","thread_id":9160,"defined_class":"ActivityPub::LinkedDataSignature","method_id":"sign!","path":"app/lib/activitypub/linked_data_signature.rb","lineno":35,"static":false,"parameters":[{"name":"creator","class":"Account","object_id":6351800,"value":"#<Account:0x00007fdc06de8200>","kind":"req"},{"name":"sign_with","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"ActivityPub::LinkedDataSignature","object_id":6351820,"value":"#<ActivityPub::LinkedDataSignature:0x00007fdc08d1b910>"}},{"id":1147285,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"key_uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":53,"static":false,"parameters":[{"name":"target","class":"Account","object_id":6351800,"value":"#<Account:0x00007fdc06de8200>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1147286,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":36,"static":false,"parameters":[{"name":"target","class":"Account","object_id":6351800,"value":"#<Account:0x00007fdc06de8200>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1147287,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":6351800,"value":"#<Account:0x00007fdc06de8200>"}},{"id":1147288,"event":"return","thread_id":9160,"parent_id":1147287,"elapsed":1.2509000953286886e-05,"elapsed_instrumentation":0.0001226619933731854},{"id":1147289,"event":"return","thread_id":9160,"parent_id":1147286,"elapsed":0.00019557599443942308,"elapsed_instrumentation":0.00044406900997273624,"return_value":{"class":"String","value":"http://example.com/alice","object_id":6351840}},{"id":1147290,"event":"return","thread_id":9160,"parent_id":1147285,"elapsed":0.0006686859996989369,"elapsed_instrumentation":0.0001475500175729394,"return_value":{"class":"String","value":"http://example.com/alice#main-key","object_id":6351860}},{"id":1147291,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"canonicalize","path":"app/helpers/jsonld_helper.rb","lineno":75,"static":false,"parameters":[{"name":"json","class":"Hash","object_id":6351880,"value":"{creator=>http://example.com/alice#main-key, created=>2023-11-05T23:20:02Z, @context=>https://w3id.org/identity/v1}","kind":"req","size":3}],"receiver":{"class":"ActivityPub::LinkedDataSignature","object_id":6351820,"value":"#<ActivityPub::LinkedDataSignature:0x00007fdc08d1b910>"}},{"id":1147292,"event":"return","thread_id":9160,"parent_id":1147291,"elapsed":0.004121902020415291,"elapsed_instrumentation":0.00019991598674096167,"return_value":{"class":"String","value":"_:c14n0 <http://purl.org/dc/terms/created> \"2023-11-05T23:20:02Z\"^^<http://www.w3.org/2001/XMLSchema (...94 more characters)","object_id":6351900}},{"id":1147293,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"canonicalize","path":"app/helpers/jsonld_helper.rb","lineno":75,"static":false,"parameters":[{"name":"json","class":"ActiveSupport::HashWithIndifferentAccess","object_id":6351920,"value":"{@context=>https://www.w3.org/ns/activitystreams, id=>http://example.com/hello-world}","kind":"req","size":2}],"receiver":{"class":"ActivityPub::LinkedDataSignature","object_id":6351820,"value":"#<ActivityPub::LinkedDataSignature:0x00007fdc08d1b910>"}},{"id":1147294,"event":"return","thread_id":9160,"parent_id":1147293,"elapsed":0.0023889699950814247,"elapsed_instrumentation":0.00023591902572661638,"return_value":{"class":"String","value":"","object_id":6351940}},{"id":1147295,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"keypair","path":"app/models/account.rb","lineno":293,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":6351800,"value":"#<Account:0x00007fdc06de8200>"}},{"id":1147296,"event":"return","thread_id":9160,"parent_id":1147295,"elapsed":0.00013782799942418933,"elapsed_instrumentation":0.00039636401925235987,"return_value":{"class":"OpenSSL::PKey::RSA","value":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEA3gSp1lLt/hiKEO0H85KwD4AeQD+x1q4fWKUUa0iTXbn4KHL9\nmaM","object_id":6351960}},{"id":1147297,"event":"call","thread_id":9160,"defined_class":"OpenSSL::PKey::PKey","method_id":"sign","path":"OpenSSL::PKey::PKey#sign","static":false,"parameters":[{"name":"arg","class":"Array","object_id":6351980,"value":"[e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855, 984cf5b48f4675bd8b01c92a2a29f049ea19820afd21137c8ca888eaea840e2fe3b0c44298fc1c149afbf4c8996fb92427ae (...28 more characters)]","kind":"rest","size":2}],"receiver":{"class":"OpenSSL::PKey::RSA","object_id":6351960,"value":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEA3gSp1lLt/hiKEO0H85KwD4AeQD+x1q4fWKUUa0iTXbn4KHL9\nmaM"}},{"id":1147298,"event":"return","thread_id":9160,"parent_id":1147297,"elapsed":0.0023569609911646694,"elapsed_instrumentation":0.000387966021662578,"return_value":{"class":"String","value":"__s_2\u0019_\u000e__\t_Fr__uI___Q_\u001a_\u0011___l__`\u0011S_+_p\u0002____P\u0002_1~_e/__V_ei>,\u0016[_\r_3_[\u0002\b_\u0000\u001c\u0003_e__\u001d_}_2\u0001\nS_@\u001e?_\n_______\u001e (...156 more characters)","object_id":6352000}},{"id":1147299,"event":"call","thread_id":9160,"defined_class":"Array","method_id":"pack","path":"<internal:pack>","lineno":7,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":326460,"value":"m0","kind":"req"},{"name":"buffer","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Array","object_id":6352020,"value":"[__s_2\u0019_\u000e__\t_Fr__uI___Q_\u001a_\u0011___l__`\u0011S_+_p\u0002____P\u0002_1~_e/__V_ei>,\u0016[_\r_3_[\u0002\b_\u0000\u001c\u0003_e__\u001d_}_2\u0001\nS_@\u001e?_\n_______\u001e (...156 more characters)]"}},{"id":1147300,"event":"return","thread_id":9160,"parent_id":1147299,"elapsed":7.197988452389836e-06,"elapsed_instrumentation":0.0001539310032967478,"return_value":{"class":"String","value":"tMFzrjIZ0w66+Am5RnL15XVJrrjuUZMalxGg0pVs8dFgEVPsK5xwAvqxjuxQAr4xfvNlL8L7Vp5laT4sFluBDbAzuFsCCLYAHAP+ (...244 more characters)","object_id":6352040}},{"id":1147301,"event":"return","thread_id":9160,"parent_id":1147284,"elapsed":0.01173977498547174,"elapsed_instrumentation":0.0003372060018591583,"return_value":{"class":"ActiveSupport::HashWithIndifferentAccess","value":"{@context=>https://www.w3.org/ns/activitystreams, id=>http://example.com/hello-world, signature=>{type=>RsaSignature2017, creator=>http://example.com/alice#main-key, created=>2023-11-05T23:20:02Z, signatureValue=>tMFzrjIZ0w66+Am5RnL15XVJrrjuUZMalxGg0pVs8dFgEVPsK5xwAvqxjuxQAr4xfvNlL8L7Vp5laT4sFluBDbAzuFsCCLYAHAP+ (...244 more characters)}}","object_id":6352060,"size":3}}]}