{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Account #acct returns username@domain for foreign users","source_location":"spec/models/account_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"acct","type":"function","location":"app/models/account.rb:191","static":false}]},{"name":"concerns","type":"package","children":[{"name":"DomainMaterializable","type":"class","children":[{"name":"refresh_instances_view","type":"function","location":"app/models/concerns/domain_materializable.rb:12","static":false},{"name":"count_unique_subdomains!","type":"function","location":"app/models/concerns/domain_materializable.rb:19","static":false}]},{"name":"Redisable","type":"class","children":[{"name":"with_redis","type":"function","location":"app/models/concerns/redisable.rb:8","static":false}]}]},{"name":"Instance","type":"class","children":[{"name":"refresh","type":"function","location":"app/models/instance.rb:28","static":true}]}]},{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]},{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true}]}]},{"name":"validators","type":"package","children":[{"name":"UniqueUsernameValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/unique_username_validator.rb:6","static":false}]}]}]},{"name":"lib/paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false}]}]}]}],"events":[{"id":530979,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59d48>"}},{"id":530980,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":530981,"event":"return","thread_id":9160,"parent_id":530980,"elapsed":2.241798210889101e-05,"elapsed_instrumentation":0.00011008902220055461},{"id":530982,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":3338420,"value":"foreign.tld","kind":"req"}],"receiver":{"class":"TagManager","object_id":831360,"value":"#<TagManager:0x00007fdc08786ea0>"}},{"id":530983,"event":"return","thread_id":9160,"parent_id":530982,"elapsed":0.0008422579849138856,"elapsed_instrumentation":0.00014661200111731887,"return_value":{"class":"String","value":"foreign.tld","object_id":3338440}},{"id":530984,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":530985,"event":"return","thread_id":9160,"parent_id":530984,"elapsed":1.2516975402832031e-05,"elapsed_instrumentation":9.044702164828777e-05},{"id":530986,"event":"return","thread_id":9160,"parent_id":530979,"elapsed":0.0013940469943918288,"elapsed_instrumentation":0.00041371298721060157,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa3ac30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b040 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b1f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa3b4c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":208720,"size":4}},{"id":530987,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208760,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59898>"}},{"id":530988,"event":"call","thread_id":9160,"defined_class":"UniqueUsernameValidator","method_id":"validate","path":"app/validators/unique_username_validator.rb","lineno":6,"static":false,"parameters":[{"name":"account","class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>","kind":"req"}],"receiver":{"class":"UniqueUsernameValidator","object_id":208780,"value":"#<UniqueUsernameValidator:0x00007fdc16b80188>"}},{"id":530989,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":530990,"event":"return","thread_id":9160,"parent_id":530989,"elapsed":0.001070005,"elapsed_instrumentation":0.0002503730065654963},{"id":530991,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"accounts\" WHERE LOWER(\"accounts\".\"username\") = 'alice' AND LOWER(\"accounts\".\"domain\") = 'foreign.tld' LIMIT $1","database_type":"postgres"}},{"id":530992,"event":"return","thread_id":9160,"parent_id":530991,"elapsed":0.002429317,"elapsed_instrumentation":0.000242951005930081},{"id":530993,"event":"return","thread_id":9160,"parent_id":530988,"elapsed":0.0040239559893962,"elapsed_instrumentation":0.00014198501594364643},{"id":530994,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":530995,"event":"return","thread_id":9160,"parent_id":530994,"elapsed":2.0409002900123596e-05,"elapsed_instrumentation":0.00018689199350774288},{"id":530996,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":530997,"event":"return","thread_id":9160,"parent_id":530996,"elapsed":1.1096999514847994e-05,"elapsed_instrumentation":0.00015978701412677765},{"id":530998,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":530999,"event":"return","thread_id":9160,"parent_id":530998,"elapsed":5.7019933592528105e-06,"elapsed_instrumentation":8.209003135561943e-05},{"id":531000,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531001,"event":"return","thread_id":9160,"parent_id":531000,"elapsed":5.979003617540002e-06,"elapsed_instrumentation":6.505698547698557e-05},{"id":531002,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531003,"event":"return","thread_id":9160,"parent_id":531002,"elapsed":4.595989594236016e-06,"elapsed_instrumentation":5.598101415671408e-05},{"id":531004,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531005,"event":"return","thread_id":9160,"parent_id":531004,"elapsed":4.157016519457102e-06,"elapsed_instrumentation":4.819600144401193e-05},{"id":531006,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531007,"event":"return","thread_id":9160,"parent_id":531006,"elapsed":4.390021786093712e-06,"elapsed_instrumentation":4.774599801748991e-05},{"id":531008,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531009,"event":"return","thread_id":9160,"parent_id":531008,"elapsed":3.923021722584963e-06,"elapsed_instrumentation":4.6639994252473116e-05},{"id":531010,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531011,"event":"return","thread_id":9160,"parent_id":531010,"elapsed":3.749999450519681e-06,"elapsed_instrumentation":4.807297955267131e-05},{"id":531012,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531013,"event":"return","thread_id":9160,"parent_id":531012,"elapsed":5.7610159274190664e-06,"elapsed_instrumentation":0.00023030999000184238},{"id":531014,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531015,"event":"return","thread_id":9160,"parent_id":531014,"elapsed":4.386005457490683e-06,"elapsed_instrumentation":5.582498852163553e-05},{"id":531016,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531017,"event":"return","thread_id":9160,"parent_id":531016,"elapsed":4.078989150002599e-06,"elapsed_instrumentation":4.924301174469292e-05},{"id":531018,"event":"return","thread_id":9160,"parent_id":530987,"elapsed":0.007020563003607094,"elapsed_instrumentation":0.0002109869965352118,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa57768 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57920 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57ab0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa57cb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58050 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58370 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58960 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa58e10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa590e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0aa59360 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...61 more items)]","object_id":209280,"size":71}},{"id":531019,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338460,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208760,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59898>"}},{"id":531020,"event":"return","thread_id":9160,"parent_id":531019,"elapsed":2.9249931685626507e-06,"elapsed_instrumentation":8.706000517122447e-05,"return_value":{"class":"Array","value":"[]","object_id":209300,"size":0}},{"id":531021,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":208680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db59d48>"}},{"id":531022,"event":"return","thread_id":9160,"parent_id":531021,"elapsed":1.0908988770097494e-05,"elapsed_instrumentation":8.75630066730082e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0aa3a730 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209320,"size":1}},{"id":531023,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209360,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db532b8>"}},{"id":531024,"event":"return","thread_id":9160,"parent_id":531023,"elapsed":2.5385990738868713e-05,"elapsed_instrumentation":9.163501090370119e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a933440 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209380,"size":1}},{"id":531025,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db533f8>"}},{"id":531026,"event":"return","thread_id":9160,"parent_id":531025,"elapsed":2.462009433656931e-06,"elapsed_instrumentation":0.00024199599283747375,"return_value":{"class":"Array","value":"[]","object_id":209420,"size":0}},{"id":531027,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209460,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db52f48>"}},{"id":531028,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531029,"event":"return","thread_id":9160,"parent_id":531028,"elapsed":6.937014404684305e-06,"elapsed_instrumentation":6.153402500785887e-05},{"id":531030,"event":"return","thread_id":9160,"parent_id":531027,"elapsed":9.747201693244278e-05,"elapsed_instrumentation":0.00013463495997712016,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a89dcb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":209480,"size":1}},{"id":531031,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"accounts\" (\"username\", \"domain\", \"private_key\", \"public_key\", \"created_at\", \"updated_at\", \"note\", \"display_name\", \"uri\", \"url\", \"avatar_file_name\", \"avatar_content_type\", \"avatar_file_size\", \"avatar_updated_at\", \"header_file_name\", \"header_content_type\", \"header_file_size\", \"header_updated_at\", \"avatar_remote_url\", \"locked\", \"header_remote_url\", \"last_webfingered_at\", \"inbox_url\", \"outbox_url\", \"shared_inbox_url\", \"followers_url\", \"protocol\", \"memorial\", \"moved_to_account_id\", \"featured_collection_url\", \"fields\", \"actor_type\", \"discoverable\", \"also_known_as\", \"silenced_at\", \"suspended_at\", \"hide_collections\", \"avatar_storage_schema_version\", \"header_storage_schema_version\", \"devices_url\", \"suspension_origin\", \"sensitized_at\", \"trendable\", \"reviewed_at\", \"requested_review_at\", \"indexable\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46) RETURNING \"id\"","database_type":"postgres"}},{"id":531032,"event":"return","thread_id":9160,"parent_id":531031,"elapsed":0.001590997,"elapsed_instrumentation":8.84649925865233e-05},{"id":531033,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209460,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db52f48>"}},{"id":531034,"event":"return","thread_id":9160,"parent_id":531033,"elapsed":0.00046237598871812224,"elapsed_instrumentation":0.0004580120148602873,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a89daf8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d940 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d788 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d5d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d418 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89d1e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89cf68 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89cdb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89cbd0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a89c798 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...43 more items)]","object_id":210380,"size":53}},{"id":531035,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db533f8>"}},{"id":531036,"event":"return","thread_id":9160,"parent_id":531035,"elapsed":2.9730144888162613e-06,"elapsed_instrumentation":9.546201908960938e-05,"return_value":{"class":"Array","value":"[]","object_id":210400,"size":0}},{"id":531037,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338480,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":209360,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db532b8>"}},{"id":531038,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":3338520,"value":"/avatars/original/missing.png"}},{"id":531039,"event":"return","thread_id":9160,"parent_id":531038,"elapsed":3.850800567306578e-05,"elapsed_instrumentation":0.0002607830101624131,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":531040,"event":"call","thread_id":9160,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":3338540,"value":"/headers/original/missing.png"}},{"id":531041,"event":"return","thread_id":9160,"parent_id":531040,"elapsed":3.284800914116204e-05,"elapsed_instrumentation":0.00020120097906328738,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":531042,"event":"return","thread_id":9160,"parent_id":531037,"elapsed":0.0009829339978750795,"elapsed_instrumentation":0.00038092100294306874,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a932f90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a932cc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a932a18 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a932798 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":210580,"size":4}},{"id":531043,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":531044,"event":"return","thread_id":9160,"parent_id":531043,"elapsed":0.000786394,"elapsed_instrumentation":0.00012543000048026443},{"id":531045,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":210620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db933e0>"}},{"id":531046,"event":"return","thread_id":9160,"parent_id":531045,"elapsed":3.4799741115421057e-06,"elapsed_instrumentation":0.0001161410182248801,"return_value":{"class":"Array","value":"[]","object_id":210640,"size":0}},{"id":531047,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3338560,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":210620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0db933e0>"}},{"id":531048,"event":"call","thread_id":9160,"defined_class":"DomainMaterializable","method_id":"refresh_instances_view","path":"app/models/concerns/domain_materializable.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531049,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"instances\" WHERE \"instances\".\"domain\" = $1 LIMIT $2","database_type":"postgres"}},{"id":531050,"event":"return","thread_id":9160,"parent_id":531049,"elapsed":0.002111362,"elapsed_instrumentation":0.00013154701446183026},{"id":531051,"event":"call","thread_id":9160,"defined_class":"Instance","method_id":"refresh","path":"app/models/instance.rb","lineno":28,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":52400,"value":"Instance"}},{"id":531052,"event":"call","thread_id":9160,"sql_query":{"sql":"REFRESH MATERIALIZED VIEW CONCURRENTLY \"instances\";","database_type":"postgres"}},{"id":531053,"event":"return","thread_id":9160,"parent_id":531052,"elapsed":0.021537204,"elapsed_instrumentation":0.0002118909906130284},{"id":531054,"event":"return","thread_id":9160,"parent_id":531051,"elapsed":0.022108164004748687,"elapsed_instrumentation":0.00019399102893657982,"return_value":{"class":"PG::Result","value":"#<PG::Result:0x00007fdc07140970>","object_id":3338580}},{"id":531055,"event":"call","thread_id":9160,"defined_class":"DomainMaterializable","method_id":"count_unique_subdomains!","path":"app/models/concerns/domain_materializable.rb","lineno":19,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531056,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"with_redis","path":"app/models/concerns/redisable.rb","lineno":8,"static":false,"parameters":[{"name":"block","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531057,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":3338600,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":3338620,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":531058,"event":"call","thread_id":9160,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":531059,"event":"return","thread_id":9160,"parent_id":531058,"elapsed":2.9320071917027235e-06,"elapsed_instrumentation":7.253600051626563e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fdc0a6c8020>","object_id":404600}},{"id":531060,"event":"return","thread_id":9160,"parent_id":531057,"elapsed":0.0013667619787156582,"elapsed_instrumentation":0.0003416170075070113,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":531061,"event":"return","thread_id":9160,"parent_id":531056,"elapsed":0.0017398780037183315,"elapsed_instrumentation":0.00013694301014766097,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":531062,"event":"return","thread_id":9160,"parent_id":531055,"elapsed":0.002213465020759031,"elapsed_instrumentation":0.00015704098041169345,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":531063,"event":"return","thread_id":9160,"parent_id":531048,"elapsed":0.02831859898287803,"elapsed_instrumentation":7.649202598258853e-05,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":531064,"event":"return","thread_id":9160,"parent_id":531047,"elapsed":0.02845780600910075,"elapsed_instrumentation":0.00016041297931224108,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a5b4850 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b44e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b40f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b39c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b2e88 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a5b2618 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":210660,"size":6}},{"id":531065,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"acct","path":"app/models/account.rb","lineno":191,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531066,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3338400,"value":"#<Account:0x00007fdc072be748>"}},{"id":531067,"event":"return","thread_id":9160,"parent_id":531066,"elapsed":7.517985068261623e-06,"elapsed_instrumentation":5.898301606066525e-05},{"id":531068,"event":"return","thread_id":9160,"parent_id":531065,"elapsed":0.00010234699584543705,"elapsed_instrumentation":9.811201016418636e-05,"return_value":{"class":"String","value":"alice@foreign.tld","object_id":3338640}}]}