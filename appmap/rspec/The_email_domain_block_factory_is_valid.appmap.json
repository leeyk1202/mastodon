{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"The email_domain_block factory is valid","source_location":"spec/fabrication/fabricators_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]}]},{"name":"validators","type":"package","children":[{"name":"DomainValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/domain_validator.rb:4","static":false}]}]}]}],"events":[{"id":2278471,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666120,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9347829e0>"}},{"id":2278472,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":11666140,"value":"30macgyver-rosenbaum.example","kind":"req"}],"receiver":{"class":"TagManager","object_id":521840,"value":"#<TagManager:0x00007fc93503aec0>"}},{"id":2278473,"event":"return","thread_id":9160,"parent_id":2278472,"elapsed":0.00023698998847976327,"elapsed_instrumentation":0.00018633302533999085,"return_value":{"class":"String","value":"30macgyver-rosenbaum.example","object_id":11666160}},{"id":2278474,"event":"return","thread_id":9160,"parent_id":2278471,"elapsed":0.0005617859424091876,"elapsed_instrumentation":0.0004813940613530576,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322b0590 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322b06d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026360,"size":2}},{"id":2278475,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934782620>"}},{"id":2278476,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2278477,"event":"return","thread_id":9160,"parent_id":2278476,"elapsed":0.000824939,"elapsed_instrumentation":0.00011464196722954512},{"id":2278478,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"email_domain_blocks\" WHERE \"email_domain_blocks\".\"domain\" = $1 LIMIT $2","database_type":"postgres"}},{"id":2278479,"event":"return","thread_id":9160,"parent_id":2278478,"elapsed":0.002337249,"elapsed_instrumentation":0.00010592199396342039},{"id":2278480,"event":"call","thread_id":9160,"defined_class":"DomainValidator","method_id":"validate_each","path":"app/validators/domain_validator.rb","lineno":4,"static":false,"parameters":[{"name":"record","class":"EmailDomainBlock","object_id":11666200,"value":"#<EmailDomainBlock:0x00007fc931357940>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1241948,"value":":domain","kind":"req"},{"name":"value","class":"String","object_id":11666220,"value":"30macgyver-rosenbaum.example","kind":"req"}],"receiver":{"class":"DomainValidator","object_id":1026460,"value":"#<DomainValidator:0x00007fc939ca17a0>"}},{"id":2278481,"event":"return","thread_id":9160,"parent_id":2278480,"elapsed":5.596800474449992e-05,"elapsed_instrumentation":0.00026085699209943414},{"id":2278482,"event":"return","thread_id":9160,"parent_id":2278475,"elapsed":0.00442014099098742,"elapsed_instrumentation":0.0002134220558218658,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322cd550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cd758 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cd8c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cdbe0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cde10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026480,"size":5}},{"id":2278483,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666180,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934782620>"}},{"id":2278484,"event":"return","thread_id":9160,"parent_id":2278483,"elapsed":5.02303009852767e-06,"elapsed_instrumentation":0.0001354230334982276,"return_value":{"class":"Array","value":"[]","object_id":1026500,"size":0}},{"id":2278485,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666120,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9347829e0>"}},{"id":2278486,"event":"return","thread_id":9160,"parent_id":2278485,"elapsed":1.598097151145339e-05,"elapsed_instrumentation":0.00010524597018957138,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322b0450 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026520,"size":1}},{"id":2278487,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026560,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934781900>"}},{"id":2278488,"event":"return","thread_id":9160,"parent_id":2278487,"elapsed":2.7726986445486546e-05,"elapsed_instrumentation":0.0003184970119036734,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322c65e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026580,"size":1}},{"id":2278489,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026600,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934781950>"}},{"id":2278490,"event":"return","thread_id":9160,"parent_id":2278489,"elapsed":2.728018444031477e-06,"elapsed_instrumentation":7.641600677743554e-05,"return_value":{"class":"Array","value":"[]","object_id":1026620,"size":0}},{"id":2278491,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9347816d0>"}},{"id":2278492,"event":"return","thread_id":9160,"parent_id":2278491,"elapsed":2.430984750390053e-06,"elapsed_instrumentation":8.034997154027224e-05,"return_value":{"class":"Array","value":"[]","object_id":1026680,"size":0}},{"id":2278493,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"email_domain_blocks\" (\"domain\", \"created_at\", \"updated_at\", \"parent_id\") VALUES ($1, $2, $3, $4) RETURNING \"id\"","database_type":"postgres"}},{"id":2278494,"event":"return","thread_id":9160,"parent_id":2278493,"elapsed":0.000848674,"elapsed_instrumentation":7.975701009854674e-05},{"id":2278495,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9347816d0>"}},{"id":2278496,"event":"return","thread_id":9160,"parent_id":2278495,"elapsed":2.6965048164129257e-05,"elapsed_instrumentation":0.00011881993850693107,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322c4590 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026700,"size":1}},{"id":2278497,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026600,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934781950>"}},{"id":2278498,"event":"return","thread_id":9160,"parent_id":2278497,"elapsed":2.4440232664346695e-06,"elapsed_instrumentation":6.990699330344796e-05,"return_value":{"class":"Array","value":"[]","object_id":1026720,"size":0}},{"id":2278499,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666240,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026560,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934781900>"}},{"id":2278500,"event":"return","thread_id":9160,"parent_id":2278499,"elapsed":7.623399142175913e-05,"elapsed_instrumentation":7.836695294827223e-05,"return_value":{"class":"Array","value":"[]","object_id":1026740,"size":0}},{"id":2278501,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":2278502,"event":"return","thread_id":9160,"parent_id":2278501,"elapsed":0.000405347,"elapsed_instrumentation":7.065001409500837e-05},{"id":2278503,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9347829e0>"}},{"id":2278504,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":11666300,"value":"30macgyver-rosenbaum.example","kind":"req"}],"receiver":{"class":"TagManager","object_id":521840,"value":"#<TagManager:0x00007fc93503aec0>"}},{"id":2278505,"event":"return","thread_id":9160,"parent_id":2278504,"elapsed":0.00017781596397981048,"elapsed_instrumentation":0.00012223003432154655,"return_value":{"class":"String","value":"30macgyver-rosenbaum.example","object_id":11666320}},{"id":2278506,"event":"return","thread_id":9160,"parent_id":2278503,"elapsed":0.00038647401379421353,"elapsed_instrumentation":0.000401449971832335,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322b0590 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322b06d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026360,"size":2}},{"id":2278507,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934782620>"}},{"id":2278508,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'email_domain_blocks'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":2278509,"event":"return","thread_id":9160,"parent_id":2278508,"elapsed":0.002953646,"elapsed_instrumentation":9.574700379744172e-05},{"id":2278510,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279116\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":2278511,"event":"return","thread_id":9160,"parent_id":2278510,"elapsed":0.000618966,"elapsed_instrumentation":7.723696762695909e-05},{"id":2278512,"event":"call","thread_id":9160,"defined_class":"DomainValidator","method_id":"validate_each","path":"app/validators/domain_validator.rb","lineno":4,"static":false,"parameters":[{"name":"record","class":"EmailDomainBlock","object_id":11666200,"value":"#<EmailDomainBlock:0x00007fc931357940>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1241948,"value":":domain","kind":"req"},{"name":"value","class":"String","object_id":11666360,"value":"30macgyver-rosenbaum.example","kind":"req"}],"receiver":{"class":"DomainValidator","object_id":1026460,"value":"#<DomainValidator:0x00007fc939ca17a0>"}},{"id":2278513,"event":"return","thread_id":9160,"parent_id":2278512,"elapsed":4.688696935772896e-05,"elapsed_instrumentation":0.00015904800966382027},{"id":2278514,"event":"return","thread_id":9160,"parent_id":2278507,"elapsed":0.004693026014138013,"elapsed_instrumentation":0.0001344829797744751,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322cd550 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cd758 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cd8c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cdbe0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9322cde10 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026480,"size":5}},{"id":2278515,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666340,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc934782620>"}},{"id":2278516,"event":"return","thread_id":9160,"parent_id":2278515,"elapsed":3.456021659076214e-06,"elapsed_instrumentation":7.960997754707932e-05,"return_value":{"class":"Array","value":"[]","object_id":1026500,"size":0}},{"id":2278517,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":11666280,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1026300,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc9347829e0>"}},{"id":2278518,"event":"return","thread_id":9160,"parent_id":2278517,"elapsed":1.165998401120305e-05,"elapsed_instrumentation":7.953500607982278e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9322b0450 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1026520,"size":1}}]}