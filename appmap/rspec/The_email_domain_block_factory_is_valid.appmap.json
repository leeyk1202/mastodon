{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"The email_domain_block factory is valid","source_location":"spec/fabrication/fabricators_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"TagManager","type":"class","children":[{"name":"normalize_domain","type":"function","location":"app/lib/tag_manager.rb:17","static":false}]}]},{"name":"validators","type":"package","children":[{"name":"DomainValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/domain_validator.rb:4","static":false}]}]}]}],"events":[{"id":1761243,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453620,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9c48>"}},{"id":1761244,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":9453640,"value":"32johnston.example","kind":"req"}],"receiver":{"class":"TagManager","object_id":831360,"value":"#<TagManager:0x00007fdc08786ea0>"}},{"id":1761245,"event":"return","thread_id":9160,"parent_id":1761244,"elapsed":0.0003461460000835359,"elapsed_instrumentation":0.00014734501019120216,"return_value":{"class":"String","value":"32johnston.example","object_id":9453660}},{"id":1761246,"event":"return","thread_id":9160,"parent_id":1761243,"elapsed":0.000603115011472255,"elapsed_instrumentation":0.0002491479681339115,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0657bfe0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0657c1e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699380,"size":2}},{"id":1761247,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9a68>"}},{"id":1761248,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1761249,"event":"return","thread_id":9160,"parent_id":1761248,"elapsed":0.000757861,"elapsed_instrumentation":0.00013946500257588923},{"id":1761250,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"email_domain_blocks\" WHERE \"email_domain_blocks\".\"domain\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1761251,"event":"return","thread_id":9160,"parent_id":1761250,"elapsed":0.002207579,"elapsed_instrumentation":8.245001663453877e-05},{"id":1761252,"event":"call","thread_id":9160,"defined_class":"DomainValidator","method_id":"validate_each","path":"app/validators/domain_validator.rb","lineno":4,"static":false,"parameters":[{"name":"record","class":"EmailDomainBlock","object_id":9453700,"value":"#<EmailDomainBlock:0x00007fdc15b52e50>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1241948,"value":":domain","kind":"req"},{"name":"value","class":"String","object_id":9453720,"value":"32johnston.example","kind":"req"}],"receiver":{"class":"DomainValidator","object_id":6699480,"value":"#<DomainValidator:0x00007fdc0fcf5588>"}},{"id":1761253,"event":"return","thread_id":9160,"parent_id":1761252,"elapsed":5.060702096670866e-05,"elapsed_instrumentation":0.00018788498709909618},{"id":1761254,"event":"return","thread_id":9160,"parent_id":1761247,"elapsed":0.00387339000008069,"elapsed_instrumentation":0.00014888501027598977,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc06576400 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc06576720 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc065769c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc06576ce8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc06577008 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699500,"size":5}},{"id":1761255,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453680,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9a68>"}},{"id":1761256,"event":"return","thread_id":9160,"parent_id":1761255,"elapsed":2.8279901016503572e-06,"elapsed_instrumentation":8.028600132092834e-05,"return_value":{"class":"Array","value":"[]","object_id":6699520,"size":0}},{"id":1761257,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453620,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9c48>"}},{"id":1761258,"event":"return","thread_id":9160,"parent_id":1761257,"elapsed":1.0776013368740678e-05,"elapsed_instrumentation":8.092800271697342e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0657bd38 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699540,"size":1}},{"id":1761259,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699580,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a8d48>"}},{"id":1761260,"event":"return","thread_id":9160,"parent_id":1761259,"elapsed":2.2105989046394825e-05,"elapsed_instrumentation":8.21069988887757e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc065b5ad8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699600,"size":1}},{"id":1761261,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a8d98>"}},{"id":1761262,"event":"return","thread_id":9160,"parent_id":1761261,"elapsed":2.3049942683428526e-06,"elapsed_instrumentation":6.482301978394389e-05,"return_value":{"class":"Array","value":"[]","object_id":6699640,"size":0}},{"id":1761263,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a8b18>"}},{"id":1761264,"event":"return","thread_id":9160,"parent_id":1761263,"elapsed":2.221000613644719e-06,"elapsed_instrumentation":8.91299860086292e-05,"return_value":{"class":"Array","value":"[]","object_id":6699700,"size":0}},{"id":1761265,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"email_domain_blocks\" (\"domain\", \"created_at\", \"updated_at\", \"parent_id\") VALUES ($1, $2, $3, $4) RETURNING \"id\"","database_type":"postgres"}},{"id":1761266,"event":"return","thread_id":9160,"parent_id":1761265,"elapsed":0.000704066,"elapsed_instrumentation":7.661900599487126e-05},{"id":1761267,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a8b18>"}},{"id":1761268,"event":"return","thread_id":9160,"parent_id":1761267,"elapsed":2.6197987608611584e-05,"elapsed_instrumentation":0.00012293100007809699,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc065b2108 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699720,"size":1}},{"id":1761269,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a8d98>"}},{"id":1761270,"event":"return","thread_id":9160,"parent_id":1761269,"elapsed":2.7120113372802734e-06,"elapsed_instrumentation":7.039500633254647e-05,"return_value":{"class":"Array","value":"[]","object_id":6699740,"size":0}},{"id":1761271,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699580,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a8d48>"}},{"id":1761272,"event":"return","thread_id":9160,"parent_id":1761271,"elapsed":2.53098551183939e-06,"elapsed_instrumentation":6.445299368351698e-05,"return_value":{"class":"Array","value":"[]","object_id":6699760,"size":0}},{"id":1761273,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1761274,"event":"return","thread_id":9160,"parent_id":1761273,"elapsed":0.000418612,"elapsed_instrumentation":6.752499029971659e-05},{"id":1761275,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9c48>"}},{"id":1761276,"event":"call","thread_id":9160,"defined_class":"TagManager","method_id":"normalize_domain","path":"app/lib/tag_manager.rb","lineno":17,"static":false,"parameters":[{"name":"domain","class":"String","object_id":9453800,"value":"32johnston.example","kind":"req"}],"receiver":{"class":"TagManager","object_id":831360,"value":"#<TagManager:0x00007fdc08786ea0>"}},{"id":1761277,"event":"return","thread_id":9160,"parent_id":1761276,"elapsed":0.0001709560165181756,"elapsed_instrumentation":0.00010073199518956244,"return_value":{"class":"String","value":"32johnston.example","object_id":9453820}},{"id":1761278,"event":"return","thread_id":9160,"parent_id":1761275,"elapsed":0.0003439330030232668,"elapsed_instrumentation":0.0001605490397196263,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0657bfe0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0657c1e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699380,"size":2}},{"id":1761279,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9a68>"}},{"id":1761280,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid,\n                pg_catalog.obj_description(i.oid, 'pg_class') AS comment, d.indisvalid\nFROM pg_class t\nINNER JOIN pg_index d ON t.oid = d.indrelid\nINNER JOIN pg_class i ON d.indexrelid = i.oid\nLEFT JOIN pg_namespace n ON n.oid = t.relnamespace\nWHERE i.relkind IN ('i', 'I')\n  AND d.indisprimary = 'f'\n  AND t.relname = 'email_domain_blocks'\n  AND n.nspname = ANY (current_schemas(false))\nORDER BY i.relname\n","database_type":"postgres"}},{"id":1761281,"event":"return","thread_id":9160,"parent_id":1761280,"elapsed":0.005104415,"elapsed_instrumentation":0.0002641609753482044},{"id":1761282,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT a.attnum, a.attname\nFROM pg_attribute a\nWHERE a.attrelid = 279116\nAND a.attnum IN (2)\n","database_type":"postgres"}},{"id":1761283,"event":"return","thread_id":9160,"parent_id":1761282,"elapsed":0.000606145,"elapsed_instrumentation":0.00019052298739552498},{"id":1761284,"event":"call","thread_id":9160,"defined_class":"DomainValidator","method_id":"validate_each","path":"app/validators/domain_validator.rb","lineno":4,"static":false,"parameters":[{"name":"record","class":"EmailDomainBlock","object_id":9453700,"value":"#<EmailDomainBlock:0x00007fdc15b52e50>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1241948,"value":":domain","kind":"req"},{"name":"value","class":"String","object_id":9453860,"value":"32johnston.example","kind":"req"}],"receiver":{"class":"DomainValidator","object_id":6699480,"value":"#<DomainValidator:0x00007fdc0fcf5588>"}},{"id":1761285,"event":"return","thread_id":9160,"parent_id":1761284,"elapsed":4.773298860527575e-05,"elapsed_instrumentation":0.00017837100313045084},{"id":1761286,"event":"return","thread_id":9160,"parent_id":1761279,"elapsed":0.00721705102478154,"elapsed_instrumentation":0.00021264899987727404,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc06576400 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc06576720 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc065769c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc06576ce8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc06577008 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699500,"size":5}},{"id":1761287,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9a68>"}},{"id":1761288,"event":"return","thread_id":9160,"parent_id":1761287,"elapsed":2.968008629977703e-06,"elapsed_instrumentation":7.975799962878227e-05,"return_value":{"class":"Array","value":"[]","object_id":6699520,"size":0}},{"id":1761289,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":9453780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6699320,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc073a9c48>"}},{"id":1761290,"event":"return","thread_id":9160,"parent_id":1761289,"elapsed":1.0971998563036323e-05,"elapsed_instrumentation":7.700800779275596e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0657bd38 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6699540,"size":1}}]}