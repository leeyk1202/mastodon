{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"AccountInteractions #remote_followers_hash invalidates cache as needed when removing or adding followers","source_location":"spec/models/concerns/account_interactions_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"concerns","type":"package","children":[{"name":"AccountInteractions","type":"class","children":[{"name":"remote_followers_hash","type":"function","location":"app/models/concerns/account_interactions.rb:279","static":false},{"name":"unfollow!","type":"function","location":"app/models/concerns/account_interactions.rb:173","static":false},{"name":"follow!","type":"function","location":"app/models/concerns/account_interactions.rb:115","static":false}]},{"name":"AccountCounters","type":"class","children":[{"name":"decrement_count!","type":"function","location":"app/models/concerns/account_counters.rb:28","static":false},{"name":"update_count!","type":"function","location":"app/models/concerns/account_counters.rb:34","static":false},{"name":"increment_count!","type":"function","location":"app/models/concerns/account_counters.rb:23","static":false},{"name":"account_stat","type":"function","location":"app/models/concerns/account_counters.rb:76","static":false}]},{"name":"RateLimitable","type":"class","children":[{"name":"rate_limit=","type":"function","location":"app/models/concerns/rate_limitable.rb:6","static":false},{"name":"rate_limit?","type":"function","location":"app/models/concerns/rate_limitable.rb:10","static":false}]},{"name":"FollowLimitable","type":"class","children":[{"name":"bypass_follow_limit=","type":"function","location":"app/models/concerns/follow_limitable.rb:10","static":false},{"name":"bypass_follow_limit?","type":"function","location":"app/models/concerns/follow_limitable.rb:14","static":false}]},{"name":"Redisable","type":"class","children":[{"name":"redis","type":"function","location":"app/models/concerns/redisable.rb:4","static":false}]}]},{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"synchronization_uri_prefix","type":"function","location":"app/models/account.rb:409","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"activitypub","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"generate_uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:61","static":false}]}]}]},{"name":"PotentialFriendshipTracker","type":"class","children":[{"name":"remove","type":"function","location":"app/lib/potential_friendship_tracker.rb:27","static":true}]}]},{"name":"helpers","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]}]},{"name":"validators","type":"package","children":[{"name":"FollowLimitValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/follow_limit_validator.rb:7","static":false}]},{"name":"LanguageValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/language_validator.rb:6","static":false}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/active_record","type":"package","children":[{"name":"ActiveRecord","type":"class","children":[{"name":"Batches","type":"class","children":[{"name":"pluck_each","type":"function","location":"lib/active_record/batches.rb:5","static":false}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]},{"name":"unpack","type":"function","location":"<internal:pack>:19","static":false,"labels":["string.unpack"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":575183,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":3826000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575184,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3826880,"value":"Cache read: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575185,"event":"return","thread_id":9160,"parent_id":575184,"elapsed":0.00041417096508666873,"elapsed_instrumentation":0.00013784802285954356,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":575186,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3826900,"value":"Cache generate: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575187,"event":"return","thread_id":9160,"parent_id":575186,"elapsed":0.0004474709858186543,"elapsed_instrumentation":0.00013109802966937423,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":575188,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3826920,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3826940,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc91a4994c8>"}},{"id":575189,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":575190,"event":"return","thread_id":9160,"parent_id":575189,"elapsed":0.000962998,"elapsed_instrumentation":9.320001117885113e-05},{"id":575191,"event":"return","thread_id":9160,"parent_id":575188,"elapsed":0.002312869008164853,"elapsed_instrumentation":0.00013395503628998995},{"id":575192,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3826960,"value":" ___t__\u001c%\tCp__p\u0001+_qűr___\\__מ__"}},{"id":575193,"event":"return","thread_id":9160,"parent_id":575192,"elapsed":4.693982191383839e-06,"elapsed_instrumentation":0.00012339797103777528,"return_value":{"class":"String","value":"20aecbe774b3d61c25094370baf370012b9271c5b172ecedb05caff8d79ef0c7","object_id":3826980}},{"id":575194,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827000,"value":"Cache write: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575195,"event":"return","thread_id":9160,"parent_id":575194,"elapsed":0.0005633059772662818,"elapsed_instrumentation":0.00011711893603205681,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":575196,"event":"return","thread_id":9160,"parent_id":575183,"elapsed":0.007265668013133109,"elapsed_instrumentation":0.00017391092842444777,"return_value":{"class":"String","value":"20aecbe774b3d61c25094370baf370012b9271c5b172ecedb05caff8d79ef0c7","object_id":3826980}},{"id":575197,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"unfollow!","path":"app/models/concerns/account_interactions.rb","lineno":173,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>","kind":"req"}],"receiver":{"class":"Account","object_id":3826780,"value":"#<Account:0x00007fc91a4835d8>"}},{"id":575198,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":575199,"event":"return","thread_id":9160,"parent_id":575198,"elapsed":0.000597802,"elapsed_instrumentation":8.463102858513594e-05},{"id":575200,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827020,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1462400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932731830>"}},{"id":575201,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":575202,"event":"return","thread_id":9160,"parent_id":575201,"elapsed":0.000395795,"elapsed_instrumentation":8.226500358432531e-05},{"id":575203,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":575204,"event":"return","thread_id":9160,"parent_id":575203,"elapsed":0.000593941,"elapsed_instrumentation":8.524599252268672e-05},{"id":575205,"event":"return","thread_id":9160,"parent_id":575200,"elapsed":0.002622049010824412,"elapsed_instrumentation":0.0001605030265636742,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933a9e5d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1462440,"size":1}},{"id":575206,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follows\" WHERE \"follows\".\"id\" = $1","database_type":"postgres"}},{"id":575207,"event":"return","thread_id":9160,"parent_id":575206,"elapsed":0.000663593,"elapsed_instrumentation":6.80689699947834e-05},{"id":575208,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827020,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1462400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932731830>"}},{"id":575209,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"account_pins\" WHERE \"account_pins\".\"target_account_id\" = $1 AND \"account_pins\".\"account_id\" = $2","database_type":"postgres"}},{"id":575210,"event":"return","thread_id":9160,"parent_id":575209,"elapsed":0.000618897,"elapsed_instrumentation":6.538897287100554e-05},{"id":575211,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":3826780,"value":"#<Account:0x00007fc91a4835d8>"}},{"id":575212,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":3826780,"value":"#<Account:0x00007fc91a4835d8>"}},{"id":575213,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111361347109748924, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":575214,"event":"return","thread_id":9160,"parent_id":575213,"elapsed":0.0006707,"elapsed_instrumentation":6.512401159852743e-05},{"id":575215,"event":"return","thread_id":9160,"parent_id":575212,"elapsed":0.0013226729934103787,"elapsed_instrumentation":0.00011503201676532626},{"id":575216,"event":"return","thread_id":9160,"parent_id":575211,"elapsed":0.0014625290059484541,"elapsed_instrumentation":0.00010129099246114492},{"id":575217,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":575218,"event":"return","thread_id":9160,"parent_id":575217,"elapsed":0.000532097,"elapsed_instrumentation":7.207103772088885e-05},{"id":575219,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":3827040,"value":"#<Account:0x00007fc91a497308>"}},{"id":575220,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":3827040,"value":"#<Account:0x00007fc91a497308>"}},{"id":575221,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111361347109748922, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":575222,"event":"return","thread_id":9160,"parent_id":575221,"elapsed":0.000682227,"elapsed_instrumentation":7.249199552461505e-05},{"id":575223,"event":"return","thread_id":9160,"parent_id":575220,"elapsed":0.0011537160025909543,"elapsed_instrumentation":8.595100371167064e-05},{"id":575224,"event":"return","thread_id":9160,"parent_id":575219,"elapsed":0.0012614009901881218,"elapsed_instrumentation":0.00010772101813927293},{"id":575225,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826780,"value":"#<Account:0x00007fc91a4835d8>"}},{"id":575226,"event":"return","thread_id":9160,"parent_id":575225,"elapsed":1.0028015822172165e-05,"elapsed_instrumentation":7.790204836055636e-05},{"id":575227,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826780,"value":"#<Account:0x00007fc91a4835d8>"}},{"id":575228,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826780,"value":"#<Account:0x00007fc91a4835d8>"}},{"id":575229,"event":"return","thread_id":9160,"parent_id":575228,"elapsed":4.381989128887653e-06,"elapsed_instrumentation":4.92219696752727e-05},{"id":575230,"event":"return","thread_id":9160,"parent_id":575227,"elapsed":7.18849478289485e-05,"elapsed_instrumentation":7.386604556813836e-05,"return_value":{"class":"String","value":"https://example.org/","object_id":3827060}},{"id":575231,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827080,"value":"Cache delete: followers_hash:111361347109748922:https://example.org/\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575232,"event":"return","thread_id":9160,"parent_id":575231,"elapsed":0.00046436599222943187,"elapsed_instrumentation":0.00012396497186273336,"return_value":{"class":"Integer","value":"69","object_id":139}},{"id":575233,"event":"return","thread_id":9160,"parent_id":575208,"elapsed":0.007705946045462042,"elapsed_instrumentation":0.0002612509997561574,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933a9e3c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933a9e210 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933a9e008 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1462520,"size":3}},{"id":575234,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":575235,"event":"return","thread_id":9160,"parent_id":575234,"elapsed":0.000383656,"elapsed_instrumentation":6.657297490164638e-05},{"id":575236,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827120,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":575237,"event":"return","thread_id":9160,"parent_id":575236,"elapsed":3.663997631520033e-06,"elapsed_instrumentation":0.00010327599011361599,"return_value":{"class":"Array","value":"[]","object_id":1342560,"size":0}},{"id":575238,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827120,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":575239,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827140,"value":"Cache delete: relationship:111361347109748924:111361347109748922\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575240,"event":"return","thread_id":9160,"parent_id":575239,"elapsed":0.00043125898810103536,"elapsed_instrumentation":0.00010399700840935111,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":575241,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827160,"value":"Cache delete: relationship:111361347109748922:111361347109748924\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575242,"event":"return","thread_id":9160,"parent_id":575241,"elapsed":0.0004160060198046267,"elapsed_instrumentation":0.00018676300533115864,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":575243,"event":"return","thread_id":9160,"parent_id":575238,"elapsed":0.001354023057501763,"elapsed_instrumentation":0.0001047879341058433,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93252f690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342620,"size":1}},{"id":575244,"event":"return","thread_id":9160,"parent_id":575197,"elapsed":0.01675903203431517,"elapsed_instrumentation":0.00011874700430780649,"return_value":{"class":"Follow","value":"#<Follow:0x00007fc91a498ac8>","object_id":3827100}},{"id":575245,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":3826000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575246,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827180,"value":"Cache read: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575247,"event":"return","thread_id":9160,"parent_id":575246,"elapsed":0.00048012699699029326,"elapsed_instrumentation":0.00010544201359152794,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":575248,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827200,"value":"Cache generate: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575249,"event":"return","thread_id":9160,"parent_id":575248,"elapsed":0.0007131299935281277,"elapsed_instrumentation":0.00012771703768521547,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":575250,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3827220,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3827240,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc91a495b48>"}},{"id":575251,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":575252,"event":"return","thread_id":9160,"parent_id":575251,"elapsed":0.000894437,"elapsed_instrumentation":8.436100324615836e-05},{"id":575253,"event":"return","thread_id":9160,"parent_id":575250,"elapsed":0.002153452020138502,"elapsed_instrumentation":0.0001451529678888619},{"id":575254,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3827260,"value":"pyb◷__F_!__Pj\u001bΦ\u0007_\u0014,_N'ɱ\u0006____"}},{"id":575255,"event":"return","thread_id":9160,"parent_id":575254,"elapsed":5.842011887580156e-06,"elapsed_instrumentation":0.00012324698036536574,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":3827280}},{"id":575256,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827300,"value":"Cache write: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575257,"event":"return","thread_id":9160,"parent_id":575256,"elapsed":0.0006104219937697053,"elapsed_instrumentation":0.00011621206067502499,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":575258,"event":"return","thread_id":9160,"parent_id":575245,"elapsed":0.006245580036193132,"elapsed_instrumentation":0.00010512297740206122,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":3827280}},{"id":575259,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"unfollow!","path":"app/models/concerns/account_interactions.rb","lineno":173,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>","kind":"req"}],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575260,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":575261,"event":"return","thread_id":9160,"parent_id":575260,"elapsed":0.000383527,"elapsed_instrumentation":7.358897710219026e-05},{"id":575262,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827320,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1462400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932731830>"}},{"id":575263,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":575264,"event":"return","thread_id":9160,"parent_id":575263,"elapsed":0.000494415,"elapsed_instrumentation":7.740402361378074e-05},{"id":575265,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":575266,"event":"return","thread_id":9160,"parent_id":575265,"elapsed":0.000479151,"elapsed_instrumentation":7.682101568207145e-05},{"id":575267,"event":"return","thread_id":9160,"parent_id":575262,"elapsed":0.002723371027968824,"elapsed_instrumentation":0.00017298798775300384,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933a9e5d0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1462440,"size":1}},{"id":575268,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follows\" WHERE \"follows\".\"id\" = $1","database_type":"postgres"}},{"id":575269,"event":"return","thread_id":9160,"parent_id":575268,"elapsed":0.000765642,"elapsed_instrumentation":7.97429820522666e-05},{"id":575270,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827320,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1462400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932731830>"}},{"id":575271,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"account_pins\" WHERE \"account_pins\".\"target_account_id\" = $1 AND \"account_pins\".\"account_id\" = $2","database_type":"postgres"}},{"id":575272,"event":"return","thread_id":9160,"parent_id":575271,"elapsed":0.000542372,"elapsed_instrumentation":6.787502206861973e-05},{"id":575273,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575274,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575275,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111361347109748921, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":575276,"event":"return","thread_id":9160,"parent_id":575275,"elapsed":0.000837117,"elapsed_instrumentation":9.154900908470154e-05},{"id":575277,"event":"return","thread_id":9160,"parent_id":575274,"elapsed":0.0013979480136185884,"elapsed_instrumentation":0.0001101270318031311},{"id":575278,"event":"return","thread_id":9160,"parent_id":575273,"elapsed":0.0015361119876615703,"elapsed_instrumentation":0.0002112480578944087},{"id":575279,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":575280,"event":"return","thread_id":9160,"parent_id":575279,"elapsed":0.0005327,"elapsed_instrumentation":7.75050139054656e-05},{"id":575281,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":3827340,"value":"#<Account:0x00007fc91a493848>"}},{"id":575282,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":3827340,"value":"#<Account:0x00007fc91a493848>"}},{"id":575283,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111361347109748922, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":575284,"event":"return","thread_id":9160,"parent_id":575283,"elapsed":0.000853051,"elapsed_instrumentation":7.710297359153628e-05},{"id":575285,"event":"return","thread_id":9160,"parent_id":575282,"elapsed":0.0013817910221405327,"elapsed_instrumentation":9.831204079091549e-05},{"id":575286,"event":"return","thread_id":9160,"parent_id":575281,"elapsed":0.001504617976024747,"elapsed_instrumentation":0.00019295304082334042},{"id":575287,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575288,"event":"return","thread_id":9160,"parent_id":575287,"elapsed":1.2029020581394434e-05,"elapsed_instrumentation":8.637795690447092e-05},{"id":575289,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575290,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575291,"event":"return","thread_id":9160,"parent_id":575290,"elapsed":4.87396027892828e-06,"elapsed_instrumentation":5.1737064495682716e-05},{"id":575292,"event":"return","thread_id":9160,"parent_id":575289,"elapsed":7.417099550366402e-05,"elapsed_instrumentation":0.00018249504501000047,"return_value":{"class":"String","value":"https://example.org/","object_id":3827360}},{"id":575293,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827380,"value":"Cache delete: followers_hash:111361347109748922:https://example.org/\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575294,"event":"return","thread_id":9160,"parent_id":575293,"elapsed":0.0005431559984572232,"elapsed_instrumentation":0.00013124302495270967,"return_value":{"class":"Integer","value":"69","object_id":139}},{"id":575295,"event":"return","thread_id":9160,"parent_id":575270,"elapsed":0.008736486954148859,"elapsed_instrumentation":0.0004679790581576526,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc933a9e3c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933a9e210 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc933a9e008 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1462520,"size":3}},{"id":575296,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":575297,"event":"return","thread_id":9160,"parent_id":575296,"elapsed":0.000390856,"elapsed_instrumentation":7.80789996497333e-05},{"id":575298,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":575299,"event":"return","thread_id":9160,"parent_id":575298,"elapsed":4.219007678329945e-06,"elapsed_instrumentation":0.00013561005471274257,"return_value":{"class":"Array","value":"[]","object_id":1342560,"size":0}},{"id":575300,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":575301,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827440,"value":"Cache delete: relationship:111361347109748921:111361347109748922\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575302,"event":"return","thread_id":9160,"parent_id":575301,"elapsed":0.000997620983980596,"elapsed_instrumentation":0.00011767598334699869,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":575303,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827460,"value":"Cache delete: relationship:111361347109748922:111361347109748921\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575304,"event":"return","thread_id":9160,"parent_id":575303,"elapsed":0.0005733720026910305,"elapsed_instrumentation":0.00014347501564770937,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":575305,"event":"return","thread_id":9160,"parent_id":575300,"elapsed":0.002130450971890241,"elapsed_instrumentation":0.00013463001232594252,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93252f690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342620,"size":1}},{"id":575306,"event":"return","thread_id":9160,"parent_id":575259,"elapsed":0.018844360020011663,"elapsed_instrumentation":0.00012340093962848186,"return_value":{"class":"Follow","value":"#<Follow:0x00007fc91a494ec8>","object_id":3827400}},{"id":575307,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":3826000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575308,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827480,"value":"Cache read: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575309,"event":"return","thread_id":9160,"parent_id":575308,"elapsed":0.0005630499799735844,"elapsed_instrumentation":0.00011548202019184828,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":575310,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827500,"value":"Cache generate: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575311,"event":"return","thread_id":9160,"parent_id":575310,"elapsed":0.0005403010291047394,"elapsed_instrumentation":0.0001259489799849689,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":575312,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3827520,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3827540,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc91a491e08>"}},{"id":575313,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":575314,"event":"return","thread_id":9160,"parent_id":575313,"elapsed":0.000996048,"elapsed_instrumentation":0.00010077503975480795},{"id":575315,"event":"return","thread_id":9160,"parent_id":575312,"elapsed":0.0030159300076775253,"elapsed_instrumentation":0.00014536100206896663},{"id":575316,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3827560,"value":"$\u001b\u0000yL_j_d_\"\n___(1__e___[_^սCk_"}},{"id":575317,"event":"return","thread_id":9160,"parent_id":575316,"elapsed":5.443987902253866e-06,"elapsed_instrumentation":0.0001488699926994741,"return_value":{"class":"String","value":"241b00794ce9b46aa864f3220afadef128318da2659782985bac5ed5bd436bff","object_id":3827580}},{"id":575318,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827600,"value":"Cache write: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575319,"event":"return","thread_id":9160,"parent_id":575318,"elapsed":0.0011498180101625621,"elapsed_instrumentation":0.00019654497737064958,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":575320,"event":"return","thread_id":9160,"parent_id":575307,"elapsed":0.007923775992821902,"elapsed_instrumentation":0.00012496602721512318,"return_value":{"class":"String","value":"241b00794ce9b46aa864f3220afadef128318da2659782985bac5ed5bd436bff","object_id":3827580}},{"id":575321,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"follow!","path":"app/models/concerns/account_interactions.rb","lineno":115,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>","kind":"req"},{"name":"reblogs","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"notify","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"languages","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"uri","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"rate_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"bypass_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575322,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":575323,"event":"return","thread_id":9160,"parent_id":575322,"elapsed":0.000575443,"elapsed_instrumentation":0.00010740297148004174},{"id":575324,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>"}},{"id":575325,"event":"return","thread_id":9160,"parent_id":575324,"elapsed":1.0841002222150564e-05,"elapsed_instrumentation":0.00039152801036834717},{"id":575326,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>"}},{"id":575327,"event":"return","thread_id":9160,"parent_id":575326,"elapsed":4.398985765874386e-06,"elapsed_instrumentation":0.0001536429626867175},{"id":575328,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>"}},{"id":575329,"event":"return","thread_id":9160,"parent_id":575328,"elapsed":5.16202999278903e-06,"elapsed_instrumentation":0.00011713197454810143},{"id":575330,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>"}},{"id":575331,"event":"return","thread_id":9160,"parent_id":575330,"elapsed":3.570981789380312e-06,"elapsed_instrumentation":6.967096123844385e-05},{"id":575332,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827640,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931ff0>"}},{"id":575333,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"generate_uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":61,"static":false,"parameters":[{"name":"_target","class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":575334,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":575335,"event":"return","thread_id":9160,"parent_id":575334,"elapsed":6.098998710513115e-06,"elapsed_instrumentation":0.00021606998052448034,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":575336,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":325700,"value":"#<ActivityPub::TagManager:0x00007fc937c92608>"}},{"id":575337,"event":"return","thread_id":9160,"parent_id":575336,"elapsed":5.464011337608099e-06,"elapsed_instrumentation":0.00015783897833898664,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":325720,"size":3}},{"id":575338,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack","path":"<internal:pack>","lineno":19,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":344180,"value":"NnnnnN","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3827660,"value":"\u0005__Jkq6__\u001b__{_\u001f"}},{"id":575339,"event":"return","thread_id":9160,"parent_id":575338,"elapsed":1.056998735293746e-05,"elapsed_instrumentation":0.00030027900356799364,"return_value":{"class":"Array","value":"[98484810, 27505, 13975, 51227, 32975, 2071964447]","object_id":3827680,"size":6}},{"id":575340,"event":"return","thread_id":9160,"parent_id":575333,"elapsed":0.001179659040644765,"elapsed_instrumentation":0.00041560293175280094,"return_value":{"class":"URI::HTTPS","value":"https://cb6e6126.ngrok.io/05dec24a-6b71-4697-881b-80cf7b7fab1f","object_id":3827700}},{"id":575341,"event":"return","thread_id":9160,"parent_id":575332,"elapsed":0.0016725360183045268,"elapsed_instrumentation":0.00014433596516028047,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324c9278 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c93b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342160,"size":2}},{"id":575342,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827720,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931d70>"}},{"id":575343,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit?","path":"app/models/concerns/follow_limitable.rb","lineno":14,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>"}},{"id":575344,"event":"return","thread_id":9160,"parent_id":575343,"elapsed":4.553003236651421e-06,"elapsed_instrumentation":9.555299766361713e-05},{"id":575345,"event":"call","thread_id":9160,"defined_class":"FollowLimitValidator","method_id":"validate","path":"app/validators/follow_limit_validator.rb","lineno":7,"static":false,"parameters":[{"name":"follow","class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>","kind":"req"}],"receiver":{"class":"FollowLimitValidator","object_id":1342220,"value":"#<FollowLimitValidator:0x00007fc93955dc50>"}},{"id":575346,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575347,"event":"return","thread_id":9160,"parent_id":575346,"elapsed":8.856994099915028e-06,"elapsed_instrumentation":7.032998837530613e-05},{"id":575348,"event":"return","thread_id":9160,"parent_id":575345,"elapsed":0.0001343490439467132,"elapsed_instrumentation":0.00026078399969264865},{"id":575349,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":575350,"event":"return","thread_id":9160,"parent_id":575349,"elapsed":0.000458994,"elapsed_instrumentation":0.00011423497926443815},{"id":575351,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":575352,"event":"return","thread_id":9160,"parent_id":575351,"elapsed":0.001511988,"elapsed_instrumentation":8.778402116149664e-05},{"id":575353,"event":"call","thread_id":9160,"defined_class":"LanguageValidator","method_id":"validate_each","path":"app/validators/language_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":9806428,"value":":languages","kind":"req"},{"name":"value","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"LanguageValidator","object_id":1342240,"value":"#<LanguageValidator:0x00007fc939554bc8>"}},{"id":575354,"event":"return","thread_id":9160,"parent_id":575353,"elapsed":5.930021870881319e-06,"elapsed_instrumentation":0.00014363299123942852},{"id":575355,"event":"return","thread_id":9160,"parent_id":575342,"elapsed":0.0037666719872504473,"elapsed_instrumentation":0.00021214300068095326,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324c6320 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c64d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c67a8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c6988 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c6b68 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324c6d48 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342260,"size":6}},{"id":575356,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827720,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342200,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931d70>"}},{"id":575357,"event":"return","thread_id":9160,"parent_id":575356,"elapsed":3.7320423871278763e-06,"elapsed_instrumentation":8.938601240515709e-05,"return_value":{"class":"Array","value":"[]","object_id":1342280,"size":0}},{"id":575358,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827640,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931931ff0>"}},{"id":575359,"event":"return","thread_id":9160,"parent_id":575358,"elapsed":3.2499665394425392e-06,"elapsed_instrumentation":7.573800394311547e-05,"return_value":{"class":"Array","value":"[]","object_id":1342300,"size":0}},{"id":575360,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342340,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930ec0>"}},{"id":575361,"event":"return","thread_id":9160,"parent_id":575360,"elapsed":0.0001576750073581934,"elapsed_instrumentation":0.00012433796655386686,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324fc1c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fc308 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342360,"size":2}},{"id":575362,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930c40>"}},{"id":575363,"event":"return","thread_id":9160,"parent_id":575362,"elapsed":3.278953954577446e-06,"elapsed_instrumentation":9.590398985892534e-05,"return_value":{"class":"Array","value":"[]","object_id":1342420,"size":0}},{"id":575364,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"follows\" (\"created_at\", \"updated_at\", \"account_id\", \"target_account_id\", \"show_reblogs\", \"uri\", \"notify\", \"languages\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING \"id\"","database_type":"postgres"}},{"id":575365,"event":"return","thread_id":9160,"parent_id":575364,"elapsed":0.00095755,"elapsed_instrumentation":8.350203279405832e-05},{"id":575366,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342400,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930c40>"}},{"id":575367,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit?","path":"app/models/concerns/rate_limitable.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":3827620,"value":"#<Follow:0x00007fc91a490dc8>"}},{"id":575368,"event":"return","thread_id":9160,"parent_id":575367,"elapsed":4.278961569070816e-06,"elapsed_instrumentation":6.996904266998172e-05},{"id":575369,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575370,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575371,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111361347109748921, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":575372,"event":"return","thread_id":9160,"parent_id":575371,"elapsed":0.000685773,"elapsed_instrumentation":8.55160178616643e-05},{"id":575373,"event":"return","thread_id":9160,"parent_id":575370,"elapsed":0.0012097719591110945,"elapsed_instrumentation":0.00021100399317219853},{"id":575374,"event":"return","thread_id":9160,"parent_id":575369,"elapsed":0.0014453839976340532,"elapsed_instrumentation":8.412706665694714e-05},{"id":575375,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575376,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575377,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575378,"event":"return","thread_id":9160,"parent_id":575377,"elapsed":2.0024017430841923e-05,"elapsed_instrumentation":8.873001206666231e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc91a49c308>","object_id":3827780}},{"id":575379,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111361347109748922, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":575380,"event":"return","thread_id":9160,"parent_id":575379,"elapsed":0.000915588,"elapsed_instrumentation":8.688599336892366e-05},{"id":575381,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575382,"event":"return","thread_id":9160,"parent_id":575381,"elapsed":1.4744000509381294e-05,"elapsed_instrumentation":0.0001286519691348076,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc91a49c308>","object_id":3827780}},{"id":575383,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575384,"event":"return","thread_id":9160,"parent_id":575383,"elapsed":7.500988431274891e-06,"elapsed_instrumentation":7.690099300816655e-05,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc91a49c308>","object_id":3827780}},{"id":575385,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":575386,"event":"return","thread_id":9160,"parent_id":575385,"elapsed":0.000674538,"elapsed_instrumentation":9.907799540087581e-05},{"id":575387,"event":"return","thread_id":9160,"parent_id":575376,"elapsed":0.004756121023092419,"elapsed_instrumentation":0.0001437090104445815,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc91a49c308>","object_id":3827780}},{"id":575388,"event":"return","thread_id":9160,"parent_id":575375,"elapsed":0.0049265879788435996,"elapsed_instrumentation":0.00012321799295023084,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fc91a49c308>","object_id":3827780}},{"id":575389,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575390,"event":"return","thread_id":9160,"parent_id":575389,"elapsed":1.1002994142472744e-05,"elapsed_instrumentation":9.901699377223849e-05},{"id":575391,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575392,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":3826660,"value":"#<Account:0x00007fc91a48f3d8>"}},{"id":575393,"event":"return","thread_id":9160,"parent_id":575392,"elapsed":5.959998816251755e-06,"elapsed_instrumentation":7.532798917964101e-05},{"id":575394,"event":"return","thread_id":9160,"parent_id":575391,"elapsed":0.0001053519663400948,"elapsed_instrumentation":7.8544020652771e-05,"return_value":{"class":"String","value":"https://example.org/","object_id":3827360}},{"id":575395,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827800,"value":"Cache delete: followers_hash:111361347109748922:https://example.org/\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575396,"event":"return","thread_id":9160,"parent_id":575395,"elapsed":0.0007605060236528516,"elapsed_instrumentation":0.000175202963873744,"return_value":{"class":"Integer","value":"69","object_id":139}},{"id":575397,"event":"return","thread_id":9160,"parent_id":575366,"elapsed":0.008488884021062404,"elapsed_instrumentation":0.00019043497741222382,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc9324fb390 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fb1d8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fb020 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc9324fae68 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342480,"size":4}},{"id":575398,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342340,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931930ec0>"}},{"id":575399,"event":"return","thread_id":9160,"parent_id":575398,"elapsed":4.694040399044752e-06,"elapsed_instrumentation":0.00010968797141686082,"return_value":{"class":"Array","value":"[]","object_id":1342500,"size":0}},{"id":575400,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":575401,"event":"return","thread_id":9160,"parent_id":575400,"elapsed":0.000486146,"elapsed_instrumentation":8.994201198220253e-05},{"id":575402,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827820,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":575403,"event":"return","thread_id":9160,"parent_id":575402,"elapsed":3.5919947549700737e-06,"elapsed_instrumentation":0.00011763791553676128,"return_value":{"class":"Array","value":"[]","object_id":1342560,"size":0}},{"id":575404,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":3827820,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1342540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931aefa68>"}},{"id":575405,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827840,"value":"Cache delete: relationship:111361347109748921:111361347109748922\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575406,"event":"return","thread_id":9160,"parent_id":575405,"elapsed":0.0009337370283901691,"elapsed_instrumentation":0.00012288702419027686,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":575407,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827860,"value":"Cache delete: relationship:111361347109748922:111361347109748921\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575408,"event":"return","thread_id":9160,"parent_id":575407,"elapsed":0.000731505046132952,"elapsed_instrumentation":0.0002060359693132341,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":575409,"event":"return","thread_id":9160,"parent_id":575404,"elapsed":0.002295215963385999,"elapsed_instrumentation":0.0001289990614168346,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc93252f690 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1342620,"size":1}},{"id":575410,"event":"call","thread_id":9160,"defined_class":"PotentialFriendshipTracker","method_id":"remove","path":"app/lib/potential_friendship_tracker.rb","lineno":27,"static":true,"parameters":[{"name":"account_id","class":"Integer","object_id":222722694219497843,"value":"111361347109748921","kind":"req"},{"name":"target_account_id","class":"Integer","object_id":222722694219497845,"value":"111361347109748922","kind":"req"}],"receiver":{"class":"Class","object_id":319780,"value":"PotentialFriendshipTracker"}},{"id":575411,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"redis","path":"app/models/concerns/redisable.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Class","object_id":319780,"value":"PotentialFriendshipTracker"}},{"id":575412,"event":"return","thread_id":9160,"parent_id":575411,"elapsed":5.326000973582268e-06,"elapsed_instrumentation":8.418504148721695e-05,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fc934c37e90>","object_id":319760}},{"id":575413,"event":"return","thread_id":9160,"parent_id":575410,"elapsed":0.0005685160285793245,"elapsed_instrumentation":0.0001272080116905272},{"id":575414,"event":"return","thread_id":9160,"parent_id":575321,"elapsed":0.026783614011947066,"elapsed_instrumentation":0.00027929397765547037,"return_value":{"class":"Follow","value":"#<Follow:0x00007fc91a490dc8>","object_id":3827620}},{"id":575415,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":3826000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":3826680,"value":"#<Account:0x00007fc91a48e9d8>"}},{"id":575416,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827880,"value":"Cache read: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575417,"event":"return","thread_id":9160,"parent_id":575416,"elapsed":0.0006632520235143602,"elapsed_instrumentation":0.00012766500003635883,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":575418,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3827900,"value":"Cache generate: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575419,"event":"return","thread_id":9160,"parent_id":575418,"elapsed":0.0007247310131788254,"elapsed_instrumentation":0.00013532896991819143,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":575420,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":3827920,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":3827940,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fc930d96e20>"}},{"id":575421,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":575422,"event":"return","thread_id":9160,"parent_id":575421,"elapsed":0.000994623,"elapsed_instrumentation":9.337195660918951e-05},{"id":575423,"event":"return","thread_id":9160,"parent_id":575420,"elapsed":0.0026102500269189477,"elapsed_instrumentation":0.0001372089609503746},{"id":575424,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":3826100,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":3827960,"value":"pyb◷__F_!__Pj\u001bΦ\u0007_\u0014,_N'ɱ\u0006____"}},{"id":575425,"event":"return","thread_id":9160,"parent_id":575424,"elapsed":5.3899711929261684e-06,"elapsed_instrumentation":0.00013760803267359734,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":3827980}},{"id":575426,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":3828000,"value":"Cache write: followers_hash:111361347109748922:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":575427,"event":"return","thread_id":9160,"parent_id":575426,"elapsed":0.0009576909942552447,"elapsed_instrumentation":0.00011996697867289186,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":575428,"event":"return","thread_id":9160,"parent_id":575415,"elapsed":0.00739885400980711,"elapsed_instrumentation":0.00015730602899566293,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":3827980}}]}