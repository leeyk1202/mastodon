{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"AccountInteractions #remote_followers_hash invalidates cache as needed when removing or adding followers","source_location":"spec/models/concerns/account_interactions_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"concerns","type":"package","children":[{"name":"AccountInteractions","type":"class","children":[{"name":"remote_followers_hash","type":"function","location":"app/models/concerns/account_interactions.rb:279","static":false},{"name":"unfollow!","type":"function","location":"app/models/concerns/account_interactions.rb:173","static":false},{"name":"follow!","type":"function","location":"app/models/concerns/account_interactions.rb:115","static":false}]},{"name":"AccountCounters","type":"class","children":[{"name":"decrement_count!","type":"function","location":"app/models/concerns/account_counters.rb:28","static":false},{"name":"update_count!","type":"function","location":"app/models/concerns/account_counters.rb:34","static":false},{"name":"increment_count!","type":"function","location":"app/models/concerns/account_counters.rb:23","static":false},{"name":"account_stat","type":"function","location":"app/models/concerns/account_counters.rb:76","static":false}]},{"name":"RateLimitable","type":"class","children":[{"name":"rate_limit=","type":"function","location":"app/models/concerns/rate_limitable.rb:6","static":false},{"name":"rate_limit?","type":"function","location":"app/models/concerns/rate_limitable.rb:10","static":false}]},{"name":"FollowLimitable","type":"class","children":[{"name":"bypass_follow_limit=","type":"function","location":"app/models/concerns/follow_limitable.rb:10","static":false},{"name":"bypass_follow_limit?","type":"function","location":"app/models/concerns/follow_limitable.rb:14","static":false}]},{"name":"Redisable","type":"class","children":[{"name":"redis","type":"function","location":"app/models/concerns/redisable.rb:4","static":false}]}]},{"name":"Account","type":"class","children":[{"name":"local?","type":"function","location":"app/models/account.rb:163","static":false},{"name":"synchronization_uri_prefix","type":"function","location":"app/models/account.rb:409","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"activitypub","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"generate_uri_for","type":"function","location":"app/lib/activitypub/tag_manager.rb:61","static":false}]}]}]},{"name":"PotentialFriendshipTracker","type":"class","children":[{"name":"remove","type":"function","location":"app/lib/potential_friendship_tracker.rb:27","static":true}]}]},{"name":"helpers","type":"package","children":[{"name":"ActivityPub","type":"class","children":[{"name":"TagManager","type":"class","children":[{"name":"default_url_options","type":"function","location":"app/helpers/routing_helper.rb:12","static":false}]}]}]},{"name":"validators","type":"package","children":[{"name":"FollowLimitValidator","type":"class","children":[{"name":"validate","type":"function","location":"app/validators/follow_limit_validator.rb:7","static":false}]},{"name":"LanguageValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/language_validator.rb:6","static":false}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/active_record","type":"package","children":[{"name":"ActiveRecord","type":"class","children":[{"name":"Batches","type":"class","children":[{"name":"pluck_each","type":"function","location":"lib/active_record/batches.rb:5","static":false}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]},{"name":"unpack","type":"function","location":"<internal:pack>:19","static":false,"labels":["string.unpack"]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":1052433,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":5997000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052434,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5997860,"value":"Cache read: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052435,"event":"return","thread_id":9160,"parent_id":1052434,"elapsed":0.0014823400124441832,"elapsed_instrumentation":0.00026403696392662823,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":1052436,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5997880,"value":"Cache generate: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052437,"event":"return","thread_id":9160,"parent_id":1052436,"elapsed":0.002193960011936724,"elapsed_instrumentation":0.00033127597998827696,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":1052438,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5997900,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5997920,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06b1b900>"}},{"id":1052439,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":1052440,"event":"return","thread_id":9160,"parent_id":1052439,"elapsed":0.001798327,"elapsed_instrumentation":0.00011054097558371723},{"id":1052441,"event":"return","thread_id":9160,"parent_id":1052438,"elapsed":0.0039232170092873275,"elapsed_instrumentation":0.00021191799896769226},{"id":1052442,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5997940,"value":" ___t__\u001c%\tCp__p\u0001+_qűr___\\__מ__"}},{"id":1052443,"event":"return","thread_id":9160,"parent_id":1052442,"elapsed":9.034003596752882e-06,"elapsed_instrumentation":0.0005419490044005215,"return_value":{"class":"String","value":"20aecbe774b3d61c25094370baf370012b9271c5b172ecedb05caff8d79ef0c7","object_id":5997960}},{"id":1052444,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5997980,"value":"Cache write: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052445,"event":"return","thread_id":9160,"parent_id":1052444,"elapsed":0.003791208000620827,"elapsed_instrumentation":0.0005817399942316115,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":1052446,"event":"return","thread_id":9160,"parent_id":1052433,"elapsed":0.019072341005085036,"elapsed_instrumentation":0.0004892290162388235,"return_value":{"class":"String","value":"20aecbe774b3d61c25094370baf370012b9271c5b172ecedb05caff8d79ef0c7","object_id":5997960}},{"id":1052447,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"unfollow!","path":"app/models/concerns/account_interactions.rb","lineno":173,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>","kind":"req"}],"receiver":{"class":"Account","object_id":5997760,"value":"#<Account:0x00007fdc069f4888>"}},{"id":1052448,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1052449,"event":"return","thread_id":9160,"parent_id":1052448,"elapsed":0.001125202,"elapsed_instrumentation":0.00013101397780701518},{"id":1052450,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1035920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09657f88>"}},{"id":1052451,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1052452,"event":"return","thread_id":9160,"parent_id":1052451,"elapsed":0.000924111,"elapsed_instrumentation":0.00013080300414003432},{"id":1052453,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1052454,"event":"return","thread_id":9160,"parent_id":1052453,"elapsed":0.001416714,"elapsed_instrumentation":0.00021029298659414053},{"id":1052455,"event":"return","thread_id":9160,"parent_id":1052450,"elapsed":0.004867501993430778,"elapsed_instrumentation":0.00023394101299345493,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc069ed128 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1035940,"size":1}},{"id":1052456,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follows\" WHERE \"follows\".\"id\" = $1","database_type":"postgres"}},{"id":1052457,"event":"return","thread_id":9160,"parent_id":1052456,"elapsed":0.001004238,"elapsed_instrumentation":8.73349781613797e-05},{"id":1052458,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998000,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1035920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09657f88>"}},{"id":1052459,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"account_pins\" WHERE \"account_pins\".\"target_account_id\" = $1 AND \"account_pins\".\"account_id\" = $2","database_type":"postgres"}},{"id":1052460,"event":"return","thread_id":9160,"parent_id":1052459,"elapsed":0.000790611,"elapsed_instrumentation":8.429799345321953e-05},{"id":1052461,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":5997760,"value":"#<Account:0x00007fdc069f4888>"}},{"id":1052462,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":5997760,"value":"#<Account:0x00007fdc069f4888>"}},{"id":1052463,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111360496718297904, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1052464,"event":"return","thread_id":9160,"parent_id":1052463,"elapsed":0.001022495,"elapsed_instrumentation":8.090899791568518e-05},{"id":1052465,"event":"return","thread_id":9160,"parent_id":1052462,"elapsed":0.001570423017255962,"elapsed_instrumentation":0.0001286820333916694},{"id":1052466,"event":"return","thread_id":9160,"parent_id":1052461,"elapsed":0.0017288880189880729,"elapsed_instrumentation":0.0001449470000807196},{"id":1052467,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1052468,"event":"return","thread_id":9160,"parent_id":1052467,"elapsed":0.001181188,"elapsed_instrumentation":0.00013674801448360085},{"id":1052469,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":5998020,"value":"#<Account:0x00007fdc06b19880>"}},{"id":1052470,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":5998020,"value":"#<Account:0x00007fdc06b19880>"}},{"id":1052471,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111360496718297902, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1052472,"event":"return","thread_id":9160,"parent_id":1052471,"elapsed":0.001177695,"elapsed_instrumentation":0.00012361799599602818},{"id":1052473,"event":"return","thread_id":9160,"parent_id":1052470,"elapsed":0.0020036879868712276,"elapsed_instrumentation":0.00023467899882234633},{"id":1052474,"event":"return","thread_id":9160,"parent_id":1052469,"elapsed":0.002287923009134829,"elapsed_instrumentation":0.0003142220084555447},{"id":1052475,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997760,"value":"#<Account:0x00007fdc069f4888>"}},{"id":1052476,"event":"return","thread_id":9160,"parent_id":1052475,"elapsed":1.869400148279965e-05,"elapsed_instrumentation":0.00013725698227062821},{"id":1052477,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997760,"value":"#<Account:0x00007fdc069f4888>"}},{"id":1052478,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997760,"value":"#<Account:0x00007fdc069f4888>"}},{"id":1052479,"event":"return","thread_id":9160,"parent_id":1052478,"elapsed":8.592993253841996e-06,"elapsed_instrumentation":0.0002012179757002741},{"id":1052480,"event":"return","thread_id":9160,"parent_id":1052477,"elapsed":0.0002561979927122593,"elapsed_instrumentation":0.0001543999824207276,"return_value":{"class":"String","value":"https://example.org/","object_id":5998040}},{"id":1052481,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998060,"value":"Cache delete: followers_hash:111360496718297902:https://example.org/\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052482,"event":"return","thread_id":9160,"parent_id":1052481,"elapsed":0.001058449997799471,"elapsed_instrumentation":0.00023567001335322857,"return_value":{"class":"Integer","value":"69","object_id":139}},{"id":1052483,"event":"return","thread_id":9160,"parent_id":1052458,"elapsed":0.012859776994446293,"elapsed_instrumentation":0.00026120300753973424,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc069ecf70 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc069ecdb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc069ecb60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1036040,"size":3}},{"id":1052484,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1052485,"event":"return","thread_id":9160,"parent_id":1052484,"elapsed":0.000819889,"elapsed_instrumentation":0.0003736689977813512},{"id":1052486,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1052487,"event":"return","thread_id":9160,"parent_id":1052486,"elapsed":3.911001840606332e-06,"elapsed_instrumentation":0.00014200498117133975,"return_value":{"class":"Array","value":"[]","object_id":824800,"size":0}},{"id":1052488,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998100,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1052489,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998120,"value":"Cache delete: relationship:111360496718297904:111360496718297902\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052490,"event":"return","thread_id":9160,"parent_id":1052489,"elapsed":0.0012081250024493784,"elapsed_instrumentation":0.00017238501459360123,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1052491,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998140,"value":"Cache delete: relationship:111360496718297902:111360496718297904\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052492,"event":"return","thread_id":9160,"parent_id":1052491,"elapsed":0.001446149981347844,"elapsed_instrumentation":0.00020873601897619665,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1052493,"event":"return","thread_id":9160,"parent_id":1052488,"elapsed":0.004158884985372424,"elapsed_instrumentation":0.00016979800420813262,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc09940f60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824860,"size":1}},{"id":1052494,"event":"return","thread_id":9160,"parent_id":1052447,"elapsed":0.03137517400318757,"elapsed_instrumentation":0.0003284730191808194,"return_value":{"class":"Follow","value":"#<Follow:0x00007fdc06b1adc0>","object_id":5998080}},{"id":1052495,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":5997000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052496,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998160,"value":"Cache read: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052497,"event":"return","thread_id":9160,"parent_id":1052496,"elapsed":0.0016332280065398663,"elapsed_instrumentation":0.0004002900095656514,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":1052498,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998180,"value":"Cache generate: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052499,"event":"return","thread_id":9160,"parent_id":1052498,"elapsed":0.0009912839741446078,"elapsed_instrumentation":0.0003376360109541565,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":1052500,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5998200,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5998220,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06b185c0>"}},{"id":1052501,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":1052502,"event":"return","thread_id":9160,"parent_id":1052501,"elapsed":0.001329102,"elapsed_instrumentation":0.0001087050186470151},{"id":1052503,"event":"return","thread_id":9160,"parent_id":1052500,"elapsed":0.0027108600188512355,"elapsed_instrumentation":0.00015791496844030917},{"id":1052504,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5998240,"value":"pyb◷__F_!__Pj\u001bΦ\u0007_\u0014,_N'ɱ\u0006____"}},{"id":1052505,"event":"return","thread_id":9160,"parent_id":1052504,"elapsed":5.898997187614441e-06,"elapsed_instrumentation":0.00014981901040300727,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":5998260}},{"id":1052506,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998280,"value":"Cache write: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052507,"event":"return","thread_id":9160,"parent_id":1052506,"elapsed":0.0009690579900052398,"elapsed_instrumentation":0.00022801602608524263,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":1052508,"event":"return","thread_id":9160,"parent_id":1052495,"elapsed":0.010519838979234919,"elapsed_instrumentation":0.0002042170090135187,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":5998260}},{"id":1052509,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"unfollow!","path":"app/models/concerns/account_interactions.rb","lineno":173,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>","kind":"req"}],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052510,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1052511,"event":"return","thread_id":9160,"parent_id":1052510,"elapsed":0.000774123,"elapsed_instrumentation":0.00011781600187532604},{"id":1052512,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1035920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09657f88>"}},{"id":1052513,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1052514,"event":"return","thread_id":9160,"parent_id":1052513,"elapsed":0.00086336,"elapsed_instrumentation":9.79570031631738e-05},{"id":1052515,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"activity_id\" = $1 AND \"notifications\".\"activity_type\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1052516,"event":"return","thread_id":9160,"parent_id":1052515,"elapsed":0.000706302,"elapsed_instrumentation":0.00011854601325467229},{"id":1052517,"event":"return","thread_id":9160,"parent_id":1052512,"elapsed":0.004225806012982503,"elapsed_instrumentation":0.0004066450346726924,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc069ed128 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1035940,"size":1}},{"id":1052518,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"follows\" WHERE \"follows\".\"id\" = $1","database_type":"postgres"}},{"id":1052519,"event":"return","thread_id":9160,"parent_id":1052518,"elapsed":0.001356334,"elapsed_instrumentation":0.0001406049996148795},{"id":1052520,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998300,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1035920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc09657f88>"}},{"id":1052521,"event":"call","thread_id":9160,"sql_query":{"sql":"DELETE FROM \"account_pins\" WHERE \"account_pins\".\"target_account_id\" = $1 AND \"account_pins\".\"account_id\" = $2","database_type":"postgres"}},{"id":1052522,"event":"return","thread_id":9160,"parent_id":1052521,"elapsed":0.000814652,"elapsed_instrumentation":0.00013035599840804935},{"id":1052523,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052524,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052525,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111360496718297901, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1052526,"event":"return","thread_id":9160,"parent_id":1052525,"elapsed":0.001469764,"elapsed_instrumentation":8.741702185943723e-05},{"id":1052527,"event":"return","thread_id":9160,"parent_id":1052524,"elapsed":0.002303318993654102,"elapsed_instrumentation":0.00010392899275757372},{"id":1052528,"event":"return","thread_id":9160,"parent_id":1052523,"elapsed":0.0024345580022782087,"elapsed_instrumentation":0.0001422960194759071},{"id":1052529,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"username\", \"accounts\".\"domain\", \"accounts\".\"private_key\", \"accounts\".\"public_key\", \"accounts\".\"created_at\", \"accounts\".\"updated_at\", \"accounts\".\"note\", \"accounts\".\"display_name\", \"accounts\".\"uri\", \"accounts\".\"url\", \"accounts\".\"avatar_file_name\", \"accounts\".\"avatar_content_type\", \"accounts\".\"avatar_file_size\", \"accounts\".\"avatar_updated_at\", \"accounts\".\"header_file_name\", \"accounts\".\"header_content_type\", \"accounts\".\"header_file_size\", \"accounts\".\"header_updated_at\", \"accounts\".\"avatar_remote_url\", \"accounts\".\"locked\", \"accounts\".\"header_remote_url\", \"accounts\".\"last_webfingered_at\", \"accounts\".\"inbox_url\", \"accounts\".\"outbox_url\", \"accounts\".\"shared_inbox_url\", \"accounts\".\"followers_url\", \"accounts\".\"protocol\", \"accounts\".\"memorial\", \"accounts\".\"moved_to_account_id\", \"accounts\".\"featured_collection_url\", \"accounts\".\"fields\", \"accounts\".\"actor_type\", \"accounts\".\"discoverable\", \"accounts\".\"also_known_as\", \"accounts\".\"silenced_at\", \"accounts\".\"suspended_at\", \"accounts\".\"hide_collections\", \"accounts\".\"avatar_storage_schema_version\", \"accounts\".\"header_storage_schema_version\", \"accounts\".\"devices_url\", \"accounts\".\"suspension_origin\", \"accounts\".\"sensitized_at\", \"accounts\".\"trendable\", \"accounts\".\"reviewed_at\", \"accounts\".\"requested_review_at\", \"accounts\".\"indexable\" FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1052530,"event":"return","thread_id":9160,"parent_id":1052529,"elapsed":0.000987063,"elapsed_instrumentation":0.00012234898167662323},{"id":1052531,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"decrement_count!","path":"app/models/concerns/account_counters.rb","lineno":28,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":5998320,"value":"#<Account:0x00007fdc06b167c0>"}},{"id":1052532,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":-1,"value":"-1","kind":"req"}],"receiver":{"class":"Account","object_id":5998320,"value":"#<Account:0x00007fdc06b167c0>"}},{"id":1052533,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111360496718297902, 0, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + -1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1052534,"event":"return","thread_id":9160,"parent_id":1052533,"elapsed":0.002100643,"elapsed_instrumentation":9.458899148739874e-05},{"id":1052535,"event":"return","thread_id":9160,"parent_id":1052532,"elapsed":0.0030133209947962314,"elapsed_instrumentation":0.00010357701103202999},{"id":1052536,"event":"return","thread_id":9160,"parent_id":1052531,"elapsed":0.003144753020023927,"elapsed_instrumentation":0.0001593029883224517},{"id":1052537,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052538,"event":"return","thread_id":9160,"parent_id":1052537,"elapsed":1.3345008483156562e-05,"elapsed_instrumentation":0.00032301899045705795},{"id":1052539,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052540,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052541,"event":"return","thread_id":9160,"parent_id":1052540,"elapsed":1.0568997822701931e-05,"elapsed_instrumentation":8.305601659230888e-05},{"id":1052542,"event":"return","thread_id":9160,"parent_id":1052539,"elapsed":0.00012424401938915253,"elapsed_instrumentation":0.00015071697998791933,"return_value":{"class":"String","value":"https://example.org/","object_id":5998340}},{"id":1052543,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998360,"value":"Cache delete: followers_hash:111360496718297902:https://example.org/\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052544,"event":"return","thread_id":9160,"parent_id":1052543,"elapsed":0.002389574976405129,"elapsed_instrumentation":0.0001811410184018314,"return_value":{"class":"Integer","value":"69","object_id":139}},{"id":1052545,"event":"return","thread_id":9160,"parent_id":1052520,"elapsed":0.01581532202544622,"elapsed_instrumentation":0.0003052579704672098,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc069ecf70 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc069ecdb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc069ecb60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1036040,"size":3}},{"id":1052546,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1052547,"event":"return","thread_id":9160,"parent_id":1052546,"elapsed":0.000973377,"elapsed_instrumentation":0.00010189198656007648},{"id":1052548,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998400,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1052549,"event":"return","thread_id":9160,"parent_id":1052548,"elapsed":6.4350024331361055e-06,"elapsed_instrumentation":0.00019758299458771944,"return_value":{"class":"Array","value":"[]","object_id":824800,"size":0}},{"id":1052550,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998400,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1052551,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998420,"value":"Cache delete: relationship:111360496718297901:111360496718297902\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052552,"event":"return","thread_id":9160,"parent_id":1052551,"elapsed":0.0013852230040356517,"elapsed_instrumentation":0.00020260698511265218,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1052553,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998440,"value":"Cache delete: relationship:111360496718297902:111360496718297901\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052554,"event":"return","thread_id":9160,"parent_id":1052553,"elapsed":0.001617244997760281,"elapsed_instrumentation":0.00021597801242023706,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1052555,"event":"return","thread_id":9160,"parent_id":1052550,"elapsed":0.004077188001247123,"elapsed_instrumentation":0.0005604969919659197,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc09940f60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824860,"size":1}},{"id":1052556,"event":"return","thread_id":9160,"parent_id":1052509,"elapsed":0.03370153802097775,"elapsed_instrumentation":0.00016324699390679598,"return_value":{"class":"Follow","value":"#<Follow:0x00007fdc06b17d00>","object_id":5998380}},{"id":1052557,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":5997000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052558,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998460,"value":"Cache read: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052559,"event":"return","thread_id":9160,"parent_id":1052558,"elapsed":0.0012545819918159395,"elapsed_instrumentation":0.00016753800446167588,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":1052560,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998480,"value":"Cache generate: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052561,"event":"return","thread_id":9160,"parent_id":1052560,"elapsed":0.001310889987507835,"elapsed_instrumentation":0.0001957820204552263,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":1052562,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5998500,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5998520,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06b15640>"}},{"id":1052563,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":1052564,"event":"return","thread_id":9160,"parent_id":1052563,"elapsed":0.002622074,"elapsed_instrumentation":0.00045838498044759035},{"id":1052565,"event":"return","thread_id":9160,"parent_id":1052562,"elapsed":0.005325037986040115,"elapsed_instrumentation":0.0004897390026599169},{"id":1052566,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5998540,"value":"$\u001b\u0000yL_j_d_\"\n___(1__e___[_^սCk_"}},{"id":1052567,"event":"return","thread_id":9160,"parent_id":1052566,"elapsed":8.208007784560323e-06,"elapsed_instrumentation":0.00021652001305483282,"return_value":{"class":"String","value":"241b00794ce9b46aa864f3220afadef128318da2659782985bac5ed5bd436bff","object_id":5998560}},{"id":1052568,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998580,"value":"Cache write: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052569,"event":"return","thread_id":9160,"parent_id":1052568,"elapsed":0.0009297830110881478,"elapsed_instrumentation":0.0002457659866195172,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":1052570,"event":"return","thread_id":9160,"parent_id":1052557,"elapsed":0.013222112989751622,"elapsed_instrumentation":0.00034175103064626455,"return_value":{"class":"String","value":"241b00794ce9b46aa864f3220afadef128318da2659782985bac5ed5bd436bff","object_id":5998560}},{"id":1052571,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"follow!","path":"app/models/concerns/account_interactions.rb","lineno":115,"static":false,"parameters":[{"name":"other_account","class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>","kind":"req"},{"name":"reblogs","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"notify","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"languages","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"uri","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"rate_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"},{"name":"bypass_limit","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052572,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"follows\".* FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1052573,"event":"return","thread_id":9160,"parent_id":1052572,"elapsed":0.000964261,"elapsed_instrumentation":0.00014848497812636197},{"id":1052574,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>"}},{"id":1052575,"event":"return","thread_id":9160,"parent_id":1052574,"elapsed":8.694012649357319e-06,"elapsed_instrumentation":0.0002127929765265435},{"id":1052576,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>"}},{"id":1052577,"event":"return","thread_id":9160,"parent_id":1052576,"elapsed":3.937981091439724e-06,"elapsed_instrumentation":7.842798368074e-05},{"id":1052578,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit=","path":"app/models/concerns/rate_limitable.rb","lineno":6,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>"}},{"id":1052579,"event":"return","thread_id":9160,"parent_id":1052578,"elapsed":4.859000910073519e-06,"elapsed_instrumentation":0.00010757497511804104},{"id":1052580,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit=","path":"app/models/concerns/follow_limitable.rb","lineno":10,"static":false,"parameters":[{"name":"value","class":"FalseClass","object_id":0,"value":"false","kind":"req"}],"receiver":{"class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>"}},{"id":1052581,"event":"return","thread_id":9160,"parent_id":1052580,"elapsed":3.2609968911856413e-06,"elapsed_instrumentation":7.100898073986173e-05},{"id":1052582,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998620,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e899c8>"}},{"id":1052583,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"generate_uri_for","path":"app/lib/activitypub/tag_manager.rb","lineno":61,"static":false,"parameters":[{"name":"_target","class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>","kind":"req"}],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1052584,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1052585,"event":"return","thread_id":9160,"parent_id":1052584,"elapsed":5.6089775171130896e-06,"elapsed_instrumentation":0.0001354740234091878,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1052586,"event":"call","thread_id":9160,"defined_class":"ActivityPub::TagManager","method_id":"default_url_options","path":"app/helpers/routing_helper.rb","lineno":12,"static":false,"parameters":[],"receiver":{"class":"ActivityPub::TagManager","object_id":212080,"value":"#<ActivityPub::TagManager:0x00007fdc0a7306e8>"}},{"id":1052587,"event":"return","thread_id":9160,"parent_id":1052586,"elapsed":3.3940013963729143e-06,"elapsed_instrumentation":0.00010993497562594712,"return_value":{"class":"Hash","value":"{:host=>cb6e6126.ngrok.io, :protocol=>https://, :trailing_slash=>false}","object_id":212100,"size":3}},{"id":1052588,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack","path":"<internal:pack>","lineno":19,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":403680,"value":"NnnnnN","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5998640,"value":"___\"_\u0005t__7M\u001al__N"}},{"id":1052589,"event":"return","thread_id":9160,"parent_id":1052588,"elapsed":1.1261989129707217e-05,"elapsed_instrumentation":0.0003291740140412003,"return_value":{"class":"Array","value":"[3468400418, 64773, 29863, 59447, 19738, 1826391630]","object_id":5998660,"size":6}},{"id":1052590,"event":"return","thread_id":9160,"parent_id":1052583,"elapsed":0.0012770630128215998,"elapsed_instrumentation":0.0003898919967468828,"return_value":{"class":"URI::HTTPS","value":"https://cb6e6126.ngrok.io/cebb9722-fd05-44a7-a837-4d1a6cdc864e","object_id":5998680}},{"id":1052591,"event":"return","thread_id":9160,"parent_id":1052582,"elapsed":0.001787363988114521,"elapsed_instrumentation":0.0002899990067817271,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc099b50e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099b5450 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824440,"size":2}},{"id":1052592,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824480,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e89748>"}},{"id":1052593,"event":"call","thread_id":9160,"defined_class":"FollowLimitable","method_id":"bypass_follow_limit?","path":"app/models/concerns/follow_limitable.rb","lineno":14,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>"}},{"id":1052594,"event":"return","thread_id":9160,"parent_id":1052593,"elapsed":4.958012141287327e-06,"elapsed_instrumentation":9.560398757457733e-05},{"id":1052595,"event":"call","thread_id":9160,"defined_class":"FollowLimitValidator","method_id":"validate","path":"app/validators/follow_limit_validator.rb","lineno":7,"static":false,"parameters":[{"name":"follow","class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>","kind":"req"}],"receiver":{"class":"FollowLimitValidator","object_id":1621500,"value":"#<FollowLimitValidator:0x00007fdc0f75b820>"}},{"id":1052596,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052597,"event":"return","thread_id":9160,"parent_id":1052596,"elapsed":1.7003010725602508e-05,"elapsed_instrumentation":0.00024966796627268195},{"id":1052598,"event":"return","thread_id":9160,"parent_id":1052595,"elapsed":0.00034544497611932456,"elapsed_instrumentation":9.113000123761594e-05},{"id":1052599,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1052600,"event":"return","thread_id":9160,"parent_id":1052599,"elapsed":0.000758611,"elapsed_instrumentation":0.00011056699440814555},{"id":1052601,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT 1 AS one FROM \"follows\" WHERE \"follows\".\"account_id\" = $1 AND \"follows\".\"target_account_id\" = $2 LIMIT $3","database_type":"postgres"}},{"id":1052602,"event":"return","thread_id":9160,"parent_id":1052601,"elapsed":0.003090746,"elapsed_instrumentation":9.205599781125784e-05},{"id":1052603,"event":"call","thread_id":9160,"defined_class":"LanguageValidator","method_id":"validate_each","path":"app/validators/language_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":9806428,"value":":languages","kind":"req"},{"name":"value","class":"NilClass","object_id":4,"value":null,"kind":"req"}],"receiver":{"class":"LanguageValidator","object_id":824520,"value":"#<LanguageValidator:0x00007fdc0f69ebf8>"}},{"id":1052604,"event":"return","thread_id":9160,"parent_id":1052603,"elapsed":5.9710000641644e-06,"elapsed_instrumentation":0.0001767979993019253},{"id":1052605,"event":"return","thread_id":9160,"parent_id":1052592,"elapsed":0.00602433001040481,"elapsed_instrumentation":0.00028784401365555823,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc099ce5e0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099ce900 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cebd0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cedb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cef90 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc099cf170 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824540,"size":6}},{"id":1052606,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998700,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824480,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e89748>"}},{"id":1052607,"event":"return","thread_id":9160,"parent_id":1052606,"elapsed":3.402004949748516e-06,"elapsed_instrumentation":9.78109601419419e-05,"return_value":{"class":"Array","value":"[]","object_id":824560,"size":0}},{"id":1052608,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998620,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824420,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e899c8>"}},{"id":1052609,"event":"return","thread_id":9160,"parent_id":1052608,"elapsed":3.0070077627897263e-06,"elapsed_instrumentation":7.773799006827176e-05,"return_value":{"class":"Array","value":"[]","object_id":824580,"size":0}},{"id":1052610,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998720,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e88708>"}},{"id":1052611,"event":"return","thread_id":9160,"parent_id":1052610,"elapsed":0.00010417800513096154,"elapsed_instrumentation":0.00018437299877405167,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0996c700 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0996c840 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824640,"size":2}},{"id":1052612,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1621660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e84b58>"}},{"id":1052613,"event":"return","thread_id":9160,"parent_id":1052612,"elapsed":3.2249954529106617e-06,"elapsed_instrumentation":0.00010053801815956831,"return_value":{"class":"Array","value":"[]","object_id":1621680,"size":0}},{"id":1052614,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"follows\" (\"created_at\", \"updated_at\", \"account_id\", \"target_account_id\", \"show_reblogs\", \"uri\", \"notify\", \"languages\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING \"id\"","database_type":"postgres"}},{"id":1052615,"event":"return","thread_id":9160,"parent_id":1052614,"elapsed":0.001304152,"elapsed_instrumentation":0.00025175101472996175},{"id":1052616,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998740,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1621660,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e84b58>"}},{"id":1052617,"event":"call","thread_id":9160,"defined_class":"RateLimitable","method_id":"rate_limit?","path":"app/models/concerns/rate_limitable.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Follow","object_id":5998600,"value":"#<Follow:0x00007fdc06b13d40>"}},{"id":1052618,"event":"return","thread_id":9160,"parent_id":1052617,"elapsed":5.598005373030901e-06,"elapsed_instrumentation":0.00010216602822765708},{"id":1052619,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"}],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052620,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":19193628,"value":":following_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052621,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, following_count, created_at, updated_at) VALUES (111360496718297901, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET following_count = account_stats.following_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1052622,"event":"return","thread_id":9160,"parent_id":1052621,"elapsed":0.00120309,"elapsed_instrumentation":8.361702202819288e-05},{"id":1052623,"event":"return","thread_id":9160,"parent_id":1052620,"elapsed":0.0019616130157373846,"elapsed_instrumentation":0.0001172969932667911},{"id":1052624,"event":"return","thread_id":9160,"parent_id":1052619,"elapsed":0.0021118159929756075,"elapsed_instrumentation":0.0002481020346749574},{"id":1052625,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"increment_count!","path":"app/models/concerns/account_counters.rb","lineno":23,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"}],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052626,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"update_count!","path":"app/models/concerns/account_counters.rb","lineno":34,"static":false,"parameters":[{"name":"key","class":"Symbol","object_id":17344988,"value":":followers_count","kind":"req"},{"name":"value","class":"Integer","object_id":3,"value":"1","kind":"req"}],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052627,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052628,"event":"return","thread_id":9160,"parent_id":1052627,"elapsed":1.817898009903729e-05,"elapsed_instrumentation":0.0002576220140326768,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06b1dac0>","object_id":5998760}},{"id":1052629,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO account_stats(account_id, followers_count, created_at, updated_at) VALUES (111360496718297902, 1, now(), now()) ON CONFLICT (account_id) DO UPDATE SET followers_count = account_stats.followers_count + 1, updated_at = now() RETURNING id;","database_type":"postgres"}},{"id":1052630,"event":"return","thread_id":9160,"parent_id":1052629,"elapsed":0.001522719,"elapsed_instrumentation":0.00020413901074789464},{"id":1052631,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052632,"event":"return","thread_id":9160,"parent_id":1052631,"elapsed":3.358797403052449e-05,"elapsed_instrumentation":0.0004553030012175441,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06b1dac0>","object_id":5998760}},{"id":1052633,"event":"call","thread_id":9160,"defined_class":"AccountCounters","method_id":"account_stat","path":"app/models/concerns/account_counters.rb","lineno":76,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052634,"event":"return","thread_id":9160,"parent_id":1052633,"elapsed":1.8998980522155762e-05,"elapsed_instrumentation":0.0001481640210840851,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06b1dac0>","object_id":5998760}},{"id":1052635,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"account_stats\".\"id\", \"account_stats\".\"account_id\", \"account_stats\".\"statuses_count\", \"account_stats\".\"following_count\", \"account_stats\".\"followers_count\", \"account_stats\".\"created_at\", \"account_stats\".\"updated_at\", \"account_stats\".\"last_status_at\" FROM \"account_stats\" WHERE \"account_stats\".\"id\" = $1 LIMIT $2","database_type":"postgres"}},{"id":1052636,"event":"return","thread_id":9160,"parent_id":1052635,"elapsed":0.000909051,"elapsed_instrumentation":0.00010094497702084482},{"id":1052637,"event":"return","thread_id":9160,"parent_id":1052626,"elapsed":0.0073124030022881925,"elapsed_instrumentation":0.000259953027125448,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06b1dac0>","object_id":5998760}},{"id":1052638,"event":"return","thread_id":9160,"parent_id":1052625,"elapsed":0.007850608992157504,"elapsed_instrumentation":0.0001625700097065419,"return_value":{"class":"AccountStat","value":"#<AccountStat:0x00007fdc06b1dac0>","object_id":5998760}},{"id":1052639,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052640,"event":"return","thread_id":9160,"parent_id":1052639,"elapsed":1.5892001101747155e-05,"elapsed_instrumentation":0.00020506701548583806},{"id":1052641,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"synchronization_uri_prefix","path":"app/models/account.rb","lineno":409,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052642,"event":"call","thread_id":9160,"defined_class":"Account","method_id":"local?","path":"app/models/account.rb","lineno":163,"static":false,"parameters":[],"receiver":{"class":"Account","object_id":5997640,"value":"#<Account:0x00007fdc069ff8c8>"}},{"id":1052643,"event":"return","thread_id":9160,"parent_id":1052642,"elapsed":1.5271012671291828e-05,"elapsed_instrumentation":0.0003157789760734886},{"id":1052644,"event":"return","thread_id":9160,"parent_id":1052641,"elapsed":0.00037294800858944654,"elapsed_instrumentation":0.00016364300972782075,"return_value":{"class":"String","value":"https://example.org/","object_id":5998340}},{"id":1052645,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998780,"value":"Cache delete: followers_hash:111360496718297902:https://example.org/\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052646,"event":"return","thread_id":9160,"parent_id":1052645,"elapsed":0.003094332991167903,"elapsed_instrumentation":0.00027828902238979936,"return_value":{"class":"Integer","value":"69","object_id":139}},{"id":1052647,"event":"return","thread_id":9160,"parent_id":1052616,"elapsed":0.015211530000669882,"elapsed_instrumentation":0.00036856599035672843,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0994dcd8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0994db20 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0994d968 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0994d7b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1621700,"size":4}},{"id":1052648,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998720,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824620,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e88708>"}},{"id":1052649,"event":"return","thread_id":9160,"parent_id":1052648,"elapsed":5.815993063151836e-06,"elapsed_instrumentation":0.00016885402146726847,"return_value":{"class":"Array","value":"[]","object_id":824740,"size":0}},{"id":1052650,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1052651,"event":"return","thread_id":9160,"parent_id":1052650,"elapsed":0.00090104,"elapsed_instrumentation":0.0002378240169491619},{"id":1052652,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1052653,"event":"return","thread_id":9160,"parent_id":1052652,"elapsed":4.116998752579093e-06,"elapsed_instrumentation":0.0002127690240740776,"return_value":{"class":"Array","value":"[]","object_id":824800,"size":0}},{"id":1052654,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":5998800,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":824780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc08e83a78>"}},{"id":1052655,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998820,"value":"Cache delete: relationship:111360496718297901:111360496718297902\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052656,"event":"return","thread_id":9160,"parent_id":1052655,"elapsed":0.0021035410172771662,"elapsed_instrumentation":0.0003214479947928339,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1052657,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998840,"value":"Cache delete: relationship:111360496718297902:111360496718297901\n","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052658,"event":"return","thread_id":9160,"parent_id":1052657,"elapsed":0.0010406009969301522,"elapsed_instrumentation":0.00023590700584463775,"return_value":{"class":"Integer","value":"65","object_id":131}},{"id":1052659,"event":"return","thread_id":9160,"parent_id":1052654,"elapsed":0.004938947007758543,"elapsed_instrumentation":0.00025018700398504734,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc09940f60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":824860,"size":1}},{"id":1052660,"event":"call","thread_id":9160,"defined_class":"PotentialFriendshipTracker","method_id":"remove","path":"app/lib/potential_friendship_tracker.rb","lineno":27,"static":true,"parameters":[{"name":"account_id","class":"Integer","object_id":222720993436595803,"value":"111360496718297901","kind":"req"},{"name":"target_account_id","class":"Integer","object_id":222720993436595805,"value":"111360496718297902","kind":"req"}],"receiver":{"class":"Class","object_id":824880,"value":"PotentialFriendshipTracker"}},{"id":1052661,"event":"call","thread_id":9160,"defined_class":"Redisable","method_id":"redis","path":"app/models/concerns/redisable.rb","lineno":4,"static":false,"parameters":[],"receiver":{"class":"Class","object_id":824880,"value":"PotentialFriendshipTracker"}},{"id":1052662,"event":"return","thread_id":9160,"parent_id":1052661,"elapsed":7.525028195232153e-06,"elapsed_instrumentation":0.00013029997353442013,"return_value":{"class":"Redis::Namespace","value":"#<Redis::Namespace:0x00007fdc0a6c7d00>","object_id":365840}},{"id":1052663,"event":"return","thread_id":9160,"parent_id":1052660,"elapsed":0.0008098319813143462,"elapsed_instrumentation":0.00015848202747292817},{"id":1052664,"event":"return","thread_id":9160,"parent_id":1052571,"elapsed":0.044648472976405174,"elapsed_instrumentation":0.0006287320284172893,"return_value":{"class":"Follow","value":"#<Follow:0x00007fdc06b13d40>","object_id":5998600}},{"id":1052665,"event":"call","thread_id":9160,"defined_class":"AccountInteractions","method_id":"remote_followers_hash","path":"app/models/concerns/account_interactions.rb","lineno":279,"static":false,"parameters":[{"name":"url","class":"String","object_id":5997000,"value":"https://example.org/","kind":"req"}],"receiver":{"class":"Account","object_id":5997660,"value":"#<Account:0x00007fdc069fed88>"}},{"id":1052666,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998860,"value":"Cache read: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_thr (...15 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052667,"event":"return","thread_id":9160,"parent_id":1052666,"elapsed":0.0015362180129159242,"elapsed_instrumentation":0.0002882489934563637,"return_value":{"class":"Integer","value":"115","object_id":231}},{"id":1052668,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998880,"value":"Cache generate: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress (...19 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052669,"event":"return","thread_id":9160,"parent_id":1052668,"elapsed":0.0010945389803964645,"elapsed_instrumentation":0.0002651980030350387,"return_value":{"class":"Integer","value":"119","object_id":239}},{"id":1052670,"event":"call","thread_id":9160,"defined_class":"ActiveRecord::Batches","method_id":"pluck_each","path":"lib/active_record/batches.rb","lineno":5,"static":false,"parameters":[{"name":"column_names","class":"Array","object_id":5998900,"value":"[:uri]","kind":"rest","size":1}],"receiver":{"class":"ActiveRecord::AssociationRelation","object_id":5998920,"value":"#<Account::ActiveRecord_AssociationRelation:0x00007fdc06b10dc0>"}},{"id":1052671,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"accounts\".\"id\", \"accounts\".\"uri\" FROM \"accounts\" INNER JOIN \"follows\" ON \"accounts\".\"id\" = \"follows\".\"account_id\" WHERE \"follows\".\"target_account_id\" = $1 AND (\"accounts\".\"uri\" LIKE 'https://example.org/%' OR \"accounts\".\"uri\" = $2) ORDER BY \"accounts\".\"id\" ASC LIMIT $3","database_type":"postgres"}},{"id":1052672,"event":"return","thread_id":9160,"parent_id":1052671,"elapsed":0.00171648,"elapsed_instrumentation":0.0001170879986602813},{"id":1052673,"event":"return","thread_id":9160,"parent_id":1052670,"elapsed":0.003926298988517374,"elapsed_instrumentation":0.00021243400988169014},{"id":1052674,"event":"call","thread_id":9160,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":5888040,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":5998940,"value":"pyb◷__F_!__Pj\u001bΦ\u0007_\u0014,_N'ɱ\u0006____"}},{"id":1052675,"event":"return","thread_id":9160,"parent_id":1052674,"elapsed":9.440002031624317e-06,"elapsed_instrumentation":0.0004387219960335642,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":5998960}},{"id":1052676,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":5998980,"value":"Cache write: followers_hash:111360496718297902:https://example.org/ ({:compress=>false, :compress_th (...16 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fdc1b4b7180>"}},{"id":1052677,"event":"return","thread_id":9160,"parent_id":1052676,"elapsed":0.0009454959945287555,"elapsed_instrumentation":0.00018954603001475334,"return_value":{"class":"Integer","value":"116","object_id":233}},{"id":1052678,"event":"return","thread_id":9160,"parent_id":1052665,"elapsed":0.012304947013035417,"elapsed_instrumentation":0.00017466896679252386,"return_value":{"class":"String","value":"707962e297b7bd94468a21bc8e506a1bcea607a9142cd64e27c9b106b2a5f6ec","object_id":5998960}}]}