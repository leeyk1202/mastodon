{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Mastodon::CLI::PreviewCards #remove with relevant preview cards with no arguments deletes thumbnails for local preview cards","source_location":"spec/lib/mastodon/cli/preview_cards_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"lib","type":"package","children":[{"name":"mastodon/cli","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"CLI","type":"class","children":[{"name":"PreviewCards","type":"class","children":[{"name":"remove","type":"function","location":"lib/mastodon/cli/preview_cards.rb:28","static":false}]},{"name":"ProgressHelper","type":"class","children":[{"name":"parallelize_with_progress","type":"function","location":"lib/mastodon/cli/progress_helper.rb:27","static":false},{"name":"create_progress_bar","type":"function","location":"lib/mastodon/cli/progress_helper.rb:18","static":false}]}]}]}]},{"name":"paperclip","type":"package","children":[{"name":"Paperclip","type":"class","children":[{"name":"AttachmentExtensions","type":"class","children":[{"name":"storage_schema_version","type":"function","location":"lib/paperclip/attachment_extensions.rb:50","static":false},{"name":"save","type":"function","location":"lib/paperclip/attachment_extensions.rb:83","static":false}]}]}]},{"name":"chewy/strategy","type":"package","children":[{"name":"Chewy","type":"class","children":[{"name":"Strategy","type":"class","children":[{"name":"Mastodon","type":"class","children":[{"name":"leave","type":"function","location":"lib/chewy/strategy/mastodon.rb:16","static":false}]}]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"PreviewCard","type":"class","children":[{"name":"local?","type":"function","location":"app/models/preview_card.rb:101","static":false}]}]},{"name":"validators","type":"package","children":[{"name":"URLValidator","type":"class","children":[{"name":"validate_each","type":"function","location":"app/validators/url_validator.rb:6","static":false}]}]},{"name":"lib","type":"package","children":[{"name":"RedisConfiguration","type":"class","children":[{"name":"with","type":"function","location":"app/lib/redis_configuration.rb:10","static":true},{"name":"pool","type":"function","location":"app/lib/redis_configuration.rb:12","static":true}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]},{"name":"ruby","type":"package","children":[{"name":"String","type":"class","children":[{"name":"unpack1","type":"function","location":"<internal:pack>:28","static":false,"labels":["string.unpack"]}]}]}],"events":[{"id":1106464,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::PreviewCards","method_id":"remove","path":"lib/mastodon/cli/preview_cards.rb","lineno":28,"static":false,"parameters":[],"receiver":{"class":"Mastodon::CLI::PreviewCards","object_id":6408800,"value":"#<Mastodon::CLI::PreviewCards:0x00007fc932ba4110>"}},{"id":1106465,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"parallelize_with_progress","path":"lib/mastodon/cli/progress_helper.rb","lineno":27,"static":false,"parameters":[{"name":"scope","class":"ActiveRecord::Relation","object_id":6408820,"value":"#<PreviewCard::ActiveRecord_Relation:0x00007fc91a210788>","kind":"req"}],"receiver":{"class":"Mastodon::CLI::PreviewCards","object_id":6408800,"value":"#<Mastodon::CLI::PreviewCards:0x00007fc932ba4110>"}},{"id":1106466,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COUNT(*) FROM \"preview_cards\" WHERE NOT ((\"preview_cards\".\"image_file_name\" = $1 OR \"preview_cards\".\"image_file_name\" IS NULL)) AND (updated_at < '2023-05-10 03:00:38.620223')","database_type":"postgres"}},{"id":1106467,"event":"return","thread_id":9160,"parent_id":1106466,"elapsed":0.000752756,"elapsed_instrumentation":9.617995237931609e-05},{"id":1106468,"event":"call","thread_id":9160,"defined_class":"Mastodon::CLI::ProgressHelper","method_id":"create_progress_bar","path":"lib/mastodon/cli/progress_helper.rb","lineno":18,"static":false,"parameters":[{"name":"total","class":"Integer","object_id":5,"value":"2","kind":"opt"}],"receiver":{"class":"Mastodon::CLI::PreviewCards","object_id":6408800,"value":"#<Mastodon::CLI::PreviewCards:0x00007fc932ba4110>"}},{"id":1106469,"event":"return","thread_id":9160,"parent_id":1106468,"elapsed":0.00014372298028320074,"elapsed_instrumentation":0.0002378450008109212,"return_value":{"class":"ProgressBar::Base","value":"","object_id":6408840}},{"id":1106470,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"preview_cards\".* FROM \"preview_cards\" WHERE NOT ((\"preview_cards\".\"image_file_name\" = $1 OR \"preview_cards\".\"image_file_name\" IS NULL)) AND (updated_at < '2023-05-10 03:00:38.620223') ORDER BY \"preview_cards\".\"id\" ASC LIMIT $2","database_type":"postgres"}},{"id":1106471,"event":"return","thread_id":9160,"parent_id":1106470,"elapsed":0.00119027,"elapsed_instrumentation":0.00020948296878486872},{"id":1106472,"event":"call","thread_id":6408860,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408880,"value":"/system/cache/preview_cards/images/000/000/170/original/attachment.jpg"}},{"id":1106473,"event":"return","thread_id":6408860,"parent_id":1106472,"elapsed":1.5580037143081427e-05,"elapsed_instrumentation":0.0005947569734416902,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1106474,"event":"call","thread_id":6408860,"defined_class":"PreviewCard","method_id":"local?","path":"app/models/preview_card.rb","lineno":101,"static":false,"parameters":[],"receiver":{"class":"PreviewCard","object_id":6408900,"value":"#<PreviewCard:0x00007fc91a3c6f50>"}},{"id":1106475,"event":"return","thread_id":6408860,"parent_id":1106474,"elapsed":2.528016921132803e-06,"elapsed_instrumentation":8.049601456150413e-05},{"id":1106476,"event":"call","thread_id":6408920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408940,"value":"/system/cache/preview_cards/images/000/000/171/original/attachment.jpg"}},{"id":1106477,"event":"return","thread_id":6408920,"parent_id":1106476,"elapsed":1.15629518404603e-05,"elapsed_instrumentation":0.0002838700311258435,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1106478,"event":"call","thread_id":6408920,"defined_class":"PreviewCard","method_id":"local?","path":"app/models/preview_card.rb","lineno":101,"static":false,"parameters":[],"receiver":{"class":"PreviewCard","object_id":6408960,"value":"#<PreviewCard:0x00007fc91a3c6e10>"}},{"id":1106479,"event":"return","thread_id":6408920,"parent_id":1106478,"elapsed":2.7500209398567677e-06,"elapsed_instrumentation":6.954499986022711e-05},{"id":1106480,"event":"call","thread_id":6408860,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408880,"value":"/system/cache/preview_cards/images/000/000/170/original/attachment.jpg"}},{"id":1106481,"event":"return","thread_id":6408860,"parent_id":1106480,"elapsed":1.2240023352205753e-05,"elapsed_instrumentation":0.001700639957562089,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1106482,"event":"call","thread_id":6408860,"defined_class":"PreviewCard","method_id":"local?","path":"app/models/preview_card.rb","lineno":101,"static":false,"parameters":[],"receiver":{"class":"PreviewCard","object_id":6408900,"value":"#<PreviewCard:0x00007fc91a3c6f50>"}},{"id":1106483,"event":"return","thread_id":6408860,"parent_id":1106482,"elapsed":2.2970489226281643e-06,"elapsed_instrumentation":6.778899114578962e-05},{"id":1106484,"event":"call","thread_id":6408860,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408880,"value":"/images/original/missing.png"}},{"id":1106485,"event":"call","thread_id":6408920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"storage_schema_version","path":"lib/paperclip/attachment_extensions.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408940,"value":"/system/cache/preview_cards/images/000/000/171/original/attachment.jpg"}},{"id":1106486,"event":"return","thread_id":6408920,"parent_id":1106485,"elapsed":1.48970284499228e-05,"elapsed_instrumentation":0.0004361159517429769,"return_value":{"class":"Integer","value":"1","object_id":3}},{"id":1106487,"event":"call","thread_id":6408920,"defined_class":"PreviewCard","method_id":"local?","path":"app/models/preview_card.rb","lineno":101,"static":false,"parameters":[],"receiver":{"class":"PreviewCard","object_id":6408960,"value":"#<PreviewCard:0x00007fc91a3c6e10>"}},{"id":1106488,"event":"return","thread_id":6408920,"parent_id":1106487,"elapsed":2.6070047169923782e-06,"elapsed_instrumentation":7.023895159363747e-05},{"id":1106489,"event":"call","thread_id":6408920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408940,"value":"/images/original/missing.png"}},{"id":1106490,"event":"return","thread_id":6408860,"parent_id":1106484,"elapsed":0.009320199023932219,"elapsed_instrumentation":0.0001879379851743579,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1106491,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6408980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409000,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226aa8>"}},{"id":1106492,"event":"return","thread_id":6408860,"parent_id":1106491,"elapsed":2.351700095459819e-05,"elapsed_instrumentation":0.0001888910192064941,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d4f0b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409020,"size":1}},{"id":1106493,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409040,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226a58>"}},{"id":1106494,"event":"call","thread_id":6408860,"defined_class":"URLValidator","method_id":"validate_each","path":"app/validators/url_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"PreviewCard","object_id":6408900,"value":"#<PreviewCard:0x00007fc91a3c6f50>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1292188,"value":":url","kind":"req"},{"name":"value","class":"String","object_id":6409080,"value":"http://kessler.example/retha.doyle","kind":"req"}],"receiver":{"class":"URLValidator","object_id":2571080,"value":"#<URLValidator:0x00007fc938645ec0>"}},{"id":1106495,"event":"return","thread_id":6408860,"parent_id":1106494,"elapsed":0.0001901060459204018,"elapsed_instrumentation":0.00014294503489509225},{"id":1106496,"event":"return","thread_id":6408860,"parent_id":1106493,"elapsed":0.0008764989906921983,"elapsed_instrumentation":0.00018214702140539885,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d4d3f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4d620 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4d800 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4daa8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4dcb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4df58 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4e138 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4e318 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4e5c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409100,"size":9}},{"id":1106497,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409040,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226a58>"}},{"id":1106498,"event":"return","thread_id":6408860,"parent_id":1106497,"elapsed":4.672969225794077e-06,"elapsed_instrumentation":0.00027997198048979044,"return_value":{"class":"Array","value":"[]","object_id":6409120,"size":0}},{"id":1106499,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6408980,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409000,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226aa8>"}},{"id":1106500,"event":"return","thread_id":6408860,"parent_id":1106499,"elapsed":1.2636999599635601e-05,"elapsed_instrumentation":0.0001015900052152574,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d4ee30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409140,"size":1}},{"id":1106501,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f18>"}},{"id":1106502,"event":"return","thread_id":6408860,"parent_id":1106501,"elapsed":3.330991603434086e-06,"elapsed_instrumentation":8.207501377910376e-05,"return_value":{"class":"Array","value":"[]","object_id":6409200,"size":0}},{"id":1106503,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f68>"}},{"id":1106504,"event":"return","thread_id":6408860,"parent_id":1106503,"elapsed":7.523002568632364e-05,"elapsed_instrumentation":9.19209560379386e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d59790 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409240,"size":1}},{"id":1106505,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932d2f2f0>"}},{"id":1106506,"event":"return","thread_id":6408860,"parent_id":1106505,"elapsed":5.661975592374802e-06,"elapsed_instrumentation":0.00025842501781880856,"return_value":{"class":"Array","value":"[]","object_id":6409300,"size":0}},{"id":1106507,"event":"call","thread_id":6408860,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1106508,"event":"return","thread_id":6408860,"parent_id":1106507,"elapsed":0.000998505,"elapsed_instrumentation":0.00010202795965597034},{"id":1106509,"event":"call","thread_id":6408860,"defined_class":"String","method_id":"unpack1","path":"<internal:pack>","lineno":28,"static":false,"parameters":[{"name":"fmt","class":"String","object_id":319240,"value":"H*","kind":"req"},{"name":"offset","class":"NilClass","object_id":4,"value":null,"kind":"key"}],"receiver":{"class":"String","object_id":6409320,"value":"_\nS\u0019\u0016-__k6"}},{"id":1106510,"event":"return","thread_id":6408860,"parent_id":1106509,"elapsed":5.476002115756273e-06,"elapsed_instrumentation":0.00015156297013163567,"return_value":{"class":"String","value":"a40a5319162dad906b36","object_id":6409340}},{"id":1106511,"event":"return","thread_id":6408920,"parent_id":1106489,"elapsed":0.01357246097177267,"elapsed_instrumentation":0.0001616820227354765,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1106512,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409000,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226aa8>"}},{"id":1106513,"event":"return","thread_id":6408920,"parent_id":1106512,"elapsed":2.1227053366601467e-05,"elapsed_instrumentation":0.00015963392797857523,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d4f0b0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409020,"size":1}},{"id":1106514,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226a58>"}},{"id":1106515,"event":"call","thread_id":6408920,"defined_class":"URLValidator","method_id":"validate_each","path":"app/validators/url_validator.rb","lineno":6,"static":false,"parameters":[{"name":"record","class":"PreviewCard","object_id":6408960,"value":"#<PreviewCard:0x00007fc91a3c6e10>","kind":"req"},{"name":"attribute","class":"Symbol","object_id":1292188,"value":":url","kind":"req"},{"name":"value","class":"String","object_id":6409400,"value":"http://hayes.test/chere_greenfelder","kind":"req"}],"receiver":{"class":"URLValidator","object_id":2571080,"value":"#<URLValidator:0x00007fc938645ec0>"}},{"id":1106516,"event":"return","thread_id":6408920,"parent_id":1106515,"elapsed":0.0001871989807114005,"elapsed_instrumentation":0.0002731519634835422},{"id":1106517,"event":"return","thread_id":6408920,"parent_id":1106514,"elapsed":0.0009083920158445835,"elapsed_instrumentation":0.00025547505356371403,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d4d3f0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4d620 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4d800 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4daa8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4dcb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4df58 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4e138 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4e318 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc931d4e5c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409100,"size":9}},{"id":1106518,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409380,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409060,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226a58>"}},{"id":1106519,"event":"return","thread_id":6408920,"parent_id":1106518,"elapsed":4.681001883000135e-06,"elapsed_instrumentation":9.435100946575403e-05,"return_value":{"class":"Array","value":"[]","object_id":6409120,"size":0}},{"id":1106520,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409360,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409000,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931226aa8>"}},{"id":1106521,"event":"return","thread_id":6408920,"parent_id":1106520,"elapsed":1.6079982742667198e-05,"elapsed_instrumentation":0.0003765810397453606,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d4ee30 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409140,"size":1}},{"id":1106522,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f18>"}},{"id":1106523,"event":"return","thread_id":6408920,"parent_id":1106522,"elapsed":3.200024366378784e-06,"elapsed_instrumentation":9.175494778901339e-05,"return_value":{"class":"Array","value":"[]","object_id":6409200,"size":0}},{"id":1106524,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f68>"}},{"id":1106525,"event":"return","thread_id":6408920,"parent_id":1106524,"elapsed":6.652501178905368e-05,"elapsed_instrumentation":0.00010278401896357536,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d59790 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409240,"size":1}},{"id":1106526,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409440,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932d2f2f0>"}},{"id":1106527,"event":"return","thread_id":6408920,"parent_id":1106526,"elapsed":5.217036232352257e-06,"elapsed_instrumentation":0.00016729399794712663,"return_value":{"class":"Array","value":"[]","object_id":6409300,"size":0}},{"id":1106528,"event":"call","thread_id":6408860,"sql_query":{"sql":"UPDATE \"preview_cards\" SET \"image_file_name\" = $1, \"image_content_type\" = $2, \"image_file_size\" = $3, \"image_updated_at\" = $4, \"updated_at\" = $5 WHERE \"preview_cards\".\"id\" = $6","database_type":"postgres"}},{"id":1106529,"event":"return","thread_id":6408860,"parent_id":1106528,"elapsed":0.006290814,"elapsed_instrumentation":0.00012003898154944181},{"id":1106530,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409260,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932d2f2f0>"}},{"id":1106531,"event":"return","thread_id":6408860,"parent_id":1106530,"elapsed":5.264999344944954e-05,"elapsed_instrumentation":0.00017288594972342253,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932fd50b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932fd4c80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932fd4938 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409460,"size":3}},{"id":1106532,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f68>"}},{"id":1106533,"event":"return","thread_id":6408860,"parent_id":1106532,"elapsed":4.60201408714056e-06,"elapsed_instrumentation":0.00024863803992047906,"return_value":{"class":"Array","value":"[]","object_id":6409480,"size":0}},{"id":1106534,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409160,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f18>"}},{"id":1106535,"event":"call","thread_id":6408860,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408880,"value":"/images/original/missing.png"}},{"id":1106536,"event":"return","thread_id":6408860,"parent_id":1106535,"elapsed":2.8348993510007858e-05,"elapsed_instrumentation":0.00019865500507876277,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1106537,"event":"return","thread_id":6408860,"parent_id":1106534,"elapsed":0.0002712839632295072,"elapsed_instrumentation":0.0001111020683310926,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d58ea8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409500,"size":1}},{"id":1106538,"event":"call","thread_id":6408860,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1106539,"event":"return","thread_id":6408860,"parent_id":1106538,"elapsed":0.00097429,"elapsed_instrumentation":0.00039425998693332076},{"id":1106540,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93144fc80>"}},{"id":1106541,"event":"return","thread_id":6408860,"parent_id":1106540,"elapsed":4.488043487071991e-06,"elapsed_instrumentation":0.00012408493785187602,"return_value":{"class":"Array","value":"[]","object_id":6409560,"size":0}},{"id":1106542,"event":"call","thread_id":6408860,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409540,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc93144fc80>"}},{"id":1106543,"event":"return","thread_id":6408860,"parent_id":1106542,"elapsed":1.565396087244153e-05,"elapsed_instrumentation":0.00010182801634073257,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931c2ebb8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409580,"size":1}},{"id":1106544,"event":"call","thread_id":6408860,"defined_class":"Chewy::Strategy::Mastodon","method_id":"leave","path":"lib/chewy/strategy/mastodon.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":6409600,"value":"#<Chewy::Strategy::Mastodon:0x00007fc93303da28>"}},{"id":1106545,"event":"call","thread_id":6408860,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":6409620,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":6409640,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":1106546,"event":"call","thread_id":6408860,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":1106547,"event":"return","thread_id":6408860,"parent_id":1106546,"elapsed":3.355031367391348e-06,"elapsed_instrumentation":8.360599167644978e-05,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":1106548,"event":"return","thread_id":6408860,"parent_id":1106545,"elapsed":0.0002121470170095563,"elapsed_instrumentation":0.00014657696010544896,"return_value":{"class":"Array","value":"[]","object_id":6409660,"size":0}},{"id":1106549,"event":"return","thread_id":6408860,"parent_id":1106544,"elapsed":0.0003851379733532667,"elapsed_instrumentation":0.0001285940525121987,"return_value":{"class":"Array","value":"[]","object_id":6409660,"size":0}},{"id":1106550,"event":"call","thread_id":6408920,"sql_query":{"sql":"UPDATE \"preview_cards\" SET \"image_file_name\" = $1, \"image_content_type\" = $2, \"image_file_size\" = $3, \"image_updated_at\" = $4, \"updated_at\" = $5 WHERE \"preview_cards\".\"id\" = $6","database_type":"postgres"}},{"id":1106551,"event":"return","thread_id":6408920,"parent_id":1106550,"elapsed":0.001349661,"elapsed_instrumentation":0.0001192860072478652},{"id":1106552,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409440,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409280,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc932d2f2f0>"}},{"id":1106553,"event":"return","thread_id":6408920,"parent_id":1106552,"elapsed":5.445798160508275e-05,"elapsed_instrumentation":0.00019691797206178308,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932fd50b8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932fd4c80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932fd4938 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409460,"size":3}},{"id":1106554,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409220,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f68>"}},{"id":1106555,"event":"return","thread_id":6408920,"parent_id":1106554,"elapsed":3.7259887903928757e-06,"elapsed_instrumentation":0.0002865339629352093,"return_value":{"class":"Array","value":"[]","object_id":6409480,"size":0}},{"id":1106556,"event":"call","thread_id":6408920,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6409420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":6409180,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931225f18>"}},{"id":1106557,"event":"call","thread_id":6408920,"defined_class":"Paperclip::AttachmentExtensions","method_id":"save","path":"lib/paperclip/attachment_extensions.rb","lineno":83,"static":false,"parameters":[],"receiver":{"class":"Paperclip::Attachment","object_id":6408940,"value":"/images/original/missing.png"}},{"id":1106558,"event":"return","thread_id":6408920,"parent_id":1106557,"elapsed":2.7197995223104954e-05,"elapsed_instrumentation":0.00020293501438573003,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":1106559,"event":"return","thread_id":6408920,"parent_id":1106556,"elapsed":0.00027904100716114044,"elapsed_instrumentation":0.0001091579906642437,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc931d58ea8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":6409500,"size":1}},{"id":1106560,"event":"call","thread_id":6408920,"defined_class":"Chewy::Strategy::Mastodon","method_id":"leave","path":"lib/chewy/strategy/mastodon.rb","lineno":16,"static":false,"parameters":[],"receiver":{"class":"Chewy::Strategy::Mastodon","object_id":6409680,"value":"#<Chewy::Strategy::Mastodon:0x00007fc933038988>"}},{"id":1106561,"event":"call","thread_id":6408920,"defined_class":"RedisConfiguration","method_id":"with","path":"app/lib/redis_configuration.rb","lineno":10,"static":true,"parameters":[{"name":"*","class":"Array","object_id":6409700,"value":"[]","kind":"rest","size":0},{"name":"**","class":"Hash","object_id":6409720,"value":"{}","kind":"keyrest","size":0},{"name":"&","class":"NilClass","object_id":4,"value":null,"kind":"block"}],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":1106562,"event":"call","thread_id":6408920,"defined_class":"RedisConfiguration","method_id":"pool","path":"app/lib/redis_configuration.rb","lineno":12,"static":true,"parameters":[],"receiver":{"class":"Class","object_id":32420,"value":"RedisConfiguration"}},{"id":1106563,"event":"return","thread_id":6408920,"parent_id":1106562,"elapsed":4.665984306484461e-06,"elapsed_instrumentation":0.00029471603920683265,"return_value":{"class":"ConnectionPool","value":"#<ConnectionPool:0x00007fc934c381b0>","object_id":345020}},{"id":1106564,"event":"return","thread_id":6408920,"parent_id":1106561,"elapsed":0.0004127029678784311,"elapsed_instrumentation":0.00013114302419126034,"return_value":{"class":"Array","value":"[]","object_id":6409740,"size":0}},{"id":1106565,"event":"return","thread_id":6408920,"parent_id":1106560,"elapsed":0.0005649909726344049,"elapsed_instrumentation":8.732196874916553e-05,"return_value":{"class":"Array","value":"[]","object_id":6409740,"size":0}},{"id":1106566,"event":"return","thread_id":9160,"parent_id":1106465,"elapsed":0.042032037978060544,"elapsed_instrumentation":0.0002042120322585106,"return_value":{"class":"Array","value":"[2, 122044]","object_id":6409760,"size":2}},{"id":1106567,"event":"return","thread_id":9160,"parent_id":1106464,"elapsed":0.0443374440073967,"elapsed_instrumentation":0.00023071299074217677,"return_value":{"class":"StringIO","value":"#<StringIO:0x00007fc93300f718>","object_id":6409780}}]}