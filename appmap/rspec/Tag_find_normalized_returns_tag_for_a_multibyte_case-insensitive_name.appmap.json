{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Tag .find_normalized returns tag for a multibyte case-insensitive name","source_location":"spec/models/tag_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"HashtagNormalizer","type":"class","children":[{"name":"normalize","type":"function","location":"app/lib/hashtag_normalizer.rb:4","static":false}]},{"name":"ASCIIFolding","type":"class","children":[{"name":"fold","type":"function","location":"app/lib/ascii_folding.rb:7","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Tag","type":"class","children":[{"name":"display_name","type":"function","location":"app/models/tag.rb:67","static":false},{"name":"find_normalized","type":"function","location":"app/models/tag.rb:138","static":true},{"name":"matching_name","type":"function","location":"app/models/tag.rb:146","static":true},{"name":"normalize","type":"function","location":"app/models/tag.rb:156","static":true}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":1181084,"event":"call","thread_id":9160,"defined_class":"HashtagNormalizer","method_id":"normalize","path":"app/lib/hashtag_normalizer.rb","lineno":4,"static":false,"parameters":[{"name":"str","class":"String","object_id":6822600,"value":"abcabcａｂｃａｂｃやゆよ","kind":"req"}],"receiver":{"class":"HashtagNormalizer","object_id":6823320,"value":"#<HashtagNormalizer:0x00007fc9326122b0>"}},{"id":1181085,"event":"call","thread_id":9160,"defined_class":"ASCIIFolding","method_id":"fold","path":"app/lib/ascii_folding.rb","lineno":7,"static":false,"parameters":[{"name":"str","class":"String","object_id":6823340,"value":"abcabcabcabcやゆよ","kind":"req"}],"receiver":{"class":"ASCIIFolding","object_id":6823360,"value":"#<ASCIIFolding:0x00007fc932610eb0>"}},{"id":1181086,"event":"return","thread_id":9160,"parent_id":1181085,"elapsed":3.741204272955656e-05,"elapsed_instrumentation":0.00033434201031923294,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":6823380}},{"id":1181087,"event":"return","thread_id":9160,"parent_id":1181084,"elapsed":0.0005168879870325327,"elapsed_instrumentation":0.0003105040523223579,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":6823400}},{"id":1181088,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464720,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5700>"}},{"id":1181089,"event":"return","thread_id":9160,"parent_id":1181088,"elapsed":2.576899714767933e-05,"elapsed_instrumentation":0.00019109895220026374,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932f63f80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1464740,"size":1}},{"id":1181090,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823440,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce56b0>"}},{"id":1181091,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"display_name","path":"app/models/tag.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Tag","object_id":6823460,"value":"#<Tag:0x00007fc91a3c8c10>"}},{"id":1181092,"event":"return","thread_id":9160,"parent_id":1181091,"elapsed":0.00019137305207550526,"elapsed_instrumentation":0.0001440529595129192,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":6823480}},{"id":1181093,"event":"return","thread_id":9160,"parent_id":1181090,"elapsed":0.0008054240024648607,"elapsed_instrumentation":0.0002345200628042221,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932f624c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62680 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f627c0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62900 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62a40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62b80 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62cc0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62e00 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f62f40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f63120 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...3 more items)]","object_id":1464840,"size":13}},{"id":1181094,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823440,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464780,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce56b0>"}},{"id":1181095,"event":"return","thread_id":9160,"parent_id":1181094,"elapsed":3.704975824803114e-06,"elapsed_instrumentation":9.252002928406e-05,"return_value":{"class":"Array","value":"[]","object_id":1464860,"size":0}},{"id":1181096,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823420,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464720,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5700>"}},{"id":1181097,"event":"return","thread_id":9160,"parent_id":1181096,"elapsed":1.2241944205015898e-05,"elapsed_instrumentation":9.165803203359246e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932f63e40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1464880,"size":1}},{"id":1181098,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5610>"}},{"id":1181099,"event":"return","thread_id":9160,"parent_id":1181098,"elapsed":3.2319803722202778e-06,"elapsed_instrumentation":9.842298459261656e-05,"return_value":{"class":"Array","value":"[]","object_id":1464940,"size":0}},{"id":1181100,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464960,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5660>"}},{"id":1181101,"event":"return","thread_id":9160,"parent_id":1181100,"elapsed":4.517962224781513e-06,"elapsed_instrumentation":9.229202987626195e-05,"return_value":{"class":"Array","value":"[]","object_id":1464980,"size":0}},{"id":1181102,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1465020,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5520>"}},{"id":1181103,"event":"return","thread_id":9160,"parent_id":1181102,"elapsed":3.03896376863122e-06,"elapsed_instrumentation":0.00012451602378860116,"return_value":{"class":"Array","value":"[]","object_id":1465040,"size":0}},{"id":1181104,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1181105,"event":"return","thread_id":9160,"parent_id":1181104,"elapsed":0.000769377,"elapsed_instrumentation":0.00013123999815434217},{"id":1181106,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"tags\" (\"name\", \"created_at\", \"updated_at\", \"usable\", \"trendable\", \"listable\", \"reviewed_at\", \"requested_review_at\", \"last_status_at\", \"max_score\", \"max_score_at\", \"display_name\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING \"id\"","database_type":"postgres"}},{"id":1181107,"event":"return","thread_id":9160,"parent_id":1181106,"elapsed":0.002074553,"elapsed_instrumentation":0.00015191297279670835},{"id":1181108,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823520,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1465020,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5520>"}},{"id":1181109,"event":"return","thread_id":9160,"parent_id":1181108,"elapsed":0.0002980019780807197,"elapsed_instrumentation":0.00029036402702331543,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932f8f400 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f8f220 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f8f068 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f8eeb0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f8ecf8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f8eb40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fc932f8e988 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1465060,"size":7}},{"id":1181110,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464960,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5660>"}},{"id":1181111,"event":"return","thread_id":9160,"parent_id":1181110,"elapsed":3.7840218283236027e-06,"elapsed_instrumentation":0.0001488600391894579,"return_value":{"class":"Array","value":"[]","object_id":1465080,"size":0}},{"id":1181112,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":6823500,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1464920,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fc931ce5610>"}},{"id":1181113,"event":"return","thread_id":9160,"parent_id":1181112,"elapsed":0.00010630598990246654,"elapsed_instrumentation":0.00012380204861983657,"return_value":{"class":"Array","value":"[#<Proc:0x00007fc932f60498 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1465100,"size":1}},{"id":1181114,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":1181115,"event":"return","thread_id":9160,"parent_id":1181114,"elapsed":0.000547601,"elapsed_instrumentation":8.243898628279567e-05},{"id":1181116,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"find_normalized","path":"app/models/tag.rb","lineno":138,"static":true,"parameters":[{"name":"name","class":"String","object_id":6822480,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"Class","object_id":37120,"value":"Tag"}},{"id":1181117,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"matching_name","path":"app/models/tag.rb","lineno":146,"static":true,"parameters":[{"name":"name_or_names","class":"String","object_id":6822480,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"Class","object_id":37120,"value":"Tag"}},{"id":1181118,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"normalize","path":"app/models/tag.rb","lineno":156,"static":true,"parameters":[{"name":"str","class":"String","object_id":6822480,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"Class","object_id":37120,"value":"Tag"}},{"id":1181119,"event":"call","thread_id":9160,"defined_class":"HashtagNormalizer","method_id":"normalize","path":"app/lib/hashtag_normalizer.rb","lineno":4,"static":false,"parameters":[{"name":"str","class":"String","object_id":6822480,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"HashtagNormalizer","object_id":6823540,"value":"#<HashtagNormalizer:0x00007fc9325d7390>"}},{"id":1181120,"event":"call","thread_id":9160,"defined_class":"ASCIIFolding","method_id":"fold","path":"app/lib/ascii_folding.rb","lineno":7,"static":false,"parameters":[{"name":"str","class":"String","object_id":6823560,"value":"abcabcabcabcやゆよ","kind":"req"}],"receiver":{"class":"ASCIIFolding","object_id":6823580,"value":"#<ASCIIFolding:0x00007fc9325d6468>"}},{"id":1181121,"event":"return","thread_id":9160,"parent_id":1181120,"elapsed":6.0399994254112244e-05,"elapsed_instrumentation":0.00010291801299899817,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":6823600}},{"id":1181122,"event":"return","thread_id":9160,"parent_id":1181119,"elapsed":0.00025430601090192795,"elapsed_instrumentation":0.00018367398297414184,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":6823620}},{"id":1181123,"event":"return","thread_id":9160,"parent_id":1181118,"elapsed":0.0004607909941114485,"elapsed_instrumentation":8.550001075491309e-05,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":6823620}},{"id":1181124,"event":"return","thread_id":9160,"parent_id":1181117,"elapsed":0.0006886229966767132,"elapsed_instrumentation":0.00012632703874260187,"return_value":{"class":"ActiveRecord::Relation","value":"#<Tag::ActiveRecord_Relation:0x00007fc91a604920>","object_id":6823640}},{"id":1181125,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE LOWER(\"tags\".\"name\") = LOWER('abcabcabcabcやゆよ') ORDER BY \"tags\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":1181126,"event":"return","thread_id":9160,"parent_id":1181125,"elapsed":0.000833677,"elapsed_instrumentation":7.840502075850964e-05},{"id":1181127,"event":"return","thread_id":9160,"parent_id":1181116,"elapsed":0.002847452007699758,"elapsed_instrumentation":0.00017351895803585649,"return_value":{"class":"Tag","value":"#<Tag:0x00007fc91a3c8350>","object_id":6823660}}]}