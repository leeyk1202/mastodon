{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"743782bd299fd54e12a4a5829872efc505132ab3","status":["M .husky/pre-commit","?? sql_warning.txt"],"git_last_annotated_tag":"0.1.2-14597-g743782bd299fd54e12a4a5829872efc505132ab3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Tag .find_normalized returns tag for a multibyte case-insensitive name","source_location":"spec/models/tag_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app","type":"package","children":[{"name":"lib","type":"package","children":[{"name":"HashtagNormalizer","type":"class","children":[{"name":"normalize","type":"function","location":"app/lib/hashtag_normalizer.rb:4","static":false}]},{"name":"ASCIIFolding","type":"class","children":[{"name":"fold","type":"function","location":"app/lib/ascii_folding.rb:7","static":false}]}]},{"name":"models","type":"package","children":[{"name":"Tag","type":"class","children":[{"name":"display_name","type":"function","location":"app/models/tag.rb:67","static":false},{"name":"find_normalized","type":"function","location":"app/models/tag.rb:138","static":true},{"name":"matching_name","type":"function","location":"app/models/tag.rb:146","static":true},{"name":"normalize","type":"function","location":"app/models/tag.rb:156","static":true}]}]}]},{"name":"activesupport","type":"package","children":[{"name":"ActiveSupport","type":"class","children":[{"name":"Callbacks","type":"class","children":[{"name":"CallbackSequence","type":"class","children":[{"name":"invoke_before","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:597","static":false,"labels":["mvc.before_action"]},{"name":"invoke_after","type":"function","location":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb:601","static":false,"labels":["mvc.after_action"]}]}]}]}]}],"events":[{"id":426804,"event":"call","thread_id":9160,"defined_class":"HashtagNormalizer","method_id":"normalize","path":"app/lib/hashtag_normalizer.rb","lineno":4,"static":false,"parameters":[{"name":"str","class":"String","object_id":2788640,"value":"abcabcａｂｃａｂｃやゆよ","kind":"req"}],"receiver":{"class":"HashtagNormalizer","object_id":2788660,"value":"#<HashtagNormalizer:0x00007fdc094b2818>"}},{"id":426805,"event":"call","thread_id":9160,"defined_class":"ASCIIFolding","method_id":"fold","path":"app/lib/ascii_folding.rb","lineno":7,"static":false,"parameters":[{"name":"str","class":"String","object_id":2788680,"value":"abcabcabcabcやゆよ","kind":"req"}],"receiver":{"class":"ASCIIFolding","object_id":2788700,"value":"#<ASCIIFolding:0x00007fdc094b1698>"}},{"id":426806,"event":"return","thread_id":9160,"parent_id":426805,"elapsed":3.3706019166857004e-05,"elapsed_instrumentation":0.00044667700421996415,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":2788720}},{"id":426807,"event":"return","thread_id":9160,"parent_id":426804,"elapsed":0.0005863620026502758,"elapsed_instrumentation":0.0001895930035971105,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":2788740}},{"id":426808,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1592740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738cb70>"}},{"id":426809,"event":"return","thread_id":9160,"parent_id":426808,"elapsed":2.5491986889392138e-05,"elapsed_instrumentation":0.0003401939757168293,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a3d9af8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1592760,"size":1}},{"id":426810,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1592800,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738cb20>"}},{"id":426811,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"display_name","path":"app/models/tag.rb","lineno":67,"static":false,"parameters":[],"receiver":{"class":"Tag","object_id":2788800,"value":"#<Tag:0x00007fdc06de2940>"}},{"id":426812,"event":"return","thread_id":9160,"parent_id":426811,"elapsed":8.16730025690049e-05,"elapsed_instrumentation":0.0001140449894592166,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":2788820}},{"id":426813,"event":"return","thread_id":9160,"parent_id":426810,"elapsed":0.0007534649921581149,"elapsed_instrumentation":0.0002610039955470711,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a3d4ee0 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d55e8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d5840 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d5ae8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d5d40 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d5f98 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d6380 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d6a38 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d6f60 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a3d75c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib (...3 more items)]","object_id":1592840,"size":13}},{"id":426814,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788780,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1592800,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738cb20>"}},{"id":426815,"event":"return","thread_id":9160,"parent_id":426814,"elapsed":5.016016075387597e-06,"elapsed_instrumentation":0.00011865200940519571,"return_value":{"class":"Array","value":"[]","object_id":1592860,"size":0}},{"id":426816,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788760,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1592740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738cb70>"}},{"id":426817,"event":"return","thread_id":9160,"parent_id":426816,"elapsed":1.3898999895900488e-05,"elapsed_instrumentation":0.000122408993775025,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a3d9698 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1592880,"size":1}},{"id":426818,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1614640,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738ca80>"}},{"id":426819,"event":"return","thread_id":9160,"parent_id":426818,"elapsed":3.483990440145135e-06,"elapsed_instrumentation":7.828301750123501e-05,"return_value":{"class":"Array","value":"[]","object_id":1614660,"size":0}},{"id":426820,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1614680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738cad0>"}},{"id":426821,"event":"return","thread_id":9160,"parent_id":426820,"elapsed":2.622982719913125e-06,"elapsed_instrumentation":9.035703260451555e-05,"return_value":{"class":"Array","value":"[]","object_id":1614700,"size":0}},{"id":426822,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_before","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":597,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1614740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738c940>"}},{"id":426823,"event":"return","thread_id":9160,"parent_id":426822,"elapsed":4.842004273086786e-06,"elapsed_instrumentation":0.0001418309984728694,"return_value":{"class":"Array","value":"[]","object_id":1614760,"size":0}},{"id":426824,"event":"call","thread_id":9160,"sql_query":{"sql":"SAVEPOINT active_record_1","database_type":"postgres"}},{"id":426825,"event":"return","thread_id":9160,"parent_id":426824,"elapsed":0.000840864,"elapsed_instrumentation":0.00011808300041593611},{"id":426826,"event":"call","thread_id":9160,"sql_query":{"sql":"INSERT INTO \"tags\" (\"name\", \"created_at\", \"updated_at\", \"usable\", \"trendable\", \"listable\", \"reviewed_at\", \"requested_review_at\", \"last_status_at\", \"max_score\", \"max_score_at\", \"display_name\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING \"id\"","database_type":"postgres"}},{"id":426827,"event":"return","thread_id":9160,"parent_id":426826,"elapsed":0.001966266,"elapsed_instrumentation":7.567400461994112e-05},{"id":426828,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788860,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1614740,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738c940>"}},{"id":426829,"event":"return","thread_id":9160,"parent_id":426828,"elapsed":8.318599429912865e-05,"elapsed_instrumentation":0.0002262490161228925,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a2ee828 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a2ee3c8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a2ee120 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a2ede00 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a2edb08 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a2ed810 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib, #<Proc:0x00007fdc0a2ed568 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1614780,"size":7}},{"id":426830,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1614680,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738cad0>"}},{"id":426831,"event":"return","thread_id":9160,"parent_id":426830,"elapsed":3.1329982448369265e-06,"elapsed_instrumentation":8.081001578830183e-05,"return_value":{"class":"Array","value":"[]","object_id":1614800,"size":0}},{"id":426832,"event":"call","thread_id":9160,"defined_class":"ActiveSupport::Callbacks::CallbackSequence","method_id":"invoke_after","path":"vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib/active_support/callbacks.rb","lineno":601,"static":false,"parameters":[{"name":"arg","class":"ActiveSupport::Callbacks::Filters::Environment","object_id":2788840,"value":null,"kind":"req"}],"receiver":{"class":"ActiveSupport::Callbacks::CallbackSequence","object_id":1614640,"value":"#<ActiveSupport::Callbacks::CallbackSequence:0x00007fdc0738ca80>"}},{"id":426833,"event":"return","thread_id":9160,"parent_id":426832,"elapsed":0.00011079400428570807,"elapsed_instrumentation":8.7170978076756e-05,"return_value":{"class":"Array","value":"[#<Proc:0x00007fdc0a3d09f8 /workspaces/mastodon/vendor/bundle/ruby/3.2.0/gems/activesupport-7.1.1/lib]","object_id":1614820,"size":1}},{"id":426834,"event":"call","thread_id":9160,"sql_query":{"sql":"RELEASE SAVEPOINT active_record_1","database_type":"postgres"}},{"id":426835,"event":"return","thread_id":9160,"parent_id":426834,"elapsed":0.00052406,"elapsed_instrumentation":7.820597966201603e-05},{"id":426836,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"find_normalized","path":"app/models/tag.rb","lineno":138,"static":true,"parameters":[{"name":"name","class":"String","object_id":2788880,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"Class","object_id":37120,"value":"Tag"}},{"id":426837,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"matching_name","path":"app/models/tag.rb","lineno":146,"static":true,"parameters":[{"name":"name_or_names","class":"String","object_id":2788880,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"Class","object_id":37120,"value":"Tag"}},{"id":426838,"event":"call","thread_id":9160,"defined_class":"Tag","method_id":"normalize","path":"app/models/tag.rb","lineno":156,"static":true,"parameters":[{"name":"str","class":"String","object_id":2788880,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"Class","object_id":37120,"value":"Tag"}},{"id":426839,"event":"call","thread_id":9160,"defined_class":"HashtagNormalizer","method_id":"normalize","path":"app/lib/hashtag_normalizer.rb","lineno":4,"static":false,"parameters":[{"name":"str","class":"String","object_id":2788880,"value":"abcABCａｂｃＡＢＣやゆよ","kind":"req"}],"receiver":{"class":"HashtagNormalizer","object_id":2788900,"value":"#<HashtagNormalizer:0x00007fdc09547a30>"}},{"id":426840,"event":"call","thread_id":9160,"defined_class":"ASCIIFolding","method_id":"fold","path":"app/lib/ascii_folding.rb","lineno":7,"static":false,"parameters":[{"name":"str","class":"String","object_id":2788920,"value":"abcabcabcabcやゆよ","kind":"req"}],"receiver":{"class":"ASCIIFolding","object_id":2788940,"value":"#<ASCIIFolding:0x00007fdc09545eb0>"}},{"id":426841,"event":"return","thread_id":9160,"parent_id":426840,"elapsed":3.1042989576235414e-05,"elapsed_instrumentation":9.202599176205695e-05,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":2788960}},{"id":426842,"event":"return","thread_id":9160,"parent_id":426839,"elapsed":0.0001991660101339221,"elapsed_instrumentation":0.00011060296674259007,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":2788980}},{"id":426843,"event":"return","thread_id":9160,"parent_id":426838,"elapsed":0.000331393996020779,"elapsed_instrumentation":8.397299097850919e-05,"return_value":{"class":"String","value":"abcabcabcabcやゆよ","object_id":2788980}},{"id":426844,"event":"return","thread_id":9160,"parent_id":426837,"elapsed":0.000627884001005441,"elapsed_instrumentation":0.0001098609936889261,"return_value":{"class":"ActiveRecord::Relation","value":"#<Tag::ActiveRecord_Relation:0x00007fdc07c63988>","object_id":2789000}},{"id":426845,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE LOWER(\"tags\".\"name\") = LOWER('abcabcabcabcやゆよ') ORDER BY \"tags\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":426846,"event":"return","thread_id":9160,"parent_id":426845,"elapsed":0.000786442,"elapsed_instrumentation":0.00010937100159935653},{"id":426847,"event":"return","thread_id":9160,"parent_id":426836,"elapsed":0.004253579012583941,"elapsed_instrumentation":0.0005141300207469612,"return_value":{"class":"Tag","value":"#<Tag:0x00007fdc06de1f40>","object_id":2789020}}]}