{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"JsonLdHelper with compaction and forwarding safe_for_forwarding? deems a safe compacting as such","source_location":"spec/helpers/jsonld_helper_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/helpers","type":"package","children":[{"name":"JsonLdHelper","type":"class","children":[{"name":"compact","type":"function","location":"app/helpers/jsonld_helper.rb:80","static":false},{"name":"patch_for_forwarding!","type":"function","location":"app/helpers/jsonld_helper.rb:105","static":false},{"name":"safe_for_forwarding?","type":"function","location":"app/helpers/jsonld_helper.rb:141","static":false}]},{"name":"ContextHelper","type":"class","children":[{"name":"full_context","type":"function","location":"app/helpers/context_helper.rb:37","static":false},{"name":"serialized_context","type":"function","location":"app/helpers/context_helper.rb:41","static":false}]}]}],"events":[{"id":414490,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"compact","path":"app/helpers/jsonld_helper.rb","lineno":80,"static":false,"parameters":[{"name":"json","class":"Hash","object_id":2949900,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414491,"event":"call","thread_id":9160,"defined_class":"ContextHelper","method_id":"full_context","path":"app/helpers/context_helper.rb","lineno":37,"static":false,"parameters":[],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414492,"event":"call","thread_id":9160,"defined_class":"ContextHelper","method_id":"serialized_context","path":"app/helpers/context_helper.rb","lineno":41,"static":false,"parameters":[{"name":"named_contexts_map","class":"Hash","object_id":2949940,"value":"{:activitystreams=>https://www.w3.org/ns/activitystreams, :security=>https://w3id.org/security/v1}","kind":"req","size":2},{"name":"context_extensions_map","class":"Hash","object_id":2949960,"value":"{:manually_approves_followers=>{manuallyApprovesFollowers=>as:manuallyApprovesFollowers}, :sensitive=>{sensitive=>as:sensitive}, :hashtag=>{Hashtag=>as:Hashtag}, :moved_to=>{movedTo=>{@id=>as:movedTo, @type=>@id}}, :also_known_as=>{alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}}, :emoji=>{toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji}, :featured=>{toot=>http://joinmastodon.org/ns#, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}}, :property_value=>{schema=>http://schema.org#, PropertyValue=>schema:PropertyValue, value=>schema:value}, :atom_uri=>{ostatus=>http://ostatus.org#, atomUri=>ostatus:atomUri}, :conversation=>{ostatus=>http://ostatus.org#, inReplyToAtomUri=>ostatus:inReplyToAtomUri, conversation=>ostatus:conversation} (...8 more entries)}","kind":"req","size":18}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414493,"event":"return","thread_id":9160,"parent_id":414492,"elapsed":4.314701072871685e-05,"elapsed_instrumentation":0.0015074510010890663,"return_value":{"class":"Array","value":"[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}]","object_id":2949980,"size":3}},{"id":414494,"event":"return","thread_id":9160,"parent_id":414491,"elapsed":0.0016176450299099088,"elapsed_instrumentation":0.00029481499223038554,"return_value":{"class":"Array","value":"[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}]","object_id":2949980,"size":3}},{"id":414495,"event":"return","thread_id":9160,"parent_id":414490,"elapsed":0.018068105971906334,"elapsed_instrumentation":0.0010048600379377604,"return_value":{"class":"Hash","value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>as:Public, object=>{id=>https://example.com/status, type=>Note, tag=>{type=>Mention, href=>foo}}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","object_id":2950640,"size":5}},{"id":414496,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2949900,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2950640,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>as:Public, object=>{id=>https://example.com/status, type=>Note, tag=>{type=>Mention, href=>foo}}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414497,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950660,"value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":4},{"name":"compacted","class":"Hash","object_id":2950680,"value":"{id=>https://example.com/status, type=>Note, tag=>{type=>Mention, href=>foo}}","kind":"req","size":3}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414498,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"patch_for_forwarding!","path":"app/helpers/jsonld_helper.rb","lineno":105,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950700,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2},{"name":"compacted","class":"Hash","object_id":2950720,"value":"{type=>Mention, href=>foo}","kind":"req","size":2}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414499,"event":"return","thread_id":9160,"parent_id":414498,"elapsed":2.4404027499258518e-05,"elapsed_instrumentation":0.0003988459357060492,"return_value":{"class":"Hash","value":"{type=>Mention, href=>[foo]}","object_id":2950740,"size":2}},{"id":414500,"event":"return","thread_id":9160,"parent_id":414497,"elapsed":0.00047548796283081174,"elapsed_instrumentation":0.00034741207491606474,"return_value":{"class":"Hash","value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}","object_id":2950760,"size":4}},{"id":414501,"event":"return","thread_id":9160,"parent_id":414496,"elapsed":0.0012009089696221054,"elapsed_instrumentation":0.0009337200899608433,"return_value":{"class":"Hash","value":"{type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}}","object_id":2950780,"size":3}},{"id":414502,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2949900,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {obsolete=>http://ostatus.org#, convo=>obsolete:conversation, new=>https://obscure-unreleased-test.joinmastodon.org/#}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5},{"name":"compacted","class":"Hash","object_id":2950640,"value":"{@context=>[https://www.w3.org/ns/activitystreams, https://w3id.org/security/v1, {manuallyApprovesFollowers=>as:manuallyApprovesFollowers, sensitive=>as:sensitive, Hashtag=>as:Hashtag, movedTo=>{@id=>as:movedTo, @type=>@id}, alsoKnownAs=>{@id=>as:alsoKnownAs, @type=>@id}, toot=>http://joinmastodon.org/ns#, Emoji=>toot:Emoji, featured=>{@id=>toot:featured, @type=>@id}, featuredTags=>{@id=>toot:featuredTags, @type=>@id}, schema=>http://schema.org# (...27 more entries)}], type=>Create, to=>[https://www.w3.org/ns/activitystreams#Public], object=>{id=>https://example.com/status, type=>Note, tag=>[{type=>Mention, href=>[foo]}]}, signature=>{type=>RsaSignature2017, created=>2022-02-02T12:00:00Z, creator=>https://example.com/actor#main-key, signatureValue=>some-sig}}","kind":"req","size":5}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414503,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950660,"value":"{id=>https://example.com/status, type=>Note, inReplyTo=>, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":4},{"name":"compacted","class":"Hash","object_id":2950680,"value":"{id=>https://example.com/status, type=>Note, tag=>[{type=>Mention, href=>[foo]}]}","kind":"req","size":3}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414504,"event":"call","thread_id":9160,"defined_class":"JsonLdHelper","method_id":"safe_for_forwarding?","path":"app/helpers/jsonld_helper.rb","lineno":141,"static":false,"parameters":[{"name":"original","class":"Hash","object_id":2950700,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2},{"name":"compacted","class":"Hash","object_id":2950720,"value":"{type=>Mention, href=>[foo]}","kind":"req","size":2}],"receiver":{"class":"RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding","object_id":2949920,"value":"#<RSpec::ExampleGroups::JsonLdHelper::WithCompactionAndForwarding::SafeForForwarding:0x00007fc931bc1"}},{"id":414505,"event":"return","thread_id":9160,"parent_id":414504,"elapsed":1.3623037375509739e-05,"elapsed_instrumentation":0.0001944099785760045,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":414506,"event":"return","thread_id":9160,"parent_id":414503,"elapsed":0.00025356299011036754,"elapsed_instrumentation":0.0003622699878178537,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":414507,"event":"return","thread_id":9160,"parent_id":414502,"elapsed":0.0006715640192851424,"elapsed_instrumentation":0.0010242399876005948,"return_value":{"class":"TrueClass","value":"true","object_id":20}}]}