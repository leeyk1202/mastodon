{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","status":["M .husky/pre-commit"],"git_last_annotated_tag":"0.1.2-14608-g2c1ae2317e8741caf25b51e9b3b2c15776c54ae3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"Admin::Metrics::Dimension::TagLanguagesDimension #data runs data query without error","source_location":"spec/lib/admin/metrics/dimension/tag_languages_dimension_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"succeeded"},"classMap":[{"name":"app/lib/admin/metrics/dimension","type":"package","children":[{"name":"Admin","type":"class","children":[{"name":"Metrics","type":"class","children":[{"name":"Dimension","type":"class","children":[{"name":"BaseDimension","type":"class","children":[{"name":"data","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:30","static":false},{"name":"load","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:44","static":false},{"name":"cache_key","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:26","static":false},{"name":"canonicalized_params","type":"function","location":"app/lib/admin/metrics/dimension/base_dimension.rb:65","static":false}]},{"name":"TagLanguagesDimension","type":"class","children":[{"name":"key","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:11","static":false},{"name":"params","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:50","static":false},{"name":"perform_query","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:17","static":false},{"name":"sql_array","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:21","static":false},{"name":"sql_query_string","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:25","static":false},{"name":"tag_id","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:38","static":false},{"name":"earliest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:42","static":false},{"name":"latest_status_id","type":"function","location":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb:46","static":false}]},{"name":"QueryHelper","type":"class","children":[{"name":"dimension_data_rows","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:6","static":false},{"name":"sanitized_sql_string","type":"function","location":"app/lib/admin/metrics/dimension/query_helper.rb:10","static":false}]}]}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"lib/mastodon","type":"package","children":[{"name":"Mastodon","type":"class","children":[{"name":"Snowflake","type":"class","children":[{"name":"id_at","type":"function","location":"lib/mastodon/snowflake.rb:99","static":true}]}]}]},{"name":"ruby","type":"package","children":[{"name":"Marshal","type":"class","children":[{"name":"dump","type":"function","location":"Marshal.dump","static":true,"labels":["serialize"]}]}]}],"events":[{"id":3670951,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"data","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":30,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670952,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"load","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":44,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670953,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"cache_key","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":26,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670954,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"key","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":11,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670955,"event":"return","thread_id":9160,"parent_id":3670954,"elapsed":2.729997504502535e-06,"elapsed_instrumentation":0.00010400597238913178,"return_value":{"class":"String","value":"tag_languages","object_id":17906200}},{"id":3670956,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::BaseDimension","method_id":"canonicalized_params","path":"app/lib/admin/metrics/dimension/base_dimension.rb","lineno":65,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670957,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670958,"event":"return","thread_id":9160,"parent_id":3670957,"elapsed":4.749203799292445e-05,"elapsed_instrumentation":0.0005195869598537683,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":17906220}},{"id":3670959,"event":"return","thread_id":9160,"parent_id":3670956,"elapsed":0.0006233269814401865,"elapsed_instrumentation":6.882997695356607e-05,"return_value":{"class":"String","value":"","object_id":17906240}},{"id":3670960,"event":"return","thread_id":9160,"parent_id":3670953,"elapsed":0.0008562530274502933,"elapsed_instrumentation":5.844997940585017e-05,"return_value":{"class":"String","value":"metrics/dimension/tag_languages;2023-11-04T03:26:27+00:00;2023-11-06T03:26:27+00:00;10;","object_id":17906260}},{"id":3670961,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17906280,"value":"Cache read: metrics/dimension/tag_languages;2023-11-04T03:26:27+00:00;2023-11-06T03:26:27+00:00;10;  (...72 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3670962,"event":"return","thread_id":9160,"parent_id":3670961,"elapsed":0.0012019829591736197,"elapsed_instrumentation":0.0001441770582459867,"return_value":{"class":"Integer","value":"172","object_id":345}},{"id":3670963,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17906300,"value":"Cache generate: metrics/dimension/tag_languages;2023-11-04T03:26:27+00:00;2023-11-06T03:26:27+00:00; (...76 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3670964,"event":"return","thread_id":9160,"parent_id":3670963,"elapsed":0.0006706239655613899,"elapsed_instrumentation":0.00014445302076637745,"return_value":{"class":"Integer","value":"176","object_id":353}},{"id":3670965,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"perform_query","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":17,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670966,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"dimension_data_rows","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":6,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670967,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::QueryHelper","method_id":"sanitized_sql_string","path":"app/lib/admin/metrics/dimension/query_helper.rb","lineno":10,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670968,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"sql_array","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":21,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670969,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"sql_query_string","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":25,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670970,"event":"return","thread_id":9160,"parent_id":3670969,"elapsed":7.761199958622456e-05,"elapsed_instrumentation":0.00013811304233968258,"return_value":{"class":"String","value":"SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN st (...235 more characters)","object_id":17906320}},{"id":3670971,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"tag_id","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":38,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670972,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"params","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":50,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670973,"event":"return","thread_id":9160,"parent_id":3670972,"elapsed":4.1537045035511255e-05,"elapsed_instrumentation":7.605599239468575e-05,"return_value":{"class":"ActionController::Parameters","value":"{}","object_id":17906340}},{"id":3670974,"event":"return","thread_id":9160,"parent_id":3670971,"elapsed":0.00014522898709401488,"elapsed_instrumentation":7.982196984812617e-05},{"id":3670975,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"earliest_status_id","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":42,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670976,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":17906360,"value":"2023-11-04T03:26:27+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":3670977,"event":"return","thread_id":9160,"parent_id":3670976,"elapsed":1.9187049474567175e-05,"elapsed_instrumentation":0.00039357400964945555,"return_value":{"class":"Integer","value":"111350145810432000","object_id":222700291620864001}},{"id":3670978,"event":"return","thread_id":9160,"parent_id":3670975,"elapsed":0.00044547702418640256,"elapsed_instrumentation":7.754599209874868e-05,"return_value":{"class":"Integer","value":"111350145810432000","object_id":222700291620864001}},{"id":3670979,"event":"call","thread_id":9160,"defined_class":"Admin::Metrics::Dimension::TagLanguagesDimension","method_id":"latest_status_id","path":"app/lib/admin/metrics/dimension/tag_languages_dimension.rb","lineno":46,"static":false,"parameters":[],"receiver":{"class":"Admin::Metrics::Dimension::TagLanguagesDimension","object_id":17906180,"value":"#<Admin::Metrics::Dimension::TagLanguagesDimension:0x00007fc8e0cc4380>"}},{"id":3670980,"event":"call","thread_id":9160,"defined_class":"Mastodon::Snowflake","method_id":"id_at","path":"lib/mastodon/snowflake.rb","lineno":99,"static":true,"parameters":[{"name":"timestamp","class":"DateTime","object_id":17906380,"value":"2023-11-06T03:26:27+00:00","kind":"req"},{"name":"with_random","class":"FalseClass","object_id":0,"value":"false","kind":"key"}],"receiver":{"class":"Module","object_id":1610500,"value":"Mastodon::Snowflake"}},{"id":3670981,"event":"return","thread_id":9160,"parent_id":3670980,"elapsed":9.458977729082108e-06,"elapsed_instrumentation":0.00010401499457657337,"return_value":{"class":"Integer","value":"111361470431232000","object_id":222722940862464001}},{"id":3670982,"event":"return","thread_id":9160,"parent_id":3670979,"elapsed":0.00014105200534686446,"elapsed_instrumentation":8.578802226111293e-05,"return_value":{"class":"Integer","value":"111361470431232000","object_id":222722940862464001}},{"id":3670983,"event":"return","thread_id":9160,"parent_id":3670968,"elapsed":0.0012713460018858314,"elapsed_instrumentation":0.0005104740266688168,"return_value":{"class":"Array","value":"[SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN st (...235 more characters), {:tag_id=>, :earliest_status_id=>111350145810432000, :latest_status_id=>111361470431232000, :limit=>10}]","object_id":17906400,"size":2}},{"id":3670984,"event":"return","thread_id":9160,"parent_id":3670967,"elapsed":0.0019383819890208542,"elapsed_instrumentation":0.0001052209991030395,"return_value":{"class":"String","value":"SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN st (...228 more characters)","object_id":17906420}},{"id":3670985,"event":"call","thread_id":9160,"sql_query":{"sql":"SELECT COALESCE(statuses.language, 'und') AS language, count(*) AS value FROM statuses INNER JOIN statuses_tags ON statuses_tags.status_id = statuses.id WHERE statuses_tags.tag_id = NULL AND statuses.id BETWEEN 111350145810432000 AND 111361470431232000 GROUP BY COALESCE(statuses.language, 'und') ORDER BY count(*) DESC LIMIT 10","database_type":"postgres"}},{"id":3670986,"event":"return","thread_id":9160,"parent_id":3670985,"elapsed":0.001138952,"elapsed_instrumentation":0.00010594498598948121},{"id":3670987,"event":"return","thread_id":9160,"parent_id":3670966,"elapsed":0.0038367430097423494,"elapsed_instrumentation":0.0001536390045657754,"return_value":{"class":"ActiveRecord::Result","value":"#<ActiveRecord::Result:0x00007fc8e0cc2120>","object_id":17906440}},{"id":3670988,"event":"return","thread_id":9160,"parent_id":3670965,"elapsed":0.004037621023599058,"elapsed_instrumentation":0.0002171049709431827,"return_value":{"class":"Array","value":"[]","object_id":17906460,"size":0}},{"id":3670989,"event":"call","thread_id":9160,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":17906480,"value":"Cache write: metrics/dimension/tag_languages;2023-11-04T03:26:27+00:00;2023-11-06T03:26:27+00:00;10; (...73 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":19780,"value":"#<Logger::LogDevice:0x00007fc942103e80>"}},{"id":3670990,"event":"return","thread_id":9160,"parent_id":3670989,"elapsed":0.0006548499804921448,"elapsed_instrumentation":0.00014116399688646197,"return_value":{"class":"Integer","value":"173","object_id":347}},{"id":3670991,"event":"call","thread_id":9160,"defined_class":"Marshal","method_id":"dump","path":"Marshal.dump","static":true,"parameters":[{"name":"arg","class":"Array","object_id":17906500,"value":"[[]]","kind":"rest","size":1}],"receiver":{"class":"Module","object_id":318180,"value":"Marshal"}},{"id":3670992,"event":"return","thread_id":9160,"parent_id":3670991,"elapsed":1.0270974598824978e-05,"elapsed_instrumentation":0.00027929904172196984,"return_value":{"class":"String","value":"\u0004\b[\u0000","object_id":17906520}},{"id":3670993,"event":"return","thread_id":9160,"parent_id":3670952,"elapsed":0.009568205976393074,"elapsed_instrumentation":7.048406405374408e-05,"return_value":{"class":"Array","value":"[]","object_id":17906460,"size":0}},{"id":3670994,"event":"return","thread_id":9160,"parent_id":3670951,"elapsed":0.009659175993874669,"elapsed_instrumentation":0.0001344350166618824,"return_value":{"class":"Array","value":"[]","object_id":17906460,"size":0}}]}