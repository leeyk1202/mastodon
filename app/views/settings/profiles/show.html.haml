- content_for :page_title do
  = t('settings.edit_profile')

= simple_form_for @account, url: settings_profile_path, html: { method: :put } do |f|
  = render 'shared/error_messages', object: @account

  .fields-group
    = f.input :display_name, placeholder: t('simple_form.labels.defaults.display_name'), hint: t('simple_form.hints.defaults.display_name', count: 30 - @account.display_name.size).html_safe
    = f.input :note, placeholder: t('simple_form.labels.defaults.note'), hint: t('simple_form.hints.defaults.note', count: 160 - @account.note.size).html_safe

  = render 'application/card', account: @account

  .fields-group
    = f.input :avatar, wrapper: :with_label, input_html: { accept: AccountAvatar::IMAGE_MIME_TYPES.join(',') }, hint: t('simple_form.hints.defaults.avatar', dimensions: '400x400', size: number_to_human_size(AccountAvatar::LIMIT))

    = f.input :header, wrapper: :with_label, input_html: { accept: AccountHeader::IMAGE_MIME_TYPES.join(',') }, hint: t('simple_form.hints.defaults.header', dimensions: '1500x500', size: number_to_human_size(AccountHeader::LIMIT))

  .fields-group
    = f.input :locked, as: :boolean, wrapper: :with_label, hint: t('simple_form.hints.defaults.locked')

  .fields-group
    = f.input :bot, as: :boolean, wrapper: :with_label, hint: t('simple_form.hints.defaults.bot')

  .fields-group
    .input.with_block_label
      %label= t('simple_form.labels.defaults.fields')
      %span.hint= t('simple_form.hints.defaults.fields')

      = f.simple_fields_for :fields do |fields_f|
        .row
          = fields_f.input :name, placeholder: t('simple_form.labels.account.fields.name')
          = fields_f.input :value, placeholder: t('simple_form.labels.account.fields.value')

    %p.hint= t('verification.explanation_html')

    .input-copy
      .input-copy__wrapper
        %input{ type: :text, maxlength: '999', spellcheck: 'false', readonly: 'true', value: link_to('Mastodon', ActivityPub::TagManager.instance.url_for(@account), rel: 'me').to_str }
      %button{ type: :button }= t('generic.copy')

  .actions
    = f.button :button, t('generic.save_changes'), type: :submit

%hr/

%h6= t('auth.migrate_account')
%p.muted-hint= t('auth.migrate_account_html', path: settings_migration_path)
